/**
*  HtmlWidget
*  html widgets used as (template) plugins and/or standalone, for PHP, Node/JS, Python
*
*  @dependencies: FontAwesome, SelectorListener, jQuery
*  @version: 0.8.2
*  https://github.com/foo123/HtmlWidget
*  https://github.com/foo123/components.css
*  https://github.com/foo123/jquery-ui-widgets
*  https://github.com/foo123/modelview-widgets
*  https://github.com/foo123/SelectorListener
*
**/
!function(e,t,a){"use strict";"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(function(){return a()}):e[t]=a()}(this,"htmlwidget",function(e){"use strict";function t(e,t){if("object"==typeof t){var a,n,i,s,l,o=0;for(a in t)t[d](a)&&(n=t[a],i=n.selector,s=[].concat(n.rules).join("; "),l=o++,"insertRule"in e.sheet?(e.sheet.insertRule(i+"{"+s+"}",l),n.css=e.sheet.cssRules[l]):"addRule"in e.sheet&&(e.sheet.addRule(i,s,l),n.css=e.sheet.rules[l]))}return t}function a(e,a,n){var i=e.createElement("style");return i.setAttribute("media",a||"all"),i.setAttribute("type","text/css"),i.appendChild(e.createTextNode("")),e.head.appendChild(i),n&&t(i,n),i}function n(e,t){t&&e.head.removeChild(t)}function s(t,a,n){var i=n&&n[c]?n[c]:null;o.fn[t]=function(n){var s,l="string"==typeof n?n:!1,r=u.call(arguments,1),d=this;return l?this.each(function(){var a,n=o.data(this,t);return"widget"===l?(d=n,!1):"instance"===l?(d=n?n.instance||n:n,!1):n?"dispose"===l||"destroy"===l?("function"==typeof n.dispose?n.dispose():"function"==typeof n.destroy?n.destroy():i&&("function"==typeof i.dispose?i.dispose.call(n):"function"==typeof i.destroy&&i.destroy.call(n)),n=null,o.removeData(this,t),!1):(s=n[l]||i&&i[l],"function"!=typeof s?!1:(a=s.apply(n,r),a!==n&&e!==a?(d=a&&a.jquery?d.pushStack(a.get()):a,!1):void 0)):!1}):(n=n||{},this.each(function(){var e=o.data(this,t);e?(s=e.options||i&&i.options,"function"==typeof s&&s.call(e,n)):(o.data(this,t,e=new a(this,n)),s=e.init||i&&i.init,"function"==typeof s&&s.call(e))})),d}}function l(e,t,a,n,i,s){var l,o,r={map:e,title:n,position:new google.maps.LatLng(t,a)};return"undefined"!==s.clickable&&(r.clickable=!!s.clickable),"undefined"!==s.draggable&&(r.draggable=!!s.draggable),"undefined"!==s.crossOnDrag&&(r.crossOnDrag=!!s.crossOnDrag),"undefined"!==s.visible&&(r.visible=!!s.visible),"undefined"!==s.icon&&(r.icon=s.icon),"undefined"!==s.zIndex&&(r.zIndex=s.zIndex),"undefined"!==s.shape&&(r.shape=s.shape),l=new google.maps.Marker(r),i&&(o=new google.maps.InfoWindow({content:i}),google.maps.event.addListener(l,"click",function(){o.open(e,l)})),l}{var o=jQuery,r={VERSION:"0.8.2",widget:{}},d="hasOwnProperty",c="prototype",u=Array[c].slice,p=JSON.parse,f=JSON.stringify;Object[c].toString}return r.make=s,r.stylable=function g(e,t,i,s,l){var o=this;if(!(o instanceof g))return new g(e,t,i,s,l);var r={id:{selector:i,rules:null}};o.id=t,o.selector=i,o.rules=[];for(var c in s)s[d](c)&&o.rules.push(c+":"+s[c]);r[t].rules=o.rules,o.sheet=a(e,l||"all",r),o.sheet.setAttribute("id",o.id),o.style=r[t].css,o.dispose=function(){o.id=null,o.selector=null,o.rules=null,o.style=null,o.sheet&&n(e,o.sheet),o.sheet=null}},s("selectable",r.selectable=function m(e,t){var a=this;return a instanceof m?(a.init=function(){var n=o(e),i=n.attr("data-selectable-handle")||t.handle||".w-selectable-handle",s=t.selector||t.item;n.hasClass("w-selectable")||n.addClass("w-selectable"),n.on("click.selectable change.selectable",i,function(e){var t=this,n=o(this),i=(t.type||"").toLowerCase();"checkbox"===i||"radio"===i?(s&&(n=n.closest(s)),t.checked?(n.addClass("w-selected"),n.trigger("selected")):(n.removeClass("w-selected"),n.trigger("deselected"))):"click"===e.type&&(e.shiftKey||a.clear(),s&&(n=n.closest(s)),n.hasClass("w-selected")?(n.removeClass("w-selected"),n.trigger("deselected")):(n.addClass("w-selected"),n.trigger("selected")))})},a.selected=function(){return o(e).find(".w-selected")},a.clear=function(){o(e).find(".w-selected").removeClass("w-selected")},void(a.dispose=function(){o(e).off(".selectable")})):new m(e,t)}),s("removable",r.removable=function h(e,t){var a=this;return a instanceof h?(a.init=function(){var a=o(e),n=a.attr("data-removable-handle")||t.handle||".w-removable-handle",i=a.attr("data-removable-item")||t.selector||t.item,s=parseInt(a.attr("data-removable-animation")||t.animation||400,10);a.hasClass("w-removable")||a.addClass("w-removable"),a.on("click.removable",n,function(){var e=o(this);i&&(e=e.closest(i)),e.fadeOut(s,function(){e.trigger("removed"),e.remove()})})},void(a.dispose=function(){o(e).off(".removable")})):new h(e,t)}),s("morphable",r.morphable=function w(e,t){var s=this;if(!(s instanceof w))return new w(e,t);var l=null,r=null,d=null;s.create=function(){var n,s,l,c=o(e),u={},p=c.attr("data-morphable-modes")?c.attr("data-morphable-modes").split(","):[].concat(t.modes||[]),f=c.attr("data-morphable-show")||t.showClass,g=c.attr("data-morphable-hide")||t.hideClass,m=c.attr("data-morphable-mode")||t.modeClass;for(c.addClass("w-morphable"),l="#"+c.attr("id")+".w-morphable",n=[],s=[],i=0;i<p.length;i++)if(g&&n.push(l+"."+m.split("${MODE}").join(p[i])+" ."+g.split("${MODE}").join(p[i])),f&&s.push(l+"."+m.split("${MODE}").join(p[i])+" ."+f.split("${MODE}").join(p[i])),f||g)for(j=0;j<p.length;j++)j!==i&&(f&&n.push(l+"."+m.split("${MODE}").join(p[i])+" ."+f.split("${MODE}").join(p[j])+":not(."+f.split("${MODE}").join(p[i])+")"),g&&s.push(l+"."+m.split("${MODE}").join(p[i])+" ."+g.split("${MODE}").join(p[j])+":not(."+g.split("${MODE}").join(p[i])+")"));n.length&&(u.hide_mode={selector:n.join(","),rules:["display: none !important"]}),s.length&&(u.show_mode={selector:s.join(","),rules:["display: block"]}),r=a(document,"all",d=u)},s.init=function(){o(e).hasClass("w-morphable")||s.create()},s.morph=function(a){if(a!=l){var n=o(e),i=n.attr("data-morphable-mode")||t.modeClass;l&&n.removeClass(i.split("${MODE}").join(l)),l=a,l&&n.addClass(i.split("${MODE}").join(l))}},s.mode=function(){return l},s.dispose=function(){o(e).removeClass("w-morphable"),d=null,r&&n(document,r),r=null}}),s("delayable",r.delayable=function b(e,t){var a=this;return a instanceof b?(a.init=function(){var t=o(e);t.hasClass("w-delayed")&&t.removeClass("w-delayed"),t.hasClass("w-undelayed")||t.addClass("w-undelayed"),t.children(".w-delayable-overlay").length||t.append('<div class="w-delayable-overlay"><div class="w-spinner w-spinner-dots"></div></div>')},a.enable=function(){var t=o(e);t.hasClass("w-delayed")||t.addClass("w-delayed").removeClass("w-undelayed")},void(a.disable=function(){var t=o(e);t.hasClass("w-delayed")&&t.addClass("w-undelayed").removeClass("w-delayed")})):new b(e,t)}),s("disabable",r.disabable=function v(e,t){var a=this;return a instanceof v?(a.init=function(){var t=o(e);t.hasClass("w-delayed")&&t.removeClass("w-delayed"),t.hasClass("w-undelayed")||t.addClass("w-undelayed"),t.children(".w-disabable-overlay").length||t.append('<div class="w-disabable-overlay"></div>')},a.enable=function(){var t=o(e);t.hasClass("w-disabled")||t.addClass("w-disabled").removeClass("w-undisabled")},void(a.disable=function(){var t=o(e);t.hasClass("w-disabled")&&t.addClass("w-undisabled").removeClass("w-disabled")})):new v(e,t)}),s("sortable",r.sortable=function y(e,t){var a=this;return a instanceof y?(a.instance=null,a.init=function(){if("function"==typeof Sortable){var n=o(e);a.instance=Sortable.create(e,{sort:!0,disabled:!1,delay:parseInt(n.attr("data-sortable-delay")||t.delay||0,10),animation:parseInt(n.attr("data-sortable-animation")||t.animation||400,10),draggable:n.attr("data-sortable-item")||t.draggable||t.item||".w-sortable-item",handle:n.attr("data-sortable-handle")||t.handle||".w-sortable-handle"})}},void(a.dispose=function(){a.instance=null})):new y(e,t)}),s("suggest",r.suggest=function k(e,t){var a=this;return a instanceof k?(a.instance=null,a.init=function(){if("function"==typeof AutoComplete){var n=o(e),i=n.attr("data-suggest-ajax")||t.ajax||n.attr("data-ajax")||null,s=n.attr("data-suggest-data")||t.dataType||"json",l=n.attr("data-suggest-method")||t.method||"GET",r=n.attr("data-suggest-q")||n.attr("data-suggest-param")||t.q||t.param||"suggest",d=null;a.instance=new AutoComplete(e,{minChars:n.attr("data-suggest-min")||t.minChars||3,key:n.attr("data-suggest-key")||t.key||null,value:n.attr("data-suggest-value")||t.value||null,delay:n.attr("data-suggest-delay")||t.delay||150,cache:n.attr("data-suggest-cache")||3e5,menuClass:n.attr("data-suggest-class")||t.menuClass||"w-suggestions",source:function(e,t){var a=n.closest(".w-wrapper"),c={method:l,dataType:s,ajax:i,suggest:{}};if(c.suggest[r]=e,n.trigger("suggest",c),c.suggestions||c.list)t(c.suggestions||c.list);else if(c.ajax){a.addClass("ajax");try{d&&d.abort()}catch(u){}d=o.ajax({url:c.ajax,type:c.method,method:c.method,dataType:c.dataType,data:c.suggest,success:function(e){a.removeClass("ajax"),t(e)},error:function(){a.removeClass("ajax"),t([])}})}else t([])},onSelect:function(e,t,a,i,s,l){n.trigger("suggest-select",{q:t,item:a,key:s,value:l})}})}},a.suggestions=function(e){a.instance&&(a.instance.suggestions=e)},void(a.dispose=function(){a.instance&&a.instance.dispose(),a.instance=null})):new k(e,t)}),s("uploadable",r.uploadable=function C(e,t){var a=this,n=120;return a instanceof C?(a.dispose=function(){var t=o(e);t.off(".uploadable"),t=null},void(a.init=function(){var t=o(e);t.on("click.uploadable",".w-upload-thumbnail",function(){var e=t.find("._w-data"),a=t[0].imdata||(e.val()?p(e.val()):null);return a&&(t[0].imdata||(t[0].imdata=a),window.open(a.original?a.original:a.image,"preview_"+t.attr("id"),"scrollbars=yes,resizable=yes,width="+a.width+",height="+a.height).focus()),!1}).on("click.uploadable",".w-upload-delete",function(){return t[0].imdata=null,t.find("img").attr("src",""),t.find("._w-data").val("").trigger("change"),!1}).on("change.uploadable","input._w-uploader[type=file]",function(e){var a,i=(o(this),e.target.files[0]||null);return i&&i.type.match("image")?(a=new FileReader,a.addEventListener("load",function(e){var a=e.target.result,s=new Image;s.addEventListener("load",function(){setTimeout(function(){var e,l=s.width,o=s.height,r=n,d=Math.round(n*o/l),c=document.createElement("canvas"),u=c.getContext("2d");c.width=r,c.height=d,u.drawImage(s,0,0,l,o,0,0,r,d),e=c.toDataURL("image/png"),t[0].imdata={name:i.name,width:l,height:o,image:a,thumb:e},t.find("img").attr("src",e),t.find("._w-data").val(f(t[0].imdata)).trigger("change")},10)}),s.src=a}),void a.readAsDataURL(i)):!1})})):new C(e,t)}),s("datetimepicker",r.datetimepicker=function D(e,t){var a=this;return a instanceof D?(a.instance=null,a.init=function(){if("function"==typeof Pikadaytime){var n=o(e),i=n.attr("data-datepicker-format")||t.format||"Y-m-d H:i:s",s=(n.attr("data-datepicker-time")||"").toLowerCase();a.instance=new Pikadaytime({field:e,showTime:s?"1"===s||"true"===s||"on"===s||"yes"===s:!!t.showTime,encoder:D.encoder(i),decoder:D.decoder(i)})}},void(a.dispose=function(){a.instance&&a.instance.dispose(),a.instance=null})):new D(e,t)}),r.datetimepicker.encoder=function(e,t){return"function"==typeof DateX?(t=t||DateX.defaultLocale,function(a){return DateX.format(a,e,t)}):function(e,t){return t._o.showTime?e.toString():e.toDateString()}},r.datetimepicker.decoder=function(e,t){if("function"==typeof DateX){t=t||DateX.defaultLocale;var a=DateX.getParser(e,t);return function(e){return!!e&&a(e)}}return function(e){return new Date(Date.parse(e))}},s("colorpicker",r.colorpicker=function M(e,t){var a=this;return a instanceof M?(a.instance=null,a.init=function(){if("function"==typeof ColorPicker){var n=o(e);a.instance=new ColorPicker(e,{changeEvent:n.attr("data-colorpicker-change")||t.changeEvent||"change",input:n.attr("data-colorpicker-input")?o(n.attr("data-colorpicker-input"))[0]:t.input?o(t.input)[0]:null,format:n.attr("data-colorpicker-format")||t.format||"rgba",color:n.attr("data-colorpicker-color")||t.color,opacity:n.attr("data-colorpicker-opacity")||t.opacity})}},a.value=a.color=function(e,t){return a.instance?arguments.length?void a.instance.setColor(e,t):a.instance.getColor():void 0},void(a.dispose=function(){a.instance&&a.instance.dispose(),a.instance=null})):new M(e,t)}),s("gmap3",r.gmap3=function O(e,t){function a(){n&&google.maps.event.addListenerOnce(n,"idle",function(){google.maps.event.trigger(n,"resize"),n.setCenter(new google.maps.LatLng(i,s))})}var n,i,s,r,d=this;return d instanceof O?(n=null,t=o.extend({type:"ROADMAP",markers:null,center:null,kml:null,responsive:!1},t||{}),d.dispose=function(){r&&o(e.parentNode||document.body).off("resize",a),n=null},d.init=function(){var d=o(e),c=d.attr("data-map-center")?d.attr("data-map-center").split(","):t.center||[0,0],u=parseInt(d.attr("data-map-zoom")||t.zoom||6,10),p=d.attr("data-map-type")||t.type||"ROADMAP";i=parseFloat(c[0]||0,10),s=parseFloat(c[1]||0,10),n=new google.maps.Map(e,{zoom:u,center:new google.maps.LatLng(i,s),mapTypeId:google.maps.MapTypeId[p]}),d.children(".marker,.map-marker").each(function(){var e=o(this),t=e.attr("data-marker-position")?e.attr("data-marker-position").split(","):[0,0],a={lat:parseFloat(t[0]||0,10),lng:parseFloat(t[1]||0,10),title:e.attr("title"),info:e.html(),clickable:!!e.attr("data-marker-clickable"),draggable:!!e.attr("data-marker-draggable"),visible:!!e.attr("data-marker-visible")};l(n,a.lat,a.lng,a.title||"",a.info,a)}),d.empty(),d.attr("data-map-markers")&&o(d.attr("data-map-markers")).each(function(){var e=o(this),t=e.attr("data-marker-position")?e.attr("data-marker-position").split(","):[0,0],a={lat:parseFloat(t[0]||0,10),lng:parseFloat(t[1]||0,10),title:e.attr("title"),info:e.html(),clickable:!!e.attr("data-marker-clickable"),draggable:!!e.attr("data-marker-draggable"),visible:!!e.attr("data-marker-visible")};l(n,a.lat,a.lng,a.title||"",a.info,a)});var f,g,m=t.markers,h=m?m.length:0;for(f=0;h>f;f++)g=m[f],l(n,g.lat,g.lng,g.title||"",g.info,g);if(null!=t.kml){var w=new google.maps.KmlLayer(t.kml);w.setMap(n)}r=!(!d.attr("data-map-responsive")&&!t.responsive),r&&o(e.parentNode||document.body).on("resize",a)},d.map=function(){return n},d.center=function(e){return arguments.length?void(n&&(i=parseFloat(e[0],10),s=parseFloat(e[1],10),n.setCenter(new google.maps.LatLng(i,s)))):[i,s]},d.add_marker=function(e){return n&&e?l(n,e.lat,e.lng,e.title||"",e.info||null,e):void 0},d.remove_marker=function(e){e&&e.setMap(null)},d.add_markers=function(e){if(n&&e){for(var t=0;t<e.length;t++){var a=e[t];e[t]=l(n,a.lat,a.lng,a.title||"",a.info,a)}return e}},void(d.remove_markers=function(e){if(e)for(var t=0;t<e.length;t++)e[t].setMap(null)})):new O(e,t)}),o.fn.htmlwidget=function(e,t){return t=t||{},this.each(function(){var a,n=this;if(r.widget[d](e)&&"function"==typeof r.widget[e])return void r.widget[e](n,t);switch(a=o(n),e){case"delayable":case"disabable":case"morphable":case"selectable":case"removable":case"rearrangeable":case"sortable":case"uploadable":case"upload":a["upload"===e?"uploadable":"rearrangeable"===e?"sortable":e](t);break;case"draggable":"function"==typeof o.fn.tinyDraggable&&a.tinyDraggable(t);break;case"resisable":case"resizable":break;case"timer":"function"==typeof o.fn.Timer&&a.Timer(t);break;case"date":case"datetime":case"datepicker":case"datetimepicker":a.datetimepicker(t);break;case"color":case"colorselector":case"colorpicker":a.colorpicker(t);break;case"map":case"gmap":case"gmap3":a.gmap3(t);break;case"autocomplete":case"autosuggest":case"suggest":a.suggest(t);break;case"rangeslider":case"range":"function"==typeof o.fn.rangeslider&&a.rangeslider({polyfill:!1,orientation:a.attr("data-range-orientation")||t.orientation||"horizontal"});break;case"select":case"select2":"function"==typeof o.fn.select2&&(a.select2(t),a.prev(".select2-container").attr("title",a.attr("title")).attr("data-tooltip",a.attr("data-tooltip")));break;case"table":case"datatable":"function"==typeof o.fn.dataTable&&(a.dataTable(t),a.closest(".dataTables_wrapper").addClass("w-table-wrapper"));break;case"modal":"function"==typeof o.fn.modal&&a.modal(t);break;case"modelview":"undefined"!=typeof ModelView&&a.modelview(t);break;case"tag-editor":"function"==typeof o.fn.tagEditor&&a.tagEditor(t);break;case"wysiwyg-editor":"function"==typeof o.fn.trumbowyg&&(a.trumbowyg(t),a.closest(".trumbowyg-box").addClass("widget w-wysiwyg-editor-box"));break;case"syntax-editor":"function"==typeof CodeMirror&&CodeMirror.fromTextArea(n,t)}}),this},r.init=function(e,t,a){var n=o(e);!0===a&&(n.find("input[type=range].w-rangeslider").htmlwidget("range"),n.find(".w-upload").htmlwidget("upload"),n.find(".w-suggest").htmlwidget("suggest"),n.find(".w-timer").htmlwidget("timer"),n.find(".w-date").htmlwidget("datetimepicker"),n.find(".w-color,.w-colorselector").htmlwidget("colorpicker"),n.find(".w-map").htmlwidget("map"),n.find(".w-select2").htmlwidget("select2")),!1!==t&&(n.is("input[type=range]")?n.htmlwidget("range"):n.hasClass("w-upload")?n.htmlwidget("upload"):n.hasClass("w-suggest")?n.htmlwidget("suggest"):n.hasClass("w-timer")?n.htmlwidget("timer"):n.hasClass("w-date")?n.htmlwidget("datetimepicker"):n.hasClass("w-color")||n.hasClass("w-colorselector")?n.htmlwidget("colorpicker"):n.hasClass("w-map")?n.htmlwidget("map"):n.hasClass("w-select2")&&n.htmlwidget("select2"))},r.initialisable=function(e,t){t=t||window;var a=o(e),n=(a.attr("w-init")||"").toLowerCase();("1"===n||"true"===n||"on"===n||"yes"===n)&&(n="__htmlwidget_init__"),n&&"function"==typeof t[n]&&(a.removeAttr("w-init"),t[n](e))},r.widgetize=function(e){var t=o(e);t.hasClass("w-selectable")&&t.htmlwidget("selectable"),t.hasClass("w-removable")&&t.htmlwidget("removable"),t.hasClass("w-morphable")&&t.htmlwidget("morphable"),t.hasClass("w-delayable")&&t.htmlwidget("delayable"),t.hasClass("w-disabable")&&t.htmlwidget("disabable"),t.hasClass("w-draggable")&&t.htmlwidget("draggable"),t.hasClass("w-resizable")&&t.htmlwidget("resizable"),(t.hasClass("w-sortable")||t.hasClass("w-rearrangeable"))&&t.htmlwidget("sortable")},r.tooltip=function(e){var t=o(e),a="",n=t.hasClass("tooltipstered");n||(a=t.attr(t.attr("data-tooltip")?"data-tooltip":"title"),a.length?t.tooltipster({onlyOne:!0,autoClose:!0,content:a,position:t.hasClass("tooltip-bottom")?"bottom":t.hasClass("tooltip-right")?"right":t.hasClass("tooltip-left")?"left":"top"}):t.removeAttr("title")),(n||a.length)&&t.tooltipster("show")},window.__htmlwidget_init__=function(e){r.init(e)},o(function(){"undefined"!=typeof SelectorListener&&SelectorListener.jquery(o),"undefined"!=typeof ModelView&&ModelView.jquery(o);var e=o(document.body),t=function(){r.initialisable(this)},a=function(){r.widgetize(this)};e.find("[w-init]").each(t),e.find(".w-rearrangeable,.w-selectable,.w-removable,.w-morphable,.w-delayable,.w-disabable,.w-sortable,.w-draggable").each(a),"function"==typeof o.fn.onSelector&&e.onSelector("[w-init]::added",t).onSelector(".w-rearrangeable::added,.w-selectable::added,.w-removable::added,.w-morphable::added,.w-delayable::added,.w-disabable::added,.w-sortable::added,.w-draggable::added",a),"function"==typeof o.fn.tooltipster&&("function"==typeof o.fn.onSelector?e.onSelector("[data-tooltip]:hover,[title]:hover",r.tooltip):e.on("mouseover","[data-tooltip],[title]",r.tooltip))}),r});
/**
*  HtmlWidget
*  html widgets used as (template) plugins and/or standalone, for PHP, Node/JS, Python
*
*  @dependencies: FontAwesome, jQuery, DateX, HtmlWidget
*  @version: 0.7.0
*  https://github.com/foo123/HtmlWidget
*  https://github.com/foo123/components.css
*  https://github.com/foo123/jquery-ui-widgets
*  https://github.com/foo123/DateX
*
**/
!function(e,t,n){"use strict";function a(e,a,i){var s=i&&i[o]?i[o]:null;t.fn[e]=function(i){var o,l="string"==typeof i?"w_"+i:!1,d=r.call(arguments,1),c=this;return l?this.each(function(){var a,i=t.data(this,e);return"w_instance"===l?(c=i,!1):i?"w_dispose"===l||"w_destroy"===l?("function"==typeof i.w_dispose?i.w_dispose():"function"==typeof i.w_destroy?i.w_destroy():"function"==typeof i.dispose?i.dispose():"function"==typeof i.destroy?i.destroy():s&&("function"==typeof s.w_dispose?s.w_dispose.call(i):"function"==typeof s.w_destroy?s.w_destroy.call(i):"function"==typeof s.dispose?s.dispose.call(i):"function"==typeof s.destroy&&s.destroy.call(i)),i=null,t.removeData(this,e),!1):(o=i[l]||s&&s[l],"function"!=typeof o?!1:(a=o.apply(i,d),a!==i&&n!==a?(c=a&&a.jquery?c.pushStack(a.get()):a,!1):void 0)):!1}):(i=i||{},this.each(function(){var n=t.data(this,e);n?(o=n.w_option||s&&s.w_option,"function"==typeof o&&o.call(n,i)):(t.data(this,e,n=new a(this,i)),o=n.w_init||s&&s.w_init,"function"==typeof o&&o.call(n))})),c}}function i(e,t,n,a,i,s){var o,r,l={map:e,title:a,position:new google.maps.LatLng(t,n)};return"undefined"!==s.clickable&&(l.clickable=!!s.clickable),"undefined"!==s.draggable&&(l.draggable=!!s.draggable),"undefined"!==s.crossOnDrag&&(l.crossOnDrag=!!s.crossOnDrag),"undefined"!==s.visible&&(l.visible=!!s.visible),"undefined"!==s.icon&&(l.icon=s.icon),"undefined"!==s.zIndex&&(l.zIndex=s.zIndex),"undefined"!==s.shape&&(l.shape=s.shape),o=new google.maps.Marker(l),i&&(r=new google.maps.InfoWindow({content:i}),google.maps.event.addListener(o,"click",function(){r.open(e,o)})),o}var s={VERSION:"0.7.1"},o="prototype",r=Array[o].slice,l=Object[o].toString;s.morphable=function d(e,n){var a=this;if(!(a instanceof d))return new d(e,n);var i=null;a.w_morph=function(a){if(a!==i){var s=t(e);i&&s.removeClass(n.modeClass.split("${MODE}").join(i)),i=a,i&&s.addClass(n.modeClass.split("${MODE}").join(i))}}},s.delayable=function c(e,n){var a=this;return a instanceof c?(a.w_init=function(){var n=t(e);n.hasClass("w-delayed")&&n.removeClass("w-delayed"),n.hasClass("w-undelayed")||n.addClass("w-undelayed"),n.children(".w-delayable-overlay").length||n.append('<div class="w-delayable-overlay"><div class="w-spinner w-spinner-dots"></div></div>')},a.w_enable=function(){var n=t(e);n.hasClass("w-delayed")||n.addClass("w-delayed").removeClass("w-undelayed")},void(a.w_disable=function(){var n=t(e);n.hasClass("w-delayed")&&n.addClass("w-undelayed").removeClass("w-delayed")})):new c(e,n)},s.disabable=function u(e,n){var a=this;return a instanceof u?(a.w_init=function(){var n=t(e);n.hasClass("w-delayed")&&n.removeClass("w-delayed"),n.hasClass("w-undelayed")||n.addClass("w-undelayed"),n.children(".w-disabable-overlay").length||n.append('<div class="w-disabable-overlay"></div>')},a.w_enable=function(){var n=t(e);n.hasClass("w-disabled")||n.addClass("w-disabled").removeClass("w-undisabled")},void(a.w_disable=function(){var n=t(e);n.hasClass("w-disabled")&&n.addClass("w-undisabled").removeClass("w-disabled")})):new u(e,n)},s.gmap3=function h(e,n){function a(){s&&google.maps.event.addListenerOnce(s,"idle",function(){google.maps.event.trigger(s,"resize"),s.setCenter(new google.maps.LatLng(r,l))})}var s,o,r,l,d,c=this;return c instanceof h?(s=null,n=t.extend({type:"ROADMAP",markers:null,center:null,kml:null,responsive:!1},n||{}),c.w_init=function(){var c=n.center||{lat:0,lng:0,zoom:6};o=c.zoom||6,r=c.lat||0,l=c.lng||0,s=new google.maps.Map(e,{zoom:o,center:new google.maps.LatLng(r,l),mapTypeId:google.maps.MapTypeId[n.type]});var u,h,f=n.markers,m=f?f.length:0;for(u=0;m>u;u++)h=f[u],i(s,h.lat,h.lng,h.title||"",h.info,h);if(null!=n.kml){var p=new google.maps.KmlLayer(n.kml);p.setMap(s)}d=!!n.responsive,d&&t(e.parentNode||document.body).on("resize",a)},c.w_dispose=function(){d&&t(e.parentNode||document.body).off("resize",a),s=null},c.w_map=function(){return s},c.w_center=function(e){return arguments.length?void(s&&(r=e.lat,l=e.lng,s.setCenter(new google.maps.LatLng(r,l)))):{lat:r,lng:l}},c.w_add_marker=function(e){return s&&e?i(s,e.lat,e.lng,e.title||"",e.info||null,e):void 0},c.w_remove_marker=function(e){e&&e.setMap(null)},c.w_add_markers=function(e){if(s&&e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=i(s,n.lat,n.lng,n.title||"",n.info,n)}return e}},void(c.w_remove_markers=function(e){if(e)for(var t=0;t<e.length;t++)e[t].setMap(null)})):new h(e,n)},s.datetime=function(){var t=!!e.addEventListener,n=e.document,a=e.setTimeout,i=function(e,n,a,i){t?e.addEventListener(n,a,!!i):e.attachEvent("on"+n,a)},s=function(e,n,a,i){t?e.removeEventListener(n,a,!!i):e.detachEvent("on"+n,a)},r=function(e,t,a){var i;n.createEvent?(i=n.createEvent("HTMLEvents"),i.initEvent(t,!0,!1),i=_(i,a),e.dispatchEvent(i)):n.createEventObject&&(i=n.createEventObject(),i=_(i,a),e.fireEvent("on"+t,i))},d=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},u=function(e,t){c(e,t)||(e.className=""===e.className?t:e.className+" "+t)},h=function(e,t){e.className=d((" "+e.className+" ").replace(" "+t+" "," "))},f=function(e){return/Array/.test(l.call(e))},m=function(e){return/Date/.test(l.call(e))&&!isNaN(e.getTime())},p=function(e){return e%4===0&&e%100!==0||e%400===0},g=function(e,t){return[31,p(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},v=function(e){m(e)&&e.setHours(0,0,0,0)},y=function(e,t){return e.getTime()===t.getTime()},b=function(e){return e.toDateString()},w=function(e){return new Date(Date.parse(e))},_=function(e,t,n){var a,i;for(a in t)i=void 0!==e[a],i&&"object"==typeof t[a]&&void 0===t[a].nodeName?m(t[a])?n&&(e[a]=new Date(t[a].getTime())):f(t[a])?n&&(e[a]=t[a].slice(0)):e[a]=_({},t[a],n):(n||!i)&&(e[a]=t[a]);return e},D=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},x={field:null,bound:void 0,position:"bottom left",format:"Y-m-d",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null,encoder:!1,decoder:!1},k=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},C=function(e,t,n,a,i,s,o){if(o)return'<td class="is-empty"></td>';var r=[];return s&&r.push("is-disabled"),i&&r.push("is-today"),a&&r.push("is-selected"),'<td data-day="'+e+'" class="'+r.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n+'" data-pika-month="'+t+'" data-pika-day="'+e+'">'+e+"</button></td>"},M=function(e,t,n){var a=new Date(n,0,1),i=Math.ceil(((new Date(n,t,e)-a)/864e5+a.getDay()+1)/7);return'<td class="pika-week">'+i+"</td>"},T=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},L=function(e){return"<tbody>"+e.join("")+"</tbody>"},j=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;7>t;t++)n.push('<th scope="col"><abbr title="'+k(e,t)+'">'+k(e,t,!0)+"</abbr></th>");return"<thead>"+(e.isRTL?n.reverse():n).join("")+"</thead>"},O=function(e,t,n,a,i){var s,o,r,l,d,c=e._o,u=n===c.minYear,h=n===c.maxYear,m='<div class="pika-title">',p=!0,g=!0;for(r=[],s=0;12>s;s++)r.push('<option value="'+(n===i?s-t:12+s-t)+'"'+(s===a?" selected":"")+(u&&s<c.minMonth||h&&s>c.maxMonth?"disabled":"")+">"+c.i18n.months[s]+"</option>");for(l='<div class="pika-label">'+c.i18n.months[a]+'<select class="pika-select pika-select-month">'+r.join("")+"</select></div>",f(c.yearRange)?(s=c.yearRange[0],o=c.yearRange[1]+1):(s=n-c.yearRange,o=1+n+c.yearRange),r=[];o>s&&s<=c.maxYear;s++)s>=c.minYear&&r.push('<option value="'+s+'"'+(s===n?" selected":"")+">"+s+"</option>");return d='<div class="pika-label">'+n+c.yearSuffix+'<select class="pika-select pika-select-year">'+r.join("")+"</select></div>",m+=c.showMonthAfterYear?d+l:l+d,u&&(0===a||c.minMonth>=a)&&(p=!1),h&&(11===a||c.maxMonth<=a)&&(g=!1),0===t&&(m+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),m+="</div>"},N=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+j(e)+L(t)+"</table>"},S=function(s,o){o=o||{},o.field=o.field||s;var r=this,l=r.config(o);r._onMouseDown=function(t){if(r._v){t=t||e.event;var n=t.target||t.srcElement;if(n){if(!c(n,"is-disabled")){if(c(n,"pika-button")&&!c(n,"is-empty"))return r.setDate(new Date(n.getAttribute("data-pika-year"),n.getAttribute("data-pika-month"),n.getAttribute("data-pika-day"))),void(l.bound&&a(function(){r.hide(),l.field&&l.field.blur()},100));c(n,"pika-prev")?r.prevMonth():c(n,"pika-next")&&r.nextMonth()}if(c(n,"pika-select"))r._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},r._onChange=function(t){t=t||e.event;var n=t.target||t.srcElement;n&&(c(n,"pika-select-month")?r.gotoMonth(n.value):c(n,"pika-select-year")&&r.gotoYear(n.value))},r._onInputChange=function(e){var t;e.firedBy!==r&&(t=l.decoder(l.field.value,r),r.setDate(m(t)?t:null),r._v||r.show())},r._onInputFocus=function(){r.show()},r._onInputClick=function(){r.show()},r._onInputBlur=function(){r._c||(r._b=a(function(){r.hide()},50)),r._c=!1},r._onClick=function(n){n=n||e.event;var a=n.target||n.srcElement,s=a;if(a){!t&&c(a,"pika-select")&&(a.onchange||(a.setAttribute("onchange","return;"),i(a,"change",r._onChange)));do if(c(s,"pika-single"))return;while(s=s.parentNode);r._v&&a!==l.trigger&&r.hide()}},r.el=n.createElement("div"),r.el.className="pika-single"+(l.isRTL?" is-rtl":""),i(r.el,"mousedown",r._onMouseDown,!0),i(r.el,"change",r._onChange),l.field&&(l.container?l.container.appendChild(r.el):l.bound?n.body.appendChild(r.el):l.field.parentNode.insertBefore(r.el,l.field.nextSibling),i(l.field,"change",r._onInputChange),l.defaultDate||(l.defaultDate=l.decoder(l.field.value,r),l.setDefaultDate=!0));var d=l.defaultDate;m(d)?l.setDefaultDate?r.setDate(d,!0):r.gotoDate(d):r.gotoDate(new Date),l.bound?(this.hide(),r.el.className+=" is-bound",i(l.trigger,"click",r._onInputClick),i(l.trigger,"focus",r._onInputFocus),i(l.trigger,"blur",r._onInputBlur)):this.show()};return S[o]={config:function(e){this._o||(this._o=_({},x,!0));var t=_(this._o,e,!0);t.encoder&&"function"==typeof t.encoder||(t.encoder=b),t.decoder&&"function"==typeof t.decoder||(t.decoder=w),t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,m(t.minDate)||(t.minDate=!1),m(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&(v(t.minDate),t.minYear=t.minDate.getFullYear(),t.minMonth=t.minDate.getMonth()),t.maxDate&&(v(t.maxDate),t.maxYear=t.maxDate.getFullYear(),t.maxMonth=t.maxDate.getMonth()),f(t.yearRange)){var a=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||a,t.yearRange[1]=parseInt(t.yearRange[1],10)||a}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||x.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(){return m(this._d)?this._o.encoder(this._d,this):""},getDate:function(){return m(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",r(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=this._o.decoder(e,this)),m(e)){var n=this._o.minDate,a=this._o.maxDate;m(n)&&n>e?e=n:m(a)&&e>a&&(e=a),this._d=new Date(e.getTime()),v(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),r(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(m(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),a=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),t=i<n.getTime()||a.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=D(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=D({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){this._o.minDate=e},setMaxDate:function(e){this._o.maxDate=e},draw:function(e){if(this._v||e){var t=this._o,n=t.minYear,i=t.maxYear,s=t.minMonth,o=t.maxMonth,r="";this._y<=n&&(this._y=n,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=i&&(this._y=i,!isNaN(o)&&this._m>o&&(this._m=o));for(var l=0;l<t.numberOfMonths;l++)r+='<div class="pika-lendar">'+O(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year)+this.render(this.calendars[l].year,this.calendars[l].month)+"</div>";if(this.el.innerHTML=r,t.bound&&"hidden"!==t.field.type&&a(function(){t.trigger.focus()},1),"function"==typeof this._o.onDraw){var d=this;a(function(){d._o.onDraw.call(d)},0)}}},adjustPosition:function(){if(!this._o.container){var t,a,i,s=this._o.trigger,o=s,r=this.el.offsetWidth,l=this.el.offsetHeight,d=e.innerWidth||n.documentElement.clientWidth,c=e.innerHeight||n.documentElement.clientHeight,u=e.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop;if("function"==typeof s.getBoundingClientRect)i=s.getBoundingClientRect(),t=i.left+e.pageXOffset,a=i.bottom+e.pageYOffset;else for(t=o.offsetLeft,a=o.offsetTop+o.offsetHeight;o=o.offsetParent;)t+=o.offsetLeft,a+=o.offsetTop;(t+r>d||this._o.position.indexOf("right")>-1&&t-r+s.offsetWidth>0)&&(t=t-r+s.offsetWidth),(a+l>c+u||this._o.position.indexOf("top")>-1&&a-l-s.offsetHeight>0)&&(a=a-l-s.offsetHeight),this.el.style.cssText=["position: absolute","left: "+t+"px","top: "+a+"px"].join(";")}},render:function(e,t){var n=this._o,a=new Date,i=g(e,t),s=new Date(e,t,1).getDay(),o=[],r=[];v(a),n.firstDay>0&&(s-=n.firstDay,0>s&&(s+=7));for(var l=i+s,d=l;d>7;)d-=7;l+=7-d;for(var c=0,u=0;l>c;c++){var h=new Date(e,t,1+(c-s)),f=n.minDate&&h<n.minDate||n.maxDate&&h>n.maxDate,p=m(this._d)?y(h,this._d):!1,b=y(h,a),w=s>c||c>=i+s;r.push(C(1+(c-s),t,e,p,b,f,w)),7===++u&&(n.showWeekNumber&&r.unshift(M(c-s,t,e)),o.push(T(r,n.isRTL)),r=[],u=0)}return N(n,o)},isVisible:function(){return this._v},show:function(){this._v||(h(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(i(n,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&s(n,"click",this._onClick),this.el.style.cssText="",u(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},S}(),s.datetime.encoder=function(t,n){return"undefined"!=typeof e.DateX?(n=n||DateX.defaultLocale,function(e){return DateX.format(e,t,n)}):function(e){return e.toDateString()}},s.datetime.decoder=function(t,n){if("undefined"!=typeof e.DateX){n=n||DateX.defaultLocale;var a=DateX.getParser(t,n);return function(e){return!!e&&a(e)}}return function(e){return new Date(Date.parse(e))}},s.suggest=function(){function n(e,i){a++,this.element=t(e),this.options=t.extend({},n.defaults,i),this.cache={},this.id="remotelist-"+a,this.options.param||(this.options.param=this.element.prop("name")||"q"),this._createDatalist(),this._bindEvents(this)}var a=0;return n.defaults={minLength:2,maxLength:-1,source:"",param:"",select:t.noop,renderItem:null},n.createOption=function(e){var n=t(document.createElement("option"));return e&&"string"!=typeof e||(e={value:e}),n.prop("value",e.value),e.label&&n.prop("label",e.label),n.data("optionData",e),n[0]},n[o]={selectedData:function(){var e=this.selectedOption();return e&&t(e).data("optionData")},selectedOption:function(){var e=null,n=this.val();return n&&(e=t('[value="'+n+'"]',this.element.prop("list"))[0]||null),e},search:function(e){var n,a,i,s,o=this,r=this.options,l=e;r.maxLength>-1&&(l=l.substr(r,r.maxLength)),this.doAjax=!1,this.cache[l]?this.setList(this.cache[l],l):this.currentAjax?this.doAjax=e:(this.element.addClass("list-search"),n={},n[r.param]=e,this.currentAjax=!0,s=function(){s.xhr&&s.xhr.abort&&s.xhr.abort(),o.currentAjax=!1,clearTimeout(s.timer),o.doAjax?o.search(o.doAjax):o.element.removeClass("list-search")},a=t.isFunction(r.source)?r.source:function(e,n,a,i,s){return t.ajax({dataType:"json",url:s,data:i,context:this,error:a,success:n})},i=function(e){o.setList(e,l),s()},s.timer=setTimeout(s,999),s.xhr=a(e,i,s,n,r.source))},setList:function(e,a){e||(e=[]),this.currentOptions!=e&&this.currentVal!==a&&(this.currentOptions=e,this.currentVal=a,this.cache[a]=e,e=t.map(e,n.createOption),this.datalistSelect.html(e),t.fn.updatePolyfill&&this.datalistSelect.updatePolyfill())},_createDatalist:function(){this.datalistSelect=this.element.prop("list"),this.datalistSelect||(this.datalistSelect=t('<datalist id="'+this.id+'"><select /></datalist>'),this.element.attr("list",this.id),this.element.after(this.datalistSelect)),this.datalistSelect=t("select",this.datalistSelect)},val:function(){return e.webshims&&webshims.getDataListVal?webshims.getDataListVal(this.element[0]):this.element.prop("value")},widget:function(){return this},_bindEvents:function(e){var n,a,i,s=e.options,o=function(){var a;return function(o){var r=e.val();if(r!==a&&(a=r,"change"==o||!i||i.toLowerCase()!=r.charAt(r.length-1).toLowerCase()))return e.selectedOption()?(clearTimeout(n),s.select&&s.select.call(e.element[0],t.Event("listselect")),e.element.trigger("listselect"),!0):void 0}}();e.element.on({"input focus":function(){var t=function(){var t=e.val();t.length>=s.minLength&&e.search(t)};return function(){clearTimeout(n),n=setTimeout(t,99)}}(),"input change":function(t){clearTimeout(a),"change"==t.type?(clearTimeout(n),e.element.is(":focus")&&o("change")):a=setTimeout(o,9)},keypress:function(){var e=function(){i=""};return function(t){i=String.fromCharCode(t.charCode),setTimeout(e,20)}}(),getoptioncontent:function(e,n){return s.renderItem?s.renderItem('<span class="option-value">'+n.item.value+"</span>",n.item.label&&'<span class="option-label">'+n.item.label+"</span>",t.data(n.item.elem,"optionData")):void 0}})}},n}(),t.htmlwidget=s,a("morphable",s.morphable),a("delayable",s.delayable),a("disabable",s.disabable),a("datetime",s.datetime),a("suggest",s.suggest),a("gmap3",s.gmap3),s._=function(e,n,a){switch(a=a||{},e){case"morphable":t(n).morphable();break;case"delayable":t(n).delayable();break;case"disabable":t(n).disabable();break;case"autocomplete":case"autosuggest":case"suggest":var i=t(n),o=i.parent(),r=i.attr("data-ajax"),l=i.attr("data-request-method")||"POST",d=i.attr("data-response-type")||"json";i.suggest({minLength:2,maxLength:-1,source:function(e,n){o.addClass("ajax"),t.ajax({url:r,type:l,dataType:d,data:{suggest:e},success:function(e){o.removeClass("ajax"),n(e)}})},select:a.select||function(){}});break;case"wysiwyg-editor":var i=t(n);i.trumbowyg(a.editor||{}),i.closest(".trumbowyg-box").addClass("widget w-wysiwyg-editor-box").attr("style",a.style||"");break;case"syntax-editor":CodeMirror.fromTextArea(t(n)[0],a.editor||{});break;case"date":case"datetime":var i=t(n),c=i.attr("data-datetime-format")||"Y-m-d";i.datetime({encoder:s.datetime.encoder(c),decoder:s.datetime.decoder(c)});break;case"select2":case"select":t(n).select2(a);break;case"gmap3":case"gmap":case"map":t(n).gmap3(a)}},t(function(){t(".w-delayable").delayable(),t(".w-disabable").disabable()})}(window,jQuery);
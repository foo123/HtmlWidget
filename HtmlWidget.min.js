/**
*  HtmlWidget
*  html widgets used as (template) plugins and/or standalone for PHP, Node/JS, Python
*
*  @version: 0.1
*  https://github.com/foo123/HtmlWidget
*
**/
!function(e,t,s){"use strict";var a,i="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;i?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||s.call(e,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,i){return s.call(e,{AMD:i})}):t in e||(e[t]=a=s.call(e,{})||1)&&l&&define(t,[],function(){return a})}(this,"HtmlWidget",function(){"use strict";var e,t="undefined"!=typeof global&&"[object global]"===Object.prototype.toString.call(global),s="hasOwnProperty",a=Object.keys,i=JSON.stringify,l=0,d={},r=null,n=e={VERSION:"0.1",enqueueAssets:function(e){r=r&&"function"==typeof r?e:null},enqueue:function(e,t,s,a){r&&r(e,t,s||null,a||[])},assets:function(e){return e=(e||"")+"/assets/",[["scripts","htmlwidgets.js",e+"js/htmlwidgets.js",["jquery"]],["styles","htmlwidgets.css",e+"css/htmlwidgets.css",["responsive.css","font-awesome.css"]],["styles","trumbowyg.css",e+"css/trumbowyg.min.css"],["scripts","trumbowyg",e+"js/trumbowyg.min.js",["trumbowyg.css","jquery"]],["styles","jquery.dataTables.css",e+"css/jquery.dataTables.css"],["scripts","jquery.dataTables",e+"js/jquery.dataTables.js",["jquery.dataTables.css","jquery"]],["styles","jquery.pikaday.css",e+"css/jquery.pikaday.css"],["scripts","jquery.pikaday",e+"js/jquery.pikaday.js",["jquery.pikaday.css","jquery"]],["scripts","jquery.remote-list",e+"js/jquery.remote-list.js",["jquery"]]]},uuid:function(e){return e=e||"widget",[e,(new Date).getTime(),++l].join("_")},attr_data:function(e){var t="";if(e[s]("data")){var a,i,l=e.data;for(a in l)l[s](a)&&(i=l[a],t.length&&(t+=" "),t+="data-"+a+"='"+i+"'")}return t},addWidget:function(e,t){e&&"function"==typeof t?d["wi_"+e]=t:e&&!1===t&&d[s]("wi_"+e)&&delete d["wi_"+e]},widget:function(t,a,i){var l="";if(t)if(a=a||{},i=i||{},d[s]("wi_"+t))l=d["wi_"+t](a,i);else switch("checkbox"===t?a.type="checkbox":"radio"===t?a.type="radio":"dropdown"===t?a.dropdown=!0:"editor"===t&&(a.editor=!0),t){case"empty":l=e.widget_empty(a,i);break;case"separator":l=e.widget_separator(a,i);break;case"icon":l=e.widget_icon(a,i);break;case"delayable":l=e.widget_delayable(a,i);break;case"dialog":l=e.widget_dialog(a,i);break;case"link":l=e.widget_link(a,i);break;case"button":l=e.widget_button(a,i);break;case"label":l=e.widget_label(a,i);break;case"suggestbox":case"suggest":l=e.widget_suggest(a,i);break;case"textbox":case"text":l=e.widget_text(a,i);break;case"editor":case"textarea":l=e.widget_textarea(a,i);break;case"date":l=e.widget_date(a,i);break;case"time":l=e.widget_time(a,i);break;case"checkbox":case"radio":case"control":l=e.widget_control(a,i);break;case"switch":l=e.widget_switch(a,i);break;case"dropdown":case"selectbox":case"select":l=e.widget_select(a,i);break;case"menu":l=e.widget_menu(a,i);break;case"table":l=e.widget_table(a,i);break;default:l=""}return l},widget_empty:function(){return e.enqueue("styles","htmlwidgets.css"),""},widget_separator:function(){return e.enqueue("styles","htmlwidgets.css"),'<div class="widget-separator"></div>'},widget_icon:function(t){var a,i;return e.enqueue("styles","htmlwidgets.css"),a="fa",t[s]("class")&&(a+=" "+t["class"]),i=t[s]("style")?'style="'+t.style+'"':"",t[s]("icon")&&(a+=" fa-"+t.icon),'<i class="'+a+'" '+i+"></i>"},widget_delayable:function(t){var a,i,l,d,r;return e.enqueue("styles","htmlwidgets.css"),a=t[s]("id")?t.id:e.uuid(),i="widget-delayable-overlay",t[s]("class")&&(i+=" "+t["class"]),l=t[s]("style")?'style="'+t.style+'"':"",d=t[s]("extra")?t.extra:"",r="widget-spinner",r+=t[s]("spinner")?" "+t.spinner:" widget-spinner-dots",'<div id="'+a+'" class="'+i+'" '+l+" "+d+'><div class="'+r+'"></div></div>'},widget_dialog:function(t,a){var i,l,d,r,n,c,o,u,g;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),o=a[s]("title")?a.title:"",u=t[s]("buttons")?t.buttons:"",g=a[s]("content")?a.content:"",l="widget-dialog",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",c="",t[s]("icon")&&(c='<i class="fa fa-'+t.icon+'"></i>'),t[s]("form")&&t.form&&(g='<form id="'+i+'_form">'+g+"</form>"),n=e.attr_data(t),'<div id="'+i+'" class="'+l+'" '+d+" "+r+" "+n+'><div class="widget-dialog-title">'+c+o+'</div><div class="widget-dialog-content">'+g+'</div><div class="widget-dialog-buttons">'+u+"</div></div>"},widget_link:function(t,a){var i,l,d,r,n,c,o,u,g;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),u=t.href,g=a[s]("text")?a.text:"",o=t[s]("title")?t.title:g,l="widget-link",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",c="",t[s]("icon")&&(c='<i class="fa fa-'+t.icon+'"></i>'),n=e.attr_data(t),'<a id="'+i+'" class="'+l+'" '+d+" "+r+' title="'+o+'" href="'+u+'" '+n+">"+c+g+"</a>"},widget_label:function(t,a){var i,l,d,r,n,c,o,u;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),c=t["for"],o=a[s]("text")?a.text:"",u=t[s]("title")?t.title:o,l="widget widget-label",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",t[s]("icon")?(l+=" widget-icon",o='<i class="fa fa-'+t.icon+'"></i>'+o):t[s]("iconr")&&(l+=" widget-icon-right",o=o+'<i class="fa fa-'+t.iconr+'"></i>'),n=e.attr_data(t),'<label id="'+i+'" for="'+c+'" class="'+l+'" title="'+u+'" '+d+" "+r+" "+n+">"+o+"</label>"},widget_button:function(t,a){var i,l,d,r,n,c,o,u,g;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),u=a[s]("text")?a.text:"",o=t[s]("title")?t.title:u,l="widget widget-button",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",t[s]("icon")?(l+=u.length?" widget-icon":" widget-icon-only",u='<span class="fa-wrapper"><i class="fa fa-'+t.icon+'"></i></span>'+u):t[s]("iconr")&&(l+=u.length?" widget-icon-right":" widget-icon-only",u=u+'<span class="fa-wrapper"><i class="fa fa-'+t.iconr+'"></i></span>'),n=e.attr_data(t),t[s]("href")?(g=t.href,'<a id="'+i+'" href="'+g+'" class="'+l+'" '+d+" "+r+' title="'+o+'" '+n+">"+u+"</a>"):(c=t[s]("type")?'type="'+t.type+'"':"",'<button id="'+i+'" '+c+' class="'+l+'" '+d+" "+r+' title="'+o+'" '+n+">"+u+"</button>")},widget_control:function(t,a){var i,l,d,r,n,c,o,u,g,p;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),g=t.name,p=t[s]("type")?t.type:"checkbox",u=a[s]("value")?a.value:"1",c=t[s]("title")?t.title:"",o=t[s]("checked")&&t.checked?"checked":"",l="widget widget-control",t[s]("class")&&(l+=" "+t["class"]),"checkbox"===p?l+=" widget-checkbox":"radio"===p&&(l+=" widget-radio"),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",n=e.attr_data(t),'<input type="'+p+'" id="'+i+'" name="'+g+'" class="'+l+'" '+d+" "+r+' value="'+u+'" '+n+" "+o+' /><label for="'+i+'" title="'+c+'">&nbsp;</label>'},widget_switch:function(t,a){var i,l,d,r,n,c,o,u,g,p,w,f,y,h;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),w=t.name,f=t[s]("type")?t.type:"checkbox",p=a[s]("value")?a.value:"1",c=t[s]("title")?t.title:"",o=t[s]("checked")&&t.checked?"checked":"",l="widget widget-switch",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",y=t[s]("reverse")&&t.reverse,u="&nbsp;",g="&nbsp;",t[s]("iconon")&&(u='<i class="fa fa-'+t.iconon+'"></i>'),t[s]("iconoff")?g='<i class="fa fa-'+t.iconoff+'"></i>':t[s]("iconon")&&(g='<i class="fa fa-'+t.iconon+' negative"></i>'),y?(l+=" reverse",h='<label for="'+i+'" class="widget-switch-off">'+g+'</label><label for="'+i+'" class="widget-switch-on">'+u+"</label>"):h='<label for="'+i+'" class="widget-switch-on">'+u+'</label><label for="'+i+'" class="widget-switch-off">'+g+"</label>",n=e.attr_data(t),'<span class="'+l+'" title="'+c+'" '+d+'><input type="'+f+'" id="'+i+'" name="'+w+'" class="widget-switch-button" value="'+p+'" '+r+" "+n+" "+o+" />"+h+'<span class="widget-switch-handle widget-state-default"></span></span>'},widget_text:function(t,a){var i,l,d,r,n,c,o,u,g,p,w,f;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),p=t.name,g=a[s]("value")?a.value:"",w=t[s]("title")?t.title:"",u=t[s]("placeholder")?t.placeholder:w,l="widget widget-text",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",c=t[s]("type")?t.type:"text",o="",f="widget-wrapper",t[s]("icon")?(o='<span class="fa-wrapper"><i class="fa fa-'+t.icon+'"></i></span>',f+=" widget-icon"):t[s]("iconr")&&(o='<span class="fa-wrapper"><i class="fa fa-'+t.iconr+'"></i></span>',f+=" widget-icon-right"),n=e.attr_data(t),o.length?'<span class="'+f+'" '+d+'><input type="'+c+'" id="'+i+'" name="'+p+'" title="'+w+'" class="'+l+'" '+r+' placeholder="'+u+'" value="'+g+'" '+n+" />"+o+"</span>":'<input type="'+c+'" id="'+i+'" name="'+p+'" title="'+w+'" class="'+l+'" '+d+" "+r+' placeholder="'+u+'" value="'+g+'" '+n+" />"},widget_suggest:function(a,i){var l,d,r,n,c,o,u,g,p,w,f,y;e.enqueue("styles","htmlwidgets.css"),l=a[s]("id")?a.id:e.uuid(),w=a.name,p=i[s]("value")?i.value:"",f=a[s]("title")?a.title:"",g=a[s]("placeholder")?a.placeholder:f,d="widget widget-text widget-suggest",a[s]("class")&&(d+=" "+a["class"]),r=a[s]("style")?'style="'+a.style+'"':"",n=a[s]("extra")?a.extra:"",o=a.ajax,u="",y="widget-wrapper",a[s]("icon")?(u='<span class="fa-wrapper"><i id="'+l+'-spinner" class="fa fa-'+a.icon+'"></i></span>',y+=" widget-icon"):a[s]("iconr")?(u='<span class="fa-wrapper"><i id="'+l+'-spinner" class="fa fa-'+a.iconr+'"></i></span>',y+=" widget-icon-right"):(u='<span class="fa-wrapper"><i id="'+l+'-spinner" class="fa fa-spinner fa-pulse"></i></span>',y+=" widget-icon-right"),c=e.attr_data(a);var h="",m='jQuery(function($){var $el = $("#'+l+'"), suggest = $el.parent();$el.remoteList({    minLength: 2,    maxLength: -1,    source: function(value, response) {        suggest.addClass("ajax");        $.ajax({            url: "'+o+'",            type: "POST",            data: {suggest: value},            dataType: "json",            success: function( data ){                suggest.removeClass("ajax");                response(data);            }        });    },    select: function( ) {        console.log($el.remoteList("selectedOption"), $el.remoteList("selectedData"))    }});});';return t?e.enqueue("scripts","widget-suggest-"+l,[m],["jquery.remote-list"]):h=m,'<span class="'+y+'" '+r+'><input type="text" data-list-highlight="true" data-list-value-completion="true" id="'+l+'" name="'+w+'" title="'+f+'" class="'+d+'" '+n+' placeholder="'+g+'" value="'+p+'" '+c+" />"+u+"</span>"+h},widget_textarea:function(a,l){var d,r,n,c,o,u,g,p,w,f;e.enqueue("styles","htmlwidgets.css"),d=a[s]("id")?a.id:e.uuid(),p=a.name,g=l[s]("value")?l.value:"",w=a[s]("title")?a.title:"",u=a[s]("placeholder")?a.placeholder:w,c=a[s]("extra")?a.extra:"",o=e.attr_data(a);var y="",h="";return a[s]("editor")&&a.editor?(r="widget widget-editor",a[s]("class")&&(r+=" "+a["class"]),n=a[s]("style")?a.style:"",f=a[s]("editor_cfg")?i(a.editor_cfg):"",h='<script>jQuery(function($){$("#'+d+'").trumbowyg('+f+');$("#'+d+'").closest(".trumbowyg-box").addClass("widget widget-editor-box").attr("style","'+n+'");});</script>',t?e.enqueue("scripts","widget-editor-"+d,[h],["trumbowyg"]):y=h,n=""):(r="widget widget-textarea",a[s]("class")&&(r+=" "+a["class"]),n=a[s]("style")?'style="'+a.style+'"':""),'<textarea id="'+d+'" name="'+p+'" title="'+w+'" class="'+r+'" '+n+" "+c+' placeholder="'+u+'" '+o+">"+g+"</textarea>"+y},widget_date:function(a,i){var l,d,r,n,c,o,u,g,p,w,f,y;e.enqueue("styles","htmlwidgets.css"),l=a[s]("id")?a.id:e.uuid(),p=a.name,g=i[s]("value")?i.value:"",w=a[s]("title")?a.title:"",o=a[s]("placeholder")?a.placeholder:w,d="widget widget-text widget-date",a[s]("class")&&(d+=" "+a["class"]),r=a[s]("style")?'style="'+a.style+'"':"",n=a[s]("extra")?a.extra:"",f=a[s]("format")?a.format:"Y-m-d",u="",y="widget-wrapper",a[s]("icon")?(u='<span class="fa-wrapper"><i class="fa fa-'+a.icon+'"></i></span>',y+=" widget-icon"):a[s]("iconr")?(u='<span class="fa-wrapper"><i class="fa fa-'+a.iconr+'"></i></span>',y+=" widget-icon-right"):(u='<span class="fa-wrapper"><i class="fa fa-calendar"></i></span>',y+=" widget-icon-right"),c=e.attr_data(a);var h="",m='jQuery(function($){$("#'+l+'").pikaday({format:"'+f+'",encoder:Pikaday.date_encoder,decoder:Pikaday.date_decoder});});';return t?e.enqueue("scripts","widget-pikaday-"+l,[m],["jquery.pikaday"]):h=m,'<span class="'+y+'" '+r+'><input type="text" id="'+l+'" name="'+p+'" title="'+w+'" class="'+d+'" placeholder="'+o+'" value="'+g+'" '+n+" "+c+" />"+u+"</span>"+h},widget_time:function(t,a){var i,l,d,r,n,c,o,u,g,p,w,f,y,h,m,b;if(e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),o=t.name,u=t[s]("format")?t.format.split(":"):["h","m","s"],a[s]("value"))for(c=a.value instanceof Array?a.value:a.value.split(":");c.length<3;)c.push("00");else c=["00","00","00"];for(l="widget widget-time",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",n=e.attr_data(t),p={h:[],m:[],s:[]},w=0;60>w;w++)for(f=10>w?"0"+w:""+w,h=0;h<u.length;h++)m=u[h],"h"===m&&w>=24||(b=f===c[h]?'selected="selected"':"",p[m].push('<option value="'+f+'" '+b+">"+f+"</option>"));for(g=[],h=0;h<u.length;h++)y=u[h],g.push('<select class="widget-time-component" id="'+i+"_"+y+'" name="'+o+"["+y+']">'+p[y].join("")+"</select>");return g=g.join('<span class="widget-time-sep">:</span>'),'<span class="'+l+'" '+d+" "+r+" "+n+">"+g+"</span>"},widget_select:function(t,i){var l,d,r,n,c,o,u,g,p,w,f,y,h,m,b,v;for(e.enqueue("styles","htmlwidgets.css"),l=t[s]("id")?t.id:e.uuid(),o=t.name,u=t[s]("dropdown")&&t.dropdown,d=u?"widget widget-dropdown widget-state-default":"widget widget-select",t[s]("class")&&(d+=" "+t["class"]),r=t[s]("style")?'style="'+t.style+'"':"",n=t[s]("extra")?t.extra:"",p=i[s]("selected")?i.selected:[],p instanceof Array||(p=[p]),g="",w=i.options,h=w.length,f=0;h>f;f++)y=w[f],Object===y.constructor?(m=a(y).shift(),b=y[m]):(m=y,b=y),v=-1<p.indexOf(m)?'selected="selected"':"",g+='<option value="'+m+'" '+v+">"+b+"</option>";return c=e.attr_data(t),u?'<span class="'+d+'" '+r+'><select id="'+l+'" name="'+o+'" class="widget-dropdown-select widget-state-default" '+n+" "+c+">"+g+"</select></span>":'<select id="'+l+'" name="'+o+'" class="'+d+'" '+r+" "+n+" "+c+">"+g+"</select>"},widget_menu:function(t,a){var i,l,d,r,n,c;return e.enqueue("styles","htmlwidgets.css"),i=t[s]("id")?t.id:e.uuid(),c=a.menu,l="widget widget-dropdown-menu",t[s]("class")&&(l+=" "+t["class"]),d=t[s]("style")?'style="'+t.style+'"':"",r=t[s]("extra")?t.extra:"",n=e.attr_data(t),'<div id="'+i+'" class="'+l+'" '+d+" "+r+" "+n+">"+c+"</div>"},widget_table:function(l,d){var r,n,c,o,u,g,p,w,f,y,h,m,b,v,x,_,j,k,q,$;for(e.enqueue("styles","htmlwidgets.css"),r=l[s]("id")?l.id:e.uuid(),n="widget widget-table",(!l[s]("stripped")||l.stripped)&&(n+=" stripped"),(!l[s]("responsive")||l.responsive)&&(n+=" responsive"),l[s]("class")&&(n+=" "+l["class"]),c=l[s]("style")?'style="'+l.style+'"':"",o=l[s]("extra")?l.extra:"",p="",h=d.columns,m=a(data_cols),k=m.length,_=0;k>_;_++)p+='<th data-key="'+m[_]+'">'+h[m[_]]+"</th>";for(p="<tr>"+p+"</tr>",w="",j=d.rows.length,x=0;j>x;x++){for(b=d.rows[x],v=a(b),w+="\n<tr>",_=0;k>_;_++)w+='<td data-column="'+h[m[_]]+'">'+b[v[_]]+"</td>";w+="</tr>"}u=e.attr_data(l),g=l[s]("dataTable");var T="",O="";if(g){if(f=Object===l.dataTable.constructor?i(l.dataTable):"",y=["$('#"+r+"_filter').find('input').addClass('widget-text');","$('#"+r+"_length').find('select').addClass('widget-select');"],l[s]("controls"))for($=l.controls instanceof Array?l.controls:[l.controls],q=0;q<$.length;q++)y.push('$(".widget-table-controls", "#'+r+'_wrapper").append($("'+$[q].split('"').join('\\"')+'"));');y=y.join("\n"),O='jQuery(function($){$("#'+r+'").dataTable('+f+').on("change", "input.select_row", function( ){    if ( this.checked ) $(this).closest("tr").addClass("selected");    else $(this).closest("tr").removeClass("selected");});$("#'+r+'").closest(".dataTables_wrapper").addClass("widget-table-wrapper");'+y+"});",t?e.enqueue("scripts","widget-datatable-"+r,[O],["jquery.dataTables"]):T=O}return'<table id="'+r+'" class="'+n+'" '+c+" "+o+" "+u+"><thead>"+p+"</thead><tbody>"+w+"</tbody></table>"+T}};return n});
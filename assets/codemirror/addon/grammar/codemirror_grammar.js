/**
*
*   CodeMirrorGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";var r;"object"==typeof module&&module.exports?module.exports=n.call(e,{}):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e,{}))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(){return n.call(e,{})}):t in e||(e[t]=r=n.call(e,{}))&&"function"==typeof define&&define.amd&&define(function(){return r})}(this,"CodeMirrorGrammar",function(e){"use strict";function t(e){var t=0;return null===e?t=vn:!0===e||!1===e||e instanceof Boolean?t=Sn:an===e?t=xn:(t=Rn[mn.call(e)]||bn,t=wn===t||e instanceof Number?isNaN(e)?On:isFinite(e)?wn:Cn:_n===t||e instanceof String?1===e.length?Ln:_n:En===t||e instanceof Array?En:qn===t||e instanceof RegExp?qn:Dn===t||e instanceof Date?Dn:Pn===t||e instanceof Function?Pn:Tn===t?Tn:bn),t}function n(e,t,n,r){var o,s,l,i,a,u,c=e.length;if(arguments.length<4&&(r=c-1),0>r&&(r+=c),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,i=15&l,a=1&i,u=new Array(l),a&&(u[0]=t(e[n],n,n,r)),o=a;i>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=i;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function r(e,t,n,r,o){var s,l,i,a,u,c=e.length,p=n;if(arguments.length<5&&(o=c-1),0>o&&(o+=c),arguments.length<4&&(r=0),r>o)return p;if(r===o)return t(p,e[r],r);for(i=o-r+1,a=15&i,u=1&a,u&&(p=t(p,e[r],r)),s=u;a>s;s+=2)l=r+s,p=t(t(p,e[l],l),e[l+1],l+1);for(s=a;i>s;s+=16)l=r+s,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return p}function o(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,i=15&l,a=1&i;for(a&&e(t,r,t,n),o=a;i>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=i;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function s(e,n){var r,o,l,i,a=t(e),u=0;if(wn===t(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,Tn===a){o={};for(l in e)e[cn](l)&&e[pn](l)&&(r=t(e[l]),o[l]=Tn===r?n?s(e[l],u>0?u-1:n):e[l]:En===r?n?s(e[l],u>0?u-1:n):e[l].slice():Dn===r?new Date(e[l]):_n&r?e[l].slice():wn&r?0+e[l]:e[l])}else if(En===a)for(i=e.length,o=new Array(i),l=0;i>l;l++)r=t(e[l]),o[l]=Tn===r?n?s(e[l],u>0?u-1:n):e[l]:En===r?n?s(e[l],u>0?u-1:n):e[l].slice():Dn===r?new Date(e[l]):_n&r?e[l].slice():wn&r?0+e[l]:e[l];else o=Dn===a?new Date(e):_n&a?e.slice():wn&a?0+e:e;return o}function l(){var e,n,r,o,i,a,u,c,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=s(m[0]),r=1;h>r;r++)if(e=m[r])for(o in e)if(e[cn](o)&&e[pn](o))if(n[cn](o)&&n[pn](o)){if(p=t(n[o]),f=t(e[o]),Tn===p&&Tn===f)n[o]=l(n[o],e[o]);else if(En===p&&En===f){if(u=n[o],c=e[o],a=c.length,!a)continue;if(u.length)for(i=0;a>i;i++)0>u.indexOf(c[i])&&u.push(c[i]);else n[o]=c.slice()}}else n[o]=s(e[o]);return n}function i(){return!0}function a(e,n){return n||En!==t(e)?[e]:e}function u(e,n){return e=a(e),(n||En!==t(e[0]))&&(e=[e]),e}function c(e,n){return _n&t(n)&&_n&t(e)&&n.length&&n.length<=e.length&&n===e.substr(0,n.length)}function p(e,t,n){return n?e[t]=an:delete e[t],e}function f(e){return(e||"id_")+ ++Yn}function m(e){return(e||"uuid")+"_"+ ++Yn+"_"+(new Date).getTime()}function h(){var e,n,r,o,s,l,i=arguments,a=i.length;for(e=i[0]||{},s=1;a>s;s++)if(n=i[s],Tn===t(n))for(o in n)n[cn](o)&&n[pn](o)&&(r=n[o],l=t(r),e[o]=wn&l?0+r:Dn&l?new Date(r):Nn&l?r.slice():r);return e}function g(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[cn](o)||(t[o]=function(){}),n=t[o],delete t[o],n[un]=h(hn(e[un]),t),n[un][o]=n,n}function d(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function k(e){return"&#"+e.charCodeAt(0)+";"}function $(e,t){return e.replace(Wn,t?d:k)}function y(e){return e.replace(Hn,"\\$1")}function b(e,t){return new RegExp(e,t||"")}function x(e,t,n,r){var o,s,l,i,a=e.pos,u=e.length,c="",p=!!n;if(p){for(r=!!r,s=!1,i=0;u>a&&(o=e[$n](a++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&i++,(!l||2&i)&&(c+=o,i=0)):c+=o;2&i&&(c+=n)}else for(;u>a&&(o=e[$n](a++),t!==o);)c+=o;return e.pos=a,c}function v(e,n,r,o){var s,l,i,a,u,c=!0===r?0:1,p=o?"\\":"$",f=o?92:36;for(_n&t(n)&&(o&&(n=y(n)),n=[n,n,n],c=0),l=e.length,u="",s=0;l>s;)i=e[$n](s),l>s+1&&p===i?(a=e.charCodeAt(s+1),f===a?(u+=p,s+=2):a>=48&&57>=a?(u+=n[c+a-48]||"",s+=2):(u+=i,s+=1)):(u+=i,s+=1);return u}function w(e,n,r,o){if(!e||(wn|qn)&t(e))return e;var s,l=n?n.length||0:0,i="";if(_n&t(o)?i=o:o&&(i=Kn),l&&n===e.substr(0,l)){var a,u,c,s,p,f=e.substr(l),m=f[$n](0),h="";for(s=f.length;s--&&(p=f[$n](s),m!==p);)"i"===p.toLowerCase()&&(h="i");return a=f.substring(1,s),u="^("+a+")",r[u]||(c=b(u,h),r[u]=c),r[u]}return i?(u="^("+y(e)+")"+i,r[u]||(c=b(u,h),r[u]=c),r[u]):e}function C(e,r,o){var s,l="";return _n&t(r)?l=r:r&&(l=Kn),s=n(e.sort(zn),y).join("|"),[b("^("+s+")"+l,o?"i":""),1]}function O(e,n,r,o){var s=t(n);if(wn===s)return n;if(o[e])return o[e];r=r||0;var l,i=0;return n&&n.isCharList&&(i=1,p(n,"isCharList")),l=vn===s?new R(_t,e,n,vn,r):Ln===s?new R(_t,e,n,Ln,r):An&s?new R(_t,e,n,qn,r):_n&s?new R(_t,e,n,i?Mn:_n,r):n,o[e]=l}function S(e,n,r,o,s,l,i,u){if(i[e])return i[e];var p,f,m,h,g,d,k,$=0,y=0,b=1,x=_n&t(o)?!0:!!o;if(p=a(n),m=p.length,1===m)k=O(e,w(p[0],r,l,o),0,i);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)g=t(p[f]),d=t(p[m-1-f]),(Ln!==g||Ln!==d)&&(b=0),En&g||En&d?$=1:(qn&g||qn&d||c(p[f],r)||c(p[m-1-f],r))&&(y=1);if(b&&!x)p=p.slice().join(""),p.isCharList=1,k=O(e,p,0,i);else if(!x||$||y)if($||y){for(f=0;m>f;f++)p[f]=En&t(p[f])?S(e+"_"+f,p[f],r,o,s,l,i):O(e+"_"+f,w(p[f],r,l),f,i);k=m>1?new R(Lt,e,p):p[0]}else{for(u&&(u.keywords=a(n).slice()),p=p.sort(zn),f=0;m>f;f++)p[f]=O(e+"_"+f,w(p[f],r,l),f,i);k=m>1?new R(Lt,e,p):p[0]}else u&&(u.keywords=a(n).slice()),k=O(e,C(p,o,s),0,i)}return i[e]=k}function _(e,n,r,s,l){if(l[e])return l[e];var i=u(n),a=[],p=[];return o(function(n){var o,u,f,m;o=O(e+"_0_"+n,w(i[n][0],r,s),n,l),i[n].length>1?(f=c(i[n][1],r),m=f&&Vn.test(i[n][1]),qn!==o.ptype||_n!==t(i[n][1])||!m&&f?u=O(e+"_1_"+n,w(i[n][1],r,s),n,l):m?(u=new String(i[n][1]),u.regex_pattern=r):u=i[n][1]):u=o,a.push(o),p.push(u)},0,i.length-1),l[e]=new R(Mt,e,[a,p])}function L(e,t){var n=u(e.tokens.slice());o(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function M(e,t,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),i=n(t,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(i),i}function E(e){e.Lex||(e.Lex={}),e.Syntax||(e.Syntax={});var n,r,o,s,i,a,u,c,f,m,h,g=e.Lex,d=e.Syntax,k=[g,d],$=k.length;for(h=0;$>h;){m=k[h++];for(o in m)m[cn](o)&&(n=o.split(":"),r=n[1]&&Bn(n[1]).length?Bn(n[1]):null,n=Bn(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],p(m,o),r&&(r=r[kn](),s=m[n],i=t(s),Tn===i?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=s):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=s):"action"===r&&_n===i?m[n][s]=!0:m[n].tokens=s))),g===m&&(In&t(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(c=s.type=s.type[kn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=g;for(n in m)if(m[cn](n))for(s=m[n];s.extend;)a=s.extend,p(s,"extend"),u=g[a],u&&(In&t(u)&&(u=g[a]={type:"simple",tokens:u}),s=l(u,s));m=g;for(n in m)m[cn](n)&&(s=m[n],s.type?(c=s.type=s.type[kn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],p(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],p(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],p(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,p(s,"comment")):s.block?(s.type="block",s.tokens=s.block,p(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,p(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"]],p(s,"error")):s[cn]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"]],p(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"]],p(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"]],p(s,"outdent")):s.unique?(s.type="action",s.action=["unique",_n&t(s.unique)?["_DEFAULT_",s.unique]:s.unique,!!s["in-context"]],p(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"]],p(s,"push")):s[cn]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"]],p(s,"pop")):s.type="simple","action"===s.type?s.ci=!(!s.caseInsesitive&&!s.ci):"block"===s.type||"comment"===s.type?(s.multiline=s[cn]("multiline")?!!s.multiline:!0,_n&t(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&_n&t(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=d;for(n in m)m[cn](n)&&(s=m[n],Tn!==t(s)||s.type?s.type&&(c=s.type=s.type[kn](),"group"===c&&s.match?(i=t(s.match),_n&i?(f=s.match[kn](),"alternation"===f||"either"===f?(s.type="alternation",p(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",p(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",p(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",p(s,"match")):"oneormore"===f?(s.type="oneOrMore",p(s,"match")):(s.type="sequence",p(s,"match"))):En&i&&(s.type="repeat",s.repeat=s.match,p(s,"match"))):"either"===c?s.type="alternation":"all"===c?s.type="sequence":"lookahead"===c?s.type="positiveLookahead":"grammar"===c&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?p(s,"n-gram"):p(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?p(s,"all"):p(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?p(s,"either"):p(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,p(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,p(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,p(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?p(s,"lookahead"):p(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,p(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?p(s,"subgrammar"):p(s,"grammar")));return e}function T(e,n,r){if(r=r||{},n=n||[],!e||!e.length)return n;var o,s,l,i,a,u,c;for(o=0,s=e.length;s>o;o++)if(a=e[o])if(At===a.type)if(a.autocompletions)for(l=0,i=a.autocompletions.length;i>l;l++)c=a.autocompletions[l],r[cn]("w_"+c.word)||(n.push(c),r["w_"+c.word]=1);else _n===a.token.ptype&&_n&t(a.token.pattern)&&a.token.pattern.length>1&&(r[cn]("w_"+a.token.pattern)||(n.push({word:""+a.token.pattern,meta:a.name,ci:!!a.ci}),r["w_"+a.token.pattern]=1));else if(jt===a.type)T(a.token,n,r);else if(Jt&a.type){l=0,i=a.token.length;do T([u=a.token[l++]],n,r);while(i>l&&(zt&u.type&&1>u.min||Et===u.type))}else zt&a.type&&T([a.token[0]],n,r);return n}function P(e,n,r,o){for(var s;_n&t(s=n[e]||r[e]);)e=s;return o?e:n[e]||r[e]||e}function q(e,t){return e.length>1?o(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Jn.test(o)&&Jn.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function D(e,r,o){var l,i,a,u,c,p,f,m,h,g,d,k,$,v,w,C=!1;if(w=e.modifier?e.modifier:null,m=new String(Bn(e)),m.pos=0,1===m.length)k=""+e,r[k]||o[k]||(r[k]={type:"simple",tokens:e}),e=k;else{for(l=[],i=[],a="",$=[];m.pos<m.length;)if(h=m[$n](m.pos++),Zn.test(h))if(a.length&&(C?(i.length&&(d=i[i.length-1],k=d+"."+a,p=r[k]||o[k],p||(f=P(d,r,o),o[k]=_n&t(f)?new String(f):s(f),o[k].modifier=a),i[i.length-1]=k),C=!1):"0"===a?(r[sn]||(r[sn]={type:"simple",tokens:0}),i.push(sn)):"^^"===a?(r[en]||(r[en]={type:"simple",tokens:Tt}),i.push(en)):"^^1"===a?(r[tn]||(r[tn]={type:"simple",tokens:Pt}),i.push(tn)):"^"===a?(r[nn]||(r[nn]={type:"simple",tokens:Dt}),i.push(nn)):"$"===a?(r[rn]||(r[rn]={type:"simple",tokens:qt}),i.push(rn)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a)),a=""),"."===h)i.length&&m.pos<m.length&&!Zn.test(m[$n](m.pos))?C=!0:a+=h;else if('"'===h||"'"===h)u=x(m,h,"\\",!0),u.length?(k=""+u,r[k]||(r[k]={type:"simple",tokens:u}),i.push(k)):(r[ln]||(r[ln]={type:"simple",tokens:""}),i.push(ln));else if("["===h)u=x(m,"]","\\",!0),k="["+u+"]",r[k]||(r[k]={type:"simple",tokens:b("^(["+("^"===u[$n](0)?"^"+y(u.slice(1)):y(u))+"])")}),i.push(k);else{if("]"===h){a+=h;continue}if("/"===h)u=x(m,h,"\\",!1),g="",u.length&&(m.pos<m.length&&"i"===m[$n](m.pos)&&(m.pos++,g="i"),k="/"+u+"/"+g,r[k]||(r[k]={type:"simple",tokens:b("^("+u+")",g)}),i.push(k));else if("*"===h||"+"===h||"?"===h)i.length?(d=i[i.length-1],k=""+d+h,o[k]||(o[k]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[d]}),i[i.length-1]=k):a+=h;else if("{"===h)i.length?(c=x(m,"}",!1),c=n(c.split(","),Bn),c[0]=c[0].length?parseInt(c[0],10)||0:0,0>c[0]&&(c[0]=0),2>c.length?c.push(c[0]):c[1]=c[1].length?parseInt(c[1],10)||yn:yn,0>c[1]&&(c[1]=0),d=i[i.length-1],k=""+d+["{",c[0],",",isFinite(c[1])?c[1]:"","}"].join(""),o[k]||(o[k]={type:"repeat",repeat:[c[0],c[1]],tokens:[d]}),i[i.length-1]=k):a+=h;else{if("}"===h){a+=h;continue}"&"===h||"!"===h?i.length?(d=i[i.length-1],k=""+d+h,o[k]||(o[k]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[d]}),i[i.length-1]=k):a+=h:"|"===h?(C=!1,i=q(i),i.length>1?(k=""+i.join(" "),o[k]||(o[k]={type:"sequence",tokens:i}),l.push(k)):i.length?l.push(i[0]):a+=h,i=[]):"("===h?($.push([i,l,a]),i=[],l=[],a=""):")"===h&&(i=q(i),i.length>1?(k=""+i.join(" "),o[k]||(o[k]={type:"sequence",tokens:i}),l.push(k)):i.length&&l.push(i[0]),i=[],l=q(l,1),l.length>1?(k=""+l.join(" | "),o[k]||(o[k]={type:"alternation",tokens:l})):l.length&&(k=l[0]),l=[],v=$.pop(),i=v[0],l=v[1],a=v[2],d=k,k="("+d+")",o[k]||(o[k]=s(P(d,r,o))),i.push(k))}}else a+=h;a.length&&(C?(i.length&&(d=i[i.length-1],k=d+"."+a,p=r[k]||o[k],p||(f=P(d,r,o),o[k]=_n&t(f)?new String(f):s(f),o[k].modifier=a),i[i.length-1]=k),C=!1):"0"===a?(r[sn]||(r[sn]={type:"simple",tokens:0}),i.push(sn)):"^^"===a?(r[en]||(r[en]={type:"simple",tokens:Tt}),i.push(en)):"^^1"===a?(r[tn]||(r[tn]={type:"simple",tokens:Pt}),i.push(tn)):"^"===a?(r[nn]||(r[nn]={type:"simple",tokens:Dt}),i.push(nn)):"$"===a?(r[rn]||(r[rn]={type:"simple",tokens:qt}),i.push(rn)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a))),a="",i=q(i),i.length>1?(k=""+i.join(" "),o[k]||(o[k]={type:"sequence",tokens:i}),l.push(k)):i.length&&l.push(i[0]),i=[],l=q(l,1),l.length>1?(k=""+l.join(" | "),o[k]||(o[k]={type:"alternation",tokens:l}),e=k):l.length&&(e=l[0]),l=[]}return w&&(r[e]||o[e])&&((r[e]||o[e]).modifier=w),e}function F(e,s,l,i,c,p,f,m,h,g,d){var k,$,y,b,x,v,w,C=null,O=null,E=null;if(Tt===e||Pt===e||Dt===e||qt===e)return new B(e,Tt===e?en:Pt===e?$T_FBNL$:Dt===e?nn:rn,e,O);if(!1===e||0===e)return new B(Ft,sn,0,O);if(""===e)return new B(Nt,ln,"",O);if(null===e)return new B(At,on,vn,O,E);if(En&t(e)&&(y=e,e="NGRAM_"+y.join("_"),i[e]||(i[e]={type:"ngram",tokens:y})),e=""+e,m[e])return m[e];if(x=P(e,l,i),_n&t(x)&&(x=D(x,l,i),x=l[x]||i[x]||null),!x)return null;if(k=x.type?Xt[x.type[kn]().replace(Un,"")]||At:At,O=x.msg||null,E=x.modifier||null,$=x.tokens,At&k){if(Tt===$||Pt===$||Dt===$||qt===$||!1===$||0===$)return C=new B($||Ft,e,$||0,O),m[e]=C,C;if(""===$)return C=new B(Nt,e,"",O),m[e]=C,C;if(null===$)return C=new B(At,e,vn,O,E),m[e]=C,C;if(!$)return null}if(Et&k)x[cn]("action")?"nop"===x.action[0]?x.action[0]=$t:"error"===x.action[0]?x.action[0]=yt:"context-start"===x.action[0]?x.action[0]=xt:"context-end"===x.action[0]?x.action[0]=vt:"push"===x.action[0]?x.action[0]=wt:"pop"===x.action[0]?x.action[0]=Ct:"unique"===x.action[0]?x.action[0]=bt:"indent"===x.action[0]?x.action[0]=Ot:"outdent"===x.action[0]&&(x.action[0]=St):x[cn]("nop")?x.action=[$t,x.nop,!!x["in-context"]]:x[cn]("error")?x.action=[yt,x.error,!!x["in-context"]]:x[cn]("context")?x.action=[x.context?xt:vt,x.context,!!x["in-context"]]:x[cn]("context-start")?x.action=[xt,x["context-start"],!!x["in-context"]]:x[cn]("context-end")?x.action=[vt,x["context-end"],!!x["in-context"]]:x[cn]("push")?x.action=[wt,x.push,!!x["in-context"]]:x[cn]("pop")?x.action=[Ct,x.pop,!!x["in-context"]]:x[cn]("unique")?x.action=[bt,_n&t(x.unique)?["_DEFAULT_",x.unique]:x.unique,!!x["in-context"]]:x[cn]("indent")?x.action=[Ot,x.indent,!!x["in-context"]]:x[cn]("outdent")&&(x.action=[St,x.outdent,!!x["in-context"]]),x.nop&&(x.action[0]=$t),C=new B(Et,e,x.action.slice(),O,E),C.ci=!!x.caseInsensitive||x.ci,m[e]=C;else if($=a($),At&k){w=x.autocomplete?M(x,Nn&t(x.autocomplete)?a(x.autocomplete):$,e,d):null;var T={};if(v="undefined"!=typeof x.combine?x.combine:En&t(x.tokens)?!0:!1,C=new B(At,e,S(e,$.slice(),s,v,!(!x.caseInsensitive&&!x.ci),p,f,T),O,E,null,w),T.keywords&&(C.keywords=T.keywords.join("|")),m[e]=C,null!=x.except){var q,N,A=a(x.except),I=A.length,R=[];for(q=0;I>q;q++)A[q]&&(N=F(A[q],s,l,i,c,p,f,m,h,g,d),N&&R.push(N));R.length&&(C.except=R)}}else It&k?(Rt===k&&L(x,g),C=new B(k,e,_(e,$.slice(),s,p,f),O),C.empty=x[cn]("empty")?!!x.empty:!0,C.mline=x[cn]("multiline")?!!x.multiline:!0,C.esc=x[cn]("escape")?x.escape:!1,C.inter=!!c[e+".inside"],Rt===k&&x.interleave&&h.push(G(C)),E&&(C.modifier=E),m[e]=C):Qt&k&&(Vt===k?m[e]=new B(Vt,e,$,O,E):Kt===k?(b=u($),C=n(b,function(t,n){return new B(Kt,e+"_NGRAM_"+n,null,O,E)}),m[e]=C,o(function(e){C[e].token=a(r(b[e],function(e,t){return e.concat(F(t,s,l,i,c,p,f,m,h,g,d))},[]))},0,b.length-1)):(Wt===k||Zt===k?C=new B(k,e,null,O,E):zt&k&&En&t(x.repeat)?(C=new B(zt,e,null,O,E),C.min=x.repeat[0],C.max=x.repeat[1]):Gt===k?(C=new B(Gt,e,null,O,E),C.min=0,C.max=1):Ut===k?(C=new B(Ut,e,null,O,E),C.min=0,C.max=yn):Yt===k?(C=new B(Yt,e,null,O,E),C.min=1,C.max=yn):C=jt===k?new B(jt,e,null,O,E):new B(Bt,e,null,O,E),m[e]=C,C.token=a(r($,function(e,t){return e.concat(F(t,s,l,i,c,p,f,m,h,g,d))},[]))));return m[e]}function N(e,t){var n,r,o=e.Style,s=e.Lex,l=e.Syntax,i=[],a={};for(n in o)o[cn](n)&&(r=s[n]||l[n],!r||"block"!=r.type&&"comment"!==r.type||(t&&(o[n+".inside"]||o[n])?(n=o[n+".inside"]||o[n],a[cn](n)||(i.push(n),a[n]=1)):t||a[cn](n)||(i.push(n),a[n]=1)));return i}function A(e){var n={};return e.Lex=e.Lex||{},e.Syntax=e.Syntax||{},e=E(e),e.Parser&&e.Parser.length&&o(function r(s,l){var i,a,u,c=l[s];n[c]||(En&t(c)&&(i=c,c="NGRAM_"+i.join("_"),e.Syntax[c]||(e.Syntax[c]={type:"ngram",tokens:i})),a=P(c,e.Lex,e.Syntax),_n&t(a)&&(a=D(a,e.Lex,e.Syntax),a=e.Lex[a]||e.Syntax[a]||null),a&&(n[c]=a,u=a.type?Xt[a.type[kn]().replace(Un,"")]||At:At,Qt&u&&o(r,0,a.tokens.length-1,a.tokens)))},0,e.Parser.length-1,e.Parser),e}function I(e){var n,o,l,i,a,u,c,p,f,m,h,g,d,k;return e.__parsed?e:(n=e.RegExpID||null,l=e.Extra?s(e.Extra):{},i=e.Style?s(e.Style):{},a=null,u=null,c=e.Lex?s(e.Lex):{},p=e.Syntax?s(e.Syntax):{},f={},m={},h={},d={},k={},g=[],o=e.Parser?s(e.Parser):[],e=E({Style:i,Fold:a,Match:u,Lex:c,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),e.$parser=r(o,function(e,r){var o=F(r,n,c,p,i,f,m,h,g,d,k)||null;return o&&(En&t(o)?e=e.concat(o):e.push(o)),e},[]),e.$interleaved=g&&g.length?g:null,e.$comments=d,e.$autocomplete=k&&k.autocomplete&&k.autocomplete.length?k.autocomplete:null,e.__parsed=1,e)}function R(e,n,r,o,s){var l,i,a=this;l=a.type=e,a.name=n,a.pattern=r,i=a.ptype=o||_n,a.key=s||0,Lt===l?a.key=!1!==s:Mt===l?a.pattern[0]=new R(Lt,n+"_Start",r[0],null,!1):vn===i?a.pattern=null:qn===i&&(a.pattern=qn&t(r)?[r,0]:[r[0],r[1]||0])}function j(e,n,r,o){var s,l,i,a,u,c,p,f,m,h,g,d=e,k=d.type,$=d.pattern,y=d.key;if(Mt===k){if(s=d.name,i=$[0],a=$[1],c=j(i,n,r,o))return u=a[c[0]],f=t(u),m=i.pattern[c[0]].ptype,qn===m&&Fn&f&&(u.regex_pattern?(p=v(u,c[1],0,1),u=new R(_t,s+"_End",w(p,u.regex_pattern,{}),qn)):(p=wn&f?c[1][u+1]:v(u,c[1]),u=new R(_t,s+"_End",p,p.length>1?_n:Ln))),u}else if(Lt===k){for(h=0,g=$.length;g>h;h++)if(p=j($[h],n,r,o))return y?[h,p[1]]:p}else{if(l=d.ptype,vn===l)return!1!==r&&n.end(),[y,""];if(qn===l){if(p=n.slice(n.pos).match($[0]),p&&0===p.index)return!1!==r&&n.mov(p[$[1]||0].length),[y,$[1]>0?p[$[1]]:p]}else if(Mn===l){if(!0===o){p=-1;var b,x;for(g=$.length-1;g>=0;g--)b=n.indexOf($[$n](g),n.pos),b>-1&&(-1===p||p>b)&&(p=b,x=$[$n](g));if(p>-1)return!1!==r&&(n.pos=p+1),[y,x]}else if(p=n[$n](n.pos)||null,p&&-1<$.indexOf(p))return!1!==r&&n.mov(1),[y,p]}else if(Ln===l){if(!0===o){if(p=n.indexOf($,n.pos),p>-1)return!1!==r&&(n.pos=p+1),[y,$]}else if(p=n[$n](n.pos)||null,$===p)return!1!==r&&n.mov(1),[y,p]}else if(_n===l)if(g=$.length,!0===o){if(p=n.indexOf($,n.pos),p>-1)return!1!==r&&(n.pos=p+g),[y,$]}else if($===n.substr(n.pos,g))return!1!==r&&n.mov(g),[y,$]}return!1}function B(e,t,n,r,o,s,l,i){var a=this;a.type=e,a.name=t,a.token=n,a.modifier=o||null,a.except=s||null,a.autocompletions=l||null,a.keywords=i||null,a.pos=null,a.msg=r||null,a.$msg=null,a.status=0,a.empty=!1,a.ci=!1,a.mline=!0,a.esc=!1,a.inter=!1,a.found=0,a.min=0,a.max=1,a.i0=0,a.$id=null}function z(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function G(e,t,n,r){var o=new B(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=mt),n&&(o.modifier=n),r&&(o.$id=r),o}function U(e){var t=e.name;return e.$msg?e.$msg:e.status&mt?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function Y(e,t,n,r,o,s,l){e.status&pt&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||U(s)])}function H(e,t,n){return t<e.length?e.splice(t,0,n):e.push(n),e}function W(e,t,n,r){var o,s,l,i,a=e.stack,u=0,c=1/0,p=-1;if(s=t.pos,t.spc(),l=t.pos,o=a.length,t.pos<t.length){for(;o>u&&(i=a[o-u-1],i.$id===r.$id);){for(;!(Z(i,t,e,n)||(t.pos=i.pos>t.pos?i.pos:t.pos+1,a.length=o,t.pos>=t.length)););a.length=o,t.pos<t.length&&c>t.pos?(c=t.pos,p=o-u):c===t.pos&&o-u>p&&(c=t.pos,p=o-u),t.pos=l,u++}c<t.length?(t.pos=c,a.length=p):t.end()}return l>=s&&t.pos===l}function Z(e,t,n,r){if(!e)return!1;var o=e.type,s=Qt&o?Q:It&o?J:Et&o?K:V;return s(e,t,n,r)}function K(e,n,r,o){var s,l,i,a,u,c,p,f,m,h,g,d,k,$,y,b,x=e,w=x.token||null,C=x.ci,O=x.name,S=!(r.status&pt);if(x.status=0,x.$msg=null,S||!w||!o||!o.pos)return!0;if(b=!!(It&o.T),$t===w[0]||b&&!o.block)return!0;if(s=w[0],l=w[1],k=w[2],u=x.msg,c=r.queu,p=r.symb,f=r.ctx,b?(y=o.block.match||o.block.str,m=o.block.pos[0][0],h=o.block.pos[0][1],g=o.block.pos[0][2],d=o.block.pos[0][3]):(y=o.match||o.str,m=o.pos[0],h=o.pos[1],g=o.pos[2],d=o.pos[3]),yt===s)return!u&&_n&t(l)&&(u=l),x.$msg=u?v(u,y,!0):'Error "'+O+'"',Y(r,m,h,g,d,x,U(x)),x.status|=ht,!1;if(vt===s)f.length&&f.shift();else if(xt===s)f.unshift({symb:{},queu:[]});else if(Ct===s){if(k){if(!f.length)return!0;c=f[0].queu}if(l){if(l=v(l,y),C&&(l=l[kn]()),!c.length||l!==c[0][0])return c.length?(x.$msg=u?v(u,[c[0][0],l],!0):'Tokens do not match "'+c[0][0]+'","'+l+'"',$=U(x),Y(r,c[0][1],c[0][2],c[0][3],c[0][4],x,$),Y(r,m,h,g,d,x,$),c.shift()):(x.$msg=u?v(u,["",l],!0):'Token does not match "'+l+'"',$=U(x),Y(r,m,h,g,d,x,$)),x.status|=ht,!1;c.shift()}else c.shift()}else if(wt===s&&l){if(k){if(!f.length)return!0;c=f[0].queu}l=v(l,y),C&&(l=l[kn]()),x.$msg=u?v(u,l,!0):'Token does not match "'+l+'"',c.unshift([l,m,h,g,d,U(x)])}else if(bt===s){if(k){if(!f.length)return!0;p=f[0].symb}if(i=l[1],a=l[0],i=v(i,y,!0),C&&(i=i[kn]()),p[cn](a)||(p[a]={}),p[a][cn](i))return x.$msg=u?v(u,i,!0):'Duplicate "'+i+'"',$=U(x),Y(r,p[a][i][0],p[a][i][1],p[a][i][2],p[a][i][3],x,$),Y(r,m,h,g,d,x,$),x.status|=ht,!1;p[a][i]=[m,h,g,d]}return!0}function V(e,t,n,r,o){var s,l,i=e,a=i.token,u=i.modifier,c=i.type,p=i.name,f=i.except,m=n.line,h=t.pos,g=null,d=!1;if(i.status&=dt,i.$msg=o?null:i.msg||null,i.pos=t.pos,f&&!o){l=et(n,t);for(var k=0,$=f.length;$>k;k++)if(s=f[k],i!==s&&At===s.type&&V(s,t,n,r,1))return i.pos=s.pos,et(n,t,l),!1}return Tt===c?d=0===n.line:Pt===c?d=n.bline+1===n.line:Dt===c?d=t.sol():qt===c?(t.spc(),t.eol()?d=p:(i.pos=t.pos,t.bck(h))):Ft===c?(i.status=0,d=!0):Nt===c?(i.status&mt&&t.spc()&&!t.eol()?(i.pos=t.pos,t.bck(h),i.status|=ht):d=!0,i.status&=gt):vn===a?(t.end(),d=u||p):(g=j(a,t))&&(g=g[1],d=u||p),o?d:(!1!==d&&(r.T=c,r.id=p,r.type=d,r.str=t.sel(h,t.pos),r.match=g,r.pos=[m,h,m,t.pos]),!d&&i.status&&i.$msg&&(i.$msg=v(i.$msg,p,!0)),d)}function J(e,t,n,r){var o,s,l,i,a,u,c,p,f,m,h,g,d,k,$,y,b,x,w,C,O,S,_=e,L=_.name,M=_.type,E=_.modifier,T=_.token,P=_.mline,q=_.inter,D=q?L+".inside":L,F=_.esc,N=!!F,A="",I="",R="",B="",z=_.$id||L,U=n.stack,Y=n.outer,W=Y&&Y[2],K=Y&&Y[1];if(_.status&=dt,_.$msg=_.msg||null,_.pos=t.pos,C=n.line,O=t.pos,Rt===M&&(_.status&=gt),$=_.status&mt,l=0,i=0,n.block&&n.block.name===L?(i=1,l=1,k=D,o=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,A=n.block.s,I=n.block.i):!n.block&&(o=j(T,t))&&(i=1,k=L,b=t.pos,p=[C,O],m=[[C,b],[C,b]],f=[C,b],A=t.sel(O,b),I="",B="",n.block={name:L,end:o,sp:p,ip:m,ep:f,s:A,i:I,e:B}),i){if(w=U.length,s=vn===o.ptype,y=s||_.empty,q){if(s&&l&&t.sol())return _.status&=gt,n.block=null,!1;if(!l)return b=t.pos,r.T=M,r.id=L,r.type=E||k,r.str=t.sel(O,b),r.match=null,r.pos=[C,O,C,b],H(U,w,G(_,$,0,z)),E||k}if(b=t.pos,a=K?s&&t.eol():j(o,t),c=P,u=0,a)k=s?D:L,B=t.sel(b,t.pos);else if(x=t.pos,g=!1,K||N||Mn!==o.ptype&&Ln!==o.ptype&&_n!==o.ptype){for(;!t.eol();){if(K){if(Z(K,t,W,r)){if(t.pos>x){s&&(a=1);break}return!0}if(s){d=t.nxt(1),R+=d;continue}}if(b=t.pos,!g&&j(o,t)){q&&t.pos>b&&b>x?(k=D,t.bck(b),u=1):(k=L,a=1),B=t.sel(b,t.pos);break}d=t.nxt(1),R+=d,g=N&&!g&&F===d,b=t.pos}s&&t.eol()&&(a=1)}else(S=j(o,t,!0,!0))?q&&t.pos>b+S[1].length?(k=D,t.mov(-S[1].length),u=1,R=t.sel(b,t.pos)):(k=L,a=1,R=t.sel(b,t.pos-S[1].length),B=S[1]):(t.end(),k=D,u=1,R=t.sel(b,t.pos));return c=P||N&&g,I+=R,m[1]=[C,b],f=[C,t.pos],a&&!y&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(a||!c&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=I,n.block.e=B,H(U,w,G(_,$,0,z))),r.T=M,r.id=L,r.type=E||k,r.str=t.sel(O,t.pos),r.match=null,r.pos=[C,O,f[0],f[1]],_.pos=t.pos,n.block||(h=A+I+B,r.block={str:h,match:[h,I,A,B],part:[h,A,I,B],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),E||k)}return _.status&&_.$msg&&(_.$msg=v(_.$msg,L,!0)),!1}function Q(e,t,n,r){var o,s,l,i,a,u,c,p,m,h,g,d,k,$,y,b,x=e,v=x.type,w=(x.name,x.token),C=w.length,O=x.modifier;if(x.status&=dt,x.$msg=x.msg||null,d=n.stack,p=t.pos,m=d.length,x.pos=t.pos,u=0,c=0,Vt===v){x.status&=dt;var S=new String(w[0]),_=d.length?d[d.length-1]:null;return S.subgrammar=1,S.next=_?new B(Wt,_.name,[_]):null,S.required=_?_.status&mt:0,S}if(jt===v){for($=f(),x.status|=mt,k=[],b=et(n,t),g=0,h=g;C>h;h++){if(o=G(w[h],1,O,$),s=Z(o,t,n,r),x.pos=o.pos,o.status&mt&&(u++,k.push(U(o))),!1!==s)return s;o.status&ht&&(c++,et(n,t,b))}return u>0?x.status|=mt:x.status&=gt,C===c&&u>0?x.status|=ht:x.status&=dt,x.status&&!x.$msg&&k.length&&(x.$msg=k.join(" | ")),!1}if(Jt&v){y=!!(v&Bt),$=x.$id||f(),y?x.status|=mt:x.status&=gt,b=et(n,t),g=0;do o=G(w[g++],y,O,$),s=Z(o,t,n,r);while(C>g&&(!0===s&&Ht&o.type||!1===s&&!(o.status&mt)));if(x.pos=o.pos,!1!==s){if(!0!==s||Ft!==o.type)for(h=C-1;h>=g;h--)H(d,m+C-h-1,G(w[h],1,O,$));return s.subgrammar&&C>g&&(s.next=new B(Wt,w[g].name,[w[g]]),s.required=w[g].status&mt),s}return o.status&ht?(y?x.status|=ht:x.status&=dt,et(n,t,b)):y&&o.status&mt&&(x.status|=ht),x.status&&!x.$msg&&(x.$msg=U(o)),!1}if(Ht&v)return Vt&w[0].type?!0:(b=et(n,t,null,!1),s=Z(G(w[0],0),t,n,r),et(n,t,b),Zt===v?!1===s:!1!==s);for($=x.$id||f(),l=x.found,i=x.min,a=x.max,x.status=0,k=[],b=et(n,t),h=0;C>h;h++){if(o=G(w[h],1,O,$),s=Z(o,t,n,r),x.pos=o.pos,!1!==s){if(++l,a>=l)return x.found=l,H(d,m,G(x,0,0,f())),x.found=0,s;break}o.status&mt&&(u++,k.push(U(o))),o.status&ht&&et(n,t,b)}return i>l&&(x.status|=mt),(l>a||i>l&&u>0)&&(x.status|=ht),x.status&&!x.$msg&&k.length&&(x.$msg=k.join(" | ")),!1}function X(e,t){var n=this;n.id=e?m("state"):"state",t instanceof X?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=t.stack.slice(),n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new X(e,t.outer[2])]:null,n.status&pt?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=[],n.token=null,n.block=null,n.outer=null,n.status&pt?(n.queu=[],n.symb={},n.ctx=[],n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function et(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack.length>n[3]&&(e.stack.length=n[3]),t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack.length,t?t.pos:1/0],!1===r&&(e.status=0),n)}function tt(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function nt(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?gn(0,r.pos+e):dn(r.length,r.pos+e),r},r.bck=function(e){return r.pos=gn(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||nt.$NONSPC$;r.pos<r.length&&t.test(n=r[$n](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[$n](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||nt.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function rt(e,t,n,r,o){var s,l,i;for(null==t&&(t=e.search(nt.$NONSPC$),-1==t&&(t=e.length)),s=r||0,l=o||0;;){if(i=e.indexOf("	",s),0>i||i>=t)return l+(t-s);l+=i-s,l+=n-l%n,s=i+1}}function ot(e,r){return Nn&t(e)&&(e=b("\\b("+n(a(e).sort(zn),y).join("|")+")\\b")),!1===r?function(t){return!t||!e.test(t)}:function(t){return!!t&&e.test(t)}}function st(e,t,n){for(;;){n.lastIndex=e.col;var r=n.exec(e.text);if(!r){if(e.next()){e.text=e.line(e.row);continue}return}{if(t(e.token(e.row,r.index+1)))return e.col=r.index+r[0].length,r;e.col=r.index+1}}}function lt(e,t,n,r,o,s){for(var l,i,a;;){if(l=e.text.indexOf(o,e.col),-1===l){if(e.next()){e.text=e.line(e.row);continue}return}if(t(e.token(e.row,l+1)))return i=e.text.lastIndexOf(s,l),a=i>-1&&!nt.$NOTEMPTY$.test(e.text.slice(i+1,l)),e.col=l+1,a?"autoclosed":"regular";e.col=l+1}}function it(e,t,n,r,o,s,l,i,a,u){if(-1===e){var c,p,f,m,h,g,d,k,$=1,y=t.first(),b=(s.length,l.length,!1===o);
e:for(c=n;c>=y;--c)for(p=t.line(c),f=p.length,m=c===n?r-1:f;;){if(0>m)break;if(h=p.lastIndexOf(s,m),g=p.lastIndexOf(l,m),0>h&&0>g)break;if(m=gn(h,g),b||u||t.token(c,m+1)==o)if(m===g)++$;else if(0===--$){d=c,k=m;break e}--m}return null==d||a&&d===n&&k===r?!1:[d,k,n,r]}var c,p,f,m,h,g,x,v,$=1,w=t.last(),b=(s.length,l.length,!1===o);e:for(c=n;w>=c;++c)for(p=t.line(c),f=p.length,m=c===n?r:0;;){if(m>=f)break;if(h=p.indexOf(s,m),g=p.indexOf(l,m),0>h&&0>g)break;if(0>h&&(h=f),0>g&&(g=f),m=dn(h,g),b||u||t.token(c,m+1)==o)if(m===h)++$;else if(0===--$){x=c,v=m;break e}++m}return null==x||a&&n===x&&v===r?!1:[n,r,x,v]}function at(e,t,n){var r=n.text,o=n.meta,s=n.start,l=n.end,i=t.list.maxlen-r.length-o.length+5;e.innerHTML=['<span class="cmg-autocomplete-keyword">',$(r.slice(0,s)),'<strong class="cmg-autocomplete-keyword-match">',$(r.slice(s,l)),"</strong>",$(r.slice(l)),"</span>",new Array(1+i).join("&nbsp;"),'<strong class="cmg-autocomplete-keyword-meta">',$(o),"</strong>","&nbsp;"].join(""),e.className=(e.className&&e.className.length?e.className+" ":"")+"cmg-autocomplete-keyword-hint",e.style.position="relative",e.style.width="100%",e.style.maxWidth="120%"}function ut(e,t,n){function r(e,t){var o;return o={Mode:r,startState:function(){return{parser:r.$parser,state:new X,inner:{},name:null}},copyState:function(e){return{parser:e.parser,state:new X(0,e.state),inner:e.inner,name:e.name}},token:function(e,t){var n=nt(e.string,e.start,e.pos),r=t.parser.get(n,t).type;return e.pos=n.pos,r},indent:function(r,o,s){return r.parser.indent(r.state,o,s,e,t,n)},fold:r.foldType,lineComment:r.$parser.LC,blockCommentStart:r.$parser.BCS,blockCommentEnd:r.$parser.BCE,blockCommentContinue:r.$parser.BCC,blockCommentLead:r.$parser.BCL,electricInput:r.$parser.$grammar.$extra.electricInput||!1,electricChars:r.$parser.$grammar.$extra.electricChars||!1},r.mode=o,o}return n=n||tr,r.$id=m("codemirror_grammar_mode"),r.$parser=new sr.Parser(I(e),t),r.$parser.Mode=r,r.options=function(e,t,n){n=n||{};var o=e.getTokenAt(t).state,s=o&&o.parser||r.$parser;return n.lineComment=s.LC,n.blockCommentStart=s.BCS,n.blockCommentEnd=s.BCE,n.blockCommentContinue=s.BCC,n.blockCommentLead=s.BCL,n.electricInput=s.$grammar.$extra.electricInput||!1,n.electricChars=s.$grammar.$extra.electricChars||!1,n},r.supportGrammarAnnotations=!1,r.validator=function o(e,t){return r.supportGrammarAnnotations&&r.$parser&&e&&e.length?r.$parser.validate(e,o.options||t||{},n):[]},r.linter=r.validator,r.supportAutoCompletion=!0,r.autocompleter=function s(e,t){if(r.supportAutoCompletion){var o=e.getTokenAt(e.getCursor()).state,l=o&&o.parser||r.$parser;return t=s.options||t||{},t[cn]("renderer")||(t.renderer=s.renderer||at),l.autocomplete(e,t,n)}},r.autocompleter.renderer=at,r.supportCodeFolding=!0,r.foldType="fold_"+r.$id,r.folder=function(e,t){if(r.supportCodeFolding){var o,s=e.getTokenAt(t).state,l=s&&s.parser||r.$parser;if(o=l.fold(e,t,n))return{from:n.Pos(o[0],o[1]),to:n.Pos(o[2],o[3])}}},r.supportCodeMatching=!0,r.matchType="match_"+r.$id,r.matcher=function l(e){if(r.supportCodeMatching){if(l.clear(e),e.state.$highlightPending)return;var t=e.getTokenAt(e.getCursor()).state,o=t&&t.parser||r.$parser;e.state.$highlightPending=!0,setTimeout(function(){e.operation(function(){e.state.$highlightPending=!1;var t,s=l.options||{},i=s.maxHighlightLineLength||1e3,a=[],u=e.listSelections(),c="CodeMirror-matchingtag",p="CodeMirror-nonmatchingbracket",f=0;for(u.length;1>f;f++)t=o.match(e,u[f].to(),n),null!=t&&(!1===t?(u[f].empty()?(t=u[f].to(),t=[n.Pos(t.line,t.ch-1),t]):t=[u[f].from(),u[f].to()],a.push(e.markText(t[0],t[1],{className:p}))):!1===t.match?a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:p})):"end"===t.match&&e.getLine(t[0]).length<=i?(a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:c})),e.getLine(t[4]).length<=i&&a.push(e.markText(n.Pos(t[4],t[5]),n.Pos(t[6],t[7]),{className:c}))):"start"===t.match&&e.getLine(t[4]).length<=i&&(a.push(e.markText(n.Pos(t[4],t[5]),n.Pos(t[6],t[7]),{className:c})),e.getLine(t[0]).length<=i&&a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:c}))));e.state[r.matchType]=a})},50)}},r.matcher.clear=function(e){e.operation(function(){var t=e.state[r.matchType];if(e.state[r.matchType]=null,t&&t.length)for(var n=0,o=t.length;o>n;n++)t[n].clear()})},r.submode=function(e,t){r.$parser.subparser(e,t.Mode.$parser)},r.dispose=function(){r.$parser&&r.$parser.dispose(),r.$parser=r.validator=r.linter=r.autocompleter=r.folder=r.matcher=r.mode=null},r}var ct=1,pt=2,ft=32,mt=4,ht=8,gt=~mt,dt=~ht,kt=mt|ht,$t=0,yt=4,bt=8,xt=16,vt=17,wt=32,Ct=33,Ot=128,St=129,_t=2,Lt=4,Mt=8,Et=4,Tt=8,Pt=9,qt=16,Dt=32,Ft=128,Nt=256,At=512,It=1024,Rt=1025,jt=2048,Bt=4096,zt=8192,Gt=8193,Ut=8194,Yt=8195,Ht=16384,Wt=Ht,Zt=16385,Kt=32768,Vt=65536,Jt=Bt|Kt,Qt=jt|Bt|zt|Ht|Kt|Vt,Xt={action:Et,simple:At,block:It,comment:Rt,subgrammar:Vt,alternation:jt,sequence:Bt,repeat:zt,zeroorone:Gt,zeroormore:Ut,oneormore:Yt,positivelookahead:Wt,negativelookahead:Zt,ngram:Kt},en="$|SOF|$",tn="$|NONBLANK|$",nn="$|SOL|$",rn="$|EOL|$",on="$|ENDLINE|$",sn="$|EMPTY|$",ln="$|NONSPACE|$",an=void 0,un="prototype",cn="hasOwnProperty",pn="propertyIsEnumerable",fn=Object[un],mn=fn.toString,hn=Object.create,gn=Math.max,dn=Math.min,kn="toLowerCase",$n="charAt",yn=1/0,bn=4,xn=8,vn=16,wn=32,Cn=33,On=34,Sn=64,_n=128,Ln=129,Mn=130,En=256,Tn=512,Pn=1024,qn=2048,Dn=4096,Fn=_n|wn,Nn=_n|En,An=qn|En,In=_n|En|qn,Rn={"[object Number]":wn,"[object String]":_n,"[object Array]":En,"[object RegExp]":qn,"[object Date]":Dn,"[object Function]":Pn,"[object Object]":Tn},jn=/^\s+|\s+$/g,Bn=String[un].trim?function(e){return e.trim()}:function(e){return e.replace(jn,"")},zn=function(e,t){return t.length-e.length},Gn=/\r\n|\r|\n/g,Un=/[\-_]/g,Yn=0,Hn=/([.*+?^${}()|[\]\/\\\-])/g,Wn=/[&"'<>]/g,Zn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Kn="(\\s|\\W|$)",Vn=/(\\\\)*?\\\d/,Jn=/[*+]$/;nt.$SPC$=/^[\s\u00a0]+/,nt.$NONSPC$=/[^\s\u00a0]/,nt.$NOTEMPTY$=/\S/,nt.$SPACE$=/^\s*/;var Qn=g({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,i,a,u,c,p,f,m,h,g,d,k,$,y,b,x=this,v=x.$grammar,w=v.Style,C=x.DEF,O=x.ERR,S={},_=x.$n$,L=x.$t$,M=x.$v$,E=v.$interleaved,T=v.$parser,P=T.length,q=E?E.length:0,D=t.outer,F=D&&D[2],N=D&&D[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.stack,i=t.line,a=e.pos,m=!1,g=!0,h=!1,d=!1,D&&x===D[0]){if(S[_]=null,S[L]=C,S[M]=null,N){if(s=new z,Z(N,e,F,s))return t.outer=null,{parser:x,state:F};for(e.nxt(1);!e.eol();){if(Z(N,e,F,s)){if(e.pos>a)break;return t.outer=null,{parser:x,state:F}}e.nxt(1)}}else e.spc(),e.eol()?d=!0:e.end();return S[M]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(d||t.$eol$),S}if(l.length&&qt===l[l.length-1].type&&e.sol()&&l.pop(),(!l.length||Nt!==l[l.length-1].type&&null==t.block)&&e.spc()){if(l.length&&Vt===l[l.length-1].type)return e.bck(a),r=l.pop(),m=Z(r,e,t,s),k=""+m,x.$subgrammars[k]?($=x.$subgrammars[k],y=new X(1,n[k]?n[k]:t.status),F=t):($=x,y=new X,F=t),y.outer=[x,m.next,F],{parser:$,state:y,toInner:k};g=!1,d=!0}if(S[_]=null,S[L]=C,S[M]=null,g)for(s=new z,u=0;g&&(l.length||P>u)&&!e.eol();){if(p=e.pos,f=l.length,N){if(e.spc(),Z(N,e,F,s))return e.pos>p?(S[M]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,S):(t.outer=null,{parser:D[0],state:F,fromInner:t});e.bck(p)}if(b=!1,q&&!t.block)for(c=0;q>c;c++)if(r=E[c],m=Z(r,e,t,s),!1!==m){b=!0;break}if(g&&!b){if(!l.length&&u>=P)break;r=l.length?l.pop():T[u++],m=Z(r,e,t,s)}if(!1===m){if(r.status&kt){t.token=r,d=W(t,e,s,r)||d,h=!0,g=!1;break}}else{if(m.subgrammar)return k=""+m,x.$subgrammars[k]?($=x.$subgrammars[k],y=new X(1,n[k]?n[k]:t.status),F=t):($=x,y=new X,F=t),y.outer=[x,m.next,F],{parser:$,state:y,toInner:k};if(l.length>1&&e.eol()&&It&l[l.length-1].type&&t.block&&t.block.name===l[l.length-1].name)for(c=l.length-2;c>=0&&Et===l[c].type;)o=l[c--],K(o,e,t,s),o.status&ht&&(t.$actionerr$=!0);else if(l.length&&Et===l[l.length-1].type)for(;l.length&&Et===l[l.length-1].type;)o=l.pop(),K(o,e,t,s),o.status&ht&&(t.$actionerr$=!0);if(!0!==m){g=!1;break}}}return g&&e.nxt(1),S[M]=e.cur(1),!1!==m?(m=w[m]||C,S[_]=r.name):h?(m=O,t.status&pt&&Y(t,i,a,i,e.pos,r)):m=C,S[L]=m,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(d||t.$eol$),S},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t){var n=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)n.push(t.parser.get(e,t));return n},parse:function(e,t){var n,r,s,l,i,a,u=(e||"").split(Gn),c=u.length,p=null;if(t=t||ct,s=!!(t&pt),l=!!(t&ct),r={parser:this,state:new X(0,t),inner:{}},r.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,c-2),l?p=o(t&ft?function(e,t){t._=t._.concat(r.parser.tokenize(nt(u[e]),r,e))}:function(e,t){t._.push(r.parser.tokenize(nt(u[e]),r,e))},0,c-1,{_:[]})._:o(function(e){var t=nt(u[e]);if(t.eol())r.state.line++,r.state.$blank$&&r.state.bline++;else for(;!t.eol();)r.parser.get(t,r)},0,c-1),n=r.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)i=n.queu.shift(),Y(n,i[1],i[2],i[3],i[4],null,i[5]);return a=l&&s?{tokens:p,errors:n.err}:l?p:n.err,tt(n),r=n=null,a},autocompletion:function(e,t){var n,r,o,s=e.stack,l={},i=T([e.token],[],l);for(t=t||0,n=s.length-1;n>=0;n--)if(r=s[n],o=r.type,zt&o){if(i=T([r],i,l),0<r.min&&t<i.length)break}else if((At===o||jt===o||Jt&o)&&(i=T([r],i,l),t<i.length))break;return i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[cn](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Xn={Pattern:function(){return function(){}},Indented:function(e){return e=e||nt.$NOTEMPTY$,function(t){var n,r,o,s,l,i,a,u,c,p=t.row;if(n=t.line(p),e.test(n)){for(r=t.indentation(n),i=null,l=n.length,u=p+1,c=t.last();c>=u;++u)if(o=t.line(u),s=t.indentation(o),s>r)i=u,a=o.length;else if(e.test(o))break;return i?[p,l,i,a]:void 0}}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||i,function(o){var s,l,i,a,u,c,p=o.row,f=o.col;for(s=o.line(p),i=f,a=0;;){var u=0>=i?-1:s.lastIndexOf(e,i-1);if(-1!==u){if(1===a&&f>u)return;if(n(c=o.token(p,u+1))){l=u+e.length;break}i=u-1}else{if(1===a)return;a=1,i=s.length}}return it(1,o,p,l,c,e,t,n,!0,r)}):function(){}},MarkedUp:function(e,t,n,r,o){return e=e||i,t=t||"<",n=n||">",r=r||"/",o=o||b(y(t)+"("+y(r)+"?)([a-zA-Z_\\-][a-zA-Z0-9_\\-:]*)","g"),function(s){s.col=0,s.min=s.first(),s.max=s.last(),s.text=s.line(s.row);for(var l,i,a,u,c,p,f,m,h,g=s.row;;){if(l=st(s,e,o,t,n,r),!l||s.row!==g||!(i=lt(s,e,o,t,n,r)))return;if(!l[1]&&"autoclosed"!==i)for(a=[s.row,s.col],c=l[2],u=null,p=[];;){if(f=st(s,e,o,t,n,r),g=s.row,m=s.col-(f?f[0].length:0),!f||!(i=lt(s,e,o,t,n,r)))return!1;if("autoclosed"!==i)if(f[1]){for(h=p.length-1;h>=0;--h)if(p[h]===f[2]){p.length=h;break}if(0>h&&(!c||c===f[2]))return[a[0],a[1],g,m]}else p.push(f[2])}}}}},er={Pattern:function(){return function(){}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||i,function(o){var s,l=o.col,i=o.row,a=o.line(i),u=!1,c=e.length,p=t.length;return l>=c&&(1===c&&e===a.charAt(l-1)||e===a.slice(l-c,l))?(s=it(1,o,i,l,u,e,t,n,!1,r),s?(s=[s[0],s[1]-c,s[0],s[1],s[2],s[3],s[2],s[3]+p],s.match="end"):(s=[i,l-c,i,l],s.match=!1),s):l>=p&&(1===p&&t===a.charAt(l-1)||t===a.slice(l-p,l))?(s=it(-1,o,i,l-p,u,e,t,n,!1,r),s?(s=[s[0],s[1],s[0],s[1]+c,s[2],s[3],s[2],s[3]+p],s.match="start"):(s=[i,l-p,i,l],s.match=!1),s):void 0}):function(){}},MarkedUp:function(){return function(){}}},tr="undefined"!=typeof CodeMirror?CodeMirror:{Pass:{toString:function(){return"CodeMirror.Pass"}}},nr=/[\w$]/,rr=function(e,t){return t.score-e.score},or=g(Qn,{constructor:function lr(e,n){var r,s=this,l=null,a=null;if(Qn.call(s,e,null,"error"),s.DEF=n||s.$DEF,s.ERR=e.Style.error||s.$ERR,s.LC=e.$comments.line?e.$comments.line[0]:null,s.BCS=e.$comments.block?e.$comments.block[0][0]:null,s.BCE=e.$comments.block?e.$comments.block[0][1]:null,s.BCC=s.BCL=e.$comments.block?e.$comments.block[0][2]:null,e.$comments.block&&e.$comments.block.length){r=lr.Type("comment");for(var u=0,c=e.$comments.block.length;c>u;u++)s.$folders.push(lr.Fold.Delimited(e.$comments.block[u][0],e.$comments.block[u][1],r,"comment"))}e.Fold&&_n&t(e.Fold)?l=e.Fold[kn]():e.$extra.fold&&(l=e.$extra.fold[kn]()),a=e.Match&&_n&t(e.Match)?e.Match[kn]():e.$extra.match?e.$extra.match[kn]():l;var p=N(e,1);r=p.length?lr.Type(p,!1):i,l&&(l=l.split("+"),o(function(e,t){var n,o=Bn(t[e]);"braces"===o?s.$folders.push(lr.Fold.Delimited("{","}",r)):"brackets"===o?s.$folders.push(lr.Fold.Delimited("[","]",r)):"parens"===o||"parentheses"===o?s.$folders.push(lr.Fold.Delimited("(",")",r)):"brace"===o||"cstyle"===o||"c"===o?(s.$folders.push(lr.Fold.Delimited("{","}",r)),s.$folders.push(lr.Fold.Delimited("[","]",r))):"indent"===o||"indentation"===o?s.$folders.push(lr.Fold.Indented()):"tags"===o||"markup"===o||"html"===o||"xml"===o?(s.$folders.push(lr.Fold.Delimited("<![CDATA[","]]>",lr.Type(["comment","tag"],!1))),s.$folders.push(lr.Fold.MarkedUp(lr.Type("tag"),"<",">","/"))):-1<(n=o.indexOf(","))&&s.$folders.push(lr.Fold.Delimited(o.slice(0,n),o.slice(n+1),r))},0,l.length-1,l)),a&&(a=a.split("+"),o(function(e,t){var n,r=Bn(t[e]);"braces"===r?s.$matchers.push(lr.Match.Delimited("{","}")):"brackets"===r?s.$matchers.push(lr.Match.Delimited("[","]")):"parens"===r||"parentheses"===r?s.$matchers.push(lr.Match.Delimited("(",")")):"brace"===r||"cstyle"===r||"c"===r?(s.$matchers.push(lr.Match.Delimited("{","}")),s.$matchers.push(lr.Match.Delimited("[","]")),s.$matchers.push(lr.Match.Delimited("(",")"))):"tags"===r||"markup"===r||"html"===r||"xml"===r?s.$matchers.push(lr.Match.MarkedUp(lr.Type("tag"),"<",">","/")):-1<(n=r.indexOf(","))&&s.$matchers.push(lr.Match.Delimited(r.slice(0,n),r.slice(n+1)))},0,a.length-1,a))},LC:null,BCS:null,BCE:null,BCL:null,BCC:null,dispose:function(){var e=this;return e.LC=e.BCS=e.BCE=e.BCL=e.BCC=null,Qn[un].dispose.call(e)},validate:function(e,t,n){if(!e||!e.length)return[];var r,o,s,l,i=this,a=[],u=i.parse(e,pt);if(!u)return a;t=t||{},s=t[cn]("type")?t.type:"error",l=t[cn]("msg")?t.msg:"Syntax Error";for(r in u)u[cn](r)&&(o=u[r],a.push({message:o[4]||l,severity:s,from:n.Pos(o[0],o[1]),to:n.Pos(o[2],o[3])}));return a},autocomplete:function(e,t,n){var o,s,l,i,a,u,c,p,f,m,h,g=this,d=[],k=e.getCursor(),$=k.ch,y=$,b=$,x=b,v=0;if(g.$grammar.$autocomplete){for(t=t||{},a=t.word||nr,o=e.getLine(k.line),p=t[cn]("prefixMatch")?!!t.prefixMatch:!0,f=t[cn]("inContext")?!!t.inContext:!1,c=t[cn]("caseInsensitiveMatch")?!!t.caseInsensitiveMatch:!1;y&&a.test(o[$n](y-1));)--y;if(!p)for(;x<o.length&&a.test(o[$n](x));)++x;s=o.slice(y,x),l=s[kn](),i=s.length,u=t.renderer||null,m=!1,h=1e3;var w=function(e,t){var n,r,o,a,f,g,d,k=t.word,$=k.length;return i?$>=i&&(n=t.meta,r=!!k.ci,d=c||r,d?(f=k[kn](),g=l):(f=k,g=s),(a=f.indexOf(g))>=0&&(!p||0===a)&&(o=d?k.indexOf(s):a,$+n.length>v&&(v=$+n.length),e.push({text:k,name:k,meta:n,start:0>o?a:o,end:(0>o?a:o)+s.length,match:s,displayText:k+"		["+n+"]",render:u,score:1e3-10*($-i)-5*(0>o?a+3:o)}))):(n=t.meta,$+n.length>v&&(v=$+n.length),e.push({text:k,name:k,meta:n,start:0,end:0,match:"",displayText:k+"		["+n+"]",render:u,score:m?1e3-10*$:h--})),e};f?(m=!1,d=r(g.autocompletion(e.getTokenAt(n.Pos(k.line,y),!0).state.state),w,d),d.length||(m=!0,d=r(g.$grammar.$autocomplete,w,d))):(m=!0,d=r(g.$grammar.$autocomplete,w,d)),d.length&&(d=d.sort(rr)),d.maxlen=v}return{list:d,from:n.Pos(k.line,y),to:n.Pos(k.line,x)}},indent:function(e,t,n,r,o,s){return s.Pass},iterator:function(e,t){var n=e.getOption("tabSize");return{row:0,col:0,min:0,max:0,line:function(t){return e.getLine(t)},first:function(){return e.firstLine()},last:function(){return e.lastLine()},next:function(){var e=this;if(!(e.row>=e.max))return e.col=0,e.row++,!0},prev:function(){var e=this;if(!(e.row<=e.min))return e.col=0,e.row--,!0},indentation:function(e){return rt(e,null,n)},state:function(n,r){var o=e.getTokenAt(t.Pos(n,r||0)).state;return o.state||o},token:function(n,r){return e.getTokenTypeAt(t.Pos(n,r||0))},tokens:function(t){return e.getLineTokens(t)}}},fold:function(e,t,n){var r,o,s,l=this,i=l.$folders,a=i.length;if(a)for(o=l.iterator(e,n),o.row=t.line,o.col=t.ch||0,r=0;a>r;r++)if((s=i[r](o))||!1===s)return s},match:function(e,t,n){var r,o,s,l=this,i=l.$matchers,a=i.length;if(a)for(o=l.iterator(e,n),o.row=t.line,o.col=t.ch||0,r=0;a>r;r++)if((s=i[r](o))||!1===s)return s}});or.Type=ot,or.Fold=Xn,or.Match=er;var sr=e.CodeMirrorGrammar={VERSION:"4.0.0",clone:s,extend:l,pre_process:A,parse:I,getMode:ut,Parser:or};return e.CodeMirrorGrammar});
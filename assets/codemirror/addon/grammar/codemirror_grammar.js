/**
*
*   CodeMirrorGrammar
*   @version: 4.2.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"CodeMirrorGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=_t:!0===e||!1===e||e instanceof Boolean?t=Nt:gt===e?t=Et:(t=Zt[bt.call(e)]||St,t=Pt===t||e instanceof Number?isNaN(e)?Dt:isFinite(e)?Pt:Tt:Ft===t||e instanceof String?1===e.length?At:Ft:Rt===t||e instanceof Array?Rt:zt===t||e instanceof RegExp?zt:Gt===t||e instanceof Date?Gt:Bt===t||e instanceof Function?Bt:jt===t?jt:St),t}function t(e,t,n,r){var o,l,s,i,a,u,c=e.length;if(arguments.length<4&&(r=c-1),0>r&&(r+=c),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(s=r-n+1,i=15&s,a=1&i,u=new Array(s),a&&(u[0]=t(e[n],n,n,r)),o=a;i>o;o+=2)l=n+o,u[o]=t(e[l],l,n,r),u[o+1]=t(e[l+1],l+1,n,r);for(o=i;s>o;o+=16)l=n+o,u[o]=t(e[l],l,n,r),u[o+1]=t(e[l+1],l+1,n,r),u[o+2]=t(e[l+2],l+2,n,r),u[o+3]=t(e[l+3],l+3,n,r),u[o+4]=t(e[l+4],l+4,n,r),u[o+5]=t(e[l+5],l+5,n,r),u[o+6]=t(e[l+6],l+6,n,r),u[o+7]=t(e[l+7],l+7,n,r),u[o+8]=t(e[l+8],l+8,n,r),u[o+9]=t(e[l+9],l+9,n,r),u[o+10]=t(e[l+10],l+10,n,r),u[o+11]=t(e[l+11],l+11,n,r),u[o+12]=t(e[l+12],l+12,n,r),u[o+13]=t(e[l+13],l+13,n,r),u[o+14]=t(e[l+14],l+14,n,r),u[o+15]=t(e[l+15],l+15,n,r);return u}function n(e,t,n,r,o){var l,s,i,a,u,c=e.length,p=n;if(arguments.length<5&&(o=c-1),0>o&&(o+=c),arguments.length<4&&(r=0),r>o)return p;if(r===o)return t(p,e[r],r);for(i=o-r+1,a=15&i,u=1&a,u&&(p=t(p,e[r],r)),l=u;a>l;l+=2)s=r+l,p=t(t(p,e[s],s),e[s+1],s+1);for(l=a;i>l;l+=16)s=r+l,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[s],s),e[s+1],s+1),e[s+2],s+2),e[s+3],s+3),e[s+4],s+4),e[s+5],s+5),e[s+6],s+6),e[s+7],s+7),e[s+8],s+8),e[s+9],s+9),e[s+10],s+10),e[s+11],s+11),e[s+12],s+12),e[s+13],s+13),e[s+14],s+14),e[s+15],s+15);return p}function r(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,l,s=n-t+1,i=15&s,a=1&i;for(a&&e(t,r,t,n),o=a;i>o;o+=2)l=t+o,e(l,r,t,n),e(++l,r,t,n);for(o=i;s>o;o+=16)l=t+o,e(l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n),e(++l,r,t,n);return r}function o(t,n){var r,l,s,i,a=e(t),u=0;if(Pt===e(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,jt===a){l={};for(s in t)t[xt](s)&&t[$t](s)&&(r=e(t[s]),jt===r?l[s]=n?o(t[s],u>0?u-1:n):t[s]:Rt===r?l[s]=n?o(t[s],u>0?u-1:n):t[s].slice():Gt===r?l[s]=new Date(t[s]):Ft&r?l[s]=t[s].slice():Pt&r?l[s]=0+t[s]:l[s]=t[s])}else if(Rt===a)for(i=t.length,l=new Array(i),s=0;i>s;s++)r=e(t[s]),jt===r?l[s]=n?o(t[s],u>0?u-1:n):t[s]:Rt===r?l[s]=n?o(t[s],u>0?u-1:n):t[s].slice():Gt===r?l[s]=new Date(t[s]):Ft&r?l[s]=t[s].slice():Pt&r?l[s]=0+t[s]:l[s]=t[s];else l=Gt===a?new Date(t):Ft&a?t.slice():Pt&a?0+t:t;return l}function l(){var t,n,r,s,i,a,u,c,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=o(m[0]),r=1;h>r;r++)if(t=m[r])for(s in t)if(t[xt](s)&&t[$t](s))if(n[xt](s)&&n[$t](s)){if(p=e(n[s]),f=e(t[s]),jt===p&&jt===f)n[s]=l(n[s],t[s]);else if(Rt===p&&Rt===f){if(u=n[s],c=t[s],a=c.length,!a)continue;if(u.length)for(i=0;a>i;i++)0>u.indexOf(c[i])&&u.push(c[i]);else n[s]=c.slice()}}else n[s]=o(t[s]);return n}function s(){return!0}function i(t,n){return n||Rt!==e(t)?[t]:t}function a(t,n){return t=i(t),(n||Rt!==e(t[0]))&&(t=[t]),t}function u(t,n){return Ft&e(n)&&Ft&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function c(e,t,n){return n?e[t]=gt:delete e[t],e}function p(e){return(e||"id_")+ ++en}function f(e){return(e||"uuid")+"_"+ ++en+"_"+(new Date).getTime()}function m(){var t,n,r,o,l,s,i=arguments,a=i.length;for(t=i[0]||{},l=1;a>l;l++)if(n=i[l],jt===e(n))for(o in n)n[xt](o)&&n[$t](o)&&(r=n[o],s=e(r),Pt&s?t[o]=0+r:Gt&s?t[o]=new Date(r):Yt&s?t[o]=r.slice():t[o]=r);return t}function h(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[xt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[yt]=m(wt(e[yt]),t),n[yt][o]=n,n}function d(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function k(e){return"&#"+e.charCodeAt(0)+";"}function g(e,t){return e.replace(nn,t?d:k)}function y(e){return e.replace(tn,"\\$1")}function x(e,t){t=t||{l:0,x:0,i:0,g:0};var e=new RegExp(e,(t.g?"g":"")+(t.i?"i":""));return e.xflags=t,e}function $(e,t,n,r){var o,l,s,i,a=e.pos,u=e.length,c="",p=!!n;if(p){for(r=!!r,l=!1,i=0;u>a&&(o=e[Lt](a++),t!==o||l);)s=n===o,l=!l&&s,r?(s&&i++,(!s||2&i)&&(c+=o,i=0)):c+=o;2&i&&(c+=n)}else for(;u>a&&(o=e[Lt](a++),t!==o);)c+=o;return e.pos=a,c}function v(t,n,r,o){var l,s,i,a,u,c=!0===r?0:1,p=o?"\\":"$",f=o?92:36;for(Ft&e(n)&&(o&&(n=y(n)),n=[n,n,n],c=0),s=t.length,u="",l=0;s>l;)i=t[Lt](l),s>l+1&&p===i?(a=t.charCodeAt(l+1),f===a?(u+=p,l+=2):a>=48&&57>=a?(u+=n[c+a-48]||"",l+=2):(u+=i,l+=1)):(u+=i,l+=1);return u}function b(t,n,r,o){if(!t||(Pt|zt)&e(t))return t;var l,s=n?n.length||0:0,i="",a={g:0,i:0,x:0,l:0};if(Ft&e(o)?i=o:o&&(i=on),s&&t.substr(0,s)===n){var u,c,p,l,f,m=t.substr(s),h=m[Lt](0);for(l=m.length;l--&&(f=m[Lt](l),h!==f);)"i"===f.toLowerCase()?a.i=1:"x"===f.toLowerCase()?a.x=1:"l"===f.toLowerCase()&&(a.l=1);return u=m.substring(1,l),"^"===u.charAt(0)?(a.l=1,c="^("+u.slice(1)+")"):c="^("+u+")",p=c,(a.x||a.l||a.i)&&(c=(a.l?"l":"")+(a.x?"x":"")+(a.i?"i":"")+"::"+c),r[c]||(p=x(p,a),r[c]=p),r[c]}return i?(p=c="^("+y(t)+")"+i,r[c]||(p=x(p,a),r[c]=p),r[c]):t}function w(n,r,o){var l,s="";return Ft&e(r)?s=r:r&&(s=on),l=t(n.sort(Jt),y).join("|"),[x("^("+l+")"+s,{l:0,x:0,i:o?1:0}),1]}function C(t,n,r,o){var l=e(n);if(Pt===l)return n;if(o[t])return o[t];r=r||0;var s,i=0;return n&&n.isCharList&&(i=1,c(n,"isCharList")),s=_t===l?new R(Ae,t,n,_t,r):At===l?new R(Ae,t,n,At,r):Ht&l?new R(Ae,t,n,zt,r):Ft&l?new R(Ae,t,n,i?It:Ft,r):n,o[t]=s}function O(t,n,r,o,l,s,a,c){if(a[t])return a[t];var p,f,m,h,d,k,g,y=0,x=0,$=1,v=Ft&e(o)?!0:!!o;if(p=i(n),m=p.length,1===m)g=C(t,b(p[0],r,s,o),0,a);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)d=e(p[f]),k=e(p[m-1-f]),At===d&&At===k||($=0),Rt&d||Rt&k?y=1:(zt&d||zt&k||u(p[f],r)||u(p[m-1-f],r))&&(x=1);if($&&!v)p=p.slice().join(""),p.isCharList=1,g=C(t,p,0,a);else if(!v||y||x)if(y||x){for(f=0;m>f;f++)Rt&e(p[f])?p[f]=O(t+"_"+f,p[f],r,o,l,s,a):p[f]=C(t+"_"+f,b(p[f],r,s),f,a);g=m>1?new R(Ie,t,p):p[0]}else{for(c&&(c.keywords=i(n).slice()),p=p.sort(Jt),f=0;m>f;f++)p[f]=C(t+"_"+f,b(p[f],r,s),f,a);g=m>1?new R(Ie,t,p):p[0]}else c&&(c.keywords=i(n).slice()),g=C(t,w(p,o,l),0,a)}return a[t]=g}function q(t,n,o,l,s){if(s[t])return s[t];var i=a(n),c=[],p=[];return r(function(n){var r,a,f,m;r=C(t+"_0_"+n,b(i[n][0],o,l),n,s),i[n].length>1?(f=u(i[n][1],o),m=f&&ln.test(i[n][1]),zt!==r.ptype||Ft!==e(i[n][1])||!m&&f?a=C(t+"_1_"+n,b(i[n][1],o,l),n,s):m?(a=new String(i[n][1]),a.regex_pattern=o):a=i[n][1]):a=r,c.push(r),p.push(a)},0,i.length-1),s[t]=new R(Re,t,[c,p])}function L(e,t){var n=a(e.tokens.slice());r(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],l=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,l]))},0,n.length-1)}function M(e,n,r,o){var l=e.meta||r,s=!(!e.caseInsesitive&&!e.ci),i=t(n,function(e){return{word:e,meta:l,ci:s}});return o.autocomplete=(o.autocomplete||[]).concat(i),i}function S(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,r,o,s,i,a,u,p,f,m,h,d=t.Lex,k=t.Syntax,g=[d,k],y=g.length;for(h=0;y>h;){m=g[h++];for(o in m)m[xt](o)&&(n=o.split(":"),r=n[1]&&Vt(n[1]).length?Vt(n[1]):null,n=Vt(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],c(m,o),r&&(r=r[qt](),s=m[n],i=e(s),jt===i?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=s):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=s):"action"===r&&Ft===i?m[n][s]=!0:m[n].tokens=s))),d===m&&(Wt&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(p=s.type=s.type[qt](),"line-block"===p?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===p?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===p&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=d;for(n in m)if(m[xt](n))for(s=m[n];s.extend;)a=s.extend,c(s,"extend"),u=d[a],u&&(Wt&e(u)&&(u=d[a]={type:"simple",tokens:u}),s=l(u,s));m=d;for(n in m)m[xt](n)&&(s=m[n],s.type?(p=s.type=s.type[qt](),"line-block"===p?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===p?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===p&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],c(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],c(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],c(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,c(s,"comment")):s.block?(s.type="block",s.tokens=s.block,c(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,c(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"],!!s["in-hypercontext"]],c(s,"error")):s[xt]("hypercontext")?(s.type="action",s.action=[s.hypercontext?"hypercontext-start":"hypercontext-end",s.hypercontext,!!s["in-context"],!!s["in-hypercontext"]],c(s,"hypercontext")):s[xt]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"],!!s["in-hypercontext"]],c(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"],!!s["in-hypercontext"]],c(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"],!!s["in-hypercontext"]],c(s,"outdent")):s.define?(s.type="action",s.action=["define",Ft&e(s.define)?["*",s.define]:s.define,!!s["in-context"],!!s["in-hypercontext"]],c(s,"define")):s.undefine?(s.type="action",s.action=["undefine",Ft&e(s.undefine)?["*",s.undefine]:s.undefine,!!s["in-context"],!!s["in-hypercontext"]],c(s,"undefine")):s.defined?(s.type="action",s.action=["defined",Ft&e(s.defined)?["*",s.defined]:s.defined,!!s["in-context"],!!s["in-hypercontext"]],c(s,"defined")):s.notdefined?(s.type="action",s.action=["notdefined",Ft&e(s.notdefined)?["*",s.notdefined]:s.notdefined,!!s["in-context"],!!s["in-hypercontext"]],c(s,"notdefined")):s.unique?(s.type="action",s.action=["unique",Ft&e(s.unique)?["*",s.unique]:s.unique,!!s["in-context"],!!s["in-hypercontext"]],c(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"],!!s["in-hypercontext"]],c(s,"push")):s[xt]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"],!!s["in-hypercontext"]],c(s,"pop")):s.type="simple","action"===s.type?(s.ci=!(!s.caseInsesitive&&!s.ci),s.autocomplete=!!s.autocomplete):"block"===s.type||"comment"===s.type?(s.multiline=s[xt]("multiline")?!!s.multiline:!0,Ft&e(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&Ft&e(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=k;for(n in m)m[xt](n)&&(s=m[n],jt!==e(s)||s.type?s.type&&(p=s.type=s.type[qt](),"group"===p&&s.match?(i=e(s.match),Ft&i?(f=s.match[qt](),"alternation"===f||"either"===f?(s.type="alternation",c(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",c(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",c(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",c(s,"match")):"oneormore"===f?(s.type="oneOrMore",c(s,"match")):(s.type="sequence",c(s,"match"))):Rt&i&&(s.type="repeat",s.repeat=s.match,c(s,"match"))):"either"===p?s.type="alternation":"all"===p?s.type="sequence":"lookahead"===p?s.type="positiveLookahead":"grammar"===p&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?c(s,"n-gram"):c(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?c(s,"all"):c(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?c(s,"either"):c(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,c(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,c(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,c(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?c(s,"lookahead"):c(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,c(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?c(s,"subgrammar"):c(s,"grammar")));return t}function E(e,t){t=t||[];var n,r;for(n=e.ctx;n;){for(r=n.val.symb;r;)r.val[1][7]&&t.push({word:r.val[1][5],meta:(r.val[1][6]||"<symbol>")+" at ("+(r.val[1][0]+1)+","+(r.val[1][1]+1)+")",ci:r.val[1][8],token:r.val[1][6]}),r=r.prev;n=n.prev}for(n=e.hctx;n;){for(r=n.val.symb;r;)r.val[1][7]&&t.push({word:r.val[1][5],meta:(r.val[1][6]||"<symbol>")+" at ("+(r.val[1][0]+1)+","+(r.val[1][1]+1)+")",ci:r.val[1][8],token:r.val[1][6]}),r=r.prev;n=n.prev}for(r=e.symb;r;)r.val[1][7]&&t.push({word:r.val[1][5],meta:(r.val[1][6]||"<symbol>")+" at ("+(r.val[1][0]+1)+","+(r.val[1][1]+1)+")",ci:r.val[1][8],token:r.val[1][6]}),r=r.prev;return t}function _(t,n,r,o){if(r=r||{},n=n||[],!t||!t.length)return n;var l,s,i,a,u,c,p;for(l=0,s=t.length;s>l;l++)if(u=t[l])if(We===u.type){if(o&&o.length)for(i=o.length-1;i>=0;i--)u.name&&o[i].token&&(u.name===o[i].token||u.name.length>o[i].token.length&&u.name.slice(0,o[i].token.length)===o[i].token||u.name.length<o[i].token.length&&u.name===o[i].token.slice(0,u.name.length))&&(n.push(o[i]),o.splice(i,1));if(u.autocompletions)for(i=0,a=u.autocompletions.length;a>i;i++)p=u.autocompletions[i],r[xt]("w_"+p.word)||(n.push(p),r["w_"+p.word]=1);else Ft===u.token.ptype&&Ft&e(u.token.pattern)&&u.token.pattern.length>1&&(r[xt]("w_"+u.token.pattern)||(n.push({word:""+u.token.pattern,meta:u.name,ci:!!u.ci}),r["w_"+u.token.pattern]=1))}else if(Ve===u.type)_(u.token,n,r,o);else if(it&u.type){i=0,a=u.token.length;do _([c=u.token[i++]],n,r,o);while(a>i&&(Qe&c.type&&1>c.min||je===c.type))}else Qe&u.type&&_([u.token[0]],n,r,o);return n}function P(t,n,r,o){for(var l;Ft&e(l=n[t]||r[t]);)t=l;return o?t:n[t]||r[t]||t}function T(e,t){return e.length>1?r(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];sn.test(o)&&sn.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function D(n,r,l){var s,i,a,u,c,p,f,m,h,d,k,g,v,b,w,C=!1;if(w=n.modifier?n.modifier:null,m=new String(Vt(n)),m.pos=0,1===m.length)g=""+n,r[g]||l[g]||(r[g]={type:"simple",tokens:n}),n=g;else{for(s=[],i=[],a="",v=[];m.pos<m.length;)if(h=m[Lt](m.pos++),rn.test(h))if(a.length&&(C?(i.length&&(k=i[i.length-1],g=k+"."+a,p=r[g]||l[g],p||(f=P(k,r,l),l[g]=Ft&e(f)?new String(f):o(f),l[g].modifier=a),i[i.length-1]=g),C=!1):"0"===a?(r[dt]||(r[dt]={type:"simple",tokens:0}),i.push(dt)):"^^"===a?(r[ct]||(r[ct]={type:"simple",tokens:Be}),i.push(ct)):"^^1"===a?(r[pt]||(r[pt]={type:"simple",tokens:ze}),i.push(pt)):"^"===a?(r[ft]||(r[ft]={type:"simple",tokens:Ue}),i.push(ft)):"$"===a?(r[mt]||(r[mt]={type:"simple",tokens:Ge}),i.push(mt)):(r[a]||l[a]||(r[a]={type:"simple",tokens:a}),i.push(a)),a=""),"."===h)i.length&&m.pos<m.length&&!rn.test(m[Lt](m.pos))?C=!0:a+=h;else if('"'===h||"'"===h)u=$(m,h,"\\",!0),u.length?(g=""+u,r[g]||(r[g]={type:"simple",tokens:u}),i.push(g)):(r[kt]||(r[kt]={type:"simple",tokens:""}),i.push(kt));else if("["===h)u=$(m,"]","\\",!0),g="["+u+"]",r[g]||(r[g]={type:"simple",tokens:x("^(["+("^"===u[Lt](0)?"^"+y(u.slice(1)):y(u))+"])")}),i.push(g);else{if("]"===h){a+=h;continue}if("/"===h)u=$(m,h,"\\",!1),d="",u.length&&(m.pos<m.length&&"i"===m[Lt](m.pos)&&(m.pos++,d="i"),g="/"+u+"/"+d,r[g]||(r[g]={type:"simple",tokens:x("^("+u+")",{l:0,x:0,i:"i"===d})}),i.push(g));else if("*"===h||"+"===h||"?"===h)i.length?(k=i[i.length-1],g=""+k+h,l[g]||(l[g]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[k]}),i[i.length-1]=g):a+=h;else if("{"===h)i.length?(c=$(m,"}",!1),c=t(c.split(","),Vt),c[0].length?c[0]=parseInt(c[0],10)||0:c[0]=0,0>c[0]&&(c[0]=0),2>c.length?c.push(c[0]):c[1].length?c[1]=parseInt(c[1],10)||Mt:c[1]=Mt,0>c[1]&&(c[1]=0),k=i[i.length-1],g=""+k+["{",c[0],",",isFinite(c[1])?c[1]:"","}"].join(""),l[g]||(l[g]={type:"repeat",repeat:[c[0],c[1]],tokens:[k]}),i[i.length-1]=g):a+=h;else{if("}"===h){a+=h;continue}"&"===h||"!"===h?i.length?(k=i[i.length-1],g=""+k+h,l[g]||(l[g]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[k]}),i[i.length-1]=g):a+=h:"|"===h?(C=!1,i=T(i),i.length>1?(g=""+i.join(" "),l[g]||(l[g]={type:"sequence",tokens:i}),s.push(g)):i.length?s.push(i[0]):a+=h,i=[]):"("===h?(v.push([i,s,a]),i=[],s=[],a=""):")"===h&&(i=T(i),i.length>1?(g=""+i.join(" "),l[g]||(l[g]={type:"sequence",tokens:i}),s.push(g)):i.length&&s.push(i[0]),i=[],s=T(s,1),s.length>1?(g=""+s.join(" | "),l[g]||(l[g]={type:"alternation",tokens:s})):s.length&&(g=s[0]),s=[],b=v.pop(),i=b[0],s=b[1],a=b[2],k=g,g="("+k+")",l[g]||(l[g]=o(P(k,r,l))),i.push(g))}}else a+=h;a.length&&(C?(i.length&&(k=i[i.length-1],g=k+"."+a,p=r[g]||l[g],p||(f=P(k,r,l),l[g]=Ft&e(f)?new String(f):o(f),l[g].modifier=a),i[i.length-1]=g),C=!1):"0"===a?(r[dt]||(r[dt]={type:"simple",tokens:0}),i.push(dt)):"^^"===a?(r[ct]||(r[ct]={type:"simple",tokens:Be}),i.push(ct)):"^^1"===a?(r[pt]||(r[pt]={type:"simple",tokens:ze}),i.push(pt)):"^"===a?(r[ft]||(r[ft]={type:"simple",tokens:Ue}),i.push(ft)):"$"===a?(r[mt]||(r[mt]={type:"simple",tokens:Ge}),i.push(mt)):(r[a]||l[a]||(r[a]={type:"simple",tokens:a}),i.push(a))),a="",i=T(i),i.length>1?(g=""+i.join(" "),l[g]||(l[g]={type:"sequence",tokens:i}),s.push(g)):i.length&&s.push(i[0]),i=[],s=T(s,1),s.length>1?(g=""+s.join(" | "),l[g]||(l[g]={type:"alternation",tokens:s}),n=g):s.length&&(n=s[0]),s=[]}return w&&(r[n]||l[n])&&((r[n]||l[n]).modifier=w),n}function N(o,l,s,u,c,p,f,m,h,d,k){var g,y,x,$,v,b,w,C=null,S=null,E=null;if(Be===o||ze===o||Ue===o||Ge===o)return new z(o,Be===o?ct:ze===o?$T_FBNL$:Ue===o?ft:mt,o,S);if(!1===o||0===o)return new z(Ye,dt,0,S);if(""===o)return new z(He,kt,"",S);if(null===o)return new z(We,ht,_t,S,E);if(Rt&e(o)&&(x=o,o="NGRAM_"+x.join("_"),u[o]||(u[o]={type:"ngram",tokens:x})),o=""+o,m[o])return m[o];if(v=P(o,s,u),Ft&e(v)&&(v=D(v,s,u),v=s[v]||u[v]||null),!v)return null;if(g=v.type?ut[v.type[qt]().replace(Xt,"")]||We:We,S=v.msg||null,E=v.modifier||null,y=v.tokens,We&g){if(Be===y||ze===y||Ue===y||Ge===y||!1===y||0===y)return C=new z(y||Ye,o,y||0,S),m[o]=C,C;if(""===y)return C=new z(He,o,"",S),m[o]=C,C;if(null===y)return C=new z(We,o,_t,S,E),m[o]=C,C;if(!y)return null}if(je&g)v[xt]("action")?"nop"===v.action[0]?v.action[0]=be:"error"===v.action[0]?v.action[0]=we:"context-start"===v.action[0]?v.action[0]=Se:"context-end"===v.action[0]?v.action[0]=Ee:"hypercontext-start"===v.action[0]?v.action[0]=_e:"hypercontext-end"===v.action[0]?v.action[0]=Pe:"push"===v.action[0]?v.action[0]=Te:"pop"===v.action[0]?v.action[0]=De:"define"===v.action[0]?v.action[0]=Ce:"undefine"===v.action[0]?v.action[0]=Oe:"defined"===v.action[0]?v.action[0]=qe:"notdefined"===v.action[0]?v.action[0]=Le:"unique"===v.action[0]?v.action[0]=Me:"indent"===v.action[0]?v.action[0]=Ne:"outdent"===v.action[0]&&(v.action[0]=Fe):v[xt]("nop")?v.action=[be,v.nop,!!v["in-context"],!!v["in-hypercontext"],!1]:v[xt]("error")?v.action=[we,v.error,!1,!1,!1]:v[xt]("context")?v.action=[v.context?Se:Ee,v.context,!1,!1,!1]:v[xt]("hypercontext")?v.action=[v.hypercontext?_e:Pe,v.hypercontext,!1,!1,!1]:v[xt]("context-start")?v.action=[Se,v["context-start"],!1,!1,!1]:v[xt]("context-end")?v.action=[Ee,v["context-end"],!1,!1,!1]:v[xt]("hypercontext-start")?v.action=[_e,v["hypcontext-start"],!1,!1,!1]:v[xt]("hypercontext-end")?v.action=[Pe,v["hypcontext-end"],!1,!1,!1]:v[xt]("push")?v.action=[Te,v.push,!!v["in-context"],!!v["in-hypercontext"],v.autocomplete]:v[xt]("pop")?v.action=[De,v.pop,!!v["in-context"],!!v["in-hypercontext"],!1]:v[xt]("define")?v.action=[Ce,Ft&e(v.define)?["*",v.define]:v.define,!!v["in-context"],!!v["in-hypercontext"],v.autocomplete]:v[xt]("undefine")?v.action=[Oe,Ft&e(v.undefine)?["*",v.undefine]:v.undefine,!!v["in-context"],!!v["in-hypercontext"],v.autocomplete]:v[xt]("defined")?v.action=[qe,Ft&e(v.defined)?["*",v.defined]:v.defined,!!v["in-context"],!!v["in-hypercontext"],!1]:v[xt]("notdefined")?v.action=[Le,Ft&e(v.notdefined)?["*",v.notdefined]:v.notdefined,!!v["in-context"],!!v["in-hypercontext"],!1]:v[xt]("unique")?v.action=[Me,Ft&e(v.unique)?["*",v.unique]:v.unique,!!v["in-context"],!!v["in-hypercontext"],v.autocomplete]:v[xt]("indent")?v.action=[Ne,v.indent,!!v["in-context"],!!v["in-hypercontext"],!1]:v[xt]("outdent")&&(v.action=[Fe,v.outdent,!!v["in-context"],!!v["in-hypercontext"],!1]),!1===v.msg&&(S=!1),v.nop&&(v.action[0]=be),C=new z(je,o,v.action.slice(),S,E),C.ci=!!v.caseInsensitive||v.ci,m[o]=C;else if(y=i(y),We&g){w=v.autocomplete?M(v,Yt&e(v.autocomplete)?i(v.autocomplete):y,o,k):null;var _={};if(b="undefined"!=typeof v.combine?v.combine:!!(Rt&e(v.tokens)),C=new z(We,o,O(o,y.slice(),l,b,!(!v.caseInsensitive&&!v.ci),p,f,_),S,E,null,w),_.keywords&&(C.keywords=_.keywords.join("|")),m[o]=C,null!=v.except){var T,F,A=i(v.except),I=A.length,R=[];for(T=0;I>T;T++)A[T]&&(F=N(A[T],l,s,u,c,p,f,m,h,d,k),F&&R.push(F));R.length&&(C.except=R)}}else Ze&g?(Ke===g&&L(v,d),C=new z(g,o,q(o,y.slice(),l,p,f),S),C.empty=v[xt]("empty")?!!v.empty:!0,C.mline=v[xt]("multiline")?!!v.multiline:!0,C.esc=v[xt]("escape")?v.escape:!1,C.inter=!!c[o+".inside"],Ke===g&&v.interleave&&h.push(U(C)),E&&(C.modifier=E),m[o]=C):at&g&&(st===g?m[o]=new z(st,o,y,S,E):lt===g?($=a(y),C=t($,function(e,t){return new z(lt,o+"_NGRAM_"+t,null,S,E)}),m[o]=C,r(function(e){C[e].token=i(n($[e],function(e,t){return e.concat(N(t,l,s,u,c,p,f,m,h,d,k))},[]))},0,$.length-1)):(rt===g||ot===g?C=new z(g,o,null,S,E):Qe&g&&Rt&e(v.repeat)?(C=new z(Qe,o,null,S,E),C.min=v.repeat[0],C.max=v.repeat[1]):Xe===g?(C=new z(Xe,o,null,S,E),C.min=0,C.max=1):et===g?(C=new z(et,o,null,S,E),C.min=0,C.max=Mt):tt===g?(C=new z(tt,o,null,S,E),C.min=1,C.max=Mt):C=Ve===g?new z(Ve,o,null,S,E):new z(Je,o,null,S,E),m[o]=C,C.token=i(n(y,function(e,t){return e.concat(N(t,l,s,u,c,p,f,m,h,d,k))},[]))));return m[o]}function F(e,t){var n,r,o=e.Style,l=e.Lex,s=e.Syntax,i=[],a={};for(n in o)o[xt](n)&&(r=l[n]||s[n],!r||"block"!=r.type&&"comment"!==r.type||(t&&(o[n+".inside"]||o[n])?(n=o[n+".inside"]||o[n],a[xt](n)||(i.push(n),a[n]=1)):t||a[xt](n)||(i.push(n),a[n]=1)));return i}function A(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=S(t),t.Parser&&t.Parser.length&&r(function o(l,s){var i,a,u,c=s[l];n[c]||(Rt&e(c)&&(i=c,c="NGRAM_"+i.join("_"),t.Syntax[c]||(t.Syntax[c]={type:"ngram",tokens:i})),a=P(c,t.Lex,t.Syntax),Ft&e(a)&&(a=D(a,t.Lex,t.Syntax),a=t.Lex[a]||t.Syntax[a]||null),a&&(n[c]=a,u=a.type?ut[a.type[qt]().replace(Xt,"")]||We:We,at&u&&r(o,0,a.tokens.length-1,a.tokens)))},0,t.Parser.length-1,t.Parser),t}function I(t){var r,l,s,i,a,u,c,p,f,m,h,d,k,g;return t.__parsed?t:(r=t.RegExpID||null,s=t.Extra?o(t.Extra):{},i=t.Style?o(t.Style):{},a=null,u=null,c=t.Lex?o(t.Lex):{},p=t.Syntax?o(t.Syntax):{},f={},m={},h={},k={},g={},d=[],l=t.Parser?o(t.Parser):[],t=S({Style:i,Fold:a,Match:u,Lex:c,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:s,__parsed:0}),t.$parser=n(l,function(t,n){var o=N(n,r,c,p,i,f,m,h,d,k,g)||null;return o&&(Rt&e(o)?t=t.concat(o):t.push(o)),t},[]),t.$interleaved=d&&d.length?d:null,t.$comments=k,t.$autocomplete=g&&g.autocomplete&&g.autocomplete.length?g.autocomplete:null,t.__parsed=1,t)}function R(t,n,r,o,l){var s,i,a=this;s=a.type=t,a.name=n,a.pattern=r,i=a.ptype=o||Ft,a.key=l||0,Ie===s?a.key=!1!==l:Re===s?a.pattern[0]=new R(Ie,n+"_Start",r[0],null,!1):_t===i?a.pattern=null:zt===i&&(a.pattern=zt&e(r)?[r,0]:[r[0],r[1]||0])}function j(t,n,r,o){var l,s,i,a,u,c,p,f,m,h,d,k=t,g=k.type,y=k.pattern,x=k.key;if(Re===g){if(l=k.name,i=y[0],a=y[1],c=j(i,n,r,o))return u=a[c[0]],f=e(u),m=i.pattern[c[0]].ptype,zt===m&&Ut&f&&(u.regex_pattern?(p=v(u,c[1]),u=new R(Ae,l+"_End",b(p,u.regex_pattern,{}),zt)):(p=Pt&f?c[1][u+1]:v(u,c[1]),u=new R(Ae,l+"_End",p,p.length>1?Ft:At))),u}else if(Ie===g){for(h=0,d=y.length;d>h;h++)if(p=j(y[h],n,r,o))return x?[h,p[1]]:p}else{if(s=k.ptype,_t===s)return!1!==r&&n.end(),[x,""];if(zt===s){if(p=y[0].xflags.l?n.match(y[0]):n.slice(n.pos).match(y[0]),p&&0===p.index)return!1!==r&&n.mov(p[y[1]||0].length),[x,y[1]>0?p[y[1]]:p]}else if(It===s){if(!0===o){p=-1;var $,w;for(d=y.length-1;d>=0;d--)$=n.indexOf(y[Lt](d),n.pos),$>-1&&(-1===p||p>$)&&(p=$,w=y[Lt](d));if(p>-1)return!1!==r&&(n.pos=p+1),[x,w]}else if(p=n[Lt](n.pos)||null,p&&-1<y.indexOf(p))return!1!==r&&n.mov(1),[x,p]}else if(At===s){if(!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+1),[x,y]}else if(p=n[Lt](n.pos)||null,y===p)return!1!==r&&n.mov(1),[x,p]}else if(Ft===s)if(d=y.length,!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+d),[x,y]}else if(y===n.substr(n.pos,d))return!1!==r&&n.mov(d),[x,y]}return!1}function B(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function z(e,t,n,r,o,l,s,i){var a=this;a.type=e,a.name=t,a.token=n,a.modifier=o||null,a.except=l||null,a.autocompletions=s||null,a.keywords=i||null,a.pos=null,a.msg=!1===r?!1:r||null,a.$msg=null,a.status=0,a.empty=!1,a.ci=!1,a.mline=!0,a.esc=!1,a.inter=!1,a.found=0,a.min=0,a.max=1,a.i0=0,a.$id=null}function G(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null,e.space=null}function U(e,t,n,r){var o=new z(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=ge),n&&(o.modifier=n),r&&(o.$id=r),o}function Y(e){var t=e.name;return e.$msg?e.$msg:e.status&ge?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function H(e,t,n,r,o,l,s){e.status&de&&e.err&&(e.err[""+t+"_"+n+"_"+r+"_"+o+"_"+(l?l.name:"ERROR")]=[t,n,r,o,s||Y(l)])}function W(e,t){for(var n=null,r=null;e;){if(t===e.val[0])return r={node:e,nodePrev:e.prev,nodeNext:n,val:e.val[1]};n=e,e=e.prev}return r}function Z(e,t,n){return new B([t,n],e)}function K(e,t,n){if(e.stack===t)t=e.stack=new B(n,e.stack);else{for(var r=e.stack;r&&r.prev!==t;)r=r.prev;t=new B(n,t),r&&(r.prev=t)}return t}function V(e,t){if(null==e)return null;if(t){for(var n=new B(e.val),r=n,o=e;o.prev;)r.prev=new B(o.prev.val),o=o.prev,r=r.prev;return n}return e}function J(e,t,n,r){var o,l,s,i,a,u=1/0,c=null,p=1/0;if(l=t.pos,t.spc(),s=t.pos,o=e.stack,t.pos<t.length){for(a=0;o&&(i=o.val,i.$id===r.$id);){for(;!(je===i.type||Q(i,t,e,n)||(t.pos=i.pos>t.pos?i.pos:t.pos+1,e.stack=o,t.pos>=t.length)););e.stack=o,t.pos<t.length&&u>t.pos?(u=t.pos,c=o,p=a):u===t.pos&&p>a&&(u=t.pos,c=o,p=a),t.pos=s,o=o.prev,a++}u<t.length?(t.pos=u,e.stack=c):(t.end(),e.stack=null)}return s>=l&&t.pos===s}function Q(e,t,n,r){if(!e)return!1;var o=e.type,l=at&o?ne:Ze&o?te:je&o?X:ee;return l(e,t,n,r)}function X(t,n,r,o){var l,s,i,a,u,c,p,f,m,h,d,k,g,y,x,$,b,w,C=t,O=C.token||null,q=C.ci,L=C.name,M=!(r.status&de);if(C.status=0,C.$msg=null,!O||!o||!o.pos)return!0;if(w=!!(Ze&o.T),be===O[0]||w&&!o.block)return!0;if(l=O[0],s=O[1],y=O[2],x=O[3],m=O[4],u=C.msg,w?(b=o.block.match||o.block.str,h=o.block.pos[0][0],d=o.block.pos[0][1],k=o.block.pos[0][2],g=o.block.pos[0][3]):(b=o.match||o.str,h=o.pos[0],d=o.pos[1],k=o.pos[2],g=o.pos[3]),Ee===l)r.ctx=r.ctx?r.ctx.prev:null;else if(Se===l)r.ctx=new B({symb:null,queu:null},r.ctx);else if(Pe===l)r.hctx=r.hctx?r.hctx.prev:null;else if(_e===l)r.hctx=new B({symb:null,queu:null},r.hctx);else if(Ce===l)i=s[1],a=s[0],i=v(i,b,!0),q&&(i=i[qt]()),a+="::"+i,f=x&&r.hctx?W(r.hctx.val.symb,a):y&&r.ctx?W(r.ctx.val.symb,a):r.symb?W(r.symb,a):null,f||(x&&r.hctx?r.hctx.val.symb=Z(r.hctx.val.symb,a,[h,d,k,g,a,i,o.type,m,q]):y&&r.ctx?r.ctx.val.symb=Z(r.ctx.val.symb,a,[h,d,k,g,a,i,o.type,m,q]):r.symb=Z(r.symb,a,[h,d,k,g,a,i,o.type,m,q]));else if(Oe===l){if(i=s[1],a=s[0],i=v(i,b,!0),q&&(i=i[qt]()),a+="::"+i,x&&r.hctx)f=W(r.hctx.val.symb,a);else if(y&&r.ctx)f=W(r.ctx.val.symb,a);else{if(!r.symb)return!0;f=W(r.symb,a)}f&&(f.nodeNext?f.nodeNext.prev=f.nodePrev:x&&r.hctx?r.hctx.val.symb=r.hctx.val.symb.prev:y&&r.ctx?r.ctx.val.symb=r.ctx.val.symb.prev:r.symb=r.symb.prev)}else if(qe===l){if(i=s[1],a=s[0],i=v(i,b,!0),q&&(i=i[qt]()),a+="::"+i,f=x&&r.hctx?W(r.hctx.val.symb,a):y&&r.ctx?W(r.ctx.val.symb,a):r.symb?W(r.symb,a):null,!f)return!1!==u&&(C.$msg=u?v(u,i,!0):'Undefined "'+i+'"',$=Y(C),H(r,h,d,k,g,C,$),C.status|=ye),!1}else if(Le===l){if(i=s[1],a=s[0],i=v(i,b,!0),q&&(i=i[qt]()),a+="::"+i,x&&r.hctx)f=W(r.hctx.val.symb,a);else if(y&&r.ctx)f=W(r.ctx.val.symb,a);else{if(!r.symb)return!0;f=W(r.symb,a)}if(f)return!1!==u&&(C.$msg=u?v(u,i,!0):'Defined "'+i+'"',$=Y(C),H(r,f.val[0],f.val[1],f.val[2],f.val[3],C,$),H(r,h,d,k,g,C,$),C.status|=ye),!1}if(M)return!0;if(we===l)return!u&&Ft&e(s)&&(u=s),C.$msg=u?v(u,b,!0):'Error "'+L+'"',H(r,h,d,k,g,C,Y(C)),C.status|=ye,!1;if(Me===l){if(x){if(!r.hctx)return!0;p=r.hctx.val.symb}else if(y){if(!r.ctx)return!0;p=r.ctx.val.symb}else p=r.symb;if(i=s[1],a=s[0],i=v(i,b,!0),q&&(i=i[qt]()),a+="::"+i,f=W(p,a))return!1!==u&&(C.$msg=u?v(u,i,!0):'Duplicate "'+i+'"',$=Y(C),H(r,f.val[0],f.val[1],f.val[2],f.val[3],C,$),H(r,h,d,k,g,C,$),C.status|=ye),!1;x?r.hctx.val.symb=Z(r.hctx.val.symb,a,[h,d,k,g,a,i,o.type,m,q]):y?r.ctx.val.symb=Z(r.ctx.val.symb,a,[h,d,k,g,a,i,o.type,m,q]):r.symb=Z(r.symb,a,[h,d,k,g,a,i,o.type,m,q])}else if(De===l){if(x){if(!r.hctx)return!0;c=r.hctx.val.queu}else if(y){if(!r.ctx)return!0;c=r.ctx.val.queu}else c=r.queu;if(s){if(s=v(s,b),q&&(s=s[qt]()),!c||s!==c.val[0])return!1!==u&&(c?(C.$msg=u?v(u,[c.val[0],s],!0):'Mismatched "'+c.val[0]+'","'+s+'"',$=Y(C),H(r,c.val[1],c.val[2],c.val[3],c.val[4],C,$),H(r,h,d,k,g,C,$),c=c.prev):(C.$msg=u?v(u,["",s],!0):'Missing matching "'+s+'"',$=Y(C),H(r,h,d,k,g,C,$)),C.status|=ye),x?r.hctx&&(r.hctx.val.queu=c):y?r.ctx&&(r.ctx.val.queu=c):r.queu=c,!1;c=c?c.prev:null}else c=c?c.prev:null;x?r.hctx&&(r.hctx.val.queu=c):y?r.ctx&&(r.ctx.val.queu=c):r.queu=c}else if(Te===l&&s){if(x){if(!r.hctx)return!0;c=r.hctx.val.queu}else if(y){if(!r.ctx)return!0;c=r.ctx.val.queu}else c=r.queu;s=v(s,b),q&&(s=s[qt]()),C.$msg=u?v(u,s,!0):'Missing matching "'+s+'"',c=new B([s,h,d,k,g,Y(C)],c),x?r.hctx&&(r.hctx.val.queu=c):y?r.ctx&&(r.ctx.val.queu=c):r.queu=c}return!0}function ee(e,t,n,r,o){var l,s,i=e,a=i.token,u=i.modifier,c=i.type,p=i.name,f=i.except,m=n.line,h=t.pos,d=null,k=!1;if(i.status&=$e,i.$msg=o?null:i.msg||null,i.pos=t.pos,f&&!o){s=oe(n,t);for(var g=0,y=f.length;y>g;g++)if(l=f[g],i!==l&&We===l.type&&ee(l,t,n,r,1))return i.pos=l.pos,oe(n,t,s),!1}if(Be===c)k=0===n.line;else if(ze===c)k=n.bline+1===n.line;else if(Ue===c)k=t.sol();else if(Ge===c)t.spc(),t.eol()?k=p:(i.pos=t.pos,t.bck(h));else if(Ye===c)i.status=0,k=!0;else if(He===c){if(null==r.space||t.eol()?t.spc()&&!t.eol()?(i.pos=t.pos,t.bck(h),i.status&ge&&(i.status|=ye)):k=!0:i.status&ge&&(i.status|=ye),i.status&=xe,!0===k)return k}else _t===a?(t.end(),k=u||p):(d=j(a,t))&&(d=d[1],k=u||p);return o?k:(!1!==k&&(r.T=c,r.id=p,r.type=k,r.str=t.sel(h,t.pos),r.match=d,r.pos=[m,h,m,t.pos]),!k&&i.status&&i.$msg&&(i.$msg=v(i.$msg,p,!0)),k)}function te(e,t,n,r){var o,l,s,i,a,u,c,p,f,m,h,d,k,g,y,x,$,b,w,C,O,q,L=e,M=L.name,S=L.type,E=L.modifier,_=L.token,P=L.mline,T=L.inter,D=T?M+".inside":M,N=L.esc,F=!!N,A="",I="",R="",B="",z=L.$id||M,G=n.outer,Y=G&&G[2],H=G&&G[1];if(L.status&=$e,L.$msg=L.msg||null,L.pos=t.pos,C=n.line,O=t.pos,Ke===S&&(L.status&=xe),y=L.status&ge,s=0,i=0,n.block&&n.block.name===M?(i=1,s=1,g=D,o=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,
A=n.block.s,I=n.block.i):!n.block&&(o=j(_,t))&&(i=1,g=M,$=t.pos,p=[C,O],m=[[C,$],[C,$]],f=[C,$],A=t.sel(O,$),I="",B="",n.block={name:M,end:o,sp:p,ip:m,ep:f,s:A,i:I,e:B}),i){if(w=n.stack,l=_t===o.ptype,x=l||L.empty,T){if(l&&s&&t.sol())return L.status&=xe,n.block=null,!1;if(!s)return $=t.pos,r.T=S,r.id=M,r.type=E||g,r.str=t.sel(O,$),r.match=null,r.pos=[C,O,C,$],K(n,w,U(L,y,0,z)),E||g}if($=t.pos,a=H?l&&t.eol():j(o,t),c=P,u=0,a)g=l?D:M,B=t.sel($,t.pos);else if(b=t.pos,d=!1,H||F||It!==o.ptype&&At!==o.ptype&&Ft!==o.ptype){for(;!t.eol();){if(H){if(Q(H,t,Y,r)){if(t.pos>b){l&&(a=1);break}return!0}if(l){k=t.nxt(1),R+=k;continue}}if($=t.pos,!d&&j(o,t)){T&&t.pos>$&&$>b?(g=D,t.bck($),u=1):(g=M,a=1),B=t.sel($,t.pos);break}k=t.nxt(1),R+=k,d=F&&!d&&N===k,$=t.pos}l&&t.eol()&&(a=1)}else(q=j(o,t,!0,!0))?T&&t.pos>$+q[1].length?(g=D,t.mov(-q[1].length),u=1,R=t.sel($,t.pos)):(g=M,a=1,R=t.sel($,t.pos-q[1].length),B=q[1]):(t.end(),g=D,u=1,R=t.sel($,t.pos));return c=P||F&&d,I+=R,m[1]=[C,$],f=[C,t.pos],a&&!x&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(a||!c&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=I,n.block.e=B,K(n,w,U(L,y,0,z))),r.T=S,r.id=M,r.type=E||g,r.str=t.sel(O,t.pos),r.match=null,r.pos=[C,O,f[0],f[1]],L.pos=t.pos,n.block||(h=A+I+B,r.block={str:h,match:[h,I,A,B],part:[h,A,I,B],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),E||g)}return L.status&&L.$msg&&(L.$msg=v(L.$msg,M,!0)),!1}function ne(e,t,n,r){var o,l,s,i,a,u,c,f,m,h,d,k,g,y,x,$=e,v=$.type,b=($.name,$.token),w=b.length,C=$.modifier;if($.status&=$e,$.$msg=$.msg||null,f=t.pos,m=n.stack,$.pos=t.pos,u=0,c=0,st===v){$.status&=$e;var O=new String(b[0]),q=n.stack?n.stack.val:null;return O.subgrammar=1,O.next=q?new z(rt,q.name,[q]):null,O.required=q?q.status&ge:0,O}if(Ve===v){for(g=p(),$.status|=ge,k=[],x=oe(n,t),d=0,h=d;w>h;h++){if(o=U(b[h],1,C,g),l=Q(o,t,n,r),$.pos=o.pos,o.status&ge&&(u++,k.push(Y(o))),!1!==l)return l;o.status&ye&&(c++,oe(n,t,x))}return u>0?$.status|=ge:$.status&=xe,w===c&&u>0?$.status|=ye:$.status&=$e,$.status&&!$.$msg&&k.length&&($.$msg=k.join(" | ")),!1}if(it&v){y=!!(v&Je),g=$.$id||p(),y?$.status|=ge:$.status&=xe,x=oe(n,t),d=0;do o=U(b[d++],y,C,g),l=Q(o,t,n,r);while(w>d&&(!0===l&&nt&o.type||!1===l&&!(o.status&ge)));if($.pos=o.pos,!1!==l){if(!0!==l||Ye!==o.type)for(h=w-1;h>=d;h--)m=K(n,m,U(b[h],1,C,g));return l.subgrammar&&w>d&&(l.next=new z(rt,b[d].name,[b[d]]),l.required=b[d].status&ge),l}return o.status&ye?(y?$.status|=ye:$.status&=$e,oe(n,t,x)):y&&o.status&ge&&($.status|=ye),$.status&&!$.$msg&&($.$msg=Y(o)),!1}if(nt&v)return st&b[0].type?!0:(x=oe(n,t,null,!1),l=Q(U(b[0],0),t,n,r),oe(n,t,x),ot===v?!1===l:!1!==l);for(g=$.$id||p(),s=$.found,i=$.min,a=$.max,$.status=0,k=[],x=oe(n,t),h=0;w>h;h++){if(o=U(b[h],1,C,g),l=Q(o,t,n,r),$.pos=o.pos,!1!==l){if(++s,a>=s)return $.found=s,K(n,m,U($,0,0,p())),$.found=0,l;break}o.status&ge&&(u++,k.push(Y(o))),o.status&ye&&oe(n,t,x)}return i>s&&($.status|=ge),(s>a||i>s&&u>0)&&($.status|=ye),$.status&&!$.$msg&&k.length&&($.$msg=k.join(" | ")),!1}function re(e,t){var n=this;n.id=e?f("state"):"state",t instanceof re?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=V(t.stack,!1),n.token=t.token,n.token2=t.token2,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new re(e,t.outer[2])]:null,n.queu=t.queu||null,n.symb=t.symb||null,n.ctx=t.ctx?new B({symb:t.ctx.val.symb,queu:t.ctx.val.queu},t.ctx.prev):null,n.hctx=t.hctx?new B({symb:t.hctx.val.symb,queu:t.hctx.val.queu},t.hctx.prev):null,n.err=t.err||null,n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.token2=null,n.block=null,n.outer=null,n.queu=null,n.symb=null,n.ctx=null,n.hctx=null,n.err=n.status&de?{}:null,n.$eol$=!0,n.$blank$=!0)}function oe(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===r&&(e.status=0),n)}function le(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.token2=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.hctx=null,e.err=null}function se(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?Ct(0,r.pos+e):Ot(r.length,r.pos+e),r},r.bck=function(e){return r.pos=Ct(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,l="";if(!0===e){for(t=t||se.$NONSPC$;r.pos<r.length&&t.test(n=r[Lt](r.pos++));)l+=n;return l.length?l:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)l+=r[Lt](r.pos++);return l},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||se.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function ie(e,t,n,r,o){var l,s,i;for(null==t&&(t=e.search(se.$NONSPC$),-1==t&&(t=e.length)),l=r||0,s=o||0;;){if(i=e.indexOf("	",l),0>i||i>=t)return s+(t-l);s+=i-l,s+=n-s%n,l=i+1}}function ae(n,r){return Yt&e(n)&&(n=x("\\b("+t(i(n).sort(Jt),y).join("|")+")\\b")),!1===r?function(e){return!e||!n.test(e)}:function(e){return!!e&&n.test(e)}}function ue(e,t,n,r,o,l){for(;;){n.lastIndex=e.col;var s=n.exec(e.text);if(!s){if(e.next()){e.text=e.line(e.row);continue}return}{if(t(e.token(e.row,s.index+1)))return e.col=s.index+s[0].length,s;e.col=s.index+1}}}function ce(e,t,n,r,o,l){for(var s,i,a;;){if(s=e.text.indexOf(o,e.col),-1===s){if(e.next()){e.text=e.line(e.row);continue}return}if(t(e.token(e.row,s+1)))return i=e.text.lastIndexOf(l,s),a=i>-1&&!se.$NOTEMPTY$.test(e.text.slice(i+1,s)),e.col=s+1,a?"autoclosed":"regular";e.col=s+1}}function pe(e,t,n,r,o,l,s,i,a,u){if(-1===e){var c,p,f,m,h,d,k,g,y=1,x=t.first(),$=(l.length,s.length,!1===o);e:for(c=n;c>=x;--c)for(p=t.line(c),f=p.length,m=c===n?r-1:f;;){if(0>m)break;if(h=p.lastIndexOf(l,m),d=p.lastIndexOf(s,m),0>h&&0>d)break;if(m=Ct(h,d),$||u||t.token(c,m+1)==o)if(m===d)++y;else if(0===--y){k=c,g=m;break e}--m}return null==k||a&&k===n&&g===r?!1:[k,g,n,r]}var c,p,f,m,h,d,v,b,y=1,w=t.last(),$=(l.length,s.length,!1===o);e:for(c=n;w>=c;++c)for(p=t.line(c),f=p.length,m=c===n?r:0;;){if(m>=f)break;if(h=p.indexOf(l,m),d=p.indexOf(s,m),0>h&&0>d)break;if(0>h&&(h=f),0>d&&(d=f),m=Ot(h,d),$||u||t.token(c,m+1)==o)if(m===h)++y;else if(0===--y){v=c,b=m;break e}++m}return null==v||a&&n===v&&b===r?!1:[n,r,v,b]}function fe(e,t,n){var r=n.text,o=n.meta,l=n.start,s=n.end,i=t.list.maxlen-r.length-o.length+5;e.innerHTML=['<span class="cmg-autocomplete-keyword">',g(r.slice(0,l)),'<strong class="cmg-autocomplete-keyword-match">',g(r.slice(l,s)),"</strong>",g(r.slice(s)),"</span>",new Array(1+i).join("&nbsp;"),'<strong class="cmg-autocomplete-keyword-meta">',g(o),"</strong>","&nbsp;"].join(""),e.className=(e.className&&e.className.length?e.className+" ":"")+"cmg-autocomplete-keyword-hint",e.style.position="relative",e.style.width="100%",e.style.maxWidth="120%"}function me(e,t,n){function r(e,t){var o;return o={Mode:r,startState:function(){return{parser:r.$parser,state:new re,inner:{},name:null}},copyState:function(e){return{parser:e.parser,state:new re(0,e.state),inner:e.inner,name:e.name}},token:function(e,t){var n=se(e.string,e.start,e.pos),r=t.parser.get(n,t).type;return e.pos=n.pos,r},indent:function(r,o,l){return r.parser.indent(r.state,o,l,e,t,n)},fold:r.foldType,lineComment:r.$parser.LC,blockCommentStart:r.$parser.BCS,blockCommentEnd:r.$parser.BCE,blockCommentContinue:r.$parser.BCC,blockCommentLead:r.$parser.BCL,electricInput:r.$parser.$grammar.$extra.electricInput||!1,electricChars:r.$parser.$grammar.$extra.electricChars||!1},r.mode=o,o}return n=n||pn,r.$id=f("codemirror_grammar_mode"),r.$parser=new dn.Parser(I(e),t),r.$parser.Mode=r,r.options=function(e,t,n){n=n||{};var o=e.getTokenAt(t).state,l=o&&o.parser||r.$parser;return n.lineComment=l.LC,n.blockCommentStart=l.BCS,n.blockCommentEnd=l.BCE,n.blockCommentContinue=l.BCC,n.blockCommentLead=l.BCL,n.electricInput=l.$grammar.$extra.electricInput||!1,n.electricChars=l.$grammar.$extra.electricChars||!1,n},r.supportGrammarAnnotations=!1,r.validator=function o(e,t){return r.supportGrammarAnnotations&&r.$parser&&e&&e.length?r.$parser.validate(e,o.options||t||{},n):[]},r.linter=r.validator,r.supportAutoCompletion=!0,r.autocompleter=function l(e,t){if(r.supportAutoCompletion){var o=e.getTokenAt(e.getCursor()).state,s=o&&o.parser||r.$parser;return t=l.options||t||{},t[xt]("renderer")||(t.renderer=l.renderer||fe),s.autocomplete(e,t,n)}},r.autocompleter.renderer=fe,r.supportCodeFolding=!0,r.foldType="fold_"+r.$id,r.folder=function(e,t){if(r.supportCodeFolding){var o,l=e.getTokenAt(t).state,s=l&&l.parser||r.$parser;if(o=s.fold(e,t,n))return{from:n.Pos(o[0],o[1]),to:n.Pos(o[2],o[3])}}},r.supportCodeMatching=!0,r.matchType="match_"+r.$id,r.matcher=function s(e){if(r.supportCodeMatching){if(s.clear(e),e.state.$highlightPending)return;var t=e.getTokenAt(e.getCursor()).state,o=t&&t.parser||r.$parser;e.state.$highlightPending=!0,setTimeout(function(){e.operation(function(){e.state.$highlightPending=!1;var t,l=s.options||{},i=l.maxHighlightLineLength||1e3,a=[],u=e.listSelections(),c="CodeMirror-matchingtag",p="CodeMirror-nonmatchingbracket",f=0;for(u.length;1>f;f++)t=o.match(e,u[f].to(),n),null!=t&&(!1===t?(u[f].empty()?(t=u[f].to(),t=[n.Pos(t.line,t.ch-1),t]):t=[u[f].from(),u[f].to()],a.push(e.markText(t[0],t[1],{className:p}))):!1===t.match?a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:p})):"end"===t.match&&e.getLine(t[0]).length<=i?(a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:c})),e.getLine(t[4]).length<=i&&a.push(e.markText(n.Pos(t[4],t[5]),n.Pos(t[6],t[7]),{className:c}))):"start"===t.match&&e.getLine(t[4]).length<=i&&(a.push(e.markText(n.Pos(t[4],t[5]),n.Pos(t[6],t[7]),{className:c})),e.getLine(t[0]).length<=i&&a.push(e.markText(n.Pos(t[0],t[1]),n.Pos(t[2],t[3]),{className:c}))));e.state[r.matchType]=a})},50)}},r.matcher.clear=function(e){e.operation(function(){var t=e.state[r.matchType];if(e.state[r.matchType]=null,t&&t.length)for(var n=0,o=t.length;o>n;n++)t[n].clear()})},r.submode=function(e,t){r.$parser.subparser(e,t.Mode.$parser)},r.dispose=function(){r.$parser&&r.$parser.dispose(),r.$parser=r.validator=r.linter=r.autocompleter=r.folder=r.matcher=r.mode=null},r}var he=1,de=2,ke=32,ge=4,ye=8,xe=~ge,$e=~ye,ve=ge|ye,be=0,we=4,Ce=8,Oe=9,qe=10,Le=11,Me=12,Se=16,Ee=17,_e=18,Pe=19,Te=32,De=33,Ne=128,Fe=129,Ae=2,Ie=4,Re=8,je=4,Be=8,ze=9,Ge=16,Ue=32,Ye=128,He=256,We=512,Ze=1024,Ke=1025,Ve=2048,Je=4096,Qe=8192,Xe=8193,et=8194,tt=8195,nt=16384,rt=nt,ot=16385,lt=32768,st=65536,it=Je|lt,at=Ve|Je|Qe|nt|lt|st,ut={action:je,simple:We,block:Ze,comment:Ke,subgrammar:st,alternation:Ve,sequence:Je,repeat:Qe,zeroorone:Xe,zeroormore:et,oneormore:tt,positivelookahead:rt,negativelookahead:ot,ngram:lt},ct="$|SOF|$",pt="$|NONBLANK|$",ft="$|SOL|$",mt="$|EOL|$",ht="$|ENDLINE|$",dt="$|EMPTY|$",kt="$|NONSPACE|$",gt=void 0,yt="prototype",xt="hasOwnProperty",$t="propertyIsEnumerable",vt=Object[yt],bt=vt.toString,wt=Object.create,Ct=Math.max,Ot=Math.min,qt="toLowerCase",Lt="charAt",Mt=1/0,St=4,Et=8,_t=16,Pt=32,Tt=33,Dt=34,Nt=64,Ft=128,At=129,It=130,Rt=256,jt=512,Bt=1024,zt=2048,Gt=4096,Ut=Ft|Pt,Yt=Ft|Rt,Ht=zt|Rt,Wt=Ft|Rt|zt,Zt={"[object Number]":Pt,"[object String]":Ft,"[object Array]":Rt,"[object RegExp]":zt,"[object Date]":Gt,"[object Function]":Bt,"[object Object]":jt},Kt=/^\s+|\s+$/g,Vt=String[yt].trim?function(e){return e.trim()}:function(e){return e.replace(Kt,"")},Jt=function(e,t){return t.length-e.length},Qt=/\r\n|\r|\n/g,Xt=/[\-_]/g,en=0,tn=/([.*+?^${}()|[\]\/\\\-])/g,nn=/[&"'<>]/g,rn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,on="(\\s|\\W|$)",ln=/(l?i?l?)x(l?i?l?)$/,sn=/[*+]$/;re.prototype.toString=function(){var e=this;return e.id+"_"+e.line+"_"+e.bline+"_"+(e.block?e.block.name:"0")},se.$SPC$=/^[\s\u00a0]+/,se.$NONSPC$=/[^\s\u00a0]/,se.$NOTEMPTY$=/\S/,se.$SPACE$=/^\s*/;var an=h({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){if(t.token2){var r=t.token2[0];return e.pos=t.token2[1],e.sft(),t.token=t.token2[3],t.$eol$=e.eol(),t.$blank$=t.$blank$&&(t.token2[2]||t.$eol$),t.token2=null,r}var o,l,s,i,a,u,c,p,f,m,h,d,k,g,y,x,$,v,b=this,w=b.$grammar,C=w.Style,O=b.DEF,q=b.ERR,r={},L=b.$n$,M=b.$t$,S=b.$v$,E=w.$interleaved,_=w.$parser,P=_.length,T=E?E.length:0,D=t.outer,N=D&&D[2],F=D&&D[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,i=t.line,a=e.pos,m=!1,d=!0,h=!1,k=!1,D&&b===D[0]){if(r[L]=null,r[M]=O,r[S]=null,F){if(s=new G,Q(F,e,N,s))return t.outer=null,{parser:b,state:N};for(e.nxt(1);!e.eol();){if(Q(F,e,N,s)){if(e.pos>a)break;return t.outer=null,{parser:b,state:N}}e.nxt(1)}}else e.spc(),e.eol()?k=!0:e.end();return r[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),r}if(t.stack&&Ge===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||null==t.block)&&e.spc()){if(t.stack&&st===t.stack.val.type)return e.bck(a),o=t.stack.val,t.stack=t.stack.prev,m=Q(o,e,t,s),g=""+m,b.$subgrammars[g]?(y=b.$subgrammars[g],x=new re(1,n[g]?n[g]:t.status),N=t):(y=b,x=new re,N=t),x.outer=[b,m.next,N],{parser:y,state:x,toInner:g};d=!0,k=!0}if(r[L]=null,r[M]=O,r[S]=null,d)for(s=new G,k&&(s.space=[a,e.pos],e.sft()),u=0;d&&(t.stack||P>u)&&!e.eol();){if(p=e.pos,f=t.stack,F){if(e.spc(),Q(F,e,N,s))return s.space||e.pos>p?(s.space&&(e.start=s.space[0],e.pos=s.space[1]),r[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):(t.outer=null,{parser:D[0],state:N,fromInner:t});e.bck(p)}if($=!1,T&&!t.block)for(c=0;T>c;c++)if(o=E[c],m=Q(o,e,t,s),!1!==m){$=!0;break}if(d&&!$){if(!t.stack&&u>=P)break;t.stack?(o=t.stack.val,t.stack=t.stack.prev):o=_[u++],m=Q(o,e,t,s)}if(!1===m){if(o.status&ve){t.token=o,k=J(t,e,s,o)||k,h=!0,d=!1;break}}else{if(m.subgrammar)return g=""+m,b.$subgrammars[g]?(y=b.$subgrammars[g],x=new re(1,n[g]?n[g]:t.status),N=t):(y=b,x=new re,N=t),x.outer=[b,m.next,N],s.space?(t.token2=[{parser:y,state:x,toInner:g},e.pos,k,t.token],t.token=null,e.start=s.space[0],e.pos=s.space[1],r[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):{parser:y,state:x,toInner:g};if(t.stack&&t.stack.prev&&e.eol()&&Ze&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(c=t.stack.prev;c&&je===c.val.type;)l=c,c=c.prev,v=X(l,e,t,s),l.status&ye?t.$actionerr$=!0:v&&!0!==m&&l.modifier&&(m=l.modifier);else if(t.stack&&je===t.stack.val.type)for(;t.stack&&je===t.stack.val.type;)l=t.stack.val,t.stack=t.stack.prev,v=X(l,e,t,s),l.status&ye?t.$actionerr$=!0:v&&!0!==m&&l.modifier&&(m=l.modifier);if(!0!==m){d=!1;break}}}return d&&(s.space?(e.start=s.space[0],e.pos=s.space[1],m=!1,s.space=null):e.nxt(1)),r[S]=e.cur(1),!1!==m?(m=m?C[m]||O:O,r[L]=o?o.name:null):h?(m=q,t.status&de&&H(t,i,a,i,e.pos,o)):m=O,r[M]=m,s.space&&(t.token2=[r,e.pos,k,t.token],t.token=null,e.start=s.space[0],e.pos=s.space[1],r={},r[L]=null,r[M]=O,r[S]=e.cur(1),k=!0),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),r},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n,r){if(r=r||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r.push(t.parser.get(e,t));return r},parse:function(e,t){var n,o,l,s,i,a,u=(e||"").split(Qt),c=u.length,p=null;if(t=t||he,l=!!(t&de),s=!!(t&he),o={parser:this,state:new re(0,t),inner:{}},o.state.$full_parse$=!0,r(function(e){u[e]+="\n"},0,c-2),s?p=r(t&ke?function(e,t){o.parser.tokenize(se(u[e]),o,e,t)}:function(e,t){t.push(o.parser.tokenize(se(u[e]),o,e))},0,c-1,[]):r(function(e){var t=se(u[e]);if(t.eol())o.state.line++,o.state.$blank$&&o.state.bline++;else for(;!t.eol();)o.parser.get(t,o)},0,c-1),n=o.state,l&&n.queu)for(;n.queu;)i=n.queu.val,n.queu=n.queu.prev,H(n,i[1],i[2],i[3],i[4],null,i[5]);return a=s&&l?{tokens:p,errors:n.err}:s?p:n.err,le(n),o=n=null,a},autocompletion:function(e,t,n){var r,o,l=e.stack,s={},i=n?E(e):null,a=_([e.token],[],s,i);for(t=t||0;l;){if(r=l.val,o=r.type,Qe&o){if(a=_([r],a,s,i),0<r.min&&t<a.length)break}else if((We===o||Ve===o||it&o)&&(a=_([r],a,s,i),t<a.length))break;l=l.prev}return i&&i.length?i.concat(a):a},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[xt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),un={Pattern:function(e,t,n){return function(){}},Indented:function(e){return e=e||se.$NOTEMPTY$,function(t){var n,r,o,l,s,i,a,u,c,p=t.row;if(n=t.line(p),e.test(n)){for(r=t.indentation(n),i=null,s=n.length,u=p+1,c=t.last();c>=u;++u)if(o=t.line(u),l=t.indentation(o),l>r)i=u,a=o.length;else if(e.test(o))break;return i?[p,s,i,a]:void 0}}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||s,function(o){var l,s,i,a,u,c,p=o.row,f=o.col;for(l=o.line(p),i=f,a=0;;){var u=0>=i?-1:l.lastIndexOf(e,i-1);if(-1!==u){if(1===a&&f>u)return;if(n(c=o.token(p,u+1))){s=u+e.length;break}i=u-1}else{if(1===a)return;a=1,i=l.length}}return pe(1,o,p,s,c,e,t,n,!0,r)}):function(){}},MarkedUp:function(e,t,n,r,o){return e=e||s,t=t||"<",n=n||">",r=r||"/",o=o||x(y(t)+"("+y(r)+"?)([a-zA-Z_\\-][a-zA-Z0-9_\\-:]*)",{g:1}),function(l){l.col=0,l.min=l.first(),l.max=l.last(),l.text=l.line(l.row);for(var s,i,a,u,c,p,f,m,h,d=l.row;;){if(s=ue(l,e,o,t,n,r),!s||l.row!==d||!(i=ce(l,e,o,t,n,r)))return;if(!s[1]&&"autoclosed"!==i)for(a=[l.row,l.col],c=s[2],u=null,p=[];;){if(f=ue(l,e,o,t,n,r),d=l.row,m=l.col-(f?f[0].length:0),!f||!(i=ce(l,e,o,t,n,r)))return!1;if("autoclosed"!==i)if(f[1]){for(h=p.length-1;h>=0;--h)if(p[h]===f[2]){p.length=h;break}if(0>h&&(!c||c===f[2]))return[a[0],a[1],d,m]}else p.push(f[2])}}}}},cn={Pattern:function(e,t,n){return function(){}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||s,function(o){var l,s=o.col,i=o.row,a=o.line(i),u=!1,c=e.length,p=t.length;return s>=c&&(1===c&&e===a.charAt(s-1)||e===a.slice(s-c,s))?(l=pe(1,o,i,s,u,e,t,n,!1,r),l?(l=[l[0],l[1]-c,l[0],l[1],l[2],l[3],l[2],l[3]+p],l.match="end"):(l=[i,s-c,i,s],l.match=!1),l):s>=p&&(1===p&&t===a.charAt(s-1)||t===a.slice(s-p,s))?(l=pe(-1,o,i,s-p,u,e,t,n,!1,r),l?(l=[l[0],l[1],l[0],l[1]+c,l[2],l[3],l[2],l[3]+p],l.match="start"):(l=[i,s-p,i,s],l.match=!1),l):void 0}):function(){}},MarkedUp:function(e,t,n,r,o){return function(){}}},pn="undefined"!=typeof CodeMirror?CodeMirror:{Pass:{toString:function(){return"CodeMirror.Pass"}}},fn=/[\w$]/,mn=function(e,t){return t.score-e.score},hn=h(an,{constructor:function kn(t,n){var o,l=this,i=null,a=null;if(an.call(l,t,null,"error"),l.DEF=n||l.$DEF,l.ERR=t.Style.error||l.$ERR,l.LC=t.$comments.line?t.$comments.line[0]:null,l.BCS=t.$comments.block?t.$comments.block[0][0]:null,l.BCE=t.$comments.block?t.$comments.block[0][1]:null,l.BCC=l.BCL=t.$comments.block?t.$comments.block[0][2]:null,t.$comments.block&&t.$comments.block.length){o=kn.Type("comment");for(var u=0,c=t.$comments.block.length;c>u;u++)l.$folders.push(kn.Fold.Delimited(t.$comments.block[u][0],t.$comments.block[u][1],o,"comment"))}t.Fold&&Ft&e(t.Fold)?i=t.Fold[qt]():t.$extra.fold&&(i=t.$extra.fold[qt]()),a=t.Match&&Ft&e(t.Match)?t.Match[qt]():t.$extra.match?t.$extra.match[qt]():i;var p=F(t,1);o=p.length?kn.Type(p,!1):s,i&&(i=i.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?l.$folders.push(kn.Fold.Delimited("{","}",o)):"brackets"===r?l.$folders.push(kn.Fold.Delimited("[","]",o)):"parens"===r||"parentheses"===r?l.$folders.push(kn.Fold.Delimited("(",")",o)):"brace"===r||"cstyle"===r||"c"===r?(l.$folders.push(kn.Fold.Delimited("{","}",o)),l.$folders.push(kn.Fold.Delimited("[","]",o))):"indent"===r||"indentation"===r?l.$folders.push(kn.Fold.Indented()):"tags"===r||"markup"===r||"html"===r||"xml"===r?(l.$folders.push(kn.Fold.Delimited("<![CDATA[","]]>",kn.Type(["comment","tag"],!1))),l.$folders.push(kn.Fold.MarkedUp(kn.Type("tag"),"<",">","/"))):-1<(n=r.indexOf(","))&&l.$folders.push(kn.Fold.Delimited(r.slice(0,n),r.slice(n+1),o))},0,i.length-1,i)),a&&(a=a.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?l.$matchers.push(kn.Match.Delimited("{","}")):"brackets"===r?l.$matchers.push(kn.Match.Delimited("[","]")):"parens"===r||"parentheses"===r?l.$matchers.push(kn.Match.Delimited("(",")")):"brace"===r||"cstyle"===r||"c"===r?(l.$matchers.push(kn.Match.Delimited("{","}")),l.$matchers.push(kn.Match.Delimited("[","]")),l.$matchers.push(kn.Match.Delimited("(",")"))):"tags"===r||"markup"===r||"html"===r||"xml"===r?l.$matchers.push(kn.Match.MarkedUp(kn.Type("tag"),"<",">","/")):-1<(n=r.indexOf(","))&&l.$matchers.push(kn.Match.Delimited(r.slice(0,n),r.slice(n+1)))},0,a.length-1,a))},LC:null,BCS:null,BCE:null,BCL:null,BCC:null,dispose:function(){var e=this;return e.LC=e.BCS=e.BCE=e.BCL=e.BCC=null,an[yt].dispose.call(e)},validate:function(e,t,n){if(!e||!e.length)return[];var r,o,l,s,i=this,a=[],u=i.parse(e,de);if(!u)return a;t=t||{},l=t[xt]("type")?t.type:"error",s=t[xt]("msg")?t.msg:"Syntax Error";for(r in u)u[xt](r)&&(o=u[r],a.push({message:o[4]||s,severity:l,from:n.Pos(o[0],o[1]),to:n.Pos(o[2],o[3])}));return a},autocomplete:function(e,t,r){t=t||{};var o,l,s,i,a,u,c,p,f,m,h,d,k=this,g=[],p=t[xt]("prefixMatch")?!!t.prefixMatch:!0,f=t[xt]("inContext")?!!t.inContext:!1,m=t[xt]("dynamic")?!!t.dynamic:!1,c=t[xt]("caseInsensitiveMatch")?!!t.caseInsensitiveMatch:!1,y=e.getCursor(),x=y.ch,$=x,v=x,b=v,w=0;if(m||k.$grammar.$autocomplete){for(a=t.word||fn,o=e.getLine(y.line);$&&a.test(o[Lt]($-1));)--$;if(!p)for(;b<o.length&&a.test(o[Lt](b));)++b;l=o.slice($,b),s=l[qt](),i=l.length,u=t.renderer||null,h=!1,d=1e3;var C=function(e,t){var n,r,o,a,f,m,k,g=t.word,y=g.length;return i?y>=i&&(n=t.meta,r=!!g.ci,k=c||r,k?(f=g[qt](),m=s):(f=g,m=l),(a=f.indexOf(m))>=0&&(!p||0===a)&&(o=k?g.indexOf(l):a,y+n.length>w&&(w=y+n.length),e.push({text:g,name:g,meta:n,start:0>o?a:o,end:(0>o?a:o)+l.length,match:l,displayText:g+"		["+n+"]",render:u,score:1e3-10*(y-i)-5*(0>o?a+3:o)}))):(n=t.meta,y+n.length>w&&(w=y+n.length),e.push({text:g,name:g,meta:n,start:0,end:0,match:"",displayText:g+"		["+n+"]",render:u,score:h?1e3-10*y:d--})),e};m||f?(h=!1,g=n(k.autocompletion(e.getTokenAt(r.Pos(y.line,$),!0).state.state,null,m),C,g),!g.length&&self.$grammar.$autocomplete&&(h=!0,g=n(k.$grammar.$autocomplete,C,g))):(h=!0,g=n(k.$grammar.$autocomplete,C,g)),g.length&&(g=g.sort(mn)),g.maxlen=w}return{list:g,from:r.Pos(y.line,$),to:r.Pos(y.line,b)}},indent:function(e,t,n,r,o,l){return l.Pass},iterator:function(e,t){var n=e.getOption("tabSize");return{row:0,col:0,min:0,max:0,line:function(t){return e.getLine(t)},first:function(){return e.firstLine()},last:function(){return e.lastLine()},next:function(){var e=this;if(!(e.row>=e.max))return e.col=0,e.row++,!0},prev:function(){var e=this;if(!(e.row<=e.min))return e.col=0,e.row--,!0},indentation:function(e){return ie(e,null,n)},state:function(n,r){var o=e.getTokenAt(t.Pos(n,r||0)).state;return o.state||o},token:function(n,r){return e.getTokenTypeAt(t.Pos(n,r||0))},tokens:function(t){return e.getLineTokens(t)}}},fold:function(e,t,n){var r,o,l,s=this,i=s.$folders,a=i.length;if(a)for(o=s.iterator(e,n),o.row=t.line,o.col=t.ch||0,r=0;a>r;r++)if((l=i[r](o))||!1===l)return l},match:function(e,t,n){var r,o,l,s=this,i=s.$matchers,a=i.length;if(a)for(o=s.iterator(e,n),o.row=t.line,o.col=t.ch||0,r=0;a>r;r++)if((l=i[r](o))||!1===l)return l}});hn.Type=ae,hn.Fold=un,hn.Match=cn;var dn={VERSION:"4.2.0",clone:o,extend:l,pre_process:A,parse:I,getMode:me,Parser:hn};return dn});
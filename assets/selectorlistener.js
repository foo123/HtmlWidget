/**
* https://github.com/foo123/SelectorListener
* @VERSION: 1.1.0
* adapted from https://github.com/csuwildcat/SelectorListener
**/
!function(){"use strict";function e(e,t,n,r){var o=e.length,s=arguments.length;if(4>s&&(r=o-1),0>r&&(r+=o),3>s&&(n=0),n>r)return e;var i,c,l,a,u=r-n+1;for(l=15&u,a=1&l,a&&t(e[n],n,e),i=a;l>i;i+=2)c=n+i,t(e[c],c,e),t(e[++c],c,e);for(i=l;u>i;i+=16)c=n+i,t(e[c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e),t(e[++c],c,e);return e}function t(t){var s=t.target,i=t.animationName,c=o[i]||{};t.selector=c.selector,e((this.selectorListeners||{})[i]||[],function(e){e.call(s,t)}),s._decorateDom(c.attributeModified?r:n)}function n(e){return e.hasAttribute("sl__exist__")?!1:(e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),!0)}function r(e){return e.hasAttribute("sl__exist__")?(e.setAttribute("sl__class__"," "+e.className+" "),!1):(e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),!0)}if("object"!=typeof window.SelectorListener){var o={},s={},i="{from {outline-color:#fff;} to {outline-color:#000;}}",c="0.001s",l=/::?exists\b/gi,a=/::?added\b/gi,u=/::?class\-added\(([^\(\)]+)\)/gi,_=/::?class\-removed\(([^\(\)]+)\)/gi,f=document.createElement("style"),d=document.createElement("style"),m=document.getElementsByTagName("head")[0],h=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],p=function(){var e="animation-duration: "+c+";",t="animation-name: SelectorListener !important;",n=window.getComputedStyle(document.documentElement,""),r=(Array.prototype.slice.call(n).join("").match(/moz|webkit|ms/)||""===n.OLink&&["o"])[0];return{css:"-"+r+"-",properties:"{"+e+t+"-"+r+"-"+e+"-"+r+"-"+t+"}",keyframes:!(!window.CSSKeyframesRule&&!window["WebKit|Moz|MS|O".match(new RegExp("("+r+")","i"))[1]+"CSSKeyframesRule"])}}();f.type=d.type="text/css",m.appendChild(f),m.appendChild(d),HTMLDocument.prototype._decorateDom=function(e){var t,n,r,o=this;if(o=o.getElementsByTagName("body")[0],1!==o.nodeType)return o;if(e(o))for(t=o.childNodes,r=0,n=t.length;n>r;r++)1===t[r].nodeType&&t[r]._decorateDom(e);return o},HTMLElement.prototype._decorateDom=function(e){var t,n,r,o=this;if(1!==o.nodeType)return o;if(e(o))for(t=o.childNodes,r=0,n=t.length;n>r;r++)1===t[r].nodeType&&t[r]._decorateDom(e);return o},HTMLDocument.prototype.addSelectorListener=HTMLElement.prototype.addSelectorListener=function(e,r){if(e&&"function"==typeof r){var c=!1,m=e.replace(u,function(e,t){return c=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]."+t+":not([sl__class__~="+t+"])"}).replace(_,function(e,t){return c=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__][sl__class__~="+t+"]:not(."+t+")"}).replace(l,"[sl__exist__]").replace(a,":not([sl__exist__])"),y=s[m],L=this.selectorListeners=this.selectorListeners||{};if(y)o[y].count++;else{y=s[m]="SelectorListener-"+(new Date).getTime();var S=document.createTextNode("@"+(p.keyframes?p.css:"")+"keyframes "+y+" "+i);d.appendChild(S),f.sheet.insertRule(m+p.properties.replace(/SelectorListener/g,y),0),o[y]={count:1,selector:e,attributeModified:c,keyframe:S,rule:f.sheet.cssRules[0]}}L.count?L.count++:(this._decorateDom(n),L.count=1,h.forEach(function(e){this.addEventListener(e,t,!1)},this)),(L[y]=L[y]||[]).push(r)}},HTMLDocument.prototype.removeSelectorListener=HTMLElement.prototype.removeSelectorListener=function(e,n){if(e){var r=e.replace(u,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]."+t+":not([sl__class__~="+t+"])"}).replace(_,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__][sl__class__~="+t+"]:not(."+t+")"}).replace(l,"[sl__exist__]").replace(a,":not([sl__exist__])");if(s.hasOwnProperty(r)){var i=this.selectorListeners||{},c=s[r],m=i[c]||[],p=o[c];if("function"==typeof n){var y=m.indexOf(n);y>-1&&(p.count--,p.count||(f.sheet.deleteRule(f.sheet.cssRules.item(p.rule)),d.removeChild(p.keyframe),delete o[c],delete s[r],delete i[c]),i.count--,m.splice(y,1),i.count||h.forEach(function(e){this.removeEventListener(e,t,!1)},this))}else arguments.length<2&&(f.sheet.deleteRule(f.sheet.cssRules.item(p.rule)),d.removeChild(p.keyframe),delete o[c],delete s[r],i.hasOwnProperty(c)&&delete i[c],i.count--,i.count||h.forEach(function(e){this.removeEventListener(e,t,!1)},this))}}},window.SelectorListener={VERSION:"1.1.0",jquery:function(e){"function"!=typeof e.fn.onSelector&&(e.fn.onSelector=function(e,t){return e&&"function"==typeof t&&this.each(function(){this.addSelectorListener(e,t)}),this},e.fn.offSelector=function(e,t){return this.each("function"==typeof t?function(){this.removeSelectorListener(e,t)}:function(){this.removeSelectorListener(e)}),this})}},"undefined"!=typeof jQuery&&window.SelectorListener.jquery(jQuery)}}();
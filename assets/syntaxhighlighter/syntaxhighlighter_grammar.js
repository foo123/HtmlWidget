/**
*
*   SyntaxHighlighterGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight brush for SyntaxHighlighter
*   https://github.com/foo123/syntaxhighlighter-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"SyntaxHighlighterGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=gt:!0===e||!1===e||e instanceof Boolean?t=dt:nt===e?t=ht:(t=It[at.call(e)]||kt,t=$t===t||e instanceof Number?isNaN(e)?bt:isFinite(e)?$t:yt:vt===t||e instanceof String?1===e.length?xt:vt:_t===t||e instanceof Array?_t:Et===t||e instanceof RegExp?Et:St===t||e instanceof Date?St:Ot===t||e instanceof Function?Ot:qt===t?qt:kt),t}function t(e,t,n,r){var o,s,l,a,i,u,p=e.length;if(arguments.length<4&&(r=p-1),0>r&&(r+=p),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,a=15&l,i=1&a,u=new Array(l),i&&(u[0]=t(e[n],n,n,r)),o=i;a>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=a;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function n(e,t,n,r,o){var s,l,a,i,u,p=e.length,c=n;if(arguments.length<5&&(o=p-1),0>o&&(o+=p),arguments.length<4&&(r=0),r>o)return c;if(r===o)return t(c,e[r],r);for(a=o-r+1,i=15&a,u=1&i,u&&(c=t(c,e[r],r)),s=u;i>s;s+=2)l=r+s,c=t(t(c,e[l],l),e[l+1],l+1);for(s=i;a>s;s+=16)l=r+s,c=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(c,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return c}function r(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,a=15&l,i=1&a;for(i&&e(t,r,t,n),o=i;a>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=a;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function o(t,n){var r,s,l,a,i=e(t),u=0;if($t===e(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,qt===i){s={};for(l in t)t[ot](l)&&t[st](l)&&(r=e(t[l]),qt===r?s[l]=n?o(t[l],u>0?u-1:n):t[l]:_t===r?s[l]=n?o(t[l],u>0?u-1:n):t[l].slice():St===r?s[l]=new Date(t[l]):vt&r?s[l]=t[l].slice():$t&r?s[l]=0+t[l]:s[l]=t[l])}else if(_t===i)for(a=t.length,s=new Array(a),l=0;a>l;l++)r=e(t[l]),qt===r?s[l]=n?o(t[l],u>0?u-1:n):t[l]:_t===r?s[l]=n?o(t[l],u>0?u-1:n):t[l].slice():St===r?s[l]=new Date(t[l]):vt&r?s[l]=t[l].slice():$t&r?s[l]=0+t[l]:s[l]=t[l];else s=St===i?new Date(t):vt&i?t.slice():$t&i?0+t:t;return s}function s(){var t,n,r,l,a,i,u,p,c,f,m=arguments,k=m.length;if(1>k)return null;for(n=o(m[0]),r=1;k>r;r++)if(t=m[r])for(l in t)if(t[ot](l)&&t[st](l))if(n[ot](l)&&n[st](l)){if(c=e(n[l]),f=e(t[l]),qt===c&&qt===f)n[l]=s(n[l],t[l]);else if(_t===c&&_t===f){if(u=n[l],p=t[l],i=p.length,!i)continue;if(u.length)for(a=0;i>a;a++)0>u.indexOf(p[a])&&u.push(p[a]);else n[l]=p.slice()}}else n[l]=o(t[l]);return n}function l(t,n){return n||_t!==e(t)?[t]:t}function a(t,n){return t=l(t),(n||_t!==e(t[0]))&&(t=[t]),t}function i(t,n){return vt&e(n)&&vt&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=nt:delete e[t],e}function p(e){return(e||"id_")+ ++Tt}function c(e){return(e||"uuid")+"_"+ ++Tt+"_"+(new Date).getTime()}function f(){var t,n,r,o,s,l,a=arguments,i=a.length;for(t=a[0]||{},s=1;i>s;s++)if(n=a[s],qt===e(n))for(o in n)n[ot](o)&&n[st](o)&&(r=n[o],l=e(r),$t&l?t[o]=0+r:St&l?t[o]=new Date(r):Rt&l?t[o]=r.slice():t[o]=r);return t}function m(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[ot](o)||(t[o]=function(){}),n=t[o],delete t[o],n[rt]=f(it(e[rt]),t),n[rt][o]=n,n}function k(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function h(e){return"&amp;"===e?"&":"&lt;"===e?"<":"&gt;"===e?">":"&quot;"===e?'"':"'"}function g(e){return"&#"+e.charCodeAt(0)+";"}function $(e,t){return e.replace(Ct,t?k:g)}function y(e){return e.replace(Gt,h)}function b(e){return e.replace(At,"\\$1")}function d(e,t){return new RegExp(e,t||"")}function v(e,t,n,r){var o,s,l,a,i=e.pos,u=e.length,p="",c=!!n;if(c){for(r=!!r,s=!1,a=0;u>i&&(o=e[ft](i++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&a++,(!l||2&a)&&(p+=o,a=0)):p+=o;2&a&&(p+=n)}else for(;u>i&&(o=e[ft](i++),t!==o);)p+=o;return e.pos=i,p}function x(t,n,r,o){var s,l,a,i,u,p=!0===r?0:1,c=o?"\\":"$",f=o?92:36;for(vt&e(n)&&(o&&(n=b(n)),n=[n,n,n],p=0),l=t.length,u="",s=0;l>s;)a=t[ft](s),l>s+1&&c===a?(i=t.charCodeAt(s+1),f===i?(u+=c,s+=2):i>=48&&57>=i?(u+=n[p+i-48]||"",s+=2):(u+=a,s+=1)):(u+=a,s+=1);return u}function w(t,n,r,o){if(!t||($t|Et)&e(t))return t;var s,l=n?n.length||0:0,a="";if(vt&e(o)?a=o:o&&(a=Bt),l&&n===t.substr(0,l)){var i,u,p,s,c,f=t.substr(l),m=f[ft](0),k="";for(s=f.length;s--&&(c=f[ft](s),m!==c);)"i"===c.toLowerCase()&&(k="i");return i=f.substring(1,s),u="^("+i+")",r[u]||(p=d(u,k),r[u]=p),r[u]}return a?(u="^("+b(t)+")"+a,r[u]||(p=d(u,k),r[u]=p),r[u]):t}function _(n,r,o){var s,l="";return vt&e(r)?l=r:r&&(l=Bt),s=t(n.sort(Nt),b).join("|"),[d("^("+s+")"+l,o?"i":""),1]}function q(t,n,r,o){var s=e(n);if($t===s)return n;if(o[t])return o[t];r=r||0;var l,a=0;return n&&n.isCharList&&(a=1,u(n,"isCharList")),l=gt===s?new P(xe,t,n,gt,r):xt===s?new P(xe,t,n,xt,r):jt&s?new P(xe,t,n,Et,r):vt&s?new P(xe,t,n,a?wt:vt,r):n,o[t]=l}function O(t,n,r,o,s,a,u,p){if(u[t])return u[t];var c,f,m,k,h,g,$,y=0,b=0,d=1,v=vt&e(o)?!0:!!o;if(c=l(n),m=c.length,1===m)$=q(t,w(c[0],r,a,o),0,u);else if(m>1){for(k=(m>>>1)+1,f=0;k>=f;f++)h=e(c[f]),g=e(c[m-1-f]),xt===h&&xt===g||(d=0),_t&h||_t&g?y=1:(Et&h||Et&g||i(c[f],r)||i(c[m-1-f],r))&&(b=1);if(d&&!v)c=c.slice().join(""),c.isCharList=1,$=q(t,c,0,u);else if(!v||y||b)if(y||b){for(f=0;m>f;f++)_t&e(c[f])?c[f]=O(t+"_"+f,c[f],r,o,s,a,u):c[f]=q(t+"_"+f,w(c[f],r,a),f,u);$=m>1?new P(we,t,c):c[0]}else{for(p&&(p.keywords=l(n).slice()),c=c.sort(Nt),f=0;m>f;f++)c[f]=q(t+"_"+f,w(c[f],r,a),f,u);$=m>1?new P(we,t,c):c[0]}else p&&(p.keywords=l(n).slice()),$=q(t,_(c,o,s),0,u)}return u[t]=$}function E(t,n,o,s,l){if(l[t])return l[t];var u=a(n),p=[],c=[];return r(function(n){var r,a,f,m;r=q(t+"_0_"+n,w(u[n][0],o,s),n,l),u[n].length>1?(f=i(u[n][1],o),m=f&&Ut.test(u[n][1]),Et!==r.ptype||vt!==e(u[n][1])||!m&&f?a=q(t+"_1_"+n,w(u[n][1],o,s),n,l):m?(a=new String(u[n][1]),a.regex_pattern=o):a=u[n][1]):a=r,p.push(r),c.push(a)},0,u.length-1),l[t]=new P(_e,t,[p,c])}function S(e,t){var n=a(e.tokens.slice());r(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function L(e,n,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),a=t(n,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(a),a}function R(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,r,o,l,a,i,p,c,f,m,k,h=t.Lex,g=t.Syntax,$=[h,g],y=$.length;for(k=0;y>k;){m=$[k++];for(o in m)m[ot](o)&&(n=o.split(":"),r=n[1]&&Ft(n[1]).length?Ft(n[1]):null,n=Ft(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],u(m,o),r&&(r=r[ct](),l=m[n],a=e(l),qt===a?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=l):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=l):"action"===r&&vt===a?m[n][l]=!0:m[n].tokens=l))),h===m&&(Dt&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),l=m[n],l.type&&(c=l.type=l.type[ct](),"line-block"===c?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===c?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===c&&(l.type="block",l.multiline=!0,l.escape="\\"))))}m=h;for(n in m)if(m[ot](n))for(l=m[n];l.extend;)i=l.extend,u(l,"extend"),p=h[i],p&&(Dt&e(p)&&(p=h[i]={type:"simple",tokens:p}),l=s(p,l));m=h;for(n in m)m[ot](n)&&(l=m[n],l.type?(c=l.type=l.type[ct](),"line-block"===c?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===c?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===c&&(l.type="block",l.multiline=!0,l.escape="\\")):l["escaped-line-block"]?(l.type="block",l.multiline=!1,l.escape||(l.escape="\\"),l.tokens=l["escaped-line-block"],u(l,"escaped-line-block")):l["escaped-block"]?(l.type="block",l.multiline=!0,l.escape||(l.escape="\\"),l.tokens=l["escaped-block"],u(l,"escaped-block")):l["line-block"]?(l.type="block",l.multiline=!1,l.escape=!1,l.tokens=l["line-block"],u(l,"line-block")):l.comment?(l.type="comment",l.escape=!1,l.tokens=l.comment,u(l,"comment")):l.block?(l.type="block",l.tokens=l.block,u(l,"block")):l.simple?(l.type="simple",l.tokens=l.simple,u(l,"simple")):l.nop?(l.type="action",l.action=["nop",l.nop,!1],l.nop=!0):l.error?(l.type="action",l.action=["error",l.error,!!l["in-context"]],u(l,"error")):l[ot]("context")?(l.type="action",l.action=[l.context?"context-start":"context-end",l.context,!!l["in-context"]],u(l,"context")):l.indent?(l.type="action",l.action=["indent",l.indent,!!l["in-context"]],u(l,"indent")):l.outdent?(l.type="action",l.action=["outdent",l.outdent,!!l["in-context"]],u(l,"outdent")):l.unique?(l.type="action",l.action=["unique",vt&e(l.unique)?["_DEFAULT_",l.unique]:l.unique,!!l["in-context"]],u(l,"unique")):l.push?(l.type="action",l.action=["push",l.push,!!l["in-context"]],u(l,"push")):l[ot]("pop")?(l.type="action",l.action=["pop",l.pop,!!l["in-context"]],u(l,"pop")):l.type="simple","action"===l.type?l.ci=!(!l.caseInsesitive&&!l.ci):"block"===l.type||"comment"===l.type?(l.multiline=l[ot]("multiline")?!!l.multiline:!0,vt&e(l.escape)||(l.escape=!1)):"simple"===l.type&&(l.meta=l.autocomplete&&vt&e(l.meta)?l.meta:null,l.ci=!(!l.caseInsesitive&&!l.ci)));m=g;for(n in m)m[ot](n)&&(l=m[n],qt!==e(l)||l.type?l.type&&(c=l.type=l.type[ct](),"group"===c&&l.match?(a=e(l.match),vt&a?(f=l.match[ct](),"alternation"===f||"either"===f?(l.type="alternation",u(l,"match")):"sequence"===f||"all"===f?(l.type="sequence",u(l,"match")):"zeroorone"===f?(l.type="zeroOrOne",u(l,"match")):"zeroormore"===f?(l.type="zeroOrMore",u(l,"match")):"oneormore"===f?(l.type="oneOrMore",u(l,"match")):(l.type="sequence",u(l,"match"))):_t&a&&(l.type="repeat",l.repeat=l.match,u(l,"match"))):"either"===c?l.type="alternation":"all"===c?l.type="sequence":"lookahead"===c?l.type="positiveLookahead":"grammar"===c&&(l.type="subgrammar"),"subgrammar"!==l.type||l.tokens||(l.tokens=n)):l.ngram||l["n-gram"]?(l.type="ngram",l.tokens=l.ngram||l["n-gram"],l["n-gram"]?u(l,"n-gram"):u(l,"ngram")):l.sequence||l.all?(l.type="sequence",l.tokens=l.sequence||l.all,l.all?u(l,"all"):u(l,"sequence")):l.alternation||l.either?(l.type="alternation",l.tokens=l.alternation||l.either,l.either?u(l,"either"):u(l,"alternation")):l.zeroOrOne?(l.type="zeroOrOne",l.tokens=l.zeroOrOne,u(l,"zeroOrOne")):l.zeroOrMore?(l.type="zeroOrMore",l.tokens=l.zeroOrMore,u(l,"zeroOrMore")):l.oneOrMore?(l.type="oneOrMore",l.tokens=l.oneOrMore,u(l,"oneOrMore")):l.positiveLookahead||l.lookahead?(l.type="positiveLookahead",l.tokens=l.positiveLookahead||l.lookahead,l.lookahead?u(l,"lookahead"):u(l,"positiveLookahead")):l.negativeLookahead?(l.type="negativeLookahead",l.tokens=l.negativeLookahead,u(l,"negativeLookahead")):(l.subgrammar||l.grammar)&&(l.type="subgrammar",l.tokens=l.subgrammar||l.grammar,l.subgrammar?u(l,"subgrammar"):u(l,"grammar")));return t}function j(t,n,r){if(r=r||{},n=n||[],!t||!t.length)return n;var o,s,l,a,i,u,p;for(o=0,s=t.length;s>o;o++)if(i=t[o])if(De===i.type)if(i.autocompletions)for(l=0,a=i.autocompletions.length;a>l;l++)p=i.autocompletions[l],r[ot]("w_"+p.word)||(n.push(p),r["w_"+p.word]=1);else vt===i.token.ptype&&vt&e(i.token.pattern)&&i.token.pattern.length>1&&(r[ot]("w_"+i.token.pattern)||(n.push({word:""+i.token.pattern,meta:i.name,ci:!!i.ci}),r["w_"+i.token.pattern]=1));else if(Fe===i.type)j(i.token,n,r);else if(Ye&i.type){l=0,a=i.token.length;do j([u=i.token[l++]],n,r);while(a>l&&(ze&u.type&&1>u.min||qe===u.type))}else ze&i.type&&j([i.token[0]],n,r);return n}function D(t,n,r,o){for(var s;vt&e(s=n[t]||r[t]);)t=s;return o?t:n[t]||r[t]||t}function I(e,t){return e.length>1?r(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Yt.test(o)&&Yt.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function M(n,r,s){var l,a,i,u,p,c,f,m,k,h,g,$,y,x,w,_=!1;if(w=n.modifier?n.modifier:null,m=new String(Ft(n)),m.pos=0,1===m.length)$=""+n,r[$]||s[$]||(r[$]={type:"simple",tokens:n}),n=$;else{for(l=[],a=[],i="",y=[];m.pos<m.length;)if(k=m[ft](m.pos++),Ht.test(k))if(i.length&&(_?(a.length&&(g=a[a.length-1],$=g+"."+i,c=r[$]||s[$],c||(f=D(g,r,s),s[$]=vt&e(f)?new String(f):o(f),s[$].modifier=i),a[a.length-1]=$),_=!1):"0"===i?(r[et]||(r[et]={type:"simple",tokens:0}),a.push(et)):"^^"===i?(r[We]||(r[We]={type:"simple",tokens:Oe}),a.push(We)):"^^1"===i?(r[Je]||(r[Je]={type:"simple",tokens:Ee}),a.push(Je)):"^"===i?(r[Qe]||(r[Qe]={type:"simple",tokens:Le}),a.push(Qe)):"$"===i?(r[Xe]||(r[Xe]={type:"simple",tokens:Se}),a.push(Xe)):(r[i]||s[i]||(r[i]={type:"simple",tokens:i}),a.push(i)),i=""),"."===k)a.length&&m.pos<m.length&&!Ht.test(m[ft](m.pos))?_=!0:i+=k;else if('"'===k||"'"===k)u=v(m,k,"\\",!0),u.length?($=""+u,r[$]||(r[$]={type:"simple",tokens:u}),a.push($)):(r[tt]||(r[tt]={type:"simple",tokens:""}),a.push(tt));else if("["===k)u=v(m,"]","\\",!0),$="["+u+"]",r[$]||(r[$]={type:"simple",tokens:d("^(["+("^"===u[ft](0)?"^"+b(u.slice(1)):b(u))+"])")}),a.push($);else{if("]"===k){i+=k;continue}if("/"===k)u=v(m,k,"\\",!1),h="",u.length&&(m.pos<m.length&&"i"===m[ft](m.pos)&&(m.pos++,h="i"),$="/"+u+"/"+h,r[$]||(r[$]={type:"simple",tokens:d("^("+u+")",h)}),a.push($));else if("*"===k||"+"===k||"?"===k)a.length?(g=a[a.length-1],$=""+g+k,s[$]||(s[$]={type:"*"===k?"zeroOrMore":"+"===k?"oneOrMore":"zeroOrOne",tokens:[g]}),a[a.length-1]=$):i+=k;else if("{"===k)a.length?(p=v(m,"}",!1),p=t(p.split(","),Ft),p[0].length?p[0]=parseInt(p[0],10)||0:p[0]=0,0>p[0]&&(p[0]=0),2>p.length?p.push(p[0]):p[1].length?p[1]=parseInt(p[1],10)||mt:p[1]=mt,0>p[1]&&(p[1]=0),g=a[a.length-1],$=""+g+["{",p[0],",",isFinite(p[1])?p[1]:"","}"].join(""),s[$]||(s[$]={type:"repeat",repeat:[p[0],p[1]],tokens:[g]}),a[a.length-1]=$):i+=k;else{if("}"===k){i+=k;continue}"&"===k||"!"===k?a.length?(g=a[a.length-1],$=""+g+k,s[$]||(s[$]={type:"!"===k?"negativeLookahead":"positiveLookahead",tokens:[g]}),a[a.length-1]=$):i+=k:"|"===k?(_=!1,a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length?l.push(a[0]):i+=k,a=[]):"("===k?(y.push([a,l,i]),a=[],l=[],i=""):")"===k&&(a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length&&l.push(a[0]),a=[],l=I(l,1),l.length>1?($=""+l.join(" | "),s[$]||(s[$]={type:"alternation",tokens:l})):l.length&&($=l[0]),l=[],x=y.pop(),a=x[0],l=x[1],i=x[2],g=$,$="("+g+")",s[$]||(s[$]=o(D(g,r,s))),a.push($))}}else i+=k;i.length&&(_?(a.length&&(g=a[a.length-1],$=g+"."+i,c=r[$]||s[$],c||(f=D(g,r,s),s[$]=vt&e(f)?new String(f):o(f),s[$].modifier=i),a[a.length-1]=$),_=!1):"0"===i?(r[et]||(r[et]={type:"simple",tokens:0}),a.push(et)):"^^"===i?(r[We]||(r[We]={type:"simple",tokens:Oe}),a.push(We)):"^^1"===i?(r[Je]||(r[Je]={type:"simple",tokens:Ee}),a.push(Je)):"^"===i?(r[Qe]||(r[Qe]={type:"simple",tokens:Le}),a.push(Qe)):"$"===i?(r[Xe]||(r[Xe]={type:"simple",tokens:Se}),a.push(Xe)):(r[i]||s[i]||(r[i]={type:"simple",tokens:i}),a.push(i))),i="",a=I(a),a.length>1?($=""+a.join(" "),s[$]||(s[$]={type:"sequence",tokens:a}),l.push($)):a.length&&l.push(a[0]),a=[],l=I(l,1),l.length>1?($=""+l.join(" | "),s[$]||(s[$]={type:"alternation",tokens:l}),n=$):l.length&&(n=l[0]),l=[]}return w&&(r[n]||s[n])&&((r[n]||s[n]).modifier=w),n}function F(o,s,i,u,p,c,f,m,k,h,g){var $,y,b,d,v,x,w,_=null,q=null,R=null;if(Oe===o||Ee===o||Le===o||Se===o)return new C(o,Oe===o?We:Ee===o?$T_FBNL$:Le===o?Qe:Xe,o,q);if(!1===o||0===o)return new C(Re,et,0,q);if(""===o)return new C(je,tt,"",q);if(null===o)return new C(De,Ze,gt,q,R);if(_t&e(o)&&(b=o,o="NGRAM_"+b.join("_"),u[o]||(u[o]={type:"ngram",tokens:b})),o=""+o,m[o])return m[o];if(v=D(o,i,u),vt&e(v)&&(v=M(v,i,u),v=i[v]||u[v]||null),!v)return null;if($=v.type?Ve[v.type[ct]().replace(Pt,"")]||De:De,q=v.msg||null,R=v.modifier||null,y=v.tokens,De&$){if(Oe===y||Ee===y||Le===y||Se===y||!1===y||0===y)return _=new C(y||Re,o,y||0,q),m[o]=_,_;if(""===y)return _=new C(je,o,"",q),m[o]=_,_;if(null===y)return _=new C(De,o,gt,q,R),m[o]=_,_;if(!y)return null}if(qe&$)v[ot]("action")?"nop"===v.action[0]?v.action[0]=me:"error"===v.action[0]?v.action[0]=ke:"context-start"===v.action[0]?v.action[0]=ge:"context-end"===v.action[0]?v.action[0]=$e:"push"===v.action[0]?v.action[0]=ye:"pop"===v.action[0]?v.action[0]=be:"unique"===v.action[0]?v.action[0]=he:"indent"===v.action[0]?v.action[0]=de:"outdent"===v.action[0]&&(v.action[0]=ve):v[ot]("nop")?v.action=[me,v.nop,!!v["in-context"]]:v[ot]("error")?v.action=[ke,v.error,!!v["in-context"]]:v[ot]("context")?v.action=[v.context?ge:$e,v.context,!!v["in-context"]]:v[ot]("context-start")?v.action=[ge,v["context-start"],!!v["in-context"]]:v[ot]("context-end")?v.action=[$e,v["context-end"],!!v["in-context"]]:v[ot]("push")?v.action=[ye,v.push,!!v["in-context"]]:v[ot]("pop")?v.action=[be,v.pop,!!v["in-context"]]:v[ot]("unique")?v.action=[he,vt&e(v.unique)?["_DEFAULT_",v.unique]:v.unique,!!v["in-context"]]:v[ot]("indent")?v.action=[de,v.indent,!!v["in-context"]]:v[ot]("outdent")&&(v.action=[ve,v.outdent,!!v["in-context"]]),v.nop&&(v.action[0]=me),_=new C(qe,o,v.action.slice(),q,R),_.ci=!!v.caseInsensitive||v.ci,m[o]=_;else if(y=l(y),De&$){w=v.autocomplete?L(v,Rt&e(v.autocomplete)?l(v.autocomplete):y,o,g):null;var j={};if(x="undefined"!=typeof v.combine?v.combine:!!(_t&e(v.tokens)),_=new C(De,o,O(o,y.slice(),s,x,!(!v.caseInsensitive&&!v.ci),c,f,j),q,R,null,w),j.keywords&&(_.keywords=j.keywords.join("|")),m[o]=_,null!=v.except){var I,N,z=l(v.except),P=z.length,T=[];for(I=0;P>I;I++)z[I]&&(N=F(z[I],s,i,u,p,c,f,m,k,h,g),N&&T.push(N));T.length&&(_.except=T)}}else Ie&$?(Me===$&&S(v,h),_=new C($,o,E(o,y.slice(),s,c,f),q),_.empty=v[ot]("empty")?!!v.empty:!0,_.mline=v[ot]("multiline")?!!v.multiline:!0,_.esc=v[ot]("escape")?v.escape:!1,_.inter=!!p[o+".inside"],Me===$&&v.interleave&&k.push(H(_)),R&&(_.modifier=R),m[o]=_):Ke&$&&(Ue===$?m[o]=new C(Ue,o,y,q,R):Be===$?(d=a(y),_=t(d,function(e,t){return new C(Be,o+"_NGRAM_"+t,null,q,R)}),m[o]=_,r(function(e){_[e].token=l(n(d[e],function(e,t){return e.concat(F(t,s,i,u,p,c,f,m,k,h,g))},[]))},0,d.length-1)):(Ge===$||He===$?_=new C($,o,null,q,R):ze&$&&_t&e(v.repeat)?(_=new C(ze,o,null,q,R),_.min=v.repeat[0],_.max=v.repeat[1]):Pe===$?(_=new C(Pe,o,null,q,R),_.min=0,_.max=1):Te===$?(_=new C(Te,o,null,q,R),_.min=0,_.max=mt):Ae===$?(_=new C(Ae,o,null,q,R),_.min=1,_.max=mt):_=Fe===$?new C(Fe,o,null,q,R):new C(Ne,o,null,q,R),m[o]=_,_.token=l(n(y,function(e,t){return e.concat(F(t,s,i,u,p,c,f,m,k,h,g))},[]))));return m[o]}function N(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=R(t),t.Parser&&t.Parser.length&&r(function o(s,l){var a,i,u,p=l[s];n[p]||(_t&e(p)&&(a=p,p="NGRAM_"+a.join("_"),t.Syntax[p]||(t.Syntax[p]={type:"ngram",tokens:a})),i=D(p,t.Lex,t.Syntax),vt&e(i)&&(i=M(i,t.Lex,t.Syntax),i=t.Lex[i]||t.Syntax[i]||null),i&&(n[p]=i,u=i.type?Ve[i.type[ct]().replace(Pt,"")]||De:De,Ke&u&&r(o,0,i.tokens.length-1,i.tokens)))},0,t.Parser.length-1,t.Parser),t}function z(t){var r,s,l,a,i,u,p,c,f,m,k,h,g,$;return t.__parsed?t:(r=t.RegExpID||null,l=t.Extra?o(t.Extra):{},a=t.Style?o(t.Style):{},i=null,u=null,p=t.Lex?o(t.Lex):{},c=t.Syntax?o(t.Syntax):{},f={},m={},k={},g={},$={},h=[],s=t.Parser?o(t.Parser):[],t=R({Style:a,Fold:i,Match:u,Lex:p,Syntax:c,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),t.$parser=n(s,function(t,n){var o=F(n,r,p,c,a,f,m,k,h,g,$)||null;return o&&(_t&e(o)?t=t.concat(o):t.push(o)),t},[]),t.$interleaved=h&&h.length?h:null,t.$comments=g,t.$autocomplete=$&&$.autocomplete&&$.autocomplete.length?$.autocomplete:null,t.__parsed=1,t)}function P(t,n,r,o,s){var l,a,i=this;l=i.type=t,i.name=n,i.pattern=r,a=i.ptype=o||vt,i.key=s||0,we===l?i.key=!1!==s:_e===l?i.pattern[0]=new P(we,n+"_Start",r[0],null,!1):gt===a?i.pattern=null:Et===a&&(i.pattern=Et&e(r)?[r,0]:[r[0],r[1]||0])}function T(t,n,r,o){var s,l,a,i,u,p,c,f,m,k,h,g=t,$=g.type,y=g.pattern,b=g.key;if(_e===$){if(s=g.name,a=y[0],i=y[1],p=T(a,n,r,o))return u=i[p[0]],f=e(u),m=a.pattern[p[0]].ptype,Et===m&&Lt&f&&(u.regex_pattern?(c=x(u,p[1],0,1),u=new P(xe,s+"_End",w(c,u.regex_pattern,{}),Et)):(c=$t&f?p[1][u+1]:x(u,p[1]),u=new P(xe,s+"_End",c,c.length>1?vt:xt))),u}else if(we===$){for(k=0,h=y.length;h>k;k++)if(c=T(y[k],n,r,o))return b?[k,c[1]]:c}else{if(l=g.ptype,gt===l)return!1!==r&&n.end(),[b,""];if(Et===l){if(c=n.slice(n.pos).match(y[0]),c&&0===c.index)return!1!==r&&n.mov(c[y[1]||0].length),[b,y[1]>0?c[y[1]]:c]}else if(wt===l){if(!0===o){c=-1;var d,v;for(h=y.length-1;h>=0;h--)d=n.indexOf(y[ft](h),n.pos),d>-1&&(-1===c||c>d)&&(c=d,v=y[ft](h));if(c>-1)return!1!==r&&(n.pos=c+1),[b,v]}else if(c=n[ft](n.pos)||null,c&&-1<y.indexOf(c))return!1!==r&&n.mov(1),[b,c]}else if(xt===l){if(!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+1),[b,y]}else if(c=n[ft](n.pos)||null,y===c)return!1!==r&&n.mov(1),[b,c]}else if(vt===l)if(h=y.length,!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+h),[b,y]}else if(y===n.substr(n.pos,h))return!1!==r&&n.mov(h),[b,y]}return!1}function A(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function C(e,t,n,r,o,s,l,a){var i=this;i.type=e,i.name=t,i.token=n,i.modifier=o||null,i.except=s||null,i.autocompletions=l||null,i.keywords=a||null,i.pos=null,i.msg=r||null,i.$msg=null,i.status=0,i.empty=!1,i.ci=!1,i.mline=!0,i.esc=!1,i.inter=!1,i.found=0,i.min=0,i.max=1,i.i0=0,i.$id=null}function G(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function H(e,t,n,r){var o=new C(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=ie),n&&(o.modifier=n),r&&(o.$id=r),o}function B(e){var t=e.name;return e.$msg?e.$msg:e.status&ie?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function U(e,t,n,r,o,s,l){e.status&le&&(e.err[""+t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||B(s)])}function Y(e,t,n){if(e.stack===t)t=e.stack=new A(n,e.stack);else{for(var r=e.stack;r&&r.prev!==t;)r=r.prev;t=new A(n,t),r&&(r.prev=t)}return t}function K(e,t){if(null==e)return null;if(t){for(var n=new A(e.val),r=n,o=e;o.prev;)r.prev=new A(o.prev.val),o=o.prev,r=r.prev;return n}return e}function V(e,t,n,r){var o,s,l,a,i,u=1/0,p=null,c=1/0;if(s=t.pos,t.spc(),l=t.pos,o=e.stack,t.pos<t.length){for(i=0;o&&(a=o.val,a.$id===r.$id);){for(;!(W(a,t,e,n)||(t.pos=a.pos>t.pos?a.pos:t.pos+1,e.stack=o,t.pos>=t.length)););e.stack=o,t.pos<t.length&&u>t.pos?(u=t.pos,p=o,c=i):u===t.pos&&c>i&&(u=t.pos,p=o,c=i),t.pos=l,o=o.prev,i++}u<t.length?(t.pos=u,e.stack=p):t.end()}return l>=s&&t.pos===l}function W(e,t,n,r){if(!e)return!1;var o=e.type,s=Ke&o?Z:Ie&o?X:qe&o?J:Q;return s(e,t,n,r)}function J(t,n,r,o){var s,l,a,i,u,p,c,f,m,k,h,g,$,y,b,d=t,v=d.token||null,w=d.ci,_=d.name,q=!(r.status&le);if(d.status=0,d.$msg=null,q||!v||!o||!o.pos)return!0;if(b=!!(Ie&o.T),me===v[0]||b&&!o.block)return!0;if(s=v[0],l=v[1],g=v[2],u=d.msg,b?(y=o.block.match||o.block.str,f=o.block.pos[0][0],m=o.block.pos[0][1],k=o.block.pos[0][2],h=o.block.pos[0][3]):(y=o.match||o.str,f=o.pos[0],m=o.pos[1],k=o.pos[2],h=o.pos[3]),ke===s)return!u&&vt&e(l)&&(u=l),d.$msg=u?x(u,y,!0):'Error "'+_+'"',U(r,f,m,k,h,d,B(d)),d.status|=ue,!1;if($e===s)r.ctx=r.ctx?r.ctx.prev:null;else if(ge===s)r.ctx=new A({symb:{},queu:null},r.ctx);else if(be===s){if(g){if(!r.ctx)return!0;p=r.ctx.val.queu}else p=r.queu;if(l){if(l=x(l,y),w&&(l=l[ct]()),!p||l!==p.val[0])return p?(d.$msg=u?x(u,[p.val[0],l],!0):'Tokens do not match "'+p.val[0]+'","'+l+'"',$=B(d),U(r,p.val[1],p.val[2],p.val[3],p.val[4],d,$),U(r,f,m,k,h,d,$),p=p.prev):(d.$msg=u?x(u,["",l],!0):'Token does not match "'+l+'"',$=B(d),U(r,f,m,k,h,d,$)),d.status|=ue,g?r.ctx&&(r.ctx.val.queu=p):r.queu=p,!1;p=p?p.prev:null}else p=p?p.prev:null;g?r.ctx&&(r.ctx.val.queu=p):r.queu=p}else if(ye===s&&l){if(g){if(!r.ctx)return!0;p=r.ctx.val.queu}else p=r.queu;l=x(l,y),w&&(l=l[ct]()),d.$msg=u?x(u,l,!0):'Token does not match "'+l+'"',p=new A([l,f,m,k,h,B(d)],p),g?r.ctx&&(r.ctx.val.queu=p):r.queu=p}else if(he===s){if(g){if(!r.ctx)return!0;c=r.ctx.val.symb}else c=r.symb;if(a=l[1],i=l[0],a=x(a,y,!0),w&&(a=a[ct]()),c[ot](i)||(c[i]={}),c[i][ot](a))return d.$msg=u?x(u,a,!0):'Duplicate "'+a+'"',$=B(d),U(r,c[i][a][0],c[i][a][1],c[i][a][2],c[i][a][3],d,$),U(r,f,m,k,h,d,$),d.status|=ue,!1;c[i][a]=[f,m,k,h]}return!0}function Q(e,t,n,r,o){var s,l,a=e,i=a.token,u=a.modifier,p=a.type,c=a.name,f=a.except,m=n.line,k=t.pos,h=null,g=!1;if(a.status&=ce,a.$msg=o?null:a.msg||null,a.pos=t.pos,f&&!o){l=te(n,t);for(var $=0,y=f.length;y>$;$++)if(s=f[$],a!==s&&De===s.type&&Q(s,t,n,r,1))return a.pos=s.pos,te(n,t,l),!1}return Oe===p?g=0===n.line:Ee===p?g=n.bline+1===n.line:Le===p?g=t.sol():Se===p?(t.spc(),t.eol()?g=c:(a.pos=t.pos,t.bck(k))):Re===p?(a.status=0,g=!0):je===p?(a.status&ie&&t.spc()&&!t.eol()?(a.pos=t.pos,t.bck(k),a.status|=ue):g=!0,a.status&=pe):gt===i?(t.end(),g=u||c):(h=T(i,t))&&(h=h[1],g=u||c),o?g:(!1!==g&&(r.T=p,r.id=c,r.type=g,r.str=t.sel(k,t.pos),r.match=h,r.pos=[m,k,m,t.pos]),!g&&a.status&&a.$msg&&(a.$msg=x(a.$msg,c,!0)),g)}function X(e,t,n,r){var o,s,l,a,i,u,p,c,f,m,k,h,g,$,y,b,d,v,w,_,q,O,E=e,S=E.name,L=E.type,R=E.modifier,j=E.token,D=E.mline,I=E.inter,M=I?S+".inside":S,F=E.esc,N=!!F,z="",P="",A="",C="",G=E.$id||S,B=n.outer,U=B&&B[2],K=B&&B[1];if(E.status&=ce,E.$msg=E.msg||null,E.pos=t.pos,_=n.line,q=t.pos,Me===L&&(E.status&=pe),y=E.status&ie,l=0,a=0,n.block&&n.block.name===S?(a=1,l=1,$=M,o=n.block.end,c=n.block.sp,m=n.block.ip,f=n.block.ep,z=n.block.s,P=n.block.i):!n.block&&(o=T(j,t))&&(a=1,$=S,d=t.pos,c=[_,q],m=[[_,d],[_,d]],f=[_,d],z=t.sel(q,d),P="",C="",n.block={name:S,end:o,sp:c,ip:m,ep:f,s:z,i:P,e:C}),a){if(w=n.stack,s=gt===o.ptype,b=s||E.empty,I){if(s&&l&&t.sol())return E.status&=pe,n.block=null,!1;if(!l)return d=t.pos,r.T=L,r.id=S,r.type=R||$,r.str=t.sel(q,d),r.match=null,r.pos=[_,q,_,d],Y(n,w,H(E,y,0,G)),R||$}if(d=t.pos,i=K?s&&t.eol():T(o,t),p=D,u=0,i)$=s?M:S,C=t.sel(d,t.pos);else if(v=t.pos,h=!1,K||N||wt!==o.ptype&&xt!==o.ptype&&vt!==o.ptype){for(;!t.eol();){if(K){if(W(K,t,U,r)){if(t.pos>v){s&&(i=1);break}return!0}if(s){g=t.nxt(1),A+=g;continue}}if(d=t.pos,!h&&T(o,t)){I&&t.pos>d&&d>v?($=M,t.bck(d),u=1):($=S,i=1),C=t.sel(d,t.pos);break}g=t.nxt(1),A+=g,h=N&&!h&&F===g,d=t.pos}s&&t.eol()&&(i=1)}else(O=T(o,t,!0,!0))?I&&t.pos>d+O[1].length?($=M,t.mov(-O[1].length),u=1,A=t.sel(d,t.pos)):($=S,i=1,A=t.sel(d,t.pos-O[1].length),C=O[1]):(t.end(),$=M,u=1,A=t.sel(d,t.pos));return p=D||N&&h,P+=A,m[1]=[_,d],f=[_,t.pos],i&&!b&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(i||!p&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=P,n.block.e=C,Y(n,w,H(E,y,0,G))),r.T=L,r.id=S,r.type=R||$,r.str=t.sel(q,t.pos),r.match=null,r.pos=[_,q,f[0],f[1]],E.pos=t.pos,n.block||(k=z+P+C,r.block={str:k,match:[k,P,z,C],part:[k,z,P,C],pos:[[c[0],c[1],f[0],f[1]],[c[0],c[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),R||$)}return E.status&&E.$msg&&(E.$msg=x(E.$msg,S,!0)),!1}function Z(e,t,n,r){var o,s,l,a,i,u,c,f,m,k,h,g,$,y,b,d=e,v=d.type,x=(d.name,d.token),w=x.length,_=d.modifier;if(d.status&=ce,d.$msg=d.msg||null,f=t.pos,m=n.stack,d.pos=t.pos,u=0,c=0,Ue===v){d.status&=ce;var q=new String(x[0]),O=n.stack?n.stack.val:null;return q.subgrammar=1,q.next=O?new C(Ge,O.name,[O]):null,q.required=O?O.status&ie:0,q}if(Fe===v){for($=p(),d.status|=ie,g=[],b=te(n,t),h=0,k=h;w>k;k++){if(o=H(x[k],1,_,$),s=W(o,t,n,r),d.pos=o.pos,o.status&ie&&(u++,g.push(B(o))),!1!==s)return s;o.status&ue&&(c++,te(n,t,b))}return u>0?d.status|=ie:d.status&=pe,w===c&&u>0?d.status|=ue:d.status&=ce,d.status&&!d.$msg&&g.length&&(d.$msg=g.join(" | ")),!1}if(Ye&v){y=!!(v&Ne),$=d.$id||p(),y?d.status|=ie:d.status&=pe,b=te(n,t),h=0;do o=H(x[h++],y,_,$),s=W(o,t,n,r);while(w>h&&(!0===s&&Ce&o.type||!1===s&&!(o.status&ie)));if(d.pos=o.pos,!1!==s){if(!0!==s||Re!==o.type)for(k=w-1;k>=h;k--)m=Y(n,m,H(x[k],1,_,$));return s.subgrammar&&w>h&&(s.next=new C(Ge,x[h].name,[x[h]]),s.required=x[h].status&ie),s}return o.status&ue?(y?d.status|=ue:d.status&=ce,te(n,t,b)):y&&o.status&ie&&(d.status|=ue),d.status&&!d.$msg&&(d.$msg=B(o)),!1}if(Ce&v)return Ue&x[0].type?!0:(b=te(n,t,null,!1),s=W(H(x[0],0),t,n,r),te(n,t,b),He===v?!1===s:!1!==s);for($=d.$id||p(),l=d.found,a=d.min,i=d.max,d.status=0,g=[],b=te(n,t),k=0;w>k;k++){if(o=H(x[k],1,_,$),s=W(o,t,n,r),d.pos=o.pos,!1!==s){if(++l,i>=l)return d.found=l,Y(n,m,H(d,0,0,p())),d.found=0,s;break}o.status&ie&&(u++,g.push(B(o))),o.status&ue&&te(n,t,b)}return a>l&&(d.status|=ie),(l>i||a>l&&u>0)&&(d.status|=ue),d.status&&!d.$msg&&g.length&&(d.$msg=g.join(" | ")),!1}function ee(e,t){var n=this;n.id=e?c("state"):"state",t instanceof ee?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=K(t.stack,!1),n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new ee(e,t.outer[2])]:null,n.status&le?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.block=null,n.outer=null,n.status&le?(n.queu=[],n.symb={},n.ctx=null,n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function te(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===r&&(e.status=0),n)}function ne(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function re(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?ut(0,r.pos+e):pt(r.length,r.pos+e),r},r.bck=function(e){return r.pos=ut(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||re.$NONSPC$;r.pos<r.length&&t.test(n=r[ft](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[ft](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||re.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function oe(e,n){var o=function(e){return new n.Match(e.token,e.pos,e.type)},s=n.Highlighter,l=m(s,{constructor:function(){var e=this;s.call(e)},findMatches:function(e,n){var s=l.escapeHtml;s&&(n=y(n));var a=l.$parser.parse(n,se|le|ae).tokens;if(s){var i=0;r(function(e,t){var n=t[e];n.pos=i,n.token=$(n.token,1),i+=n.token.length},0,a.length-1,a)}return t(a,o)}});return l.$id=c("syntaxhighlighter_grammar_brush"),l.$parser=new Wt.Parser(z(e)),l.escapeHtml=!0,l.submode=function(e,t){l.$parser.subparser(e,t.$parser)},l.dispose=function(){l.$parser&&l.$parser.dispose(),l.$parser=null},l}var se=1,le=2,ae=32,ie=4,ue=8,pe=~ie,ce=~ue,fe=ie|ue,me=0,ke=4,he=8,ge=16,$e=17,ye=32,be=33,de=128,ve=129,xe=2,we=4,_e=8,qe=4,Oe=8,Ee=9,Se=16,Le=32,Re=128,je=256,De=512,Ie=1024,Me=1025,Fe=2048,Ne=4096,ze=8192,Pe=8193,Te=8194,Ae=8195,Ce=16384,Ge=Ce,He=16385,Be=32768,Ue=65536,Ye=Ne|Be,Ke=Fe|Ne|ze|Ce|Be|Ue,Ve={
action:qe,simple:De,block:Ie,comment:Me,subgrammar:Ue,alternation:Fe,sequence:Ne,repeat:ze,zeroorone:Pe,zeroormore:Te,oneormore:Ae,positivelookahead:Ge,negativelookahead:He,ngram:Be},We="$|SOF|$",Je="$|NONBLANK|$",Qe="$|SOL|$",Xe="$|EOL|$",Ze="$|ENDLINE|$",et="$|EMPTY|$",tt="$|NONSPACE|$",nt=void 0,rt="prototype",ot="hasOwnProperty",st="propertyIsEnumerable",lt=Object[rt],at=lt.toString,it=Object.create,ut=Math.max,pt=Math.min,ct="toLowerCase",ft="charAt",mt=1/0,kt=4,ht=8,gt=16,$t=32,yt=33,bt=34,dt=64,vt=128,xt=129,wt=130,_t=256,qt=512,Ot=1024,Et=2048,St=4096,Lt=vt|$t,Rt=vt|_t,jt=Et|_t,Dt=vt|_t|Et,It={"[object Number]":$t,"[object String]":vt,"[object Array]":_t,"[object RegExp]":Et,"[object Date]":St,"[object Function]":Ot,"[object Object]":qt},Mt=/^\s+|\s+$/g,Ft=String[rt].trim?function(e){return e.trim()}:function(e){return e.replace(Mt,"")},Nt=function(e,t){return t.length-e.length},zt=/\r\n|\r|\n/g,Pt=/[\-_]/g,Tt=0,At=/([.*+?^${}()|[\]\/\\\-])/g,Ct=/[&"'<>]/g,Gt=/&(amp|lt|gt|apos|quot);/g,Ht=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Bt="(\\s|\\W|$)",Ut=/(\\\\)*?\\\d/,Yt=/[*+]$/;re.$SPC$=/^[\s\u00a0]+/,re.$NONSPC$=/[^\s\u00a0]/,re.$NOTEMPTY$=/\S/,re.$SPACE$=/^\s*/;var Kt=m({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,a,i,u,p,c,f,m,k,h,g,$,y,b,d=this,v=d.$grammar,x=v.Style,w=d.DEF,_=d.ERR,q={},O=d.$n$,E=d.$t$,S=d.$v$,L=v.$interleaved,R=v.$parser,j=R.length,D=L?L.length:0,I=t.outer,M=I&&I[2],F=I&&I[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.line,a=e.pos,f=!1,k=!0,m=!1,h=!1,I&&d===I[0]){if(q[O]=null,q[E]=w,q[S]=null,F){if(s=new G,W(F,e,M,s))return t.outer=null,{parser:d,state:M};for(e.nxt(1);!e.eol();){if(W(F,e,M,s)){if(e.pos>a)break;return t.outer=null,{parser:d,state:M}}e.nxt(1)}}else e.spc(),e.eol()?h=!0:e.end();return q[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(h||t.$eol$),q}if(t.stack&&Se===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||je!==t.stack.val.type&&null==t.block)&&e.spc()){if(t.stack&&Ue===t.stack.val.type)return e.bck(a),r=t.stack.val,t.stack=t.stack.prev,f=W(r,e,t,s),g=""+f,d.$subgrammars[g]?($=d.$subgrammars[g],y=new ee(1,n[g]?n[g]:t.status),M=t):($=d,y=new ee,M=t),y.outer=[d,f.next,M],{parser:$,state:y,toInner:g};k=!1,h=!0}if(q[O]=null,q[E]=w,q[S]=null,k)for(s=new G,i=0;k&&(t.stack||j>i)&&!e.eol();){if(p=e.pos,c=t.stack,F){if(e.spc(),W(F,e,M,s))return e.pos>p?(q[S]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,q):(t.outer=null,{parser:I[0],state:M,fromInner:t});e.bck(p)}if(b=!1,D&&!t.block)for(u=0;D>u;u++)if(r=L[u],f=W(r,e,t,s),!1!==f){b=!0;break}if(k&&!b){if(!t.stack&&i>=j)break;t.stack?(r=t.stack.val,t.stack=t.stack.prev):r=R[i++],f=W(r,e,t,s)}if(!1===f){if(r.status&fe){t.token=r,h=V(t,e,s,r)||h,m=!0,k=!1;break}}else{if(f.subgrammar)return g=""+f,d.$subgrammars[g]?($=d.$subgrammars[g],y=new ee(1,n[g]?n[g]:t.status),M=t):($=d,y=new ee,M=t),y.outer=[d,f.next,M],{parser:$,state:y,toInner:g};if(t.stack&&t.stack.prev&&e.eol()&&Ie&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(u=t.stack.prev;u&&qe===u.val.type;)o=u,u=u.prev,J(o,e,t,s),o.status&ue&&(t.$actionerr$=!0);else if(t.stack&&qe===t.stack.val.type)for(;t.stack&&qe===t.stack.val.type;)o=t.stack.val,t.stack=t.stack.prev,J(o,e,t,s),o.status&ue&&(t.$actionerr$=!0);if(!0!==f){k=!1;break}}}return k&&e.nxt(1),q[S]=e.cur(1),!1!==f?(f=x[f]||w,q[O]=r.name):m?(f=_,t.status&le&&U(t,l,a,l,e.pos,r)):f=w,q[E]=f,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(h||t.$eol$),q},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n){var r=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r.push(t.parser.get(e,t));return r},parse:function(e,t){var n,o,s,l,a,i,u=(e||"").split(zt),p=u.length,c=null;if(t=t||se,s=!!(t&le),l=!!(t&se),o={parser:this,state:new ee(0,t),inner:{}},o.state.$full_parse$=!0,r(function(e){u[e]+="\n"},0,p-2),l?c=r(t&ae?function(e,t){t._=t._.concat(o.parser.tokenize(re(u[e]),o,e))}:function(e,t){t._.push(o.parser.tokenize(re(u[e]),o,e))},0,p-1,{_:[]})._:r(function(e){var t=re(u[e]);if(t.eol())o.state.line++,o.state.$blank$&&o.state.bline++;else for(;!t.eol();)o.parser.get(t,o)},0,p-1),n=o.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)a=n.queu.shift(),U(n,a[1],a[2],a[3],a[4],null,a[5]);return i=l&&s?{tokens:c,errors:n.err}:l?c:n.err,ne(n),o=n=null,i},autocompletion:function(e,t){var n,r,o=e.stack,s={},l=j([e.token],[],s);for(t=t||0;o;){if(n=o.val,r=n.type,ze&r){if(l=j([n],l,s),0<n.min&&t<l.length)break}else if((De===r||Fe===r||Ye&r)&&(l=j([n],l,s),t<l.length))break;o=o.prev}return l},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[ot](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Vt=m(Kt,{constructor:function(e,t){var n=this;Kt.call(n,e,"plain","plain"),n.DEF=t||n.$DEF,n.ERR=n.$ERR},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.state.pos=n.fromInner.pos,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.pos=t.state.pos,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,n,r){var o,s=this,l=[],a=[],i=null,u=function(e){return e.type=s.$DEF,e};if(nt===n.state.pos&&(n.state.pos=0),e.eol())n.state.line++,n.state.$blank$&&n.state.bline++;else for(;!e.eol();)o=n.parser.get(e,n),o.pos=n.state.pos,n.state.pos+=o.token.length,n.state.$actionerr$?(a.length&&(l=l.concat(t(a,u))),o.type=s.$DEF,l.push(o),a.length=0,i=null):(i!==o.name&&(a.length&&(l=l.concat(a)),a.length=0,i=o.name),a.push(o));return a.length&&(l=l.concat(a)),a.length=0,i=null,l}}),Wt={VERSION:"4.0.0",clone:o,extend:s,pre_process:N,parse:z,getMode:oe,Parser:Vt};return Wt});
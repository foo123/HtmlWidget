/**
*
*   SyntaxHighlighterGrammar
*   @version: 4.2.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight brush for SyntaxHighlighter
*   https://github.com/foo123/syntaxhighlighter-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"SyntaxHighlighterGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=_t:!0===e||!1===e||e instanceof Boolean?t=Lt:pt===e?t=qt:(t=Gt[yt.call(e)]||wt,t=Ot===t||e instanceof Number?isNaN(e)?St:isFinite(e)?Ot:Et:Rt===t||e instanceof String?1===e.length?jt:Rt:It===t||e instanceof Array?It:zt===t||e instanceof RegExp?zt:Ft===t||e instanceof Date?Ft:Dt===t||e instanceof Function?Dt:Nt===t?Nt:wt),t}function t(e,t,n,o){var r,s,l,a,i,u,c=e.length;if(arguments.length<4&&(o=c-1),0>o&&(o+=c),arguments.length<3&&(n=0),n>o)return[];if(n===o)return[t(e[n],n,n,o)];for(l=o-n+1,a=15&l,i=1&a,u=new Array(l),i&&(u[0]=t(e[n],n,n,o)),r=i;a>r;r+=2)s=n+r,u[r]=t(e[s],s,n,o),u[r+1]=t(e[s+1],s+1,n,o);for(r=a;l>r;r+=16)s=n+r,u[r]=t(e[s],s,n,o),u[r+1]=t(e[s+1],s+1,n,o),u[r+2]=t(e[s+2],s+2,n,o),u[r+3]=t(e[s+3],s+3,n,o),u[r+4]=t(e[s+4],s+4,n,o),u[r+5]=t(e[s+5],s+5,n,o),u[r+6]=t(e[s+6],s+6,n,o),u[r+7]=t(e[s+7],s+7,n,o),u[r+8]=t(e[s+8],s+8,n,o),u[r+9]=t(e[s+9],s+9,n,o),u[r+10]=t(e[s+10],s+10,n,o),u[r+11]=t(e[s+11],s+11,n,o),u[r+12]=t(e[s+12],s+12,n,o),u[r+13]=t(e[s+13],s+13,n,o),u[r+14]=t(e[s+14],s+14,n,o),u[r+15]=t(e[s+15],s+15,n,o);return u}function n(e,t,n,o,r){var s,l,a,i,u,c=e.length,p=n;if(arguments.length<5&&(r=c-1),0>r&&(r+=c),arguments.length<4&&(o=0),o>r)return p;if(o===r)return t(p,e[o],o);for(a=r-o+1,i=15&a,u=1&i,u&&(p=t(p,e[o],o)),s=u;i>s;s+=2)l=o+s,p=t(t(p,e[l],l),e[l+1],l+1);for(s=i;a>s;s+=16)l=o+s,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return p}function o(e,t,n,o){if(t>n)return o;if(t===n)return e(t,o,t,n),o;var r,s,l=n-t+1,a=15&l,i=1&a;for(i&&e(t,o,t,n),r=i;a>r;r+=2)s=t+r,e(s,o,t,n),e(++s,o,t,n);for(r=a;l>r;r+=16)s=t+r,e(s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n),e(++s,o,t,n);return o}function r(t,n){var o,s,l,a,i=e(t),u=0;if(Ot===e(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,Nt===i){s={};for(l in t)t[mt](l)&&t[ht](l)&&(o=e(t[l]),Nt===o?s[l]=n?r(t[l],u>0?u-1:n):t[l]:It===o?s[l]=n?r(t[l],u>0?u-1:n):t[l].slice():Ft===o?s[l]=new Date(t[l]):Rt&o?s[l]=t[l].slice():Ot&o?s[l]=0+t[l]:s[l]=t[l])}else if(It===i)for(a=t.length,s=new Array(a),l=0;a>l;l++)o=e(t[l]),Nt===o?s[l]=n?r(t[l],u>0?u-1:n):t[l]:It===o?s[l]=n?r(t[l],u>0?u-1:n):t[l].slice():Ft===o?s[l]=new Date(t[l]):Rt&o?s[l]=t[l].slice():Ot&o?s[l]=0+t[l]:s[l]=t[l];else s=Ft===i?new Date(t):Rt&i?t.slice():Ot&i?0+t:t;return s}function s(){var t,n,o,l,a,i,u,c,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=r(m[0]),o=1;h>o;o++)if(t=m[o])for(l in t)if(t[mt](l)&&t[ht](l))if(n[mt](l)&&n[ht](l)){if(p=e(n[l]),f=e(t[l]),Nt===p&&Nt===f)n[l]=s(n[l],t[l]);else if(It===p&&It===f){if(u=n[l],c=t[l],i=c.length,!i)continue;if(u.length)for(a=0;i>a;a++)0>u.indexOf(c[a])&&u.push(c[a]);else n[l]=c.slice()}}else n[l]=r(t[l]);return n}function l(t,n){return n||It!==e(t)?[t]:t}function a(t,n){return t=l(t),(n||It!==e(t[0]))&&(t=[t]),t}function i(t,n){return Rt&e(n)&&Rt&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=pt:delete e[t],e}function c(e){return(e||"id_")+ ++Vt}function p(e){return(e||"uuid")+"_"+ ++Vt+"_"+(new Date).getTime()}function f(){var t,n,o,r,s,l,a=arguments,i=a.length;for(t=a[0]||{},s=1;i>s;s++)if(n=a[s],Nt===e(n))for(r in n)n[mt](r)&&n[ht](r)&&(o=n[r],l=e(o),Ot&l?t[r]=0+o:Ft&l?t[r]=new Date(o):At&l?t[r]=o.slice():t[r]=o);return t}function m(e,t){var n,o=arguments.length,r="constructor";return 0===o?(e=Object,t={}):1===o?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[mt](r)||(t[r]=function(){}),n=t[r],delete t[r],n[ft]=f(gt(e[ft]),t),n[ft][r]=n,n}function h(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function k(e){return"&amp;"===e?"&":"&lt;"===e?"<":"&gt;"===e?">":"&quot;"===e?'"':"'"}function y(e){return"&#"+e.charCodeAt(0)+";"}function g(e,t){return e.replace(Jt,t?h:y)}function v(e){return e.replace(Qt,k)}function d(e){return e.replace(Wt,"\\$1")}function x(e,t){t=t||{l:0,x:0,i:0,g:0};var e=new RegExp(e,(t.g?"g":"")+(t.i?"i":""));return e.xflags=t,e}function $(e,t,n,o){var r,s=e.pos||0,l=e.length,a=t.length,i="";if(n)if(o)for(;l>s;)if(r=!1,n===e[$t](s)&&(r=!0,s+=1),t===e.substr(s,a)){if(s+=a,!r)break;i+=t}else i+=e[$t](s++);else for(;l>s;)if(r=!1,n===e[$t](s)&&(r=!0,s+=1,i+=n),t===e.substr(s,a)){if(s+=a,!r)break;i+=t}else i+=e[$t](s++);else for(;l>s;){if(t===e.substr(s,a)){s+=a;break}i+=e[$t](s++)}return e.pos=s,i}function b(t,n,o,r){var s,l,a,i,u,c=!0===o?0:1,p=r?"\\":"$",f=r?92:36;for(Rt&e(n)&&(r&&(n=d(n)),n=[n,n,n],c=0),l=t.length,u="",s=0;l>s;)a=t[$t](s),l>s+1&&p===a?(i=t.charCodeAt(s+1),f===i?(u+=p,s+=2):i>=48&&57>=i?(u+=n[c+i-48]||"",s+=2):(u+=a,s+=1)):(u+=a,s+=1);return u}function w(t,n,o,r){if(!t||(Ot|zt)&e(t))return t;var s,l=n?n.length||0:0,a="",i={g:0,i:0,x:0,l:0};if(Rt&e(r)?a=r:r&&(a=Zt),l&&t.substr(0,l)===n){var u,c,p,s,f,m=t.substr(l),h=m[$t](0);for(s=m.length;s--&&(f=m[$t](s),h!==f);)"i"===f.toLowerCase()?i.i=1:"x"===f.toLowerCase()?i.x=1:"l"===f.toLowerCase()&&(i.l=1);return u=m.substring(1,s),"^"===u.charAt(0)?(i.l=1,c="^("+u.slice(1)+")"):c="^("+u+")",p=c,(i.x||i.l||i.i)&&(c=(i.l?"l":"")+(i.x?"x":"")+(i.i?"i":"")+"::"+c),o[c]||(p=x(p,i),o[c]=p),o[c]}return a?(p=c="^("+d(t)+")"+a,o[c]||(p=x(p,i),o[c]=p),o[c]):t}function q(n,o,r){var s,l="";return Rt&e(o)?l=o:o&&(l=Zt),s=t(n.sort(Ut),d).join("|"),[x("^("+s+")"+l,{l:0,x:0,i:r?1:0}),1]}function _(t,n,o,r){var s=e(n);if(Ot===s)return n;if(r[t])return r[t];o=o||0;var l,a=0;return n&&n.isCharList&&(a=1,u(n,"isCharList")),l=_t===s?new A(je,t,n,_t,o):jt===s?new A(je,t,n,jt,o):Ct&s?new A(je,t,n,zt,o):Rt&s?new A(je,t,n,a?Mt:Rt,o):n,r[t]=l}function O(t,n,o,r,s,a,u,c){if(u[t])return u[t];var p,f,m,h,k,y,g,v=0,d=0,x=1,$=Rt&e(r)?!0:!!r;if(p=l(n),m=p.length,1===m)g=_(t,w(p[0],o,a,r),0,u);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)k=e(p[f]),y=e(p[m-1-f]),jt===k&&jt===y||(x=0),It&k||It&y?v=1:(zt&k||zt&y||i(p[f],o)||i(p[m-1-f],o))&&(d=1);if(x&&!$)p=p.slice().join(""),p.isCharList=1,g=_(t,p,0,u);else if(!$||v||d)if(v||d){for(f=0;m>f;f++)It&e(p[f])?p[f]=O(t+"_"+f,p[f],o,r,s,a,u):p[f]=_(t+"_"+f,w(p[f],o,a),f,u);g=m>1?new A(Me,t,p):p[0]}else{for(c&&(c.keywords=l(n).slice()),p=p.sort(Ut),f=0;m>f;f++)p[f]=_(t+"_"+f,w(p[f],o,a),f,u);g=m>1?new A(Me,t,p):p[0]}else c&&(c.keywords=l(n).slice()),g=_(t,q(p,r,s),0,u)}return u[t]=g}function E(t,n,r,s,l){if(l[t])return l[t];var u=a(n),c=[],p=[];return o(function(n){var o,a,f,m;o=_(t+"_0_"+n,w(u[n][0],r,s),n,l),u[n].length>1?(f=i(u[n][1],r),m=f&&en.test(u[n][1]),zt!==o.ptype||Rt!==e(u[n][1])||!m&&f?a=_(t+"_1_"+n,w(u[n][1],r,s),n,l):m?(a=new String(u[n][1]),a.regex_pattern=r):a=u[n][1]):a=o,c.push(o),p.push(a)},0,u.length-1),l[t]=new A(Ie,t,[c,p])}function S(e,t){var n=a(e.tokens.slice());o(function(e){var o=n[e][0],r=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===r?(t.line=t.line||[],t.line.push(o)):(t.block=t.block||[],t.block.push([o,r,s]))},0,n.length-1)}function L(e,n,o,r){var s=e.meta||o,l=!(!e.caseInsesitive&&!e.ci),a=t(n,function(e){return{word:e,meta:s,ci:l}});return r.autocomplete=(r.autocomplete||[]).concat(a),a}function R(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,o,r,l,a,i,c,p,f,m,h,k=t.Lex,y=t.Syntax,g=[k,y],v=g.length;for(h=0;v>h;){m=g[h++];for(r in m)m[mt](r)&&(n=r.split(":"),o=n[1]&&Bt(n[1]).length?Bt(n[1]):null,n=Bt(n[0]),n.length||(n=r,o=null),n!==r&&(m[n]=m[r],u(m,r),o&&(o=o[xt](),l=m[n],a=e(l),Nt===a?m[n].type||(m[n].type=o):(m[n]={type:o},"error"===o?(m[n].type="action",m[n].error=l):"nop"===o?(m[n].type="action",m[n].nop=!0):"group"===o?(m[n].type="sequence",m[n].tokens=l):"action"===o&&Rt===a?m[n][l]=!0:m[n].tokens=l))),k===m&&(Tt&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),l=m[n],l.type&&(p=l.type=l.type[xt](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\"))))}m=k;for(n in m)if(m[mt](n))for(l=m[n];l.extend;)i=l.extend,u(l,"extend"),c=k[i],c&&(Tt&e(c)&&(c=k[i]={type:"simple",tokens:c}),l=s(c,l));m=k;for(n in m)m[mt](n)&&(l=m[n],l.type?(p=l.type=l.type[xt](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\")):l["escaped-line-block"]?(l.type="block",l.multiline=!1,l.escape||(l.escape="\\"),l.tokens=l["escaped-line-block"],u(l,"escaped-line-block")):l["escaped-block"]?(l.type="block",l.multiline=!0,l.escape||(l.escape="\\"),l.tokens=l["escaped-block"],u(l,"escaped-block")):l["line-block"]?(l.type="block",l.multiline=!1,l.escape=!1,l.tokens=l["line-block"],u(l,"line-block")):l.comment?(l.type="comment",l.escape=!1,l.tokens=l.comment,u(l,"comment")):l.block?(l.type="block",l.tokens=l.block,u(l,"block")):l.simple?(l.type="simple",l.tokens=l.simple,u(l,"simple")):l.nop?(l.type="action",l.action=["nop",l.nop,!1],l.nop=!0):l.error?(l.type="action",l.action=["error",l.error,!!l["in-context"],!!l["in-hypercontext"]],u(l,"error")):l[mt]("hypercontext")?(l.type="action",l.action=[l.hypercontext?"hypercontext-start":"hypercontext-end",l.hypercontext,!!l["in-context"],!!l["in-hypercontext"]],u(l,"hypercontext")):l[mt]("context")?(l.type="action",l.action=[l.context?"context-start":"context-end",l.context,!!l["in-context"],!!l["in-hypercontext"]],u(l,"context")):l.indent?(l.type="action",l.action=["indent",l.indent,!!l["in-context"],!!l["in-hypercontext"]],u(l,"indent")):l.outdent?(l.type="action",l.action=["outdent",l.outdent,!!l["in-context"],!!l["in-hypercontext"]],u(l,"outdent")):l.define?(l.type="action",l.action=["define",Rt&e(l.define)?["*",l.define]:l.define,!!l["in-context"],!!l["in-hypercontext"]],u(l,"define")):l.undefine?(l.type="action",l.action=["undefine",Rt&e(l.undefine)?["*",l.undefine]:l.undefine,!!l["in-context"],!!l["in-hypercontext"]],u(l,"undefine")):l.defined?(l.type="action",l.action=["defined",Rt&e(l.defined)?["*",l.defined]:l.defined,!!l["in-context"],!!l["in-hypercontext"]],u(l,"defined")):l.notdefined?(l.type="action",l.action=["notdefined",Rt&e(l.notdefined)?["*",l.notdefined]:l.notdefined,!!l["in-context"],!!l["in-hypercontext"]],u(l,"notdefined")):l.unique?(l.type="action",l.action=["unique",Rt&e(l.unique)?["*",l.unique]:l.unique,!!l["in-context"],!!l["in-hypercontext"]],u(l,"unique")):l.push?(l.type="action",l.action=["push",l.push,!!l["in-context"],!!l["in-hypercontext"]],u(l,"push")):l[mt]("pop")?(l.type="action",l.action=["pop",l.pop,!!l["in-context"],!!l["in-hypercontext"]],u(l,"pop")):l.type="simple","action"===l.type?(l.ci=!(!l.caseInsesitive&&!l.ci),l.autocomplete=!!l.autocomplete):"block"===l.type||"comment"===l.type?(l.multiline=l[mt]("multiline")?!!l.multiline:!0,Rt&e(l.escape)||(l.escape=!1)):"simple"===l.type&&(l.meta=l.autocomplete&&Rt&e(l.meta)?l.meta:null,l.ci=!(!l.caseInsesitive&&!l.ci)));m=y;for(n in m)m[mt](n)&&(l=m[n],Nt!==e(l)||l.type?l.type&&(p=l.type=l.type[xt](),"group"===p&&l.match?(a=e(l.match),Rt&a?(f=l.match[xt](),"alternation"===f||"either"===f?(l.type="alternation",u(l,"match")):"sequence"===f||"all"===f?(l.type="sequence",u(l,"match")):"zeroorone"===f?(l.type="zeroOrOne",u(l,"match")):"zeroormore"===f?(l.type="zeroOrMore",u(l,"match")):"oneormore"===f?(l.type="oneOrMore",u(l,"match")):(l.type="sequence",u(l,"match"))):It&a&&(l.type="repeat",l.repeat=l.match,u(l,"match"))):"either"===p?l.type="alternation":"all"===p?l.type="sequence":"lookahead"===p?l.type="positiveLookahead":"grammar"===p&&(l.type="subgrammar"),"subgrammar"!==l.type||l.tokens||(l.tokens=n)):l.ngram||l["n-gram"]?(l.type="ngram",l.tokens=l.ngram||l["n-gram"],l["n-gram"]?u(l,"n-gram"):u(l,"ngram")):l.sequence||l.all?(l.type="sequence",l.tokens=l.sequence||l.all,l.all?u(l,"all"):u(l,"sequence")):l.alternation||l.either?(l.type="alternation",l.tokens=l.alternation||l.either,l.either?u(l,"either"):u(l,"alternation")):l.zeroOrOne?(l.type="zeroOrOne",l.tokens=l.zeroOrOne,u(l,"zeroOrOne")):l.zeroOrMore?(l.type="zeroOrMore",l.tokens=l.zeroOrMore,u(l,"zeroOrMore")):l.oneOrMore?(l.type="oneOrMore",l.tokens=l.oneOrMore,u(l,"oneOrMore")):l.positiveLookahead||l.lookahead?(l.type="positiveLookahead",l.tokens=l.positiveLookahead||l.lookahead,l.lookahead?u(l,"lookahead"):u(l,"positiveLookahead")):l.negativeLookahead?(l.type="negativeLookahead",l.tokens=l.negativeLookahead,u(l,"negativeLookahead")):(l.subgrammar||l.grammar)&&(l.type="subgrammar",l.tokens=l.subgrammar||l.grammar,l.subgrammar?u(l,"subgrammar"):u(l,"grammar")));return t}function j(e,t){t=t||[];var n,o;for(n=e.ctx;n;){for(o=n.val.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;n=n.prev}for(n=e.hctx;n;){for(o=n.val.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;n=n.prev}for(o=e.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;return t}function M(t,n,o,r){if(o=o||{},n=n||[],!t||!t.length)return n;var s,l,a,i,u,c,p;for(s=0,l=t.length;l>s;s++)if(u=t[s])if(Te===u.type){if(r&&r.length&&u.name)for(a=r.length-1;a>=0;a--)r[a].token&&(u.name===r[a].token||u.name.length>r[a].token.length&&u.name.slice(0,r[a].token.length)===r[a].token||u.name.length<r[a].token.length&&u.name===r[a].token.slice(0,u.name.length))&&(r[a].meta=u.name+" at ("+r[a].pos[0]+","+r[a].pos[1]+")",n.push(r[a]),r.splice(a,1));if(u.autocompletions)for(a=0,i=u.autocompletions.length;i>a;a++)p=u.autocompletions[a],o[mt]("w_"+p.word)||(n.push(p),o["w_"+p.word]=1);else Rt===u.token.ptype&&Rt&e(u.token.pattern)&&u.token.pattern.length>1&&(o[mt]("w_"+u.token.pattern)||(n.push({word:""+u.token.pattern,meta:u.name,ci:!!u.ci}),o["w_"+u.token.pattern]=1))}else if(Be===u.type)M(u.token,n,o,r);else if(tt&u.type){a=0,i=u.token.length;do M([c=u.token[a++]],n,o,r);while(i>a&&(Ye&c.type&&1>c.min||Ne===c.type))}else Ye&u.type&&M([u.token[0]],n,o,r);return n}function I(t,n,o,r){for(var s;Rt&e(s=n[t]||o[t]);)t=s;return r?t:n[t]||o[t]||t}function N(e,t){return e.length>1?o(t?function(t,n){var o=n[n.length-1],r=e[t];o===r||n.push(r)}:function(t,n){var o=n[n.length-1],r=e[t];tn.test(r)&&tn.test(o)&&o===r||n.push(r)},1,e.length-1,[e[0]]):e}function D(n,o,s){var l,a,i,u,c,p,f,m,h,k,y,g,v,d,b,w=!1;if(b=n.modifier?n.modifier:null,m=new String(Bt(n)),m.pos=0,1===m.length)g=""+n,o[g]||s[g]||(o[g]={type:"simple",tokens:n}),n=g;else{for(l=[],a=[],i="",v=[];m.pos<m.length;)if(h=m[$t](m.pos++),Xt.test(h))if(i.length&&(w?(a.length&&(y=a[a.length-1],g=y+"."+i,p=o[g]||s[g],p||(f=I(y,o,s),s[g]=Rt&e(f)?new String(f):r(f),s[g].modifier=i),a[a.length-1]=g),w=!1):"0"===i?(o[ut]||(o[ut]={type:"simple",tokens:0}),a.push(ut)):"^^"===i?(o[rt]||(o[rt]={type:"simple",tokens:De}),a.push(rt)):"^^1"===i?(o[st]||(o[st]={type:"simple",tokens:ze}),a.push(st)):"^"===i?(o[lt]||(o[lt]={type:"simple",tokens:Pe}),a.push(lt)):"$"===i?(o[at]||(o[at]={type:"simple",tokens:Fe}),a.push(at)):(o[i]||s[i]||(o[i]={type:"simple",tokens:i}),a.push(i)),i=""),"."===h)a.length&&m.pos<m.length&&!Xt.test(m[$t](m.pos))?w=!0:i+=h;else if('"'===h||"'"===h)u=$(m,h,"\\",1),u.length?(g=""+u,o[g]||(o[g]={type:"simple",tokens:u}),a.push(g)):(o[ct]||(o[ct]={type:"simple",tokens:""}),a.push(ct));else if("["===h)h=m[$t](m.pos+1),"^"===h?m.pos++:h="",u=$(m,"]","\\",0),g="["+h+u+"]",o[g]||(o[g]={type:"simple",tokens:x("^(["+h+u+"])")}),a.push(g);else{if("]"===h){i+=h;continue}if("/"===h)u=$(m,h,"\\",0),k="",u.length&&(m.pos<m.length&&"i"===m[$t](m.pos)&&(m.pos++,k="i"),g="/"+u+"/"+k,o[g]||(o[g]={type:"simple",tokens:x("^("+u+")",{l:0,x:0,i:"i"===k})}),a.push(g));else if("*"===h||"+"===h||"?"===h)a.length?(y=a[a.length-1],g=""+y+h,s[g]||(s[g]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[y]}),a[a.length-1]=g):i+=h;else if("{"===h)a.length?(c=$(m,"}",0,0),c=t(c.split(","),Bt),c[0].length?c[0]=parseInt(c[0],10)||0:c[0]=0,0>c[0]&&(c[0]=0),2>c.length?c.push(c[0]):c[1].length?c[1]=parseInt(c[1],10)||bt:c[1]=bt,0>c[1]&&(c[1]=0),y=a[a.length-1],g=""+y+["{",c[0],",",isFinite(c[1])?c[1]:"","}"].join(""),s[g]||(s[g]={type:"repeat",repeat:[c[0],c[1]],tokens:[y]}),a[a.length-1]=g):i+=h;else{if("}"===h){i+=h;continue}"&"===h||"!"===h?a.length?(y=a[a.length-1],g=""+y+h,s[g]||(s[g]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[y]}),a[a.length-1]=g):i+=h:"|"===h?(w=!1,a=N(a),a.length>1?(g=""+a.join(" "),s[g]||(s[g]={type:"sequence",tokens:a}),l.push(g)):a.length?l.push(a[0]):i+=h,a=[]):"("===h?(v.push([a,l,i]),a=[],l=[],i=""):")"===h&&(a=N(a),a.length>1?(g=""+a.join(" "),s[g]||(s[g]={type:"sequence",tokens:a}),l.push(g)):a.length&&l.push(a[0]),a=[],l=N(l,1),l.length>1?(g=""+l.join(" | "),s[g]||(s[g]={type:"alternation",tokens:l})):l.length&&(g=l[0]),l=[],d=v.pop(),a=d[0],l=d[1],i=d[2],y=g,g="("+y+")",s[g]||(s[g]=r(I(y,o,s))),a.push(g))}}else i+=h;i.length&&(w?(a.length&&(y=a[a.length-1],g=y+"."+i,p=o[g]||s[g],p||(f=I(y,o,s),s[g]=Rt&e(f)?new String(f):r(f),s[g].modifier=i),a[a.length-1]=g),w=!1):"0"===i?(o[ut]||(o[ut]={type:"simple",tokens:0}),a.push(ut)):"^^"===i?(o[rt]||(o[rt]={type:"simple",tokens:De}),a.push(rt)):"^^1"===i?(o[st]||(o[st]={type:"simple",tokens:ze}),a.push(st)):"^"===i?(o[lt]||(o[lt]={type:"simple",tokens:Pe}),a.push(lt)):"$"===i?(o[at]||(o[at]={type:"simple",tokens:Fe}),a.push(at)):(o[i]||s[i]||(o[i]={type:"simple",tokens:i}),a.push(i))),i="",a=N(a),a.length>1?(g=""+a.join(" "),s[g]||(s[g]={type:"sequence",tokens:a}),l.push(g)):a.length&&l.push(a[0]),a=[],l=N(l,1),l.length>1?(g=""+l.join(" | "),s[g]||(s[g]={type:"alternation",tokens:l}),n=g):l.length&&(n=l[0]),l=[]}return b&&(o[n]||s[n])&&((o[n]||s[n]).modifier=b),n}function z(r,s,i,u,c,p,f,m,h,k,y){var g,v,d,x,$,b,w,q=null,_=null,R=null;if(De===r||ze===r||Pe===r||Fe===r)return new G(r,De===r?rt:ze===r?$T_FBNL$:Pe===r?lt:at,r,_);if(!1===r||0===r)return new G(Ae,ut,0,_);if(""===r)return new G(Ce,ct,"",_);if(null===r)return new G(Te,it,_t,_,R);if(It&e(r)&&(d=r,r="NGRAM_"+d.join("_"),u[r]||(u[r]={type:"ngram",tokens:d})),r=""+r,m[r])return m[r];if($=I(r,i,u),Rt&e($)&&($=D($,i,u),$=i[$]||u[$]||null),!$)return null;if(g=$.type?ot[$.type[xt]().replace(Kt,"")]||Te:Te,_=$.msg||null,R=$.modifier||null,v=$.tokens,Te&g){if(De===v||ze===v||Pe===v||Fe===v||!1===v||0===v)return q=new G(v||Ae,r,v||0,_),m[r]=q,q;if(""===v)return q=new G(Ce,r,"",_),m[r]=q,q;if(null===v)return q=new G(Te,r,_t,_,R),m[r]=q,q;if(!v)return null}if(Ne&g)$[mt]("action")?"nop"===$.action[0]?$.action[0]=ye:"error"===$.action[0]?$.action[0]=ge:"context-start"===$.action[0]?$.action[0]=we:"context-end"===$.action[0]?$.action[0]=qe:"hypercontext-start"===$.action[0]?$.action[0]=_e:"hypercontext-end"===$.action[0]?$.action[0]=Oe:"push"===$.action[0]?$.action[0]=Ee:"pop"===$.action[0]?$.action[0]=Se:"define"===$.action[0]?$.action[0]=ve:"undefine"===$.action[0]?$.action[0]=de:"defined"===$.action[0]?$.action[0]=xe:"notdefined"===$.action[0]?$.action[0]=$e:"unique"===$.action[0]?$.action[0]=be:"indent"===$.action[0]?$.action[0]=Le:"outdent"===$.action[0]&&($.action[0]=Re):$[mt]("nop")?$.action=[ye,$.nop,!!$["in-context"],!!$["in-hypercontext"],!1]:$[mt]("error")?$.action=[ge,$.error,!1,!1,!1]:$[mt]("context")?$.action=[$.context?we:qe,$.context,!1,!1,!1]:$[mt]("hypercontext")?$.action=[$.hypercontext?_e:Oe,$.hypercontext,!1,!1,!1]:$[mt]("context-start")?$.action=[we,$["context-start"],!1,!1,!1]:$[mt]("context-end")?$.action=[qe,$["context-end"],!1,!1,!1]:$[mt]("hypercontext-start")?$.action=[_e,$["hypcontext-start"],!1,!1,!1]:$[mt]("hypercontext-end")?$.action=[Oe,$["hypcontext-end"],!1,!1,!1]:$[mt]("push")?$.action=[Ee,$.push,!!$["in-context"],!!$["in-hypercontext"],$.autocomplete]:$[mt]("pop")?$.action=[Se,$.pop,!!$["in-context"],!!$["in-hypercontext"],!1]:$[mt]("define")?$.action=[ve,Rt&e($.define)?["*",$.define]:$.define,!!$["in-context"],!!$["in-hypercontext"],$.autocomplete]:$[mt]("undefine")?$.action=[de,Rt&e($.undefine)?["*",$.undefine]:$.undefine,!!$["in-context"],!!$["in-hypercontext"],$.autocomplete]:$[mt]("defined")?$.action=[xe,Rt&e($.defined)?["*",$.defined]:$.defined,!!$["in-context"],!!$["in-hypercontext"],!1]:$[mt]("notdefined")?$.action=[$e,Rt&e($.notdefined)?["*",$.notdefined]:$.notdefined,!!$["in-context"],!!$["in-hypercontext"],!1]:$[mt]("unique")?$.action=[be,Rt&e($.unique)?["*",$.unique]:$.unique,!!$["in-context"],!!$["in-hypercontext"],$.autocomplete]:$[mt]("indent")?$.action=[Le,$.indent,!!$["in-context"],!!$["in-hypercontext"],!1]:$[mt]("outdent")&&($.action=[Re,$.outdent,!!$["in-context"],!!$["in-hypercontext"],!1]),!1===$.msg&&(_=!1),$.nop&&($.action[0]=ye),q=new G(Ne,r,$.action.slice(),_,R),q.ci=!!$.caseInsensitive||$.ci,m[r]=q;else if(v=l(v),Te&g){w=$.autocomplete?L($,At&e($.autocomplete)?l($.autocomplete):v,r,y):null;var j={};if(b="undefined"!=typeof $.combine?$.combine:!!(It&e($.tokens)),q=new G(Te,r,O(r,v.slice(),s,b,!(!$.caseInsensitive&&!$.ci),p,f,j),_,R,null,w),j.keywords&&(q.keywords=j.keywords.join("|")),m[r]=q,null!=$.except){var M,N,F=l($.except),P=F.length,A=[];for(M=0;P>M;M++)F[M]&&(N=z(F[M],s,i,u,c,p,f,m,h,k,y),N&&A.push(N));A.length&&(q.except=A)}}else Ge&g?(He===g&&S($,k),q=new G(g,r,E(r,v.slice(),s,p,f),_),q.empty=$[mt]("empty")?!!$.empty:!0,q.mline=$[mt]("multiline")?!!$.multiline:!0,q.esc=$[mt]("escape")?$.escape:!1,q.inter=!!c[r+".inside"],He===g&&$.interleave&&h.push(B(q)),R&&(q.modifier=R),m[r]=q):nt&g&&(et===g?m[r]=new G(et,r,v,_,R):Ze===g?(x=a(v),q=t(x,function(e,t){return new G(Ze,r+"_NGRAM_"+t,null,_,R)}),m[r]=q,o(function(e){q[e].token=l(n(x[e],function(e,t){return e.concat(z(t,s,i,u,c,p,f,m,h,k,y))},[]))},0,x.length-1)):(Qe===g||Xe===g?q=new G(g,r,null,_,R):Ye&g&&It&e($.repeat)?(q=new G(Ye,r,null,_,R),q.min=$.repeat[0],q.max=$.repeat[1]):Ke===g?(q=new G(Ke,r,null,_,R),q.min=0,q.max=1):Ve===g?(q=new G(Ve,r,null,_,R),q.min=0,q.max=bt):We===g?(q=new G(We,r,null,_,R),q.min=1,q.max=bt):q=Be===g?new G(Be,r,null,_,R):new G(Ue,r,null,_,R),m[r]=q,q.token=l(n(v,function(e,t){return e.concat(z(t,s,i,u,c,p,f,m,h,k,y))},[]))));return m[r]}function F(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=R(t),t.Parser&&t.Parser.length&&o(function r(s,l){var a,i,u,c=l[s];n[c]||(It&e(c)&&(a=c,c="NGRAM_"+a.join("_"),t.Syntax[c]||(t.Syntax[c]={type:"ngram",tokens:a})),i=I(c,t.Lex,t.Syntax),Rt&e(i)&&(i=D(i,t.Lex,t.Syntax),i=t.Lex[i]||t.Syntax[i]||null),i&&(n[c]=i,u=i.type?ot[i.type[xt]().replace(Kt,"")]||Te:Te,nt&u&&o(r,0,i.tokens.length-1,i.tokens)))},0,t.Parser.length-1,t.Parser),t}function P(t){var o,s,l,a,i,u,c,p,f,m,h,k,y,g;return t.__parsed?t:(o=t.RegExpID||null,l=t.Extra?r(t.Extra):{},a=t.Style?r(t.Style):{},i=null,u=null,c=t.Lex?r(t.Lex):{},p=t.Syntax?r(t.Syntax):{},f={},m={},h={},y={},g={},k=[],s=t.Parser?r(t.Parser):[],t=R({Style:a,Fold:i,Match:u,Lex:c,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),t.$parser=n(s,function(t,n){var r=z(n,o,c,p,a,f,m,h,k,y,g)||null;return r&&(It&e(r)?t=t.concat(r):t.push(r)),t},[]),t.$interleaved=k&&k.length?k:null,t.$comments=y,t.$autocomplete=g&&g.autocomplete&&g.autocomplete.length?g.autocomplete:null,t.__parsed=1,t)}function A(t,n,o,r,s){var l,a,i=this;l=i.type=t,i.name=n,i.pattern=o,a=i.ptype=r||Rt,i.key=s||0,Me===l?i.key=!1!==s:Ie===l?i.pattern[0]=new A(Me,n+"_Start",o[0],null,!1):_t===a?i.pattern=null:zt===a&&(i.pattern=zt&e(o)?[o,0]:[o[0],o[1]||0])}function C(t,n,o,r){var s,l,a,i,u,c,p,f,m,h,k,y=t,g=y.type,v=y.pattern,d=y.key;if(Ie===g){if(s=y.name,a=v[0],i=v[1],c=C(a,n,o,r))return u=i[c[0]],f=e(u),m=a.pattern[c[0]].ptype,zt===m&&Pt&f&&(u.regex_pattern?(p=b(u,c[1]),u=new A(je,s+"_End",w(p,u.regex_pattern,{}),zt)):(p=Ot&f?c[1][u+1]:b(u,c[1]),u=new A(je,s+"_End",p,p.length>1?Rt:jt))),u}else if(Me===g){for(h=0,k=v.length;k>h;h++)if(p=C(v[h],n,o,r))return d?[h,p[1]]:p}else{if(l=y.ptype,_t===l)return!1!==o&&n.end(),[d,""];if(zt===l){if(p=v[0].xflags.l?n.match(v[0]):n.slice(n.pos).match(v[0]),p&&0===p.index)return!1!==o&&n.mov(p[v[1]||0].length),[d,v[1]>0?p[v[1]]:p]}else if(Mt===l){if(!0===r){p=-1;var x,$;for(k=v.length-1;k>=0;k--)x=n.indexOf(v[$t](k),n.pos),x>-1&&(-1===p||p>x)&&(p=x,$=v[$t](k));if(p>-1)return!1!==o&&(n.pos=p+1),[d,$]}else if(p=n[$t](n.pos)||null,p&&-1<v.indexOf(p))return!1!==o&&n.mov(1),[d,p]}else if(jt===l){if(!0===r){if(p=n.indexOf(v,n.pos),p>-1)return!1!==o&&(n.pos=p+1),[d,v]}else if(p=n[$t](n.pos)||null,v===p)return!1!==o&&n.mov(1),[d,p]}else if(Rt===l)if(k=v.length,!0===r){if(p=n.indexOf(v,n.pos),p>-1)return!1!==o&&(n.pos=p+k),[d,v]}else if(v===n.substr(n.pos,k))return!1!==o&&n.mov(k),[d,v]}return!1}function T(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function G(e,t,n,o,r,s,l,a){var i=this;i.type=e,i.name=t,i.token=n,i.modifier=r||null,i.except=s||null,i.autocompletions=l||null,i.keywords=a||null,i.pos=null,i.msg=!1===o?!1:o||null,i.$msg=null,i.status=0,i.empty=!1,i.ci=!1,i.mline=!0,i.esc=!1,i.inter=!1,i.found=0,i.min=0,i.max=1,i.i0=0,i.$id=null}function H(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null,e.space=null}function B(e,t,n,o){var r=new G(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return r.empty=e.empty,r.ci=e.ci,r.mline=e.mline,r.esc=e.esc,r.inter=e.inter,r.found=e.found,r.min=e.min,r.max=e.max,r.i0=e.i0,t&&(r.status|=pe),n&&(r.modifier=n),o&&(r.$id=o),r}function U(e){var t=e.name;return e.$msg?e.$msg:e.status&pe?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function Y(e,t,n,o,r,s,l){e.status&ue&&e.err&&(e.err[""+t+"_"+n+"_"+o+"_"+r+"_"+(s?s.name:"ERROR")]=[t,n,o,r,l||U(s)])}function K(e,t){for(var n=null,o=null;e;){if(t===e.val[0])return o={node:e,nodePrev:e.prev,nodeNext:n,val:e.val[1]};n=e,e=e.prev}return o}function V(e,t,n){return new T([t,n],e)}function W(e,t,n){if(e.stack===t)t=e.stack=new T(n,e.stack);else{for(var o=e.stack;o&&o.prev!==t;)o=o.prev;t=new T(n,t),o&&(o.prev=t)}return t}function J(e,t){if(null==e)return null;if(t){for(var n=new T(e.val),o=n,r=e;r.prev;)o.prev=new T(r.prev.val),r=r.prev,o=o.prev;return n}return e}function Q(e,t,n,o){var r,s,l,a,i,u=1/0,c=null,p=1/0;if(s=t.pos,t.spc(),l=t.pos,r=e.stack,t.pos<t.length){for(i=0;r&&(a=r.val,a.$id===o.$id);){for(;!(Ne===a.type||X(a,t,e,n)||(t.pos=a.pos>t.pos?a.pos:t.pos+1,e.stack=r,t.pos>=t.length)););e.stack=r,t.pos<t.length&&u>t.pos?(u=t.pos,c=r,p=i):u===t.pos&&p>i&&(u=t.pos,c=r,p=i),t.pos=l,r=r.prev,i++}u<t.length?(t.pos=u,e.stack=c):(t.end(),e.stack=null)}return l>=s&&t.pos===l}function X(e,t,n,o){if(!e)return!1;var r=e.type,s=nt&r?ne:Ge&r?te:Ne&r?Z:ee;return s(e,t,n,o)}function Z(t,n,o,r){var s,l,a,i,u,c,p,f,m,h,k,y,g,v,d,x,$,w,q=t,_=q.token||null,O=q.ci,E=q.name,S=!(o.status&ue);if(q.status=0,q.$msg=null,!_||!r||!r.pos)return!0;if(w=!!(Ge&r.T),ye===_[0]||w&&!r.block)return!0;if(s=_[0],l=_[1],v=_[2],d=_[3],m=_[4],u=q.msg,w?($=r.block.match||r.block.str,h=r.block.pos[0][0],k=r.block.pos[0][1],y=r.block.pos[0][2],g=r.block.pos[0][3]):($=r.match||r.str,h=r.pos[0],k=r.pos[1],y=r.pos[2],g=r.pos[3]),qe===s)o.ctx=o.ctx?o.ctx.prev:null;else if(we===s)o.ctx=new T({symb:null,queu:null},o.ctx);else if(Oe===s)o.hctx=o.hctx?o.hctx.prev:null;else if(_e===s)o.hctx=new T({symb:null,queu:null},o.hctx);else if(ve===s)a=l[1],i=l[0],a=b(a,$,!0),O&&(a=a[xt]()),i+="::"+a,f=d&&o.hctx?K(o.hctx.val.symb,i):v&&o.ctx?K(o.ctx.val.symb,i):o.symb?K(o.symb,i):null,f||(d&&o.hctx?o.hctx.val.symb=V(o.hctx.val.symb,i,[h,k,y,g,i,a,r.type,m,O]):v&&o.ctx?o.ctx.val.symb=V(o.ctx.val.symb,i,[h,k,y,g,i,a,r.type,m,O]):o.symb=V(o.symb,i,[h,k,y,g,i,a,r.type,m,O]));else if(de===s){if(a=l[1],i=l[0],a=b(a,$,!0),O&&(a=a[xt]()),i+="::"+a,d&&o.hctx)f=K(o.hctx.val.symb,i);else if(v&&o.ctx)f=K(o.ctx.val.symb,i);else{if(!o.symb)return!0;f=K(o.symb,i)}f&&(f.nodeNext?f.nodeNext.prev=f.nodePrev:d&&o.hctx?o.hctx.val.symb=o.hctx.val.symb.prev:v&&o.ctx?o.ctx.val.symb=o.ctx.val.symb.prev:o.symb=o.symb.prev)}else if(xe===s){if(a=l[1],i=l[0],a=b(a,$,!0),O&&(a=a[xt]()),i+="::"+a,f=d&&o.hctx?K(o.hctx.val.symb,i):v&&o.ctx?K(o.ctx.val.symb,i):o.symb?K(o.symb,i):null,!f)return!1!==u&&(q.$msg=u?b(u,a,!0):'Undefined "'+a+'"',x=U(q),Y(o,h,k,y,g,q,x),q.status|=fe),!1}else if($e===s){if(a=l[1],i=l[0],a=b(a,$,!0),O&&(a=a[xt]()),i+="::"+a,d&&o.hctx)f=K(o.hctx.val.symb,i);else if(v&&o.ctx)f=K(o.ctx.val.symb,i);else{if(!o.symb)return!0;f=K(o.symb,i)}if(f)return!1!==u&&(q.$msg=u?b(u,a,!0):'Defined "'+a+'"',x=U(q),Y(o,f.val[0],f.val[1],f.val[2],f.val[3],q,x),Y(o,h,k,y,g,q,x),q.status|=fe),!1}if(S)return!0;if(ge===s)return!u&&Rt&e(l)&&(u=l),q.$msg=u?b(u,$,!0):'Error "'+E+'"',Y(o,h,k,y,g,q,U(q)),q.status|=fe,!1;if(be===s){if(d){if(!o.hctx)return!0;p=o.hctx.val.symb}else if(v){if(!o.ctx)return!0;p=o.ctx.val.symb}else p=o.symb;if(a=l[1],i=l[0],a=b(a,$,!0),O&&(a=a[xt]()),i+="::"+a,f=K(p,i))return!1!==u&&(q.$msg=u?b(u,a,!0):'Duplicate "'+a+'"',x=U(q),Y(o,f.val[0],f.val[1],f.val[2],f.val[3],q,x),Y(o,h,k,y,g,q,x),q.status|=fe),!1;d?o.hctx.val.symb=V(o.hctx.val.symb,i,[h,k,y,g,i,a,r.type,m,O]):v?o.ctx.val.symb=V(o.ctx.val.symb,i,[h,k,y,g,i,a,r.type,m,O]):o.symb=V(o.symb,i,[h,k,y,g,i,a,r.type,m,O])}else if(Se===s){if(d){if(!o.hctx)return!0;c=o.hctx.val.queu}else if(v){if(!o.ctx)return!0;c=o.ctx.val.queu}else c=o.queu;if(l){if(l=b(l,$),O&&(l=l[xt]()),!c||l!==c.val[0])return!1!==u&&(c?(q.$msg=u?b(u,[c.val[0],l],!0):'Mismatched "'+c.val[0]+'","'+l+'"',x=U(q),Y(o,c.val[1],c.val[2],c.val[3],c.val[4],q,x),Y(o,h,k,y,g,q,x),c=c.prev):(q.$msg=u?b(u,["",l],!0):'Missing matching "'+l+'"',x=U(q),Y(o,h,k,y,g,q,x)),q.status|=fe),d?o.hctx&&(o.hctx.val.queu=c):v?o.ctx&&(o.ctx.val.queu=c):o.queu=c,!1;c=c?c.prev:null}else c=c?c.prev:null;d?o.hctx&&(o.hctx.val.queu=c):v?o.ctx&&(o.ctx.val.queu=c):o.queu=c}else if(Ee===s&&l){if(d){if(!o.hctx)return!0;c=o.hctx.val.queu}else if(v){if(!o.ctx)return!0;c=o.ctx.val.queu}else c=o.queu;l=b(l,$),O&&(l=l[xt]()),q.$msg=u?b(u,l,!0):'Missing matching "'+l+'"',c=new T([l,h,k,y,g,U(q)],c),d?o.hctx&&(o.hctx.val.queu=c):v?o.ctx&&(o.ctx.val.queu=c):o.queu=c}return!0}function ee(e,t,n,o,r){var s,l,a=e,i=a.token,u=a.modifier,c=a.type,p=a.name,f=a.except,m=n.line,h=t.pos,k=null,y=!1;if(a.status&=he,a.$msg=r?null:a.msg||null,a.pos=t.pos,f&&!r){l=re(n,t);for(var g=0,v=f.length;v>g;g++)if(s=f[g],a!==s&&Te===s.type&&ee(s,t,n,o,1))return a.pos=s.pos,re(n,t,l),!1}if(De===c)y=0===n.line;else if(ze===c)y=n.bline+1===n.line;else if(Pe===c)y=t.sol();else if(Fe===c)t.spc(),t.eol()?y=p:(a.pos=t.pos,t.bck(h));else if(Ae===c)a.status=0,y=!0;else if(Ce===c){if(null==o.space||t.eol()?t.spc()&&!t.eol()?(a.pos=t.pos,t.bck(h),a.status&pe&&(a.status|=fe)):y=!0:a.status&pe&&(a.status|=fe),a.status&=me,!0===y)return y}else _t===i?(t.end(),y=u||p):(k=C(i,t))&&(k=k[1],y=u||p);return r?y:(!1!==y&&(o.T=c,o.id=p,o.type=y,o.str=t.sel(h,t.pos),o.match=k,o.pos=[m,h,m,t.pos]),!y&&a.status&&a.$msg&&(a.$msg=b(a.$msg,p,!0)),y)}function te(e,t,n,o){var r,s,l,a,i,u,c,p,f,m,h,k,y,g,v,d,x,$,w,q,_,O,E=e,S=E.name,L=E.type,R=E.modifier,j=E.token,M=E.mline,I=E.inter,N=I?S+".inside":S,D=E.esc,z=!!D,F="",P="",A="",T="",G=E.$id||S,H=n.outer,U=H&&H[2],Y=H&&H[1];
if(E.status&=he,E.$msg=E.msg||null,E.pos=t.pos,q=n.line,_=t.pos,He===L&&(E.status&=me),v=E.status&pe,l=0,a=0,n.block&&n.block.name===S?(a=1,l=1,g=N,r=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,F=n.block.s,P=n.block.i):!n.block&&(r=C(j,t))&&(a=1,g=S,x=t.pos,p=[q,_],m=[[q,x],[q,x]],f=[q,x],F=t.sel(_,x),P="",T="",n.block={name:S,end:r,sp:p,ip:m,ep:f,s:F,i:P,e:T}),a){if(w=n.stack,s=_t===r.ptype,d=s||E.empty,I){if(s&&l&&t.sol())return E.status&=me,n.block=null,!1;if(!l)return x=t.pos,o.T=L,o.id=S,o.type=R||g,o.str=t.sel(_,x),o.match=null,o.pos=[q,_,q,x],W(n,w,B(E,v,0,G)),R||g}if(x=t.pos,i=Y?s&&t.eol():C(r,t),c=M,u=0,i)g=s?N:S,T=t.sel(x,t.pos);else if($=t.pos,k=!1,Y||z||Mt!==r.ptype&&jt!==r.ptype&&Rt!==r.ptype){for(;!t.eol();){if(Y){if(X(Y,t,U,o)){if(t.pos>$){s&&(i=1);break}return!0}if(s){y=t.nxt(1),A+=y;continue}}if(x=t.pos,!k&&C(r,t)){I&&t.pos>x&&x>$?(g=N,t.bck(x),u=1):(g=S,i=1),T=t.sel(x,t.pos);break}y=t.nxt(1),A+=y,k=z&&!k&&D===y,x=t.pos}s&&t.eol()&&(i=1)}else(O=C(r,t,!0,!0))?I&&t.pos>x+O[1].length?(g=N,t.mov(-O[1].length),u=1,A=t.sel(x,t.pos)):(g=S,i=1,A=t.sel(x,t.pos-O[1].length),T=O[1]):(t.end(),g=N,u=1,A=t.sel(x,t.pos));return c=M||z&&k,P+=A,m[1]=[q,x],f=[q,t.pos],i&&!d&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(i||!c&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=P,n.block.e=T,W(n,w,B(E,v,0,G))),o.T=L,o.id=S,o.type=R||g,o.str=t.sel(_,t.pos),o.match=null,o.pos=[q,_,f[0],f[1]],E.pos=t.pos,n.block||(h=F+P+T,o.block={str:h,match:[h,P,F,T],part:[h,F,P,T],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),R||g)}return E.status&&E.$msg&&(E.$msg=b(E.$msg,S,!0)),!1}function ne(e,t,n,o){var r,s,l,a,i,u,p,f,m,h,k,y,g,v,d,x=e,$=x.type,b=(x.name,x.token),w=b.length,q=x.modifier;if(x.status&=he,x.$msg=x.msg||null,f=t.pos,m=n.stack,x.pos=t.pos,u=0,p=0,et===$){x.status&=he;var _=new String(b[0]),O=n.stack?n.stack.val:null;return _.subgrammar=1,_.next=O?new G(Qe,O.name,[O]):null,_.required=O?O.status&pe:0,_}if(Be===$){for(g=c(),x.status|=pe,y=[],d=re(n,t),k=0,h=k;w>h;h++){if(r=B(b[h],1,q,g),s=X(r,t,n,o),x.pos=r.pos,r.status&pe&&(u++,y.push(U(r))),!1!==s)return s;r.status&fe&&(p++,re(n,t,d))}return u>0?x.status|=pe:x.status&=me,w===p&&u>0?x.status|=fe:x.status&=he,x.status&&!x.$msg&&y.length&&(x.$msg=y.join(" | ")),!1}if(tt&$){v=!!($&Ue),g=x.$id||c(),v?x.status|=pe:x.status&=me,d=re(n,t),k=0;do r=B(b[k++],v,q,g),s=X(r,t,n,o);while(w>k&&(!0===s&&Je&r.type||!1===s&&!(r.status&pe)));if(x.pos=r.pos,!1!==s){if(!0!==s||Ae!==r.type)for(h=w-1;h>=k;h--)m=W(n,m,B(b[h],1,q,g));return s.subgrammar&&w>k&&(s.next=new G(Qe,b[k].name,[b[k]]),s.required=b[k].status&pe),s}return r.status&fe?(v?x.status|=fe:x.status&=he,re(n,t,d)):v&&r.status&pe&&(x.status|=fe),x.status&&!x.$msg&&(x.$msg=U(r)),!1}if(Je&$)return et&b[0].type?!0:(d=re(n,t,null,!1),s=X(B(b[0],0),t,n,o),re(n,t,d),Xe===$?!1===s:!1!==s);for(g=x.$id||c(),l=x.found,a=x.min,i=x.max,x.status=0,y=[],d=re(n,t),h=0;w>h;h++){if(r=B(b[h],1,q,g),s=X(r,t,n,o),x.pos=r.pos,!1!==s){if(++l,i>=l)return x.found=l,W(n,m,B(x,0,0,c())),x.found=0,s;break}r.status&pe&&(u++,y.push(U(r))),r.status&fe&&re(n,t,d)}return a>l&&(x.status|=pe),(l>i||a>l&&u>0)&&(x.status|=fe),x.status&&!x.$msg&&y.length&&(x.$msg=y.join(" | ")),!1}function oe(e,t){var n=this;n.id=e?p("state"):"state",t instanceof oe?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=J(t.stack,!1),n.token=t.token,n.token2=t.token2,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new oe(e,t.outer[2])]:null,n.queu=t.queu||null,n.symb=t.symb||null,n.ctx=t.ctx?new T({symb:t.ctx.val.symb,queu:t.ctx.val.queu},t.ctx.prev):null,n.hctx=t.hctx?new T({symb:t.hctx.val.symb,queu:t.hctx.val.queu},t.hctx.prev):null,n.err=t.err||null,n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.token2=null,n.block=null,n.outer=null,n.queu=null,n.symb=null,n.ctx=null,n.hctx=null,n.err=n.status&ue?{}:null,n.$eol$=!0,n.$blank$=!0)}function re(e,t,n,o){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===o&&(e.status=0),n)}function se(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.token2=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.hctx=null,e.err=null}function le(e,t,n){var o=new String(e);return o.start=t||0,o.pos=n||0,o.sol=function(){return 0===o.pos},o.eol=function(){return o.pos>=o.length},o.end=function(){return o.pos=o.length,o},o.mov=function(e){return o.pos=0>e?vt(0,o.pos+e):dt(o.length,o.pos+e),o},o.bck=function(e){return o.pos=vt(0,e),o},o.sft=function(){return o.start=o.pos,o},o.nxt=function(e,t){var n,r,s="";if(!0===e){for(t=t||le.$NONSPC$;o.pos<o.length&&t.test(n=o[$t](o.pos++));)s+=n;return s.length?s:null}for(e=e||1,r=0;r++<e&&o.pos<o.length;)s+=o[$t](o.pos++);return s},o.cur=function(e){var t=o.slice(o.start,o.pos);return e&&(o.start=o.pos),t},o.sel=function(e,t){return o.slice(e,t)},o.spc=function(e,t){var n;return(n=o.slice(o.pos).match(t||le.$SPC$))?(!1!==e&&o.mov(n[0].length),n[0]):void 0},o}function ae(e,n){var r=function(e){return new n.Match(e.token,e.pos,e.type)},s=n.Highlighter,l=m(s,{constructor:function(){var e=this;s.call(e)},findMatches:function(e,n){var s=l.escapeHtml;s&&(n=v(n));var a=l.$parser.parse(n,ie|ue|ce).tokens;if(s){var i=0;o(function(e,t){var n=t[e];n.pos=i,n.token=g(n.token,1),i+=n.token.length},0,a.length-1,a)}return t(a,r)}});return l.$id=p("syntaxhighlighter_grammar_brush"),l.$parser=new rn.Parser(P(e)),l.escapeHtml=!0,l.submode=function(e,t){l.$parser.subparser(e,t.$parser)},l.dispose=function(){l.$parser&&l.$parser.dispose(),l.$parser=null},l}var ie=1,ue=2,ce=32,pe=4,fe=8,me=~pe,he=~fe,ke=pe|fe,ye=0,ge=4,ve=8,de=9,xe=10,$e=11,be=12,we=16,qe=17,_e=18,Oe=19,Ee=32,Se=33,Le=128,Re=129,je=2,Me=4,Ie=8,Ne=4,De=8,ze=9,Fe=16,Pe=32,Ae=128,Ce=256,Te=512,Ge=1024,He=1025,Be=2048,Ue=4096,Ye=8192,Ke=8193,Ve=8194,We=8195,Je=16384,Qe=Je,Xe=16385,Ze=32768,et=65536,tt=Ue|Ze,nt=Be|Ue|Ye|Je|Ze|et,ot={action:Ne,simple:Te,block:Ge,comment:He,subgrammar:et,alternation:Be,sequence:Ue,repeat:Ye,zeroorone:Ke,zeroormore:Ve,oneormore:We,positivelookahead:Qe,negativelookahead:Xe,ngram:Ze},rt="$|SOF|$",st="$|NONBLANK|$",lt="$|SOL|$",at="$|EOL|$",it="$|ENDLINE|$",ut="$|EMPTY|$",ct="$|NONSPACE|$",pt=void 0,ft="prototype",mt="hasOwnProperty",ht="propertyIsEnumerable",kt=Object[ft],yt=kt.toString,gt=Object.create,vt=Math.max,dt=Math.min,xt="toLowerCase",$t="charAt",bt=1/0,wt=4,qt=8,_t=16,Ot=32,Et=33,St=34,Lt=64,Rt=128,jt=129,Mt=130,It=256,Nt=512,Dt=1024,zt=2048,Ft=4096,Pt=Rt|Ot,At=Rt|It,Ct=zt|It,Tt=Rt|It|zt,Gt={"[object Number]":Ot,"[object String]":Rt,"[object Array]":It,"[object RegExp]":zt,"[object Date]":Ft,"[object Function]":Dt,"[object Object]":Nt},Ht=/^\s+|\s+$/g,Bt=String[ft].trim?function(e){return e.trim()}:function(e){return e.replace(Ht,"")},Ut=function(e,t){return t.length-e.length},Yt=/\r\n|\r|\n/g,Kt=/[\-_]/g,Vt=0,Wt=/([.*+?^${}()|[\]\/\\\-])/g,Jt=/[&"'<>]/g,Qt=/&(amp|lt|gt|apos|quot);/g,Xt=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Zt="(\\s|\\W|$)",en=/(l?i?l?)x(l?i?l?)$/,tn=/[*+]$/;oe.prototype.toString=function(){var e=this;return e.id+"_"+e.line+"_"+e.bline+"_"+(e.block?e.block.name:"0")},le.$SPC$=/^[\s\u00a0]+/,le.$NONSPC$=/[^\s\u00a0]/,le.$NOTEMPTY$=/\S/,le.$SPACE$=/^\s*/;var nn=m({constructor:function(e,t,n){var o=this;o.$grammar=e,o.$DEF=t||null,o.$ERR=n||null,o.DEF=o.$DEF,o.ERR=o.$ERR,o.$folders=[],o.$matchers=[],o.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){if(t.token2){var o=t.token2[0];return e.pos=t.token2[1],e.sft(),t.token=t.token2[3],t.$eol$=e.eol(),t.$blank$=t.$blank$&&(t.token2[2]||t.$eol$),t.token2=null,o}var r,s,l,a,i,u,c,p,f,m,h,k,y,g,v,d,x,$,b=this,w=b.$grammar,q=w.Style,_=b.DEF,O=b.ERR,o={},E=b.$n$,S=b.$t$,L=b.$v$,R=w.$interleaved,j=w.$parser,M=j.length,I=R?R.length:0,N=t.outer,D=N&&N[2],z=N&&N[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,a=t.line,i=e.pos,m=!1,k=!0,h=!1,y=!1,N&&b===N[0]){if(o[E]=null,o[S]=_,o[L]=null,z){if(l=new H,X(z,e,D,l))return t.outer=null,{parser:b,state:D};for(e.nxt(1);!e.eol();){if(X(z,e,D,l)){if(e.pos>i)break;return t.outer=null,{parser:b,state:D}}e.nxt(1)}}else e.spc(),e.eol()?y=!0:e.end();return o[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(y||t.$eol$),o}if(t.stack&&Fe===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||null==t.block)&&e.spc()){if(t.stack&&et===t.stack.val.type)return e.bck(i),r=t.stack.val,t.stack=t.stack.prev,m=X(r,e,t,l),g=""+m,b.$subgrammars[g]?(v=b.$subgrammars[g],d=new oe(1,n[g]?n[g]:t.status),D=t):(v=b,d=new oe,D=t),d.outer=[b,m.next,D],{parser:v,state:d,toInner:g};k=!0,y=!0}if(o[E]=null,o[S]=_,o[L]=null,k)for(l=new H,y&&(l.space=[i,e.pos],e.sft()),u=0;k&&(t.stack||M>u)&&!e.eol();){if(p=e.pos,f=t.stack,z){if(e.spc(),X(z,e,D,l))return l.space||e.pos>p?(l.space&&(e.start=l.space[0],e.pos=l.space[1]),o[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,o):(t.outer=null,{parser:N[0],state:D,fromInner:t});e.bck(p)}if(x=!1,I&&!t.block)for(c=0;I>c;c++)if(r=R[c],m=X(r,e,t,l),!1!==m){x=!0;break}if(k&&!x){if(!t.stack&&u>=M)break;t.stack?(r=t.stack.val,t.stack=t.stack.prev):r=j[u++],m=X(r,e,t,l)}if(!1===m){if(r.status&ke){t.token=r,y=Q(t,e,l,r)||y,h=!0,k=!1;break}}else{if(m.subgrammar)return g=""+m,b.$subgrammars[g]?(v=b.$subgrammars[g],d=new oe(1,n[g]?n[g]:t.status),D=t):(v=b,d=new oe,D=t),d.outer=[b,m.next,D],l.space?(t.token2=[{parser:v,state:d,toInner:g},e.pos,y,t.token],t.token=null,e.start=l.space[0],e.pos=l.space[1],o[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,o):{parser:v,state:d,toInner:g};if(t.stack&&t.stack.prev&&e.eol()&&Ge&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(c=t.stack.prev;c&&Ne===c.val.type;)s=c,c=c.prev,$=Z(s,e,t,l),s.status&fe?t.$actionerr$=!0:$&&!0!==m&&s.modifier&&(m=s.modifier);else if(t.stack&&Ne===t.stack.val.type)for(;t.stack&&Ne===t.stack.val.type;)s=t.stack.val,t.stack=t.stack.prev,$=Z(s,e,t,l),s.status&fe?t.$actionerr$=!0:$&&!0!==m&&s.modifier&&(m=s.modifier);if(!0!==m){k=!1;break}}}return k&&(l.space?(e.start=l.space[0],e.pos=l.space[1],m=!1,l.space=null):e.nxt(1)),o[L]=e.cur(1),!1!==m?(m=m?q[m]||_:_,o[E]=r?r.name:null):h?(m=O,t.status&ue&&Y(t,a,i,a,e.pos,r)):m=_,o[S]=m,l.space&&(t.token2=[o,e.pos,y,t.token],t.token=null,e.start=l.space[0],e.pos=l.space[1],o={},o[E]=null,o[S]=_,o[L]=e.cur(1),y=!0),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(y||t.$eol$),o},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n,o){if(o=o||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)o.push(t.parser.get(e,t));return o},parse:function(e,t){var n,r,s,l,a,i,u=(e||"").split(Yt),c=u.length,p=null;if(t=t||ie,s=!!(t&ue),l=!!(t&ie),r={parser:this,state:new oe(0,t),inner:{}},r.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,c-2),l?p=o(t&ce?function(e,t){r.parser.tokenize(le(u[e]),r,e,t)}:function(e,t){t.push(r.parser.tokenize(le(u[e]),r,e))},0,c-1,[]):o(function(e){var t=le(u[e]);if(t.eol())r.state.line++,r.state.$blank$&&r.state.bline++;else for(;!t.eol();)r.parser.get(t,r)},0,c-1),n=r.state,s&&n.queu)for(;n.queu;)a=n.queu.val,n.queu=n.queu.prev,Y(n,a[1],a[2],a[3],a[4],null,a[5]);return i=l&&s?{tokens:p,errors:n.err}:l?p:n.err,se(n),r=n=null,i},autocompletion:function(e,t,n){var o,r,s=e.stack,l={},a=n?j(e):null,i=M([e.token],[],l,a);for(t=t||0;s;){if(o=s.val,r=o.type,Ye&r){if(i=M([o],i,l,a),0<o.min&&t<i.length)break}else if((Te===r||Be===r||tt&r)&&(i=M([o],i,l,a),t<i.length))break;s=s.prev}return a&&a.length?a.concat(i):i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[mt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),on=m(nn,{constructor:function(e,t){var n=this;nn.call(n,e,"plain","plain"),n.DEF=t||n.$DEF,n.ERR=n.$ERR},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.state.pos=n.fromInner.pos,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.pos=t.state.pos,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,n,o,r){var s,l=this,a=[],i=null,u=Array.prototype.push,c=function(e){return e.type=l.$DEF,e};if(r=r||[],pt===n.state.pos&&(n.state.pos=0),e.eol())n.state.line++,n.state.$blank$&&n.state.bline++;else for(;!e.eol();)s=n.parser.get(e,n),s.pos=n.state.pos,n.state.pos+=s.token.length,n.state.$actionerr$?(a.length&&u.apply(r,t(a,c)),s.type=l.$DEF,r.push(s),a.length=0,i=null):(i!==s.name&&(a.length&&u.apply(r,a),a.length=0,i=s.name),a.push(s));return a.length&&u.apply(r,a),a.length=0,i=null,r}}),rn={VERSION:"4.2.0",clone:r,extend:s,pre_process:F,parse:P,getMode:ae,Parser:on};return rn});
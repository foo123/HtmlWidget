/**
*
*   SyntaxHighlighterGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight brush for SyntaxHighlighter
*   https://github.com/foo123/syntaxhighlighter-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";var r;"object"==typeof module&&module.exports?module.exports=n.call(e,{}):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e,{}))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(){return n.call(e,{})}):t in e||(e[t]=r=n.call(e,{}))&&"function"==typeof define&&define.amd&&define(function(){return r})}(this,"SyntaxHighlighterGrammar",function(e){"use strict";function t(e){var t=0;return null===e?t=kn:!0===e||!1===e||e instanceof Boolean?t=dn:tn===e?t=gn:(t=In[ln.call(e)]||hn,t=$n===t||e instanceof Number?isNaN(e)?bn:isFinite(e)?$n:yn:xn===t||e instanceof String?1===e.length?vn:xn:_n===t||e instanceof Array?_n:On===t||e instanceof RegExp?On:En===t||e instanceof Date?En:Sn===t||e instanceof Function?Sn:qn===t?qn:hn),t}function n(e,t,n,r){var o,s,l,i,a,u,p=e.length;if(arguments.length<4&&(r=p-1),0>r&&(r+=p),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,i=15&l,a=1&i,u=new Array(l),a&&(u[0]=t(e[n],n,n,r)),o=a;i>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=i;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function r(e,t,n,r,o){var s,l,i,a,u,p=e.length,c=n;if(arguments.length<5&&(o=p-1),0>o&&(o+=p),arguments.length<4&&(r=0),r>o)return c;if(r===o)return t(c,e[r],r);for(i=o-r+1,a=15&i,u=1&a,u&&(c=t(c,e[r],r)),s=u;a>s;s+=2)l=r+s,c=t(t(c,e[l],l),e[l+1],l+1);for(s=a;i>s;s+=16)l=r+s,c=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(c,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return c}function o(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,i=15&l,a=1&i;for(a&&e(t,r,t,n),o=a;i>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=i;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function s(e,n){var r,o,l,i,a=t(e),u=0;if($n===t(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,qn===a){o={};for(l in e)e[rn](l)&&e[on](l)&&(r=t(e[l]),o[l]=qn===r?n?s(e[l],u>0?u-1:n):e[l]:_n===r?n?s(e[l],u>0?u-1:n):e[l].slice():En===r?new Date(e[l]):xn&r?e[l].slice():$n&r?0+e[l]:e[l])}else if(_n===a)for(i=e.length,o=new Array(i),l=0;i>l;l++)r=t(e[l]),o[l]=qn===r?n?s(e[l],u>0?u-1:n):e[l]:_n===r?n?s(e[l],u>0?u-1:n):e[l].slice():En===r?new Date(e[l]):xn&r?e[l].slice():$n&r?0+e[l]:e[l];else o=En===a?new Date(e):xn&a?e.slice():$n&a?0+e:e;return o}function l(){var e,n,r,o,i,a,u,p,c,f,m=arguments,h=m.length;if(1>h)return null;for(n=s(m[0]),r=1;h>r;r++)if(e=m[r])for(o in e)if(e[rn](o)&&e[on](o))if(n[rn](o)&&n[on](o)){if(c=t(n[o]),f=t(e[o]),qn===c&&qn===f)n[o]=l(n[o],e[o]);else if(_n===c&&_n===f){if(u=n[o],p=e[o],a=p.length,!a)continue;if(u.length)for(i=0;a>i;i++)0>u.indexOf(p[i])&&u.push(p[i]);else n[o]=p.slice()}}else n[o]=s(e[o]);return n}function i(e,n){return n||_n!==t(e)?[e]:e}function a(e,n){return e=i(e),(n||_n!==t(e[0]))&&(e=[e]),e}function u(e,n){return xn&t(n)&&xn&t(e)&&n.length&&n.length<=e.length&&n===e.substr(0,n.length)}function p(e,t,n){return n?e[t]=tn:delete e[t],e}function c(e){return(e||"id_")+ ++Tn}function f(e){return(e||"uuid")+"_"+ ++Tn+"_"+(new Date).getTime()}function m(){var e,n,r,o,s,l,i=arguments,a=i.length;for(e=i[0]||{},s=1;a>s;s++)if(n=i[s],qn===t(n))for(o in n)n[rn](o)&&n[on](o)&&(r=n[o],l=t(r),e[o]=$n&l?0+r:En&l?new Date(r):Rn&l?r.slice():r);return e}function h(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[rn](o)||(t[o]=function(){}),n=t[o],delete t[o],n[nn]=m(an(e[nn]),t),n[nn][o]=n,n}function g(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function k(e){return"&amp;"===e?"&":"&lt;"===e?"<":"&gt;"===e?">":"&quot;"===e?'"':"'"}function $(e){return"&#"+e.charCodeAt(0)+";"}function y(e,t){return e.replace(Cn,t?g:$)}function b(e){return e.replace(Gn,k)}function d(e){return e.replace(An,"\\$1")}function x(e,t){return new RegExp(e,t||"")}function v(e,t,n,r){var o,s,l,i,a=e.pos,u=e.length,p="",c=!!n;if(c){for(r=!!r,s=!1,i=0;u>a&&(o=e[fn](a++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&i++,(!l||2&i)&&(p+=o,i=0)):p+=o;2&i&&(p+=n)}else for(;u>a&&(o=e[fn](a++),t!==o);)p+=o;return e.pos=a,p}function w(e,n,r,o){var s,l,i,a,u,p=!0===r?0:1,c=o?"\\":"$",f=o?92:36;for(xn&t(n)&&(o&&(n=d(n)),n=[n,n,n],p=0),l=e.length,u="",s=0;l>s;)i=e[fn](s),l>s+1&&c===i?(a=e.charCodeAt(s+1),f===a?(u+=c,s+=2):a>=48&&57>=a?(u+=n[p+a-48]||"",s+=2):(u+=i,s+=1)):(u+=i,s+=1);return u}function _(e,n,r,o){if(!e||($n|On)&t(e))return e;var s,l=n?n.length||0:0,i="";if(xn&t(o)?i=o:o&&(i=Bn),l&&n===e.substr(0,l)){var a,u,p,s,c,f=e.substr(l),m=f[fn](0),h="";for(s=f.length;s--&&(c=f[fn](s),m!==c);)"i"===c.toLowerCase()&&(h="i");return a=f.substring(1,s),u="^("+a+")",r[u]||(p=x(u,h),r[u]=p),r[u]}return i?(u="^("+d(e)+")"+i,r[u]||(p=x(u,h),r[u]=p),r[u]):e}function q(e,r,o){var s,l="";return xn&t(r)?l=r:r&&(l=Bn),s=n(e.sort(Nn),d).join("|"),[x("^("+s+")"+l,o?"i":""),1]}function S(e,n,r,o){var s=t(n);if($n===s)return n;if(o[e])return o[e];r=r||0;var l,i=0;return n&&n.isCharList&&(i=1,p(n,"isCharList")),l=kn===s?new T(xt,e,n,kn,r):vn===s?new T(xt,e,n,vn,r):jn&s?new T(xt,e,n,On,r):xn&s?new T(xt,e,n,i?wn:xn,r):n,o[e]=l}function O(e,n,r,o,s,l,a,p){if(a[e])return a[e];var c,f,m,h,g,k,$,y=0,b=0,d=1,x=xn&t(o)?!0:!!o;if(c=i(n),m=c.length,1===m)$=S(e,_(c[0],r,l,o),0,a);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)g=t(c[f]),k=t(c[m-1-f]),(vn!==g||vn!==k)&&(d=0),_n&g||_n&k?y=1:(On&g||On&k||u(c[f],r)||u(c[m-1-f],r))&&(b=1);if(d&&!x)c=c.slice().join(""),c.isCharList=1,$=S(e,c,0,a);else if(!x||y||b)if(y||b){for(f=0;m>f;f++)c[f]=_n&t(c[f])?O(e+"_"+f,c[f],r,o,s,l,a):S(e+"_"+f,_(c[f],r,l),f,a);$=m>1?new T(vt,e,c):c[0]}else{for(p&&(p.keywords=i(n).slice()),c=c.sort(Nn),f=0;m>f;f++)c[f]=S(e+"_"+f,_(c[f],r,l),f,a);$=m>1?new T(vt,e,c):c[0]}else p&&(p.keywords=i(n).slice()),$=S(e,q(c,o,s),0,a)}return a[e]=$}function E(e,n,r,s,l){if(l[e])return l[e];var i=a(n),p=[],c=[];return o(function(n){var o,a,f,m;o=S(e+"_0_"+n,_(i[n][0],r,s),n,l),i[n].length>1?(f=u(i[n][1],r),m=f&&Un.test(i[n][1]),On!==o.ptype||xn!==t(i[n][1])||!m&&f?a=S(e+"_1_"+n,_(i[n][1],r,s),n,l):m?(a=new String(i[n][1]),a.regex_pattern=r):a=i[n][1]):a=o,p.push(o),c.push(a)},0,i.length-1),l[e]=new T(wt,e,[p,c])}function L(e,t){var n=a(e.tokens.slice());o(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function R(e,t,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),i=n(t,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(i),i}function j(e){e.Lex||(e.Lex={}),e.Syntax||(e.Syntax={});var n,r,o,s,i,a,u,c,f,m,h,g=e.Lex,k=e.Syntax,$=[g,k],y=$.length;for(h=0;y>h;){m=$[h++];for(o in m)m[rn](o)&&(n=o.split(":"),r=n[1]&&Fn(n[1]).length?Fn(n[1]):null,n=Fn(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],p(m,o),r&&(r=r[cn](),s=m[n],i=t(s),qn===i?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=s):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=s):"action"===r&&xn===i?m[n][s]=!0:m[n].tokens=s))),g===m&&(Dn&t(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(c=s.type=s.type[cn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=g;for(n in m)if(m[rn](n))for(s=m[n];s.extend;)a=s.extend,p(s,"extend"),u=g[a],u&&(Dn&t(u)&&(u=g[a]={type:"simple",tokens:u}),s=l(u,s));m=g;for(n in m)m[rn](n)&&(s=m[n],s.type?(c=s.type=s.type[cn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],p(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],p(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],p(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,p(s,"comment")):s.block?(s.type="block",s.tokens=s.block,p(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,p(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"]],p(s,"error")):s[rn]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"]],p(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"]],p(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"]],p(s,"outdent")):s.unique?(s.type="action",s.action=["unique",xn&t(s.unique)?["_DEFAULT_",s.unique]:s.unique,!!s["in-context"]],p(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"]],p(s,"push")):s[rn]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"]],p(s,"pop")):s.type="simple","action"===s.type?s.ci=!(!s.caseInsesitive&&!s.ci):"block"===s.type||"comment"===s.type?(s.multiline=s[rn]("multiline")?!!s.multiline:!0,xn&t(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&xn&t(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=k;for(n in m)m[rn](n)&&(s=m[n],qn!==t(s)||s.type?s.type&&(c=s.type=s.type[cn](),"group"===c&&s.match?(i=t(s.match),xn&i?(f=s.match[cn](),"alternation"===f||"either"===f?(s.type="alternation",p(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",p(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",p(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",p(s,"match")):"oneormore"===f?(s.type="oneOrMore",p(s,"match")):(s.type="sequence",p(s,"match"))):_n&i&&(s.type="repeat",s.repeat=s.match,p(s,"match"))):"either"===c?s.type="alternation":"all"===c?s.type="sequence":"lookahead"===c?s.type="positiveLookahead":"grammar"===c&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?p(s,"n-gram"):p(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?p(s,"all"):p(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?p(s,"either"):p(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,p(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,p(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,p(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?p(s,"lookahead"):p(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,p(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?p(s,"subgrammar"):p(s,"grammar")));return e}function D(e,n,r){if(r=r||{},n=n||[],!e||!e.length)return n;var o,s,l,i,a,u,p;for(o=0,s=e.length;s>o;o++)if(a=e[o])if(jt===a.type)if(a.autocompletions)for(l=0,i=a.autocompletions.length;i>l;l++)p=a.autocompletions[l],r[rn]("w_"+p.word)||(n.push(p),r["w_"+p.word]=1);else xn===a.token.ptype&&xn&t(a.token.pattern)&&a.token.pattern.length>1&&(r[rn]("w_"+a.token.pattern)||(n.push({word:""+a.token.pattern,meta:a.name,ci:!!a.ci}),r["w_"+a.token.pattern]=1));else if(Mt===a.type)D(a.token,n,r);else if(Ut&a.type){l=0,i=a.token.length;do D([u=a.token[l++]],n,r);while(i>l&&(Nt&u.type&&1>u.min||_t===u.type))}else Nt&a.type&&D([a.token[0]],n,r);return n}function I(e,n,r,o){for(var s;xn&t(s=n[e]||r[e]);)e=s;return o?e:n[e]||r[e]||e}function M(e,t){return e.length>1?o(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Yn.test(o)&&Yn.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function F(e,r,o){var l,i,a,u,p,c,f,m,h,g,k,$,y,b,w,_=!1;if(w=e.modifier?e.modifier:null,m=new String(Fn(e)),m.pos=0,1===m.length)$=""+e,r[$]||o[$]||(r[$]={type:"simple",tokens:e}),e=$;else{for(l=[],i=[],a="",y=[];m.pos<m.length;)if(h=m[fn](m.pos++),Hn.test(h))if(a.length&&(_?(i.length&&(k=i[i.length-1],$=k+"."+a,c=r[$]||o[$],c||(f=I(k,r,o),o[$]=xn&t(f)?new String(f):s(f),o[$].modifier=a),i[i.length-1]=$),_=!1):"0"===a?(r[Zt]||(r[Zt]={type:"simple",tokens:0}),i.push(Zt)):"^^"===a?(r[Vt]||(r[Vt]={type:"simple",tokens:qt}),i.push(Vt)):"^^1"===a?(r[Wt]||(r[Wt]={type:"simple",tokens:St}),i.push(Wt)):"^"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:Et}),i.push(Jt)):"$"===a?(r[Qt]||(r[Qt]={type:"simple",tokens:Ot}),i.push(Qt)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a)),a=""),"."===h)i.length&&m.pos<m.length&&!Hn.test(m[fn](m.pos))?_=!0:a+=h;else if('"'===h||"'"===h)u=v(m,h,"\\",!0),u.length?($=""+u,r[$]||(r[$]={type:"simple",tokens:u}),i.push($)):(r[en]||(r[en]={type:"simple",tokens:""}),i.push(en));else if("["===h)u=v(m,"]","\\",!0),$="["+u+"]",r[$]||(r[$]={type:"simple",tokens:x("^(["+("^"===u[fn](0)?"^"+d(u.slice(1)):d(u))+"])")}),i.push($);else{if("]"===h){a+=h;continue}if("/"===h)u=v(m,h,"\\",!1),g="",u.length&&(m.pos<m.length&&"i"===m[fn](m.pos)&&(m.pos++,g="i"),$="/"+u+"/"+g,r[$]||(r[$]={type:"simple",tokens:x("^("+u+")",g)}),i.push($));else if("*"===h||"+"===h||"?"===h)i.length?(k=i[i.length-1],$=""+k+h,o[$]||(o[$]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[k]}),i[i.length-1]=$):a+=h;else if("{"===h)i.length?(p=v(m,"}",!1),p=n(p.split(","),Fn),p[0]=p[0].length?parseInt(p[0],10)||0:0,0>p[0]&&(p[0]=0),2>p.length?p.push(p[0]):p[1]=p[1].length?parseInt(p[1],10)||mn:mn,0>p[1]&&(p[1]=0),k=i[i.length-1],$=""+k+["{",p[0],",",isFinite(p[1])?p[1]:"","}"].join(""),o[$]||(o[$]={type:"repeat",repeat:[p[0],p[1]],tokens:[k]}),i[i.length-1]=$):a+=h;else{if("}"===h){a+=h;continue}"&"===h||"!"===h?i.length?(k=i[i.length-1],$=""+k+h,o[$]||(o[$]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[k]}),i[i.length-1]=$):a+=h:"|"===h?(_=!1,i=M(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length?l.push(i[0]):a+=h,i=[]):"("===h?(y.push([i,l,a]),i=[],l=[],a=""):")"===h&&(i=M(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length&&l.push(i[0]),i=[],l=M(l,1),l.length>1?($=""+l.join(" | "),o[$]||(o[$]={type:"alternation",tokens:l})):l.length&&($=l[0]),l=[],b=y.pop(),i=b[0],l=b[1],a=b[2],k=$,$="("+k+")",o[$]||(o[$]=s(I(k,r,o))),i.push($))}}else a+=h;a.length&&(_?(i.length&&(k=i[i.length-1],$=k+"."+a,c=r[$]||o[$],c||(f=I(k,r,o),o[$]=xn&t(f)?new String(f):s(f),o[$].modifier=a),i[i.length-1]=$),_=!1):"0"===a?(r[Zt]||(r[Zt]={type:"simple",tokens:0}),i.push(Zt)):"^^"===a?(r[Vt]||(r[Vt]={type:"simple",tokens:qt}),i.push(Vt)):"^^1"===a?(r[Wt]||(r[Wt]={type:"simple",tokens:St}),i.push(Wt)):"^"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:Et}),i.push(Jt)):"$"===a?(r[Qt]||(r[Qt]={type:"simple",tokens:Ot}),i.push(Qt)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a))),a="",i=M(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length&&l.push(i[0]),i=[],l=M(l,1),l.length>1?($=""+l.join(" | "),o[$]||(o[$]={type:"alternation",tokens:l}),e=$):l.length&&(e=l[0]),l=[]}return w&&(r[e]||o[e])&&((r[e]||o[e]).modifier=w),e}function N(e,s,l,u,p,c,f,m,h,g,k){var $,y,b,d,x,v,w,_=null,q=null,S=null;if(qt===e||St===e||Et===e||Ot===e)return new C(e,qt===e?Vt:St===e?$T_FBNL$:Et===e?Jt:Qt,e,q);if(!1===e||0===e)return new C(Lt,Zt,0,q);if(""===e)return new C(Rt,en,"",q);if(null===e)return new C(jt,Xt,kn,q,S);if(_n&t(e)&&(b=e,e="NGRAM_"+b.join("_"),u[e]||(u[e]={type:"ngram",tokens:b})),e=""+e,m[e])return m[e];if(x=I(e,l,u),xn&t(x)&&(x=F(x,l,u),x=l[x]||u[x]||null),!x)return null;if($=x.type?Kt[x.type[cn]().replace(Pn,"")]||jt:jt,q=x.msg||null,S=x.modifier||null,y=x.tokens,jt&$){if(qt===y||St===y||Et===y||Ot===y||!1===y||0===y)return _=new C(y||Lt,e,y||0,q),m[e]=_,_;if(""===y)return _=new C(Rt,e,"",q),m[e]=_,_;if(null===y)return _=new C(jt,e,kn,q,S),m[e]=_,_;if(!y)return null}if(_t&$)x[rn]("action")?"nop"===x.action[0]?x.action[0]=ft:"error"===x.action[0]?x.action[0]=mt:"context-start"===x.action[0]?x.action[0]=gt:"context-end"===x.action[0]?x.action[0]=kt:"push"===x.action[0]?x.action[0]=$t:"pop"===x.action[0]?x.action[0]=yt:"unique"===x.action[0]?x.action[0]=ht:"indent"===x.action[0]?x.action[0]=bt:"outdent"===x.action[0]&&(x.action[0]=dt):x[rn]("nop")?x.action=[ft,x.nop,!!x["in-context"]]:x[rn]("error")?x.action=[mt,x.error,!!x["in-context"]]:x[rn]("context")?x.action=[x.context?gt:kt,x.context,!!x["in-context"]]:x[rn]("context-start")?x.action=[gt,x["context-start"],!!x["in-context"]]:x[rn]("context-end")?x.action=[kt,x["context-end"],!!x["in-context"]]:x[rn]("push")?x.action=[$t,x.push,!!x["in-context"]]:x[rn]("pop")?x.action=[yt,x.pop,!!x["in-context"]]:x[rn]("unique")?x.action=[ht,xn&t(x.unique)?["_DEFAULT_",x.unique]:x.unique,!!x["in-context"]]:x[rn]("indent")?x.action=[bt,x.indent,!!x["in-context"]]:x[rn]("outdent")&&(x.action=[dt,x.outdent,!!x["in-context"]]),x.nop&&(x.action[0]=ft),_=new C(_t,e,x.action.slice(),q,S),_.ci=!!x.caseInsensitive||x.ci,m[e]=_;else if(y=i(y),jt&$){w=x.autocomplete?R(x,Rn&t(x.autocomplete)?i(x.autocomplete):y,e,k):null;var j={};if(v="undefined"!=typeof x.combine?x.combine:_n&t(x.tokens)?!0:!1,_=new C(jt,e,O(e,y.slice(),s,v,!(!x.caseInsensitive&&!x.ci),c,f,j),q,S,null,w),j.keywords&&(_.keywords=j.keywords.join("|")),m[e]=_,null!=x.except){var D,M,z=i(x.except),P=z.length,T=[];for(D=0;P>D;D++)z[D]&&(M=N(z[D],s,l,u,p,c,f,m,h,g,k),M&&T.push(M));T.length&&(_.except=T)}}else Dt&$?(It===$&&L(x,g),_=new C($,e,E(e,y.slice(),s,c,f),q),_.empty=x[rn]("empty")?!!x.empty:!0,_.mline=x[rn]("multiline")?!!x.multiline:!0,_.esc=x[rn]("escape")?x.escape:!1,_.inter=!!p[e+".inside"],It===$&&x.interleave&&h.push(H(_)),S&&(_.modifier=S),m[e]=_):Yt&$&&(Bt===$?m[e]=new C(Bt,e,y,q,S):Ht===$?(d=a(y),_=n(d,function(t,n){return new C(Ht,e+"_NGRAM_"+n,null,q,S)}),m[e]=_,o(function(e){_[e].token=i(r(d[e],function(e,t){return e.concat(N(t,s,l,u,p,c,f,m,h,g,k))},[]))},0,d.length-1)):(Ct===$||Gt===$?_=new C($,e,null,q,S):Nt&$&&_n&t(x.repeat)?(_=new C(Nt,e,null,q,S),_.min=x.repeat[0],_.max=x.repeat[1]):zt===$?(_=new C(zt,e,null,q,S),_.min=0,_.max=1):Pt===$?(_=new C(Pt,e,null,q,S),_.min=0,_.max=mn):Tt===$?(_=new C(Tt,e,null,q,S),_.min=1,_.max=mn):_=Mt===$?new C(Mt,e,null,q,S):new C(Ft,e,null,q,S),m[e]=_,_.token=i(r(y,function(e,t){return e.concat(N(t,s,l,u,p,c,f,m,h,g,k))},[]))));return m[e]}function z(e){var n={};return e.Lex=e.Lex||{},e.Syntax=e.Syntax||{},e=j(e),e.Parser&&e.Parser.length&&o(function r(s,l){var i,a,u,p=l[s];n[p]||(_n&t(p)&&(i=p,p="NGRAM_"+i.join("_"),e.Syntax[p]||(e.Syntax[p]={type:"ngram",tokens:i})),a=I(p,e.Lex,e.Syntax),xn&t(a)&&(a=F(a,e.Lex,e.Syntax),a=e.Lex[a]||e.Syntax[a]||null),a&&(n[p]=a,u=a.type?Kt[a.type[cn]().replace(Pn,"")]||jt:jt,Yt&u&&o(r,0,a.tokens.length-1,a.tokens)))},0,e.Parser.length-1,e.Parser),e}function P(e){var n,o,l,i,a,u,p,c,f,m,h,g,k,$;return e.__parsed?e:(n=e.RegExpID||null,l=e.Extra?s(e.Extra):{},i=e.Style?s(e.Style):{},a=null,u=null,p=e.Lex?s(e.Lex):{},c=e.Syntax?s(e.Syntax):{},f={},m={},h={},k={},$={},g=[],o=e.Parser?s(e.Parser):[],e=j({Style:i,Fold:a,Match:u,Lex:p,Syntax:c,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),e.$parser=r(o,function(e,r){var o=N(r,n,p,c,i,f,m,h,g,k,$)||null;return o&&(_n&t(o)?e=e.concat(o):e.push(o)),e},[]),e.$interleaved=g&&g.length?g:null,e.$comments=k,e.$autocomplete=$&&$.autocomplete&&$.autocomplete.length?$.autocomplete:null,e.__parsed=1,e)}function T(e,n,r,o,s){var l,i,a=this;l=a.type=e,a.name=n,a.pattern=r,i=a.ptype=o||xn,a.key=s||0,vt===l?a.key=!1!==s:wt===l?a.pattern[0]=new T(vt,n+"_Start",r[0],null,!1):kn===i?a.pattern=null:On===i&&(a.pattern=On&t(r)?[r,0]:[r[0],r[1]||0])}function A(e,n,r,o){var s,l,i,a,u,p,c,f,m,h,g,k=e,$=k.type,y=k.pattern,b=k.key;if(wt===$){if(s=k.name,i=y[0],a=y[1],p=A(i,n,r,o))return u=a[p[0]],f=t(u),m=i.pattern[p[0]].ptype,On===m&&Ln&f&&(u.regex_pattern?(c=w(u,p[1],0,1),u=new T(xt,s+"_End",_(c,u.regex_pattern,{}),On)):(c=$n&f?p[1][u+1]:w(u,p[1]),u=new T(xt,s+"_End",c,c.length>1?xn:vn))),u}else if(vt===$){for(h=0,g=y.length;g>h;h++)if(c=A(y[h],n,r,o))return b?[h,c[1]]:c}else{if(l=k.ptype,kn===l)return!1!==r&&n.end(),[b,""];if(On===l){if(c=n.slice(n.pos).match(y[0]),c&&0===c.index)return!1!==r&&n.mov(c[y[1]||0].length),[b,y[1]>0?c[y[1]]:c]}else if(wn===l){if(!0===o){c=-1;var d,x;for(g=y.length-1;g>=0;g--)d=n.indexOf(y[fn](g),n.pos),d>-1&&(-1===c||c>d)&&(c=d,x=y[fn](g));if(c>-1)return!1!==r&&(n.pos=c+1),[b,x]}else if(c=n[fn](n.pos)||null,c&&-1<y.indexOf(c))return!1!==r&&n.mov(1),[b,c]}else if(vn===l){if(!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+1),[b,y]}else if(c=n[fn](n.pos)||null,y===c)return!1!==r&&n.mov(1),[b,c]}else if(xn===l)if(g=y.length,!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+g),[b,y]}else if(y===n.substr(n.pos,g))return!1!==r&&n.mov(g),[b,y]}return!1}function C(e,t,n,r,o,s,l,i){var a=this;a.type=e,a.name=t,a.token=n,a.modifier=o||null,a.except=s||null,a.autocompletions=l||null,a.keywords=i||null,a.pos=null,a.msg=r||null,a.$msg=null,a.status=0,a.empty=!1,a.ci=!1,a.mline=!0,a.esc=!1,a.inter=!1,a.found=0,a.min=0,a.max=1,a.i0=0,a.$id=null}function G(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function H(e,t,n,r){var o=new C(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=it),n&&(o.modifier=n),r&&(o.$id=r),o}function B(e){var t=e.name;return e.$msg?e.$msg:e.status&it?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function U(e,t,n,r,o,s,l){e.status&st&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||B(s)])}function Y(e,t,n){return t<e.length?e.splice(t,0,n):e.push(n),e}function K(e,t,n,r){var o,s,l,i,a=e.stack,u=0,p=1/0,c=-1;if(s=t.pos,t.spc(),l=t.pos,o=a.length,t.pos<t.length){for(;o>u&&(i=a[o-u-1],i.$id===r.$id);){for(;!(V(i,t,e,n)||(t.pos=i.pos>t.pos?i.pos:t.pos+1,a.length=o,t.pos>=t.length)););a.length=o,t.pos<t.length&&p>t.pos?(p=t.pos,c=o-u):p===t.pos&&o-u>c&&(p=t.pos,c=o-u),t.pos=l,u++}p<t.length?(t.pos=p,a.length=c):t.end()}return l>=s&&t.pos===l}function V(e,t,n,r){if(!e)return!1;var o=e.type,s=Yt&o?X:Dt&o?Q:_t&o?W:J;return s(e,t,n,r)}function W(e,n,r,o){var s,l,i,a,u,p,c,f,m,h,g,k,$,y,b,d,x=e,v=x.token||null,_=x.ci,q=x.name,S=!(r.status&st);if(x.status=0,x.$msg=null,S||!v||!o||!o.pos)return!0;if(d=!!(Dt&o.T),ft===v[0]||d&&!o.block)return!0;if(s=v[0],l=v[1],$=v[2],u=x.msg,p=r.queu,c=r.symb,f=r.ctx,d?(b=o.block.match||o.block.str,m=o.block.pos[0][0],h=o.block.pos[0][1],g=o.block.pos[0][2],k=o.block.pos[0][3]):(b=o.match||o.str,m=o.pos[0],h=o.pos[1],g=o.pos[2],k=o.pos[3]),mt===s)return!u&&xn&t(l)&&(u=l),x.$msg=u?w(u,b,!0):'Error "'+q+'"',U(r,m,h,g,k,x,B(x)),x.status|=at,!1;if(kt===s)f.length&&f.shift();else if(gt===s)f.unshift({symb:{},queu:[]});else if(yt===s){if($){if(!f.length)return!0;p=f[0].queu}if(l){if(l=w(l,b),_&&(l=l[cn]()),!p.length||l!==p[0][0])return p.length?(x.$msg=u?w(u,[p[0][0],l],!0):'Tokens do not match "'+p[0][0]+'","'+l+'"',y=B(x),U(r,p[0][1],p[0][2],p[0][3],p[0][4],x,y),U(r,m,h,g,k,x,y),p.shift()):(x.$msg=u?w(u,["",l],!0):'Token does not match "'+l+'"',y=B(x),U(r,m,h,g,k,x,y)),x.status|=at,!1;p.shift()}else p.shift()}else if($t===s&&l){if($){if(!f.length)return!0;p=f[0].queu}l=w(l,b),_&&(l=l[cn]()),x.$msg=u?w(u,l,!0):'Token does not match "'+l+'"',p.unshift([l,m,h,g,k,B(x)])}else if(ht===s){if($){if(!f.length)return!0;c=f[0].symb}if(i=l[1],a=l[0],i=w(i,b,!0),_&&(i=i[cn]()),c[rn](a)||(c[a]={}),c[a][rn](i))return x.$msg=u?w(u,i,!0):'Duplicate "'+i+'"',y=B(x),U(r,c[a][i][0],c[a][i][1],c[a][i][2],c[a][i][3],x,y),U(r,m,h,g,k,x,y),x.status|=at,!1;c[a][i]=[m,h,g,k]}return!0}function J(e,t,n,r,o){var s,l,i=e,a=i.token,u=i.modifier,p=i.type,c=i.name,f=i.except,m=n.line,h=t.pos,g=null,k=!1;if(i.status&=pt,i.$msg=o?null:i.msg||null,i.pos=t.pos,f&&!o){l=et(n,t);for(var $=0,y=f.length;y>$;$++)if(s=f[$],i!==s&&jt===s.type&&J(s,t,n,r,1))return i.pos=s.pos,et(n,t,l),!1}return qt===p?k=0===n.line:St===p?k=n.bline+1===n.line:Et===p?k=t.sol():Ot===p?(t.spc(),t.eol()?k=c:(i.pos=t.pos,t.bck(h))):Lt===p?(i.status=0,k=!0):Rt===p?(i.status&it&&t.spc()&&!t.eol()?(i.pos=t.pos,t.bck(h),i.status|=at):k=!0,i.status&=ut):kn===a?(t.end(),k=u||c):(g=A(a,t))&&(g=g[1],k=u||c),o?k:(!1!==k&&(r.T=p,r.id=c,r.type=k,r.str=t.sel(h,t.pos),r.match=g,r.pos=[m,h,m,t.pos]),!k&&i.status&&i.$msg&&(i.$msg=w(i.$msg,c,!0)),k)}function Q(e,t,n,r){var o,s,l,i,a,u,p,c,f,m,h,g,k,$,y,b,d,x,v,_,q,S,O=e,E=O.name,L=O.type,R=O.modifier,j=O.token,D=O.mline,I=O.inter,M=I?E+".inside":E,F=O.esc,N=!!F,z="",P="",T="",C="",G=O.$id||E,B=n.stack,U=n.outer,K=U&&U[2],W=U&&U[1];if(O.status&=pt,O.$msg=O.msg||null,O.pos=t.pos,_=n.line,q=t.pos,It===L&&(O.status&=ut),y=O.status&it,l=0,i=0,n.block&&n.block.name===E?(i=1,l=1,$=M,o=n.block.end,c=n.block.sp,m=n.block.ip,f=n.block.ep,z=n.block.s,P=n.block.i):!n.block&&(o=A(j,t))&&(i=1,$=E,d=t.pos,c=[_,q],m=[[_,d],[_,d]],f=[_,d],z=t.sel(q,d),P="",C="",n.block={name:E,end:o,sp:c,ip:m,ep:f,s:z,i:P,e:C}),i){if(v=B.length,s=kn===o.ptype,b=s||O.empty,I){if(s&&l&&t.sol())return O.status&=ut,n.block=null,!1;if(!l)return d=t.pos,r.T=L,r.id=E,r.type=R||$,r.str=t.sel(q,d),r.match=null,r.pos=[_,q,_,d],Y(B,v,H(O,y,0,G)),R||$}if(d=t.pos,a=W?s&&t.eol():A(o,t),p=D,u=0,a)$=s?M:E,C=t.sel(d,t.pos);else if(x=t.pos,g=!1,W||N||wn!==o.ptype&&vn!==o.ptype&&xn!==o.ptype){for(;!t.eol();){if(W){if(V(W,t,K,r)){if(t.pos>x){s&&(a=1);break}return!0}if(s){k=t.nxt(1),T+=k;continue}}if(d=t.pos,!g&&A(o,t)){I&&t.pos>d&&d>x?($=M,t.bck(d),u=1):($=E,a=1),C=t.sel(d,t.pos);break}k=t.nxt(1),T+=k,g=N&&!g&&F===k,d=t.pos}s&&t.eol()&&(a=1)}else(S=A(o,t,!0,!0))?I&&t.pos>d+S[1].length?($=M,t.mov(-S[1].length),u=1,T=t.sel(d,t.pos)):($=E,a=1,T=t.sel(d,t.pos-S[1].length),C=S[1]):(t.end(),$=M,u=1,T=t.sel(d,t.pos));return p=D||N&&g,P+=T,m[1]=[_,d],f=[_,t.pos],a&&!b&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(a||!p&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=P,n.block.e=C,Y(B,v,H(O,y,0,G))),r.T=L,r.id=E,r.type=R||$,r.str=t.sel(q,t.pos),r.match=null,r.pos=[_,q,f[0],f[1]],O.pos=t.pos,n.block||(h=z+P+C,r.block={str:h,match:[h,P,z,C],part:[h,z,P,C],pos:[[c[0],c[1],f[0],f[1]],[c[0],c[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),R||$)}return O.status&&O.$msg&&(O.$msg=w(O.$msg,E,!0)),!1}function X(e,t,n,r){var o,s,l,i,a,u,p,f,m,h,g,k,$,y,b,d,x=e,v=x.type,w=(x.name,x.token),_=w.length,q=x.modifier;if(x.status&=pt,x.$msg=x.msg||null,k=n.stack,f=t.pos,m=k.length,x.pos=t.pos,u=0,p=0,Bt===v){x.status&=pt;var S=new String(w[0]),O=k.length?k[k.length-1]:null;return S.subgrammar=1,S.next=O?new C(Ct,O.name,[O]):null,S.required=O?O.status&it:0,S}if(Mt===v){for(y=c(),x.status|=it,$=[],d=et(n,t),g=0,h=g;_>h;h++){if(o=H(w[h],1,q,y),s=V(o,t,n,r),x.pos=o.pos,o.status&it&&(u++,$.push(B(o))),!1!==s)return s;o.status&at&&(p++,et(n,t,d))}return u>0?x.status|=it:x.status&=ut,_===p&&u>0?x.status|=at:x.status&=pt,x.status&&!x.$msg&&$.length&&(x.$msg=$.join(" | ")),!1}if(Ut&v){b=!!(v&Ft),y=x.$id||c(),b?x.status|=it:x.status&=ut,d=et(n,t),g=0;do o=H(w[g++],b,q,y),s=V(o,t,n,r);while(_>g&&(!0===s&&At&o.type||!1===s&&!(o.status&it)));if(x.pos=o.pos,!1!==s){if(!0!==s||Lt!==o.type)for(h=_-1;h>=g;h--)Y(k,m+_-h-1,H(w[h],1,q,y));return s.subgrammar&&_>g&&(s.next=new C(Ct,w[g].name,[w[g]]),s.required=w[g].status&it),s}return o.status&at?(b?x.status|=at:x.status&=pt,et(n,t,d)):b&&o.status&it&&(x.status|=at),x.status&&!x.$msg&&(x.$msg=B(o)),!1}if(At&v)return Bt&w[0].type?!0:(d=et(n,t,null,!1),s=V(H(w[0],0),t,n,r),et(n,t,d),Gt===v?!1===s:!1!==s);for(y=x.$id||c(),l=x.found,i=x.min,a=x.max,x.status=0,$=[],d=et(n,t),h=0;_>h;h++){if(o=H(w[h],1,q,y),s=V(o,t,n,r),x.pos=o.pos,!1!==s){if(++l,a>=l)return x.found=l,Y(k,m,H(x,0,0,c())),x.found=0,s;break}o.status&it&&(u++,$.push(B(o))),o.status&at&&et(n,t,d)}return i>l&&(x.status|=it),(l>a||i>l&&u>0)&&(x.status|=at),x.status&&!x.$msg&&$.length&&(x.$msg=$.join(" | ")),!1}function Z(e,t){var n=this;n.id=e?f("state"):"state",t instanceof Z?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=t.stack.slice(),n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new Z(e,t.outer[2])]:null,n.status&st?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=[],n.token=null,n.block=null,n.outer=null,n.status&st?(n.queu=[],n.symb={},n.ctx=[],n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function et(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack.length>n[3]&&(e.stack.length=n[3]),t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack.length,t?t.pos:1/0],!1===r&&(e.status=0),n)}function tt(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function nt(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?un(0,r.pos+e):pn(r.length,r.pos+e),r},r.bck=function(e){return r.pos=un(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||nt.$NONSPC$;r.pos<r.length&&t.test(n=r[fn](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[fn](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||nt.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function rt(e,t){var r=function(e){return new t.Match(e.token,e.pos,e.type)},s=t.Highlighter,l=h(s,{constructor:function(){var e=this;s.call(e)},findMatches:function(e,t){var s=l.escapeHtml;s&&(t=b(t));var i=l.$parser.parse(t,ot|st|lt).tokens;if(s){var a=0;o(function(e,t){var n=t[e];n.pos=a,n.token=y(n.token,1),a+=n.token.length},0,i.length-1,i)}return n(i,r)}});return l.$id=f("syntaxhighlighter_grammar_brush"),l.$parser=new Wn.Parser(P(e)),l.escapeHtml=!0,l.submode=function(e,t){l.$parser.subparser(e,t.$parser)},l.dispose=function(){l.$parser&&l.$parser.dispose(),l.$parser=null},l}var ot=1,st=2,lt=32,it=4,at=8,ut=~it,pt=~at,ct=it|at,ft=0,mt=4,ht=8,gt=16,kt=17,$t=32,yt=33,bt=128,dt=129,xt=2,vt=4,wt=8,_t=4,qt=8,St=9,Ot=16,Et=32,Lt=128,Rt=256,jt=512,Dt=1024,It=1025,Mt=2048,Ft=4096,Nt=8192,zt=8193,Pt=8194,Tt=8195,At=16384,Ct=At,Gt=16385,Ht=32768,Bt=65536,Ut=Ft|Ht,Yt=Mt|Ft|Nt|At|Ht|Bt,Kt={action:_t,simple:jt,block:Dt,comment:It,subgrammar:Bt,alternation:Mt,sequence:Ft,repeat:Nt,zeroorone:zt,zeroormore:Pt,oneormore:Tt,positivelookahead:Ct,negativelookahead:Gt,ngram:Ht},Vt="$|SOF|$",Wt="$|NONBLANK|$",Jt="$|SOL|$",Qt="$|EOL|$",Xt="$|ENDLINE|$",Zt="$|EMPTY|$",en="$|NONSPACE|$",tn=void 0,nn="prototype",rn="hasOwnProperty",on="propertyIsEnumerable",sn=Object[nn],ln=sn.toString,an=Object.create,un=Math.max,pn=Math.min,cn="toLowerCase",fn="charAt",mn=1/0,hn=4,gn=8,kn=16,$n=32,yn=33,bn=34,dn=64,xn=128,vn=129,wn=130,_n=256,qn=512,Sn=1024,On=2048,En=4096,Ln=xn|$n,Rn=xn|_n,jn=On|_n,Dn=xn|_n|On,In={"[object Number]":$n,"[object String]":xn,"[object Array]":_n,"[object RegExp]":On,"[object Date]":En,"[object Function]":Sn,"[object Object]":qn},Mn=/^\s+|\s+$/g,Fn=String[nn].trim?function(e){return e.trim()
}:function(e){return e.replace(Mn,"")},Nn=function(e,t){return t.length-e.length},zn=/\r\n|\r|\n/g,Pn=/[\-_]/g,Tn=0,An=/([.*+?^${}()|[\]\/\\\-])/g,Cn=/[&"'<>]/g,Gn=/&(amp|lt|gt|apos|quot);/g,Hn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Bn="(\\s|\\W|$)",Un=/(\\\\)*?\\\d/,Yn=/[*+]$/;nt.$SPC$=/^[\s\u00a0]+/,nt.$NONSPC$=/[^\s\u00a0]/,nt.$NOTEMPTY$=/\S/,nt.$SPACE$=/^\s*/;var Kn=h({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,i,a,u,p,c,f,m,h,g,k,$,y,b,d,x=this,v=x.$grammar,w=v.Style,_=x.DEF,q=x.ERR,S={},O=x.$n$,E=x.$t$,L=x.$v$,R=v.$interleaved,j=v.$parser,D=j.length,I=R?R.length:0,M=t.outer,F=M&&M[2],N=M&&M[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.stack,i=t.line,a=e.pos,m=!1,g=!0,h=!1,k=!1,M&&x===M[0]){if(S[O]=null,S[E]=_,S[L]=null,N){if(s=new G,V(N,e,F,s))return t.outer=null,{parser:x,state:F};for(e.nxt(1);!e.eol();){if(V(N,e,F,s)){if(e.pos>a)break;return t.outer=null,{parser:x,state:F}}e.nxt(1)}}else e.spc(),e.eol()?k=!0:e.end();return S[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),S}if(l.length&&Ot===l[l.length-1].type&&e.sol()&&l.pop(),(!l.length||Rt!==l[l.length-1].type&&null==t.block)&&e.spc()){if(l.length&&Bt===l[l.length-1].type)return e.bck(a),r=l.pop(),m=V(r,e,t,s),$=""+m,x.$subgrammars[$]?(y=x.$subgrammars[$],b=new Z(1,n[$]?n[$]:t.status),F=t):(y=x,b=new Z,F=t),b.outer=[x,m.next,F],{parser:y,state:b,toInner:$};g=!1,k=!0}if(S[O]=null,S[E]=_,S[L]=null,g)for(s=new G,u=0;g&&(l.length||D>u)&&!e.eol();){if(c=e.pos,f=l.length,N){if(e.spc(),V(N,e,F,s))return e.pos>c?(S[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,S):(t.outer=null,{parser:M[0],state:F,fromInner:t});e.bck(c)}if(d=!1,I&&!t.block)for(p=0;I>p;p++)if(r=R[p],m=V(r,e,t,s),!1!==m){d=!0;break}if(g&&!d){if(!l.length&&u>=D)break;r=l.length?l.pop():j[u++],m=V(r,e,t,s)}if(!1===m){if(r.status&ct){t.token=r,k=K(t,e,s,r)||k,h=!0,g=!1;break}}else{if(m.subgrammar)return $=""+m,x.$subgrammars[$]?(y=x.$subgrammars[$],b=new Z(1,n[$]?n[$]:t.status),F=t):(y=x,b=new Z,F=t),b.outer=[x,m.next,F],{parser:y,state:b,toInner:$};if(l.length>1&&e.eol()&&Dt&l[l.length-1].type&&t.block&&t.block.name===l[l.length-1].name)for(p=l.length-2;p>=0&&_t===l[p].type;)o=l[p--],W(o,e,t,s),o.status&at&&(t.$actionerr$=!0);else if(l.length&&_t===l[l.length-1].type)for(;l.length&&_t===l[l.length-1].type;)o=l.pop(),W(o,e,t,s),o.status&at&&(t.$actionerr$=!0);if(!0!==m){g=!1;break}}}return g&&e.nxt(1),S[L]=e.cur(1),!1!==m?(m=w[m]||_,S[O]=r.name):h?(m=q,t.status&st&&U(t,i,a,i,e.pos,r)):m=_,S[E]=m,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),S},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t){var n=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)n.push(t.parser.get(e,t));return n},parse:function(e,t){var n,r,s,l,i,a,u=(e||"").split(zn),p=u.length,c=null;if(t=t||ot,s=!!(t&st),l=!!(t&ot),r={parser:this,state:new Z(0,t),inner:{}},r.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,p-2),l?c=o(t&lt?function(e,t){t._=t._.concat(r.parser.tokenize(nt(u[e]),r,e))}:function(e,t){t._.push(r.parser.tokenize(nt(u[e]),r,e))},0,p-1,{_:[]})._:o(function(e){var t=nt(u[e]);if(t.eol())r.state.line++,r.state.$blank$&&r.state.bline++;else for(;!t.eol();)r.parser.get(t,r)},0,p-1),n=r.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)i=n.queu.shift(),U(n,i[1],i[2],i[3],i[4],null,i[5]);return a=l&&s?{tokens:c,errors:n.err}:l?c:n.err,tt(n),r=n=null,a},autocompletion:function(e,t){var n,r,o,s=e.stack,l={},i=D([e.token],[],l);for(t=t||0,n=s.length-1;n>=0;n--)if(r=s[n],o=r.type,Nt&o){if(i=D([r],i,l),0<r.min&&t<i.length)break}else if((jt===o||Mt===o||Ut&o)&&(i=D([r],i,l),t<i.length))break;return i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[rn](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Vn=h(Kn,{constructor:function(e,t){var n=this;Kn.call(n,e,"plain","plain"),n.DEF=t||n.$DEF,n.ERR=n.$ERR},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.state.pos=n.fromInner.pos,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.pos=t.state.pos,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t){var r,o=this,s=[],l=[],i=null,a=function(e){return e.type=o.$DEF,e};if(tn===t.state.pos&&(t.state.pos=0),e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r=t.parser.get(e,t),r.pos=t.state.pos,t.state.pos+=r.token.length,t.state.$actionerr$?(l.length&&(s=s.concat(n(l,a))),r.type=o.$DEF,s.push(r),l.length=0,i=null):(i!==r.name&&(l.length&&(s=s.concat(l)),l.length=0,i=r.name),l.push(r));return l.length&&(s=s.concat(l)),l.length=0,i=null,s}}),Wn=e.SyntaxHighlighterGrammar={VERSION:"4.0.0",clone:s,extend:l,pre_process:z,parse:P,getMode:rt,Parser:Vn};return e.SyntaxHighlighterGrammar});
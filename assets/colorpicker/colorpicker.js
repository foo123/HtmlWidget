/**
* ColorPicker
* https://github.com/foo123/ColorPicker
* @version 2.0.0
*
* adapted from:
* http://www.eyecon.ro/colorpicker/
*      Color Picker by Stefan Petre www.eyecon.ro (MIT and GPL)
**/
!function(e,t,r){"use strict";"object"==typeof exports?module.exports=r():"function"==typeof define&&define.amd?define(function(){return r()}):e[t]=r()}(this,"ColorPicker",function(){"use strict";function e(e){return null!=e&&"[object Array]"===T.call(e)}function t(e,t){for(var r in t)t[z](r)&&(e[r]=t[r]);return e}function r(e,t){return(t||document).getElementById(e)}function o(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}}function n(e,t,r){if(e===t)return!0;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));for(var o=t.parentNode;o&&o!==r;){if(o===e)return!0;o=o.parentNode}return!1}function i(e,t){return e.classList?e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function c(e,t){i(e,t)||(e.classList?e.classList.add(t):e.className=""===e.className?t:e.className+" "+t)}function l(e,t){e.classList?e.classList.remove(t):e.className=X((" "+e.className+" ").replace(" "+t+" "," "))}function s(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r)}function a(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener(t,r)}function u(e,t){var r;document.createEvent?(r=document.createEvent("HTMLEvents"),r.initEvent(t,!0,!1),e.dispatchEvent(r)):document.createEventObject&&(r=document.createEventObject(),e.fireEvent("on"+t,r))}function d(e,t,r,o){s(o||document,t,function(t){for(var o=!1,n=t.target||t.srcElement;n&&!(o=i(n,e));)n=n.parentElement;o&&r.call(n,t)})}function p(e){return e=parseInt(e,16),[e>>16&255,e>>8&255,255&e]}function f(e){var t=0,r=0,o=0,n=e[0],i=e[1],c=e[2],l=Y(n,i,c),s=B(n,i,c),a=s-l;return o=s,r=0!=s?255*a/s:0,t=0!=r?n===s?(i-c)/a:i===s?2+(c-n)/a:4+(n-i)/a:-1,t*=60,0>t&&(t+=360),r*=100/255,o*=100/255,[I(t),I(r),I(o)]}function b(e){var t,r,o,n=I(e[0]),i=I(255*e[1]/100),c=I(255*e[2]/100);if(0===i)t=r=o=c;else{var l=c,s=(255-i)*c/255,a=(l-s)*(n%60)/60;360==n&&(n=0),60>n?(t=l,o=s,r=s+a):120>n?(r=l,o=s,t=l-a):180>n?(r=l,t=s,o=s+a):240>n?(o=l,t=s,r=l-a):300>n?(o=l,r=s,t=s+a):360>n?(t=l,r=s,o=l-a):(t=0,r=0,o=0)}return[I(t),I(r),I(o)]}function h(e){var t=[e[0].toString(16),e[1].toString(16),e[2].toString(16)];return 1===t[0].length&&(t[0]="0"+t[0]),1===t[1].length&&(t[1]="0"+t[1]),1===t[2].length&&(t[2]="0"+t[2]),t[0]+t[1]+t[2]}function v(e){e="#"===e.charAt(0)?e.slice(1):e;var t=6-e.length;return t>0&&(e=3===t?e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2):new Array(t+1).join("0")+e),e}function g(e,t){e.substr&&(e=e.slice(t?5:4,-1).split(D));var r=t?$.opacity(e[3]):null;return[$.hsb[0](e[0]),$.hsb[1](e[1]),$.hsb[2](e[2]),r]}function m(e,t){e.substr&&(e=e.slice(t?5:4,-1).split(D));var r=t?$.opacity(e[3]):null;return[$.rgb[0](e[0]),$.rgb[1](e[1]),$.rgb[2](e[2]),r]}function _(e){return parseInt(e,10)}function k(e){return parseFloat(e,10)}function y(e,t,r){return"function"==typeof r?function(o){return o=r(o),o>t?t:e>o?e:o}:function(r){return r>t?t:e>r?e:r}}function x(e){return function(t){return e.test(t)}}function w(e){var t=e.getBoundingClientRect(),r=document.body,o=window,n=r.clientTop||0,i=r.clientLeft||0,c=o.pageYOffset||r.scrollTop,l=o.pageXOffset||r.scrollLeft,s=t.top+c-n,a=t.left+l-i;return{top:s,left:a,width:e.offsetWidth,height:e.offsetHeight}}function E(e){return'<div id="'+e+'" class="colorpicker">    <div id="'+e+'_satur_bright" class="colorpicker_satur_bright"><div id="'+e+'_satur_bright_indic"></div></div>    <div id="'+e+'_hue" class="colorpicker_hue"><div id="'+e+'_hue_indic"></div></div>    <div class="colorpicker_new_color colorpicker_transparent">    <button id="'+e+'_new_color" class="colorpicker_color colorpicker_save"></button>    </div>    <div class="colorpicker_current_color colorpicker_transparent">    <button id="'+e+'_current_color" class="colorpicker_color colorpicker_restore"></button>    </div>    <div class="colorpicker_field" data-field="hex">    <input id="'+e+'_hex" type="text" maxlength="6" size="6" value=""/>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.0">    <input id="'+e+'_rgb_0" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.1">    <input id="'+e+'_rgb_1" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.2">    <input id="'+e+'_rgb_2" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.0">    <input id="'+e+'_hsb_0" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.1">    <input id="'+e+'_hsb_1" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.2">    <input id="'+e+'_hsb_2" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <button id="'+e+'_submit" class="colorpicker_submit colorpicker_save"></button>    </div>'}function C(t,r,o){var n,i,c,l,s=!0;if($[r])if(n=$[r],e(n))for(c=0,l=n.length;l>c;c++)o[c]=n[c](o[c]);else o=n(o);if(F[r]){if(i=F[r],e(i)){for(c=0,l=i.length;l>c;c++)if(!i[c](o[c])){s=!1;break}}else i(o)||(s=!1);s&&(t[r]=o)}return s}function L(t,r,o){var n,i=!1;return null!=o&&(t.opacity=$.opacity(o),i=!0),r&&(e(r)?(3<r.length&&(o=r[3],r=r.slice(0,3)),C(t,"rgb",r)&&(null!=o&&(t.opacity=$.opacity(o)),N(t,"rgb"),i=!0)):r.substr&&("rgba"===r.slice(0,4)?(n=m(r,!0),t.rgb=[n[0],n[1],n[2]],t.opacity=$.opacity(n[3]),N(t,"rgb"),i=!0):"rgb"===r.slice(0,3)?(n=m(r),t.rgb=[n[0],n[1],n[2]],N(t,"rgb"),i=!0):"hsla"===r.slice(0,4)?(n=g(r,!0),t.hsb=[n[0],n[1],n[2]],t.opacity=$.opacity(n[3]),N(t,"hsb"),i=!0):"hsl"===r.slice(0,3)?(n=g(r),t.hsb=[n[0],n[1],n[2]],N(t,"hsb"),i=!0):C(t,"hex",v(r))&&(N(t,"hex"),i=!0))),i}function S(e,t){return"rgba"===t?"rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+","+e.opacity+")":"rgb"===t?"rgb("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+")":"hsla"===t?"hsla("+e.hsb[0]+","+e.hsb[1]+"%,"+e.hsb[2]+"%,"+e.opacity+")":"hsl"===t?"hsl("+e.hsb[0]+","+e.hsb[1]+"%,"+e.hsb[2]+"%)":"#"+e.hex}function N(e,t){"hsb"===t?(e.rgb=b(e.hsb),e.hex=h(e.rgb)):"rgb"===t?(e.hsb=f(e.rgb),e.hex=h(e.rgb)):"hex"===t&&(e.rgb=p(e.hex),e.hsb=f(e.rgb))}function A(e,t,r){var o=e.rgb,n=e.hsb,i=e.opacity,c=e.hex,l="rgba("+o[0]+","+o[1]+","+o[2]+","+i+")",s="rgb("+b([n[0],100,100]).join(",")+")";t.hsb[0].value=n[0],t.hsb[1].value=n[1],t.hsb[2].value=n[2],t.rgb[0].value=o[0],t.rgb[1].value=o[1],t.rgb[2].value=o[2],t.hex.value=c,t.hue.style.backgroundColor=s,t.indic_sb.style.top=150*(100-n[2])/100+"px",t.indic_sb.style.left=150*n[1]/100+"px",t.indic_hue.style.top=148-148*n[0]/360+"px",t.color_new.style.backgroundColor=l,r&&(t.color_current.style.backgroundColor=l)}function O(e,t,r,o){var n=e===t;e&&(e.selectedColor=r,e.style.backgroundColor=r,n&&(t.value=r),o&&u(e,o),n&&"change"!==o&&u(t,"change")),t&&!n&&(t.value=r,u(t,"change"))}function H(){}function P(e){return t({input:null,selector:null,format:"rgba",color:"ff0000",opacity:1,changeEvent:"colorchange",bindEvent:"click",onSelect:H,onBeforeShow:H,onShow:H,onHide:H,livePreview:!0},e||{})}function j(e,t){var u,p,f,b,h,v,g,m,k,y,x,C,H,z,T,W,X,D,$,F=this,V=0,q=0,G=0,J=null,K=null,Q=null;if(!(F instanceof j))return new j(e,t);T=function(e){27===e.keyCode&&z(!0)},z=function Z(r){var o=!0===r?!0:r.target||r.srcElement;i(f,"colorpicker-visible")&&(!0===o||o!==e&&!n(f,o,f))&&(l(f,"colorpicker-visible"),a(document,"keyup",T),a(document,"mousedown",Z),t.onHide(F))},H=function(e){if(!i(f,"colorpicker-visible")){t.onBeforeShow(F);var r=e.target||e.srcElement,n=w(r),l=o(),a=n.top+n.height,u=n.left;a+176>l.t+l.h&&(a-=n.height+176),u+356>l.l+l.w&&(u-=356),f.style.left=u+"px",f.style.top=a+"px",c(f,"colorpicker-visible"),s(document,"keyup",T),s(document,"mousedown",z),t.onShow(F)}return!1},b=function(e){if(!V){var t=e.target||e.srcElement,r=t.parentNode,o=r.children[0],n=r[M]("data-field"),i=n.slice(0,3);Q={el:r,field:o,type:n,key:i,index:_(n.slice(-1)),max:"hsb.0"===n?360:"hsb"===i?100:255,val:_(o.value),y:e.pageY},c(r,"colorpicker_slider"),o.focus(),V=1,s(document,"mouseup",v),s(document,"mousemove",h)}},h=function(e){var r=Q.key,o=Q.index;return W[r][o]=B(0,Y(Q.max,_(Q.val+e.pageY-Q.y))),t.livePreview&&(N(W,r),A(W,X)),!1},v=function(){return a(document,"mouseup",v),a(document,"mousemove",h),N(W,Q.key),A(W,X),l(Q.el,"colorpicker_slider"),Q.field.focus(),V=0,Q=null,!1},g=function(e){if(!q){var t=e.target||e.srcElement;Q={y:w(t).top},q=1,s(document,"mouseup",k),s(document,"mousemove",m)}},m=function(e){return W.hsb[0]=I(360*(148-B(0,Y(148,e.pageY-Q.y)))/148),t.livePreview&&(N(W,"hsb"),A(W,X)),!1},k=function(){return a(document,"mouseup",k),a(document,"mousemove",m),N(W,"hsb"),A(W,X),q=0,Q=null,!1},y=function(e){if(!G){var t=e.target||e.srcElement;Q=w(t),G=1,s(document,"mouseup",C),s(document,"mousemove",x)}},x=function(e){return W.hsb[1]=I(100*B(0,Y(150,e.pageX-Q.left))/150),W.hsb[2]=I(100*(150-B(0,Y(150,e.pageY-Q.top)))/150),t.livePreview&&(N(W,"hsb"),A(W,X)),!1},C=function(){return a(document,"mouseup",C),a(document,"mousemove",x),N(W,"hsb"),A(W,X),G=0,Q=null,!1},F.dispose=function(){F.ui=null,i(f,"colorpicker-flat")||a(e,t.bindEvent,H),f.parentNode.removeChild(f)},F.setColor=function(e,t){L(W,e,t)&&A(W,X,!0)},F.getColor=function(e){return S(W,e||D)},F.value=function(e,t){return arguments.length?void(L(W,e,t)&&A(W,X,!0)):S(W,D)},t=P(t),D=e[M]("data-color-format")||t.format||"rgba",$=e[M]("data-color-change")||t.changeEvent,J=e[M]("data-color-selector")?r(e[M]("data-color-selector")):t.selector||(i(e,"colorpicker-selector")?e:null),K=e[M]("data-color-input")?r(e[M]("data-color-input")):t.input||("input"===(e.tagName||"").toLowerCase()?e:null),p=t.id||"colorpicker_ui_"+ ++R;var U=document.createElement("div");U.innerHTML=E(p),U.style.display="none",document.body.appendChild(U),f=r(p),W={opacity:1,hsb:[0,0,0],rgb:[0,0,0],hex:"000000"},X={hsb:[r(p+"_hsb_0"),r(p+"_hsb_1"),r(p+"_hsb_2")],rgb:[r(p+"_rgb_0"),r(p+"_rgb_1"),r(p+"_rgb_2")],hex:r(p+"_hex"),hue:r(p+"_satur_bright"),indic_hue:r(p+"_hue_indic"),indic_sb:r(p+"_satur_bright_indic"),color_new:r(p+"_new_color"),color_current:r(p+"_current_color")},X.indic_hue.style.top="0px",X.indic_sb.style.left="0px",X.indic_sb.style.top="0px",d("colorpicker_satur_bright","mousedown",y,f),d("colorpicker_hue","mousedown",g,f),d("colorpicker_increment","mousedown",b,f),d("colorpicker_save","click",function(){u=W.rgb.slice(),A(W,X,!0),z&&z(!0),O(J,K,S(W,D),$)},f),d("colorpicker_restore","click",function(){W.rgb=u.slice(),N(W,"rgb"),A(W,X)},f),F.ui=f,L(W,e[M]("data-color")||t.color,e[M]("data-opacity")||t.opacity),u=W.rgb.slice(),A(W,X,!0),i(e,"colorpicker-flat")?(c(f,"colorpicker-flat"),f.style.display="block",e.appendChild(f)):(document.body.appendChild(f),s(e,t.bindEvent,H),O(J,K,S(W,D))),document.body.removeChild(U),U=null,i(e,"colorpicker-light")&&c(f,"colorpicker-light"),i(e,"colorpicker-dark")&&c(f,"colorpicker-dark"),i(e,"colorpicker-transition-fade")&&c(f,"colorpicker-transition-fade"),i(e,"colorpicker-transition-slide")&&c(f,"colorpicker-transition-slide")}var z="hasOwnProperty",M="getAttribute",T=Object.prototype.toString,Y=Math.min,B=Math.max,I=Math.round,W=/^\s+|\s+$/g,X=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(W,"")},D=/\s*,\s*/g,R=0,$={opacity:y(0,1,k),hsb:[y(0,360,_),y(0,100,_),y(0,100,_)],rgb:[y(0,255,_),y(0,255,_),y(0,255,_)]},F={hex:x(/^[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i)};return j.VERSION="2.0.0",j});
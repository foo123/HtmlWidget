/**
* ColorPicker
* https://github.com/foo123/ColorPicker
* @version 2.1.1
*
* adapted from:
* http://www.eyecon.ro/colorpicker/
*      Color Picker by Stefan Petre www.eyecon.ro (MIT and GPL)
**/
!function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(function(e){return t()}):e.ColorPicker=t()}("undefined"!=typeof self?self:this,function(e){"use strict";var c=Object.prototype.hasOwnProperty,O="getAttribute",t=Object.prototype.toString,A=Math.min,j=Math.max,P=Math.round,o=/^\s+|\s+$/g,n=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(o,"")},r=/\s*,\s*/g,z=0;function a(e){return"[object Array]"===t.call(e)}function H(e){return document.getElementById(e)}function M(e,t){return e.classList?e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function Y(e,t){M(e,t)||(e.classList?e.classList.add(t):e.className=""===e.className?t:e.className+" "+t)}function B(e,t){e.classList?e.classList.remove(t):e.className=n((" "+e.className+" ").replace(" "+t+" "," "))}function I(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o,!1)}function W(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o,!1)}function i(e,t){var o;document.createEvent?((o=document.createEvent("HTMLEvents")).initEvent(t,!0,!1),e.dispatchEvent(o)):document.createEventObject&&(o=document.createEventObject(),e.fireEvent("on"+t,o))}function X(c,e,n,t){function o(e){for(var t=!1,o=e.target||e.srcElement;o&&!(t=M(o,c));)o=o.parentElement;t&&n.call(o,e)}return I(t||document,e,o),o}function l(e){var t=0,o=0,c=e[0],n=e[1],r=e[2],i=A(c,n,r),e=j(c,n,r),i=e-i,l=e,t=0!=(o=0!=e?255*i/e:0)?c===e?(n-r)/i:n===e?2+(r-c)/i:4+(c-n)/i:-1;return(t*=60)<0&&(t+=360),o*=100/255,l*=100/255,[P(t),P(o),P(l)]}function u(e){var t,o,c,n=P(e[0]),r=P(255*e[1]/100),i=P(255*e[2]/100);return 0===r?t=o=c=i:(i=n%60*((e=i)-(r=(255-r)*i/255))/60,360==n&&(n=0),n<60?(t=e,o=(c=r)+i):n<120?(c=r,t=(o=e)-i):n<180?(o=e,c=(t=r)+i):n<240?(t=r,o=(c=e)-i):n<300?(c=e,t=(o=r)+i):c=n<360?(o=r,(t=e)-i):o=t=0),[P(t),P(o),P(c)]}function s(e){e=[e[0].toString(16),e[1].toString(16),e[2].toString(16)];return 1===e[0].length&&(e[0]="0"+e[0]),1===e[1].length&&(e[1]="0"+e[1]),1===e[2].length&&(e[2]="0"+e[2]),e[0]+e[1]+e[2]}function d(e,t){e.substr&&(e=e.slice(t?5:4,-1).split(r).map(n));t=t?b.opacity(e[3]):null;return[b.hsb[0](e[0]),b.hsb[1](e[1]),b.hsb[2](e[2]),t]}function h(e,t){e.substr&&(e=e.slice(t?5:4,-1).split(r).map(n));t=t?b.opacity(e[3]):null;return[b.rgb[0](e[0]),b.rgb[1](e[1]),b.rgb[2](e[2]),t]}function R(e){return parseInt(e,10)||0}function p(t,o,c){return"function"==typeof c?function(e){return e=c(e),o<e?o:e<t?t:e}:function(e){return o<e?o:e<t?t:e}}function $(e){var t=e.getBoundingClientRect(),o=document.body,c=window,n=o.clientTop||0,r=o.clientLeft||0,i=c.pageYOffset||o.scrollTop,o=c.pageXOffset||o.scrollLeft;return{top:t.top+i-n,left:t.left+o-r,width:e.offsetWidth,height:e.offsetHeight}}var f,b={opacity:p(0,1,function(e){return parseFloat(e,10)||0}),hsb:[p(0,360,R),p(0,100,R),p(0,100,R)],rgb:[p(0,255,R),p(0,255,R),p(0,255,R)]},m={hex:(f=/^[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]$/i,function(e){return f.test(e)})};function v(e,t,o){var c,n,r,i,l=!0;if(b[t])if(a(c=b[t]))for(r=0,i=c.length;r<i;r++)o[r]=c[r](o[r]);else o=c(o);if(m[t]){if(a(n=m[t])){for(r=0,i=n.length;r<i;r++)if(!n[r](o[r])){l=!1;break}}else n(o)||(l=!1);l&&(e[t]=o)}return l}function F(e,t,o){var c,n=!1;return null!=o&&(e.opacity=b.opacity(o),n=!0),t&&(a(t)?(3<t.length&&(o=t[3],t=t.slice(0,3)),v(e,"rgb",t)&&(null!=o&&(e.opacity=b.opacity(o)),q(e,"rgb"),n=!0)):t.substr&&("rgba"===t.slice(0,4)?(c=h(t,!0),e.rgb=[c[0],c[1],c[2]],e.opacity=b.opacity(c[3]),q(e,"rgb"),n=!0):"rgb"===t.slice(0,3)?(c=h(t),e.rgb=[c[0],c[1],c[2]],q(e,"rgb"),n=!0):"hsla"===t.slice(0,4)?(c=d(t,!0),e.hsb=[c[0],c[1],c[2]],e.opacity=b.opacity(c[3]),q(e,"hsb"),n=!0):"hsl"===t.slice(0,3)?(c=d(t),e.hsb=[c[0],c[1],c[2]],q(e,"hsb"),n=!0):v(e,"hex",(0<(t=6-(c="#"===(c=t).charAt(0)?c.slice(1):c).length)&&(c=3==t?c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2):new Array(1+t).join("0")+c),c))&&(q(e,"hex"),n=!0))),n}function V(e,t){return"rgba"===t?"rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+","+e.opacity+")":"rgb"===t?"rgb("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+")":"hsla"===t?"hsla("+e.hsb[0]+","+e.hsb[1]+"%,"+e.hsb[2]+"%,"+e.opacity+")":"hsl"===t?"hsl("+e.hsb[0]+","+e.hsb[1]+"%,"+e.hsb[2]+"%)":"#"+e.hex}function q(e,t){"hsb"===t?(e.rgb=u(e.hsb),e.hex=s(e.rgb)):"rgb"===t?(e.hsb=l(e.rgb),e.hex=s(e.rgb)):"hex"===t&&(e.rgb=(t=e.hex,[(t=parseInt(t,16))>>16&255,t>>8&255,255&t]),e.hsb=l(e.rgb))}function G(e,t,o){var c=e.rgb,n=e.hsb,r=e.opacity,i=e.hex,e="rgba("+c[0]+","+c[1]+","+c[2]+","+r+")",r="rgb("+u([n[0],100,100]).join(",")+")";t.hsb[0].value=n[0],t.hsb[1].value=n[1],t.hsb[2].value=n[2],t.rgb[0].value=c[0],t.rgb[1].value=c[1],t.rgb[2].value=c[2],t.hex.value=i,t.hue.style.backgroundColor=r,t.indic_sb.style.top=150*(100-n[2])/100+"px",t.indic_sb.style.left=150*n[1]/100+"px",t.indic_hue.style.top=148-148*n[0]/360+"px",t.color_new.style.backgroundColor=e,o&&(t.color_current.style.backgroundColor=e)}function J(e,t,o,c){var n=e===t;e&&(e.selectedColor=o,e.style.backgroundColor=o,n&&(t.value=o),c&&i(e,c),n&&"change"!==c&&i(t,"change")),t&&!n&&(t.value=o,i(t,"change"))}function g(){}function K(e){return function(e,t){for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}({input:null,selector:null,format:"rgba",color:"ffffff",opacity:1,changeEvent:"colorchange",bindEvent:"click",onSelect:g,onBeforeShow:g,onShow:g,onHide:g,livePreview:!0},e||{})}function Q(o,n){var e,t,r,c,i,l,a,u,s,d,h,p,f,b,m,v,g,_,k,y,x,w=this,E=0,T=0,C=0,L=null,N=[];if(!(w instanceof Q))return new Q(o,n);m=function(e){if(27===e.keyCode)return b(!0)},b=function e(t){t=!0===t||(t.target||t.srcElement);M(r,"colorpicker-visible")&&(!0===t||t!==o&&!function(e,t,o){if(e===t)return 1;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return 16&e.compareDocumentPosition(t);for(var c=t.parentNode;c&&c!==o;){if(c===e)return 1;c=c.parentNode}}(r,t,r))&&(B(r,"colorpicker-visible"),W(document,"keyup",m),W(document,"mousedown",e),W(document,"touchstart",e),n.onHide(w))},f=function(e){var t,o,c;return M(r,"colorpicker-visible")||(n.onBeforeShow(w),t=$(e.target||e.srcElement),c="CSS1Compat"==document.compatMode,o={l:window.pageXOffset||(c?document.documentElement:document.body).scrollLeft||0,t:window.pageYOffset||(c?document.documentElement:document.body).scrollTop||0,w:window.innerWidth||(c?document.documentElement:document.body).clientWidth,h:window.innerHeight||(c?document.documentElement:document.body).clientHeight},e=t.top+t.height,c=t.left,o.t+o.h<e+176&&(e-=t.height+176),e<o.t&&(e=o.t),o.l+o.w<c+356&&(c-=356),c<o.l&&(c=o.l),r.style.left=c+"px",r.style.top=e+"px",Y(r,"colorpicker-visible"),I(document,"keyup",m),I(document,"mousedown",b),I(document,"touchstart",b),n.onShow(w)),!1},c=function(e){var t,o,c,n;E||(e.preventDefault(),o=(t=(e.target||e.srcElement).parentNode).children[0],n=(c=t[O]("data-field")).slice(0,3),L={el:t,field:o,type:c,key:n,index:R(c.slice(-1)),max:"hsb.0"===c?360:"hsb"===n?100:255,val:R(o.value),y:(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageY},Y(t,"colorpicker_slider"),o.focus(),E=1,I(document,"mouseup",l),I(document,"mousemove",i),I(document,"touchend",l),I(document,"touchcancel",l),I(document,"touchmove",i))},i=function(e){e.preventDefault();var t=L.key,o=L.index,e=(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageY;return v[t][o]=j(0,A(L.max,R(L.val+e-L.y))),n.livePreview&&(q(v,t),G(v,g)),!1},l=function(e){return e.preventDefault(),W(document,"mouseup",l),W(document,"mousemove",i),W(document,"touchend",l),W(document,"touchcancel",l),W(document,"touchmove",i),q(v,L.key),G(v,g),B(L.el,"colorpicker_slider"),L.field.focus(),E=0,L=null,!1},a=function(e){T||(e.preventDefault(),e=e.target||e.srcElement,L={y:$(e).top},T=1,I(document,"mouseup",s),I(document,"mousemove",u),I(document,"touchend",s),I(document,"touchcancel",s),I(document,"touchmove",u))},u=function(e){e.preventDefault();e=(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageY;return v.hsb[0]=P(360*(148-j(0,A(148,e-L.y)))/148),n.livePreview&&(q(v,"hsb"),G(v,g)),!1},s=function(e){return e.preventDefault(),W(document,"mouseup",s),W(document,"mousemove",u),W(document,"touchend",s),W(document,"touchcancel",s),W(document,"touchmove",u),q(v,"hsb"),G(v,g),T=0,L=null,!1},d=function(e){C||(e.preventDefault(),e=e.target||e.srcElement,L=$(e),C=1,I(document,"mouseup",p),I(document,"mousemove",h),I(document,"touchend",p),I(document,"touchcancel",p),I(document,"touchmove",h))},h=function(e){e.preventDefault();var t=(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX,e=(e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageY;return v.hsb[1]=P(100*j(0,A(150,t-L.left))/150),v.hsb[2]=P(100*(150-j(0,A(150,e-L.top)))/150),n.livePreview&&(q(v,"hsb"),G(v,g)),!1},p=function(e){return e.preventDefault(),W(document,"mouseup",p),W(document,"mousemove",h),W(document,"touchend",p),W(document,"touchcancel",p),W(document,"touchmove",h),q(v,"hsb"),G(v,g),C=0,L=null,!1},w.dispose=function(){w.ui=null,M(r,"colorpicker-flat")||W(o,n.bindEvent,f);for(var e=0;e<N.length;e++)W(N[e].el,N[e].event,N[e].handler);N=[],r.parentNode&&r.parentNode.removeChild(r)},w.setColor=function(e,t){F(v,e,t)&&G(v,g,!0)},w.getColor=function(e){return V(v,e||_)},w.value=function(e,t){if(!arguments.length)return V(v,_);F(v,e,t)&&G(v,g,!0)},n=K(n),_=o[O]("data-color-format")||n.format||"rgba",k=o[O]("data-color-change")||n.changeEvent,y=o[O]("data-color-selector")?H(o[O]("data-color-selector")):n.selector||(M(o,"colorpicker-selector")?o:null),x=o[O]("data-color-input")?H(o[O]("data-color-input")):n.input||("input"===(o.tagName||"").toLowerCase()?o:null),t=n.id||"colorpicker_ui_"+ ++z;var S,D=document.createElement("div");D.innerHTML='<div id="'+(S=t)+'" class="colorpicker">    <div id="'+S+'_satur_bright" class="colorpicker_satur_bright"><div id="'+S+'_satur_bright_indic"></div></div>    <div id="'+S+'_hue" class="colorpicker_hue"><div id="'+S+'_hue_indic"></div></div>    <div class="colorpicker_new_color colorpicker_transparent">    <button id="'+S+'_new_color" class="colorpicker_color colorpicker_save"></button>    </div>    <div class="colorpicker_current_color colorpicker_transparent">    <button id="'+S+'_current_color" class="colorpicker_color colorpicker_restore"></button>    </div>    <div class="colorpicker_field" data-field="hex">    <input id="'+S+'_hex" type="text" maxlength="6" size="6" value=""/>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.0">    <input id="'+S+'_rgb_0" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.1">    <input id="'+S+'_rgb_1" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="rgb.2">    <input id="'+S+'_rgb_2" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.0">    <input id="'+S+'_hsb_0" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.1">    <input id="'+S+'_hsb_1" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <div class="colorpicker_field" data-field="hsb.2">    <input id="'+S+'_hsb_2" type="text" maxlength="3" size="3" value=""/><span class="colorpicker_increment"></span>    <div class="colorpicker_field_back"></div>    </div>    <button id="'+S+'_submit" class="colorpicker_submit colorpicker_save"></button>    </div>',D.style.display="none",document.body.appendChild(D),r=H(t),v={opacity:1,hsb:[0,0,0],rgb:[0,0,0],hex:"000000"},(g={hsb:[H(t+"_hsb_0"),H(t+"_hsb_1"),H(t+"_hsb_2")],rgb:[H(t+"_rgb_0"),H(t+"_rgb_1"),H(t+"_rgb_2")],hex:H(t+"_hex"),hue:H(t+"_satur_bright"),indic_hue:H(t+"_hue_indic"),indic_sb:H(t+"_satur_bright_indic"),color_new:H(t+"_new_color"),color_current:H(t+"_current_color")}).indic_hue.style.top="0px",g.indic_sb.style.left="0px",g.indic_sb.style.top="0px",N.push({el:r,event:"touchstart",handler:X("colorpicker_satur_bright","touchstart",d,r)}),N.push({el:r,event:"touchstart",handler:X("colorpicker_hue","touchstart",a,r)}),N.push({el:r,event:"touchstart",handler:X("colorpicker_increment","touchstart",c,r)}),N.push({el:r,event:"mousedown",handler:X("colorpicker_satur_bright","mousedown",d,r)}),N.push({el:r,event:"mousedown",handler:X("colorpicker_hue","mousedown",a,r)}),N.push({el:r,event:"mousedown",handler:X("colorpicker_increment","mousedown",c,r)}),N.push({el:r,event:"click",handler:X("colorpicker_save","click",function(){e=v.rgb.slice(),G(v,g,!0),b&&b(!0),J(y,x,V(v,_),k)},r)}),N.push({el:r,event:"click",handler:X("colorpicker_restore","click",function(){v.rgb=e.slice(),q(v,"rgb"),G(v,g)},r)}),w.ui=r,F(v,o[O]("data-color")||n.color,o[O]("data-opacity")||n.opacity),e=v.rgb.slice(),G(v,g,!0),M(o,"colorpicker-flat")?(Y(r,"colorpicker-flat"),r.style.display="block",o.appendChild(r)):(document.body.appendChild(r),I(o,n.bindEvent,f),J(y,x,V(v,_))),document.body.removeChild(D),D=null,M(o,"colorpicker-light")&&Y(r,"colorpicker-light"),M(o,"colorpicker-dark")&&Y(r,"colorpicker-dark"),M(o,"colorpicker-transition-fade")&&Y(r,"colorpicker-transition-fade"),M(o,"colorpicker-transition-slide")&&Y(r,"colorpicker-transition-slide")}return Q.VERSION="2.1.1",Q});
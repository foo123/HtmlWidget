/**
*
*   PrismGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";var r;"object"==typeof module&&module.exports?module.exports=n.call(e,{}):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e,{}))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(){return n.call(e,{})}):t in e||(e[t]=r=n.call(e,{}))&&"function"==typeof define&&define.amd&&define(function(){return r})}(this,"PrismGrammar",function(e){"use strict";function t(e){var t=0;return null===e?t=$n:!0===e||!1===e||e instanceof Boolean?t=vn:nn===e?t=kn:(t=Pn[an.call(e)]||hn,t=yn===t||e instanceof Number?isNaN(e)?bn:isFinite(e)?yn:dn:xn===t||e instanceof String?1===e.length?wn:xn:On===t||e instanceof Array?On:En===t||e instanceof RegExp?En:Ln===t||e instanceof Date?Ln:qn===t||e instanceof Function?qn:Sn===t?Sn:hn),t}function n(e,t,n,r){var o,s,l,i,a,u,p=e.length;if(arguments.length<4&&(r=p-1),0>r&&(r+=p),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,i=15&l,a=1&i,u=new Array(l),a&&(u[0]=t(e[n],n,n,r)),o=a;i>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=i;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function r(e,t,n,r,o){var s,l,i,a,u,p=e.length,c=n;if(arguments.length<5&&(o=p-1),0>o&&(o+=p),arguments.length<4&&(r=0),r>o)return c;if(r===o)return t(c,e[r],r);for(i=o-r+1,a=15&i,u=1&a,u&&(c=t(c,e[r],r)),s=u;a>s;s+=2)l=r+s,c=t(t(c,e[l],l),e[l+1],l+1);for(s=a;i>s;s+=16)l=r+s,c=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(c,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return c}function o(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,i=15&l,a=1&i;for(a&&e(t,r,t,n),o=a;i>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=i;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function s(e,n){var r,o,l,i,a=t(e),u=0;if(yn===t(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,Sn===a){o={};for(l in e)e[on](l)&&e[sn](l)&&(r=t(e[l]),o[l]=Sn===r?n?s(e[l],u>0?u-1:n):e[l]:On===r?n?s(e[l],u>0?u-1:n):e[l].slice():Ln===r?new Date(e[l]):xn&r?e[l].slice():yn&r?0+e[l]:e[l])}else if(On===a)for(i=e.length,o=new Array(i),l=0;i>l;l++)r=t(e[l]),o[l]=Sn===r?n?s(e[l],u>0?u-1:n):e[l]:On===r?n?s(e[l],u>0?u-1:n):e[l].slice():Ln===r?new Date(e[l]):xn&r?e[l].slice():yn&r?0+e[l]:e[l];else o=Ln===a?new Date(e):xn&a?e.slice():yn&a?0+e:e;return o}function l(){var e,n,r,o,i,a,u,p,c,f,m=arguments,g=m.length;if(1>g)return null;for(n=s(m[0]),r=1;g>r;r++)if(e=m[r])for(o in e)if(e[on](o)&&e[sn](o))if(n[on](o)&&n[sn](o)){if(c=t(n[o]),f=t(e[o]),Sn===c&&Sn===f)n[o]=l(n[o],e[o]);else if(On===c&&On===f){if(u=n[o],p=e[o],a=p.length,!a)continue;if(u.length)for(i=0;a>i;i++)0>u.indexOf(p[i])&&u.push(p[i]);else n[o]=p.slice()}}else n[o]=s(e[o]);return n}function i(e,n){return n||On!==t(e)?[e]:e}function a(e,n){return e=i(e),(n||On!==t(e[0]))&&(e=[e]),e}function u(e,n){return xn&t(n)&&xn&t(e)&&n.length&&n.length<=e.length&&n===e.substr(0,n.length)}function p(e,t,n){return n?e[t]=nn:delete e[t],e}function c(e){return(e||"id_")+ ++An}function f(e){return(e||"uuid")+"_"+ ++An+"_"+(new Date).getTime()}function m(){var e,n,r,o,s,l,i=arguments,a=i.length;for(e=i[0]||{},s=1;a>s;s++)if(n=i[s],Sn===t(n))for(o in n)n[on](o)&&n[sn](o)&&(r=n[o],l=t(r),e[o]=yn&l?0+r:Ln&l?new Date(r):Rn&l?r.slice():r);return e}function g(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[on](o)||(t[o]=function(){}),n=t[o],delete t[o],n[rn]=m(un(e[rn]),t),n[rn][o]=n,n}function h(e){return"&"===e?"&amp;":"<"===e?"&lt;":">"===e?"&gt;":'"'===e?"&quot;":"&apos;"}function k(e){return"&#"+e.charCodeAt(0)+";"}function $(e,t){return e.replace(Gn,t?h:k)}function y(e){return e.replace(Cn,"\\$1")}function d(e,t){return new RegExp(e,t||"")}function b(e,t,n,r){var o,s,l,i,a=e.pos,u=e.length,p="",c=!!n;if(c){for(r=!!r,s=!1,i=0;u>a&&(o=e[mn](a++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&i++,(!l||2&i)&&(p+=o,i=0)):p+=o;2&i&&(p+=n)}else for(;u>a&&(o=e[mn](a++),t!==o);)p+=o;return e.pos=a,p}function v(e,n,r,o){var s,l,i,a,u,p=!0===r?0:1,c=o?"\\":"$",f=o?92:36;for(xn&t(n)&&(o&&(n=y(n)),n=[n,n,n],p=0),l=e.length,u="",s=0;l>s;)i=e[mn](s),l>s+1&&c===i?(a=e.charCodeAt(s+1),f===a?(u+=c,s+=2):a>=48&&57>=a?(u+=n[p+a-48]||"",s+=2):(u+=i,s+=1)):(u+=i,s+=1);return u}function x(e,n,r,o){if(!e||(yn|En)&t(e))return e;var s,l=n?n.length||0:0,i="";if(xn&t(o)?i=o:o&&(i=Wn),l&&n===e.substr(0,l)){var a,u,p,s,c,f=e.substr(l),m=f[mn](0),g="";for(s=f.length;s--&&(c=f[mn](s),m!==c);)"i"===c.toLowerCase()&&(g="i");return a=f.substring(1,s),u="^("+a+")",r[u]||(p=d(u,g),r[u]=p),r[u]}return i?(u="^("+y(e)+")"+i,r[u]||(p=d(u,g),r[u]=p),r[u]):e}function w(e,r,o){var s,l="";return xn&t(r)?l=r:r&&(l=Wn),s=n(e.sort(Fn),y).join("|"),[d("^("+s+")"+l,o?"i":""),1]}function _(e,n,r,o){var s=t(n);if(yn===s)return n;if(o[e])return o[e];r=r||0;var l,i=0;return n&&n.isCharList&&(i=1,p(n,"isCharList")),l=$n===s?new F(xt,e,n,$n,r):wn===s?new F(xt,e,n,wn,r):zn&s?new F(xt,e,n,En,r):xn&s?new F(xt,e,n,i?_n:xn,r):n,o[e]=l}function O(e,n,r,o,s,l,a,p){if(a[e])return a[e];var c,f,m,g,h,k,$,y=0,d=0,b=1,v=xn&t(o)?!0:!!o;if(c=i(n),m=c.length,1===m)$=_(e,x(c[0],r,l,o),0,a);else if(m>1){for(g=(m>>>1)+1,f=0;g>=f;f++)h=t(c[f]),k=t(c[m-1-f]),(wn!==h||wn!==k)&&(b=0),On&h||On&k?y=1:(En&h||En&k||u(c[f],r)||u(c[m-1-f],r))&&(d=1);if(b&&!v)c=c.slice().join(""),c.isCharList=1,$=_(e,c,0,a);else if(!v||y||d)if(y||d){for(f=0;m>f;f++)c[f]=On&t(c[f])?O(e+"_"+f,c[f],r,o,s,l,a):_(e+"_"+f,x(c[f],r,l),f,a);$=m>1?new F(wt,e,c):c[0]}else{for(p&&(p.keywords=i(n).slice()),c=c.sort(Fn),f=0;m>f;f++)c[f]=_(e+"_"+f,x(c[f],r,l),f,a);$=m>1?new F(wt,e,c):c[0]}else p&&(p.keywords=i(n).slice()),$=_(e,w(c,o,s),0,a)}return a[e]=$}function S(e,n,r,s,l){if(l[e])return l[e];var i=a(n),p=[],c=[];return o(function(n){var o,a,f,m;o=_(e+"_0_"+n,x(i[n][0],r,s),n,l),i[n].length>1?(f=u(i[n][1],r),m=f&&Hn.test(i[n][1]),En!==o.ptype||xn!==t(i[n][1])||!m&&f?a=_(e+"_1_"+n,x(i[n][1],r,s),n,l):m?(a=new String(i[n][1]),a.regex_pattern=r):a=i[n][1]):a=o,p.push(o),c.push(a)},0,i.length-1),l[e]=new F(_t,e,[p,c])}function q(e,t){var n=a(e.tokens.slice());o(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function E(e,t,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),i=n(t,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(i),i}function L(e){e.Lex||(e.Lex={}),e.Syntax||(e.Syntax={});var n,r,o,s,i,a,u,c,f,m,g,h=e.Lex,k=e.Syntax,$=[h,k],y=$.length;for(g=0;y>g;){m=$[g++];for(o in m)m[on](o)&&(n=o.split(":"),r=n[1]&&Nn(n[1]).length?Nn(n[1]):null,n=Nn(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],p(m,o),r&&(r=r[fn](),s=m[n],i=t(s),Sn===i?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=s):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=s):"action"===r&&xn===i?m[n][s]=!0:m[n].tokens=s))),h===m&&(Mn&t(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(c=s.type=s.type[fn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=h;for(n in m)if(m[on](n))for(s=m[n];s.extend;)a=s.extend,p(s,"extend"),u=h[a],u&&(Mn&t(u)&&(u=h[a]={type:"simple",tokens:u}),s=l(u,s));m=h;for(n in m)m[on](n)&&(s=m[n],s.type?(c=s.type=s.type[fn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],p(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],p(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],p(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,p(s,"comment")):s.block?(s.type="block",s.tokens=s.block,p(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,p(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"]],p(s,"error")):s[on]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"]],p(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"]],p(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"]],p(s,"outdent")):s.unique?(s.type="action",s.action=["unique",xn&t(s.unique)?["_DEFAULT_",s.unique]:s.unique,!!s["in-context"]],p(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"]],p(s,"push")):s[on]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"]],p(s,"pop")):s.type="simple","action"===s.type?s.ci=!(!s.caseInsesitive&&!s.ci):"block"===s.type||"comment"===s.type?(s.multiline=s[on]("multiline")?!!s.multiline:!0,xn&t(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&xn&t(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=k;for(n in m)m[on](n)&&(s=m[n],Sn!==t(s)||s.type?s.type&&(c=s.type=s.type[fn](),"group"===c&&s.match?(i=t(s.match),xn&i?(f=s.match[fn](),"alternation"===f||"either"===f?(s.type="alternation",p(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",p(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",p(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",p(s,"match")):"oneormore"===f?(s.type="oneOrMore",p(s,"match")):(s.type="sequence",p(s,"match"))):On&i&&(s.type="repeat",s.repeat=s.match,p(s,"match"))):"either"===c?s.type="alternation":"all"===c?s.type="sequence":"lookahead"===c?s.type="positiveLookahead":"grammar"===c&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?p(s,"n-gram"):p(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?p(s,"all"):p(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?p(s,"either"):p(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,p(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,p(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,p(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?p(s,"lookahead"):p(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,p(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?p(s,"subgrammar"):p(s,"grammar")));return e}function j(e,n,r){if(r=r||{},n=n||[],!e||!e.length)return n;var o,s,l,i,a,u,p;for(o=0,s=e.length;s>o;o++)if(a=e[o])if(zt===a.type)if(a.autocompletions)for(l=0,i=a.autocompletions.length;i>l;l++)p=a.autocompletions[l],r[on]("w_"+p.word)||(n.push(p),r["w_"+p.word]=1);else xn===a.token.ptype&&xn&t(a.token.pattern)&&a.token.pattern.length>1&&(r[on]("w_"+a.token.pattern)||(n.push({word:""+a.token.pattern,meta:a.name,ci:!!a.ci}),r["w_"+a.token.pattern]=1));else if(Dt===a.type)j(a.token,n,r);else if(Ut&a.type){l=0,i=a.token.length;do j([u=a.token[l++]],n,r);while(i>l&&(Ft&u.type&&1>u.min||Ot===u.type))}else Ft&a.type&&j([a.token[0]],n,r);return n}function R(e,n,r,o){for(var s;xn&t(s=n[e]||r[e]);)e=s;return o?e:n[e]||r[e]||e}function z(e,t){return e.length>1?o(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Un.test(o)&&Un.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function M(e,r,o){var l,i,a,u,p,c,f,m,g,h,k,$,v,x,w,_=!1;if(w=e.modifier?e.modifier:null,m=new String(Nn(e)),m.pos=0,1===m.length)$=""+e,r[$]||o[$]||(r[$]={type:"simple",tokens:e}),e=$;else{for(l=[],i=[],a="",v=[];m.pos<m.length;)if(g=m[mn](m.pos++),Bn.test(g))if(a.length&&(_?(i.length&&(k=i[i.length-1],$=k+"."+a,c=r[$]||o[$],c||(f=R(k,r,o),o[$]=xn&t(f)?new String(f):s(f),o[$].modifier=a),i[i.length-1]=$),_=!1):"0"===a?(r[en]||(r[en]={type:"simple",tokens:0}),i.push(en)):"^^"===a?(r[Vt]||(r[Vt]={type:"simple",tokens:St}),i.push(Vt)):"^^1"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:qt}),i.push(Jt)):"^"===a?(r[Qt]||(r[Qt]={type:"simple",tokens:Lt}),i.push(Qt)):"$"===a?(r[Xt]||(r[Xt]={type:"simple",tokens:Et}),i.push(Xt)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a)),a=""),"."===g)i.length&&m.pos<m.length&&!Bn.test(m[mn](m.pos))?_=!0:a+=g;else if('"'===g||"'"===g)u=b(m,g,"\\",!0),u.length?($=""+u,r[$]||(r[$]={type:"simple",tokens:u}),i.push($)):(r[tn]||(r[tn]={type:"simple",tokens:""}),i.push(tn));else if("["===g)u=b(m,"]","\\",!0),$="["+u+"]",r[$]||(r[$]={type:"simple",tokens:d("^(["+("^"===u[mn](0)?"^"+y(u.slice(1)):y(u))+"])")}),i.push($);else{if("]"===g){a+=g;continue}if("/"===g)u=b(m,g,"\\",!1),h="",u.length&&(m.pos<m.length&&"i"===m[mn](m.pos)&&(m.pos++,h="i"),$="/"+u+"/"+h,r[$]||(r[$]={type:"simple",tokens:d("^("+u+")",h)}),i.push($));else if("*"===g||"+"===g||"?"===g)i.length?(k=i[i.length-1],$=""+k+g,o[$]||(o[$]={type:"*"===g?"zeroOrMore":"+"===g?"oneOrMore":"zeroOrOne",tokens:[k]}),i[i.length-1]=$):a+=g;else if("{"===g)i.length?(p=b(m,"}",!1),p=n(p.split(","),Nn),p[0]=p[0].length?parseInt(p[0],10)||0:0,0>p[0]&&(p[0]=0),2>p.length?p.push(p[0]):p[1]=p[1].length?parseInt(p[1],10)||gn:gn,0>p[1]&&(p[1]=0),k=i[i.length-1],$=""+k+["{",p[0],",",isFinite(p[1])?p[1]:"","}"].join(""),o[$]||(o[$]={type:"repeat",repeat:[p[0],p[1]],tokens:[k]}),i[i.length-1]=$):a+=g;else{if("}"===g){a+=g;continue}"&"===g||"!"===g?i.length?(k=i[i.length-1],$=""+k+g,o[$]||(o[$]={type:"!"===g?"negativeLookahead":"positiveLookahead",tokens:[k]}),i[i.length-1]=$):a+=g:"|"===g?(_=!1,i=z(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length?l.push(i[0]):a+=g,i=[]):"("===g?(v.push([i,l,a]),i=[],l=[],a=""):")"===g&&(i=z(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length&&l.push(i[0]),i=[],l=z(l,1),l.length>1?($=""+l.join(" | "),o[$]||(o[$]={type:"alternation",tokens:l})):l.length&&($=l[0]),l=[],x=v.pop(),i=x[0],l=x[1],a=x[2],k=$,$="("+k+")",o[$]||(o[$]=s(R(k,r,o))),i.push($))}}else a+=g;a.length&&(_?(i.length&&(k=i[i.length-1],$=k+"."+a,c=r[$]||o[$],c||(f=R(k,r,o),o[$]=xn&t(f)?new String(f):s(f),o[$].modifier=a),i[i.length-1]=$),_=!1):"0"===a?(r[en]||(r[en]={type:"simple",tokens:0}),i.push(en)):"^^"===a?(r[Vt]||(r[Vt]={type:"simple",tokens:St}),i.push(Vt)):"^^1"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:qt}),i.push(Jt)):"^"===a?(r[Qt]||(r[Qt]={type:"simple",tokens:Lt}),i.push(Qt)):"$"===a?(r[Xt]||(r[Xt]={type:"simple",tokens:Et}),i.push(Xt)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a))),a="",i=z(i),i.length>1?($=""+i.join(" "),o[$]||(o[$]={type:"sequence",tokens:i}),l.push($)):i.length&&l.push(i[0]),i=[],l=z(l,1),l.length>1?($=""+l.join(" | "),o[$]||(o[$]={type:"alternation",tokens:l}),e=$):l.length&&(e=l[0]),l=[]}return w&&(r[e]||o[e])&&((r[e]||o[e]).modifier=w),e}function P(e,s,l,u,p,c,f,m,g,h,k){var $,y,d,b,v,x,w,_=null,L=null,j=null;if(St===e||qt===e||Lt===e||Et===e)return new T(e,St===e?Vt:qt===e?$T_FBNL$:Lt===e?Qt:Xt,e,L);if(!1===e||0===e)return new T(jt,en,0,L);if(""===e)return new T(Rt,tn,"",L);if(null===e)return new T(zt,Zt,$n,L,j);if(On&t(e)&&(d=e,e="NGRAM_"+d.join("_"),u[e]||(u[e]={type:"ngram",tokens:d})),e=""+e,m[e])return m[e];if(v=R(e,l,u),xn&t(v)&&(v=M(v,l,u),v=l[v]||u[v]||null),!v)return null;if($=v.type?Kt[v.type[fn]().replace(Tn,"")]||zt:zt,L=v.msg||null,j=v.modifier||null,y=v.tokens,zt&$){if(St===y||qt===y||Lt===y||Et===y||!1===y||0===y)return _=new T(y||jt,e,y||0,L),m[e]=_,_;if(""===y)return _=new T(Rt,e,"",L),m[e]=_,_;if(null===y)return _=new T(zt,e,$n,L,j),m[e]=_,_;if(!y)return null}if(Ot&$)v[on]("action")?"nop"===v.action[0]?v.action[0]=mt:"error"===v.action[0]?v.action[0]=gt:"context-start"===v.action[0]?v.action[0]=kt:"context-end"===v.action[0]?v.action[0]=$t:"push"===v.action[0]?v.action[0]=yt:"pop"===v.action[0]?v.action[0]=dt:"unique"===v.action[0]?v.action[0]=ht:"indent"===v.action[0]?v.action[0]=bt:"outdent"===v.action[0]&&(v.action[0]=vt):v[on]("nop")?v.action=[mt,v.nop,!!v["in-context"]]:v[on]("error")?v.action=[gt,v.error,!!v["in-context"]]:v[on]("context")?v.action=[v.context?kt:$t,v.context,!!v["in-context"]]:v[on]("context-start")?v.action=[kt,v["context-start"],!!v["in-context"]]:v[on]("context-end")?v.action=[$t,v["context-end"],!!v["in-context"]]:v[on]("push")?v.action=[yt,v.push,!!v["in-context"]]:v[on]("pop")?v.action=[dt,v.pop,!!v["in-context"]]:v[on]("unique")?v.action=[ht,xn&t(v.unique)?["_DEFAULT_",v.unique]:v.unique,!!v["in-context"]]:v[on]("indent")?v.action=[bt,v.indent,!!v["in-context"]]:v[on]("outdent")&&(v.action=[vt,v.outdent,!!v["in-context"]]),v.nop&&(v.action[0]=mt),_=new T(Ot,e,v.action.slice(),L,j),_.ci=!!v.caseInsensitive||v.ci,m[e]=_;else if(y=i(y),zt&$){w=v.autocomplete?E(v,Rn&t(v.autocomplete)?i(v.autocomplete):y,e,k):null;var z={};if(x="undefined"!=typeof v.combine?v.combine:On&t(v.tokens)?!0:!1,_=new T(zt,e,O(e,y.slice(),s,x,!(!v.caseInsensitive&&!v.ci),c,f,z),L,j,null,w),z.keywords&&(_.keywords=z.keywords.join("|")),m[e]=_,null!=v.except){var D,N,F=i(v.except),I=F.length,A=[];for(D=0;I>D;D++)F[D]&&(N=P(F[D],s,l,u,p,c,f,m,g,h,k),N&&A.push(N));A.length&&(_.except=A)}}else Mt&$?(Pt===$&&q(v,h),_=new T($,e,S(e,y.slice(),s,c,f),L),_.empty=v[on]("empty")?!!v.empty:!0,_.mline=v[on]("multiline")?!!v.multiline:!0,_.esc=v[on]("escape")?v.escape:!1,_.inter=!!p[e+".inside"],Pt===$&&v.interleave&&g.push(C(_)),j&&(_.modifier=j),m[e]=_):Yt&$&&(Ht===$?m[e]=new T(Ht,e,y,L,j):Wt===$?(b=a(y),_=n(b,function(t,n){return new T(Wt,e+"_NGRAM_"+n,null,L,j)}),m[e]=_,o(function(e){_[e].token=i(r(b[e],function(e,t){return e.concat(P(t,s,l,u,p,c,f,m,g,h,k))},[]))},0,b.length-1)):(Gt===$||Bt===$?_=new T($,e,null,L,j):Ft&$&&On&t(v.repeat)?(_=new T(Ft,e,null,L,j),_.min=v.repeat[0],_.max=v.repeat[1]):It===$?(_=new T(It,e,null,L,j),_.min=0,_.max=1):Tt===$?(_=new T(Tt,e,null,L,j),_.min=0,_.max=gn):At===$?(_=new T(At,e,null,L,j),_.min=1,_.max=gn):_=Dt===$?new T(Dt,e,null,L,j):new T(Nt,e,null,L,j),m[e]=_,_.token=i(r(y,function(e,t){return e.concat(P(t,s,l,u,p,c,f,m,g,h,k))},[]))));return m[e]}function D(e){var n={};return e.Lex=e.Lex||{},e.Syntax=e.Syntax||{},e=L(e),e.Parser&&e.Parser.length&&o(function r(s,l){var i,a,u,p=l[s];n[p]||(On&t(p)&&(i=p,p="NGRAM_"+i.join("_"),e.Syntax[p]||(e.Syntax[p]={type:"ngram",tokens:i})),a=R(p,e.Lex,e.Syntax),xn&t(a)&&(a=M(a,e.Lex,e.Syntax),a=e.Lex[a]||e.Syntax[a]||null),a&&(n[p]=a,u=a.type?Kt[a.type[fn]().replace(Tn,"")]||zt:zt,Yt&u&&o(r,0,a.tokens.length-1,a.tokens)))},0,e.Parser.length-1,e.Parser),e}function N(e){var n,o,l,i,a,u,p,c,f,m,g,h,k,$;return e.__parsed?e:(n=e.RegExpID||null,l=e.Extra?s(e.Extra):{},i=e.Style?s(e.Style):{},a=null,u=null,p=e.Lex?s(e.Lex):{},c=e.Syntax?s(e.Syntax):{},f={},m={},g={},k={},$={},h=[],o=e.Parser?s(e.Parser):[],e=L({Style:i,Fold:a,Match:u,Lex:p,Syntax:c,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),e.$parser=r(o,function(e,r){var o=P(r,n,p,c,i,f,m,g,h,k,$)||null;return o&&(On&t(o)?e=e.concat(o):e.push(o)),e},[]),e.$interleaved=h&&h.length?h:null,e.$comments=k,e.$autocomplete=$&&$.autocomplete&&$.autocomplete.length?$.autocomplete:null,e.__parsed=1,e)}function F(e,n,r,o,s){var l,i,a=this;l=a.type=e,a.name=n,a.pattern=r,i=a.ptype=o||xn,a.key=s||0,wt===l?a.key=!1!==s:_t===l?a.pattern[0]=new F(wt,n+"_Start",r[0],null,!1):$n===i?a.pattern=null:En===i&&(a.pattern=En&t(r)?[r,0]:[r[0],r[1]||0])}function I(e,n,r,o){var s,l,i,a,u,p,c,f,m,g,h,k=e,$=k.type,y=k.pattern,d=k.key;if(_t===$){if(s=k.name,i=y[0],a=y[1],p=I(i,n,r,o))return u=a[p[0]],f=t(u),m=i.pattern[p[0]].ptype,En===m&&jn&f&&(u.regex_pattern?(c=v(u,p[1],0,1),u=new F(xt,s+"_End",x(c,u.regex_pattern,{}),En)):(c=yn&f?p[1][u+1]:v(u,p[1]),u=new F(xt,s+"_End",c,c.length>1?xn:wn))),u}else if(wt===$){for(g=0,h=y.length;h>g;g++)if(c=I(y[g],n,r,o))return d?[g,c[1]]:c}else{if(l=k.ptype,$n===l)return!1!==r&&n.end(),[d,""];if(En===l){if(c=n.slice(n.pos).match(y[0]),c&&0===c.index)return!1!==r&&n.mov(c[y[1]||0].length),[d,y[1]>0?c[y[1]]:c]}else if(_n===l){if(!0===o){c=-1;var b,w;for(h=y.length-1;h>=0;h--)b=n.indexOf(y[mn](h),n.pos),b>-1&&(-1===c||c>b)&&(c=b,w=y[mn](h));if(c>-1)return!1!==r&&(n.pos=c+1),[d,w]}else if(c=n[mn](n.pos)||null,c&&-1<y.indexOf(c))return!1!==r&&n.mov(1),[d,c]}else if(wn===l){if(!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+1),[d,y]}else if(c=n[mn](n.pos)||null,y===c)return!1!==r&&n.mov(1),[d,c]}else if(xn===l)if(h=y.length,!0===o){if(c=n.indexOf(y,n.pos),c>-1)return!1!==r&&(n.pos=c+h),[d,y]}else if(y===n.substr(n.pos,h))return!1!==r&&n.mov(h),[d,y]}return!1}function T(e,t,n,r,o,s,l,i){var a=this;a.type=e,a.name=t,a.token=n,a.modifier=o||null,a.except=s||null,a.autocompletions=l||null,a.keywords=i||null,a.pos=null,a.msg=r||null,a.$msg=null,a.status=0,a.empty=!1,a.ci=!1,a.mline=!0,a.esc=!1,a.inter=!1,a.found=0,a.min=0,a.max=1,a.i0=0,a.$id=null}function A(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function C(e,t,n,r){var o=new T(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=at),n&&(o.modifier=n),r&&(o.$id=r),o}function G(e){var t=e.name;return e.$msg?e.$msg:e.status&at?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function B(e,t,n,r,o,s,l){e.status&lt&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||G(s)])}function W(e,t,n){return t<e.length?e.splice(t,0,n):e.push(n),e}function H(e,t,n,r){var o,s,l,i,a=e.stack,u=0,p=1/0,c=-1;if(s=t.pos,t.spc(),l=t.pos,o=a.length,t.pos<t.length){for(;o>u&&(i=a[o-u-1],i.$id===r.$id);){for(;!(U(i,t,e,n)||(t.pos=i.pos>t.pos?i.pos:t.pos+1,a.length=o,t.pos>=t.length)););a.length=o,t.pos<t.length&&p>t.pos?(p=t.pos,c=o-u):p===t.pos&&o-u>c&&(p=t.pos,c=o-u),t.pos=l,u++}p<t.length?(t.pos=p,a.length=c):t.end()}return l>=s&&t.pos===l}function U(e,t,n,r){if(!e)return!1;var o=e.type,s=Yt&o?J:Mt&o?V:Ot&o?Y:K;return s(e,t,n,r)}function Y(e,n,r,o){var s,l,i,a,u,p,c,f,m,g,h,k,$,y,d,b,x=e,w=x.token||null,_=x.ci,O=x.name,S=!(r.status&lt);if(x.status=0,x.$msg=null,S||!w||!o||!o.pos)return!0;if(b=!!(Mt&o.T),mt===w[0]||b&&!o.block)return!0;if(s=w[0],l=w[1],$=w[2],u=x.msg,p=r.queu,c=r.symb,f=r.ctx,b?(d=o.block.match||o.block.str,m=o.block.pos[0][0],g=o.block.pos[0][1],h=o.block.pos[0][2],k=o.block.pos[0][3]):(d=o.match||o.str,m=o.pos[0],g=o.pos[1],h=o.pos[2],k=o.pos[3]),gt===s)return!u&&xn&t(l)&&(u=l),x.$msg=u?v(u,d,!0):'Error "'+O+'"',B(r,m,g,h,k,x,G(x)),x.status|=ut,!1;if($t===s)f.length&&f.shift();else if(kt===s)f.unshift({symb:{},queu:[]});else if(dt===s){if($){if(!f.length)return!0;p=f[0].queu}if(l){if(l=v(l,d),_&&(l=l[fn]()),!p.length||l!==p[0][0])return p.length?(x.$msg=u?v(u,[p[0][0],l],!0):'Tokens do not match "'+p[0][0]+'","'+l+'"',y=G(x),B(r,p[0][1],p[0][2],p[0][3],p[0][4],x,y),B(r,m,g,h,k,x,y),p.shift()):(x.$msg=u?v(u,["",l],!0):'Token does not match "'+l+'"',y=G(x),B(r,m,g,h,k,x,y)),x.status|=ut,!1;p.shift()}else p.shift()}else if(yt===s&&l){if($){if(!f.length)return!0;p=f[0].queu}l=v(l,d),_&&(l=l[fn]()),x.$msg=u?v(u,l,!0):'Token does not match "'+l+'"',p.unshift([l,m,g,h,k,G(x)])}else if(ht===s){if($){if(!f.length)return!0;c=f[0].symb}if(i=l[1],a=l[0],i=v(i,d,!0),_&&(i=i[fn]()),c[on](a)||(c[a]={}),c[a][on](i))return x.$msg=u?v(u,i,!0):'Duplicate "'+i+'"',y=G(x),B(r,c[a][i][0],c[a][i][1],c[a][i][2],c[a][i][3],x,y),B(r,m,g,h,k,x,y),x.status|=ut,!1;c[a][i]=[m,g,h,k]}return!0}function K(e,t,n,r,o){var s,l,i=e,a=i.token,u=i.modifier,p=i.type,c=i.name,f=i.except,m=n.line,g=t.pos,h=null,k=!1;if(i.status&=ct,i.$msg=o?null:i.msg||null,i.pos=t.pos,f&&!o){l=X(n,t);for(var $=0,y=f.length;y>$;$++)if(s=f[$],i!==s&&zt===s.type&&K(s,t,n,r,1))return i.pos=s.pos,X(n,t,l),!1}return St===p?k=0===n.line:qt===p?k=n.bline+1===n.line:Lt===p?k=t.sol():Et===p?(t.spc(),t.eol()?k=c:(i.pos=t.pos,t.bck(g))):jt===p?(i.status=0,k=!0):Rt===p?(i.status&at&&t.spc()&&!t.eol()?(i.pos=t.pos,t.bck(g),i.status|=ut):k=!0,i.status&=pt):$n===a?(t.end(),k=u||c):(h=I(a,t))&&(h=h[1],k=u||c),o?k:(!1!==k&&(r.T=p,r.id=c,r.type=k,r.str=t.sel(g,t.pos),r.match=h,r.pos=[m,g,m,t.pos]),!k&&i.status&&i.$msg&&(i.$msg=v(i.$msg,c,!0)),k)}function V(e,t,n,r){var o,s,l,i,a,u,p,c,f,m,g,h,k,$,y,d,b,x,w,_,O,S,q=e,E=q.name,L=q.type,j=q.modifier,R=q.token,z=q.mline,M=q.inter,P=M?E+".inside":E,D=q.esc,N=!!D,F="",T="",A="",G="",B=q.$id||E,H=n.stack,Y=n.outer,K=Y&&Y[2],V=Y&&Y[1];if(q.status&=ct,q.$msg=q.msg||null,q.pos=t.pos,_=n.line,O=t.pos,Pt===L&&(q.status&=pt),y=q.status&at,l=0,i=0,n.block&&n.block.name===E?(i=1,l=1,$=P,o=n.block.end,c=n.block.sp,m=n.block.ip,f=n.block.ep,F=n.block.s,T=n.block.i):!n.block&&(o=I(R,t))&&(i=1,$=E,b=t.pos,c=[_,O],m=[[_,b],[_,b]],f=[_,b],F=t.sel(O,b),T="",G="",n.block={name:E,end:o,sp:c,ip:m,ep:f,s:F,i:T,e:G}),i){if(w=H.length,s=$n===o.ptype,d=s||q.empty,M){if(s&&l&&t.sol())return q.status&=pt,n.block=null,!1;if(!l)return b=t.pos,r.T=L,r.id=E,r.type=j||$,r.str=t.sel(O,b),r.match=null,r.pos=[_,O,_,b],W(H,w,C(q,y,0,B)),j||$}if(b=t.pos,a=V?s&&t.eol():I(o,t),p=z,u=0,a)$=s?P:E,G=t.sel(b,t.pos);else if(x=t.pos,h=!1,V||N||_n!==o.ptype&&wn!==o.ptype&&xn!==o.ptype){for(;!t.eol();){if(V){if(U(V,t,K,r)){if(t.pos>x){s&&(a=1);break}return!0}if(s){k=t.nxt(1),A+=k;continue}}if(b=t.pos,!h&&I(o,t)){M&&t.pos>b&&b>x?($=P,t.bck(b),u=1):($=E,a=1),G=t.sel(b,t.pos);break}k=t.nxt(1),A+=k,h=N&&!h&&D===k,b=t.pos}s&&t.eol()&&(a=1)}else(S=I(o,t,!0,!0))?M&&t.pos>b+S[1].length?($=P,t.mov(-S[1].length),u=1,A=t.sel(b,t.pos)):($=E,a=1,A=t.sel(b,t.pos-S[1].length),G=S[1]):(t.end(),$=P,u=1,A=t.sel(b,t.pos));return p=z||N&&h,T+=A,m[1]=[_,b],f=[_,t.pos],a&&!d&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(a||!p&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=T,n.block.e=G,W(H,w,C(q,y,0,B))),r.T=L,r.id=E,r.type=j||$,r.str=t.sel(O,t.pos),r.match=null,r.pos=[_,O,f[0],f[1]],q.pos=t.pos,n.block||(g=F+T+G,r.block={str:g,match:[g,T,F,G],part:[g,F,T,G],pos:[[c[0],c[1],f[0],f[1]],[c[0],c[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),j||$)}return q.status&&q.$msg&&(q.$msg=v(q.$msg,E,!0)),!1}function J(e,t,n,r){var o,s,l,i,a,u,p,f,m,g,h,k,$,y,d,b,v=e,x=v.type,w=(v.name,v.token),_=w.length,O=v.modifier;if(v.status&=ct,v.$msg=v.msg||null,k=n.stack,f=t.pos,m=k.length,v.pos=t.pos,u=0,p=0,Ht===x){v.status&=ct;var S=new String(w[0]),q=k.length?k[k.length-1]:null;return S.subgrammar=1,S.next=q?new T(Gt,q.name,[q]):null,S.required=q?q.status&at:0,S}if(Dt===x){for(y=c(),v.status|=at,$=[],b=X(n,t),h=0,g=h;_>g;g++){if(o=C(w[g],1,O,y),s=U(o,t,n,r),v.pos=o.pos,o.status&at&&(u++,$.push(G(o))),!1!==s)return s;o.status&ut&&(p++,X(n,t,b))}return u>0?v.status|=at:v.status&=pt,_===p&&u>0?v.status|=ut:v.status&=ct,v.status&&!v.$msg&&$.length&&(v.$msg=$.join(" | ")),!1}if(Ut&x){d=!!(x&Nt),y=v.$id||c(),d?v.status|=at:v.status&=pt,b=X(n,t),h=0;do o=C(w[h++],d,O,y),s=U(o,t,n,r);while(_>h&&(!0===s&&Ct&o.type||!1===s&&!(o.status&at)));if(v.pos=o.pos,!1!==s){if(!0!==s||jt!==o.type)for(g=_-1;g>=h;g--)W(k,m+_-g-1,C(w[g],1,O,y));return s.subgrammar&&_>h&&(s.next=new T(Gt,w[h].name,[w[h]]),s.required=w[h].status&at),s}return o.status&ut?(d?v.status|=ut:v.status&=ct,X(n,t,b)):d&&o.status&at&&(v.status|=ut),v.status&&!v.$msg&&(v.$msg=G(o)),!1}if(Ct&x)return Ht&w[0].type?!0:(b=X(n,t,null,!1),s=U(C(w[0],0),t,n,r),X(n,t,b),Bt===x?!1===s:!1!==s);for(y=v.$id||c(),l=v.found,i=v.min,a=v.max,v.status=0,$=[],b=X(n,t),g=0;_>g;g++){if(o=C(w[g],1,O,y),s=U(o,t,n,r),v.pos=o.pos,!1!==s){if(++l,a>=l)return v.found=l,W(k,m,C(v,0,0,c())),v.found=0,s;break}o.status&at&&(u++,$.push(G(o))),o.status&ut&&X(n,t,b)}return i>l&&(v.status|=at),(l>a||i>l&&u>0)&&(v.status|=ut),v.status&&!v.$msg&&$.length&&(v.$msg=$.join(" | ")),!1}function Q(e,t){var n=this;n.id=e?f("state"):"state",t instanceof Q?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=t.stack.slice(),n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new Q(e,t.outer[2])]:null,n.status&lt?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=[],n.token=null,n.block=null,n.outer=null,n.status&lt?(n.queu=[],n.symb={},n.ctx=[],n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function X(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack.length>n[3]&&(e.stack.length=n[3]),t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack.length,t?t.pos:1/0],!1===r&&(e.status=0),n)}function Z(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function et(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?pn(0,r.pos+e):cn(r.length,r.pos+e),r},r.bck=function(e){return r.pos=pn(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||et.$NONSPC$;r.pos<r.length&&t.test(n=r[mn](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[mn](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||et.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function tt(e,t){var n=t[e];n.content?n.content=$(n.content,1):n=$(n,1),t[e]=n}function nt(e){var t=e?e.data:null;if(t)if(t.init){var n=nt.parser=new er.Parser(N(t.grammar));if(t.subgrammars)for(var r=Object.keys(t.subgrammars),o=0,s=r.length;s>o;o++)n.subparser(r[o],new er.Parser(N(t.subgrammars[r[o]])))}else t.tokenize&&nt.parser&&postMessage({tokenize:1,tokens:nt.parser.parse(t.code,st|lt|it).tokens})}function rt(e,t){var n=this,r=null,o=[];r=new Worker(Qn.file),r.postMessage({init:1,grammar:e,subgrammars:t}),r.onMessage=function(e){if(o&&o.length){var t,n=e.data||{};n.tokenize&&(t=o.shift())(n.tokens)}},n.tokenize=function(e,t){return r?(o.push(t),void r.postMessage({tokenize:1,code:e})):t(null)},n.dispose=function(){return o=null,r&&r.terminate(),r=null,n}}function ot(e,n){n=n||Xn;var r,s=0,l={"before-highlight":function(e){r.$parser&&r.language===e.language&&(e._code=e.code,e.code="")},"before-insert":function(e){r.$parser&&r.language===e.language&&(e.code=e._code,e._code="",e.highlightedCode=n.Token.stringify(r.tokenize(e.code,r.escapeHtml),e.language))}};return r={$id:f("prism_grammar_highlighter"),$grammar:e,$parser:new er.Parser(N(e)),$worker:null,language:null,escapeHtml:!0,tokenize:function(e,t,n){var r=this;
if("function"!=typeof n){var s=r.$parser.parse(e,st|lt|it).tokens;return t&&o(tt,0,s.length-1,s),s}r.$worker||(r.$worker=new rt(r.$grammar,r.getSubgrammars())),r.$worker.tokenize(e,function(e){e&&t&&o(tt,0,e.length-1,e),n(e)})},hook:function(e,r){var o=this;if(s&&o.unhook(),xn&t(r)){var i=e;e=r,r=i}n=r||n,o.language=e;for(var a in l)l[on](a)&&n.hooks.add(a,l[a]);s=1},unhook:function(e){var t=this;if(n=e||n,s){var r,o,i=n.hooks.all;for(r in l)i[on](r)&&l[on](r)&&(o=i[r].indexOf(l[r]),o>-1&&i[r].splice(o,1));s=0,t.language=null}},getSubgrammars:function(){for(var e=this,t=e.$parser,n=Object.keys(t.$subgrammars),r={},o=0,s=n.length;s>o;o++)r[n[o]]=t.$subgrammars[n[o]].Mode.$grammar;return r},submode:function(e,t){this.$parser.subparser(e,t.$parser)},dispose:function(){var e=this;e.unhook(),e.$worker&&e.$worker.dispose(),e.$parser&&e.$parser.dispose(),e.$parser=e.$worker=e.language=n=null}},r.$parser.Mode=r,r}var st=1,lt=2,it=32,at=4,ut=8,pt=~at,ct=~ut,ft=at|ut,mt=0,gt=4,ht=8,kt=16,$t=17,yt=32,dt=33,bt=128,vt=129,xt=2,wt=4,_t=8,Ot=4,St=8,qt=9,Et=16,Lt=32,jt=128,Rt=256,zt=512,Mt=1024,Pt=1025,Dt=2048,Nt=4096,Ft=8192,It=8193,Tt=8194,At=8195,Ct=16384,Gt=Ct,Bt=16385,Wt=32768,Ht=65536,Ut=Nt|Wt,Yt=Dt|Nt|Ft|Ct|Wt|Ht,Kt={action:Ot,simple:zt,block:Mt,comment:Pt,subgrammar:Ht,alternation:Dt,sequence:Nt,repeat:Ft,zeroorone:It,zeroormore:Tt,oneormore:At,positivelookahead:Gt,negativelookahead:Bt,ngram:Wt},Vt="$|SOF|$",Jt="$|NONBLANK|$",Qt="$|SOL|$",Xt="$|EOL|$",Zt="$|ENDLINE|$",en="$|EMPTY|$",tn="$|NONSPACE|$",nn=void 0,rn="prototype",on="hasOwnProperty",sn="propertyIsEnumerable",ln=Object[rn],an=ln.toString,un=Object.create,pn=Math.max,cn=Math.min,fn="toLowerCase",mn="charAt",gn=1/0,hn=4,kn=8,$n=16,yn=32,dn=33,bn=34,vn=64,xn=128,wn=129,_n=130,On=256,Sn=512,qn=1024,En=2048,Ln=4096,jn=xn|yn,Rn=xn|On,zn=En|On,Mn=xn|On|En,Pn={"[object Number]":yn,"[object String]":xn,"[object Array]":On,"[object RegExp]":En,"[object Date]":Ln,"[object Function]":qn,"[object Object]":Sn},Dn=/^\s+|\s+$/g,Nn=String[rn].trim?function(e){return e.trim()}:function(e){return e.replace(Dn,"")},Fn=function(e,t){return t.length-e.length},In=/\r\n|\r|\n/g,Tn=/[\-_]/g,An=0,Cn=/([.*+?^${}()|[\]\/\\\-])/g,Gn=/[&"'<>]/g,Bn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Wn="(\\s|\\W|$)",Hn=/(\\\\)*?\\\d/,Un=/[*+]$/;et.$SPC$=/^[\s\u00a0]+/,et.$NONSPC$=/[^\s\u00a0]/,et.$NOTEMPTY$=/\S/,et.$SPACE$=/^\s*/;var Yn=g({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,i,a,u,p,c,f,m,g,h,k,$,y,d,b,v=this,x=v.$grammar,w=x.Style,_=v.DEF,O=v.ERR,S={},q=v.$n$,E=v.$t$,L=v.$v$,j=x.$interleaved,R=x.$parser,z=R.length,M=j?j.length:0,P=t.outer,D=P&&P[2],N=P&&P[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.stack,i=t.line,a=e.pos,m=!1,h=!0,g=!1,k=!1,P&&v===P[0]){if(S[q]=null,S[E]=_,S[L]=null,N){if(s=new A,U(N,e,D,s))return t.outer=null,{parser:v,state:D};for(e.nxt(1);!e.eol();){if(U(N,e,D,s)){if(e.pos>a)break;return t.outer=null,{parser:v,state:D}}e.nxt(1)}}else e.spc(),e.eol()?k=!0:e.end();return S[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),S}if(l.length&&Et===l[l.length-1].type&&e.sol()&&l.pop(),(!l.length||Rt!==l[l.length-1].type&&null==t.block)&&e.spc()){if(l.length&&Ht===l[l.length-1].type)return e.bck(a),r=l.pop(),m=U(r,e,t,s),$=""+m,v.$subgrammars[$]?(y=v.$subgrammars[$],d=new Q(1,n[$]?n[$]:t.status),D=t):(y=v,d=new Q,D=t),d.outer=[v,m.next,D],{parser:y,state:d,toInner:$};h=!1,k=!0}if(S[q]=null,S[E]=_,S[L]=null,h)for(s=new A,u=0;h&&(l.length||z>u)&&!e.eol();){if(c=e.pos,f=l.length,N){if(e.spc(),U(N,e,D,s))return e.pos>c?(S[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,S):(t.outer=null,{parser:P[0],state:D,fromInner:t});e.bck(c)}if(b=!1,M&&!t.block)for(p=0;M>p;p++)if(r=j[p],m=U(r,e,t,s),!1!==m){b=!0;break}if(h&&!b){if(!l.length&&u>=z)break;r=l.length?l.pop():R[u++],m=U(r,e,t,s)}if(!1===m){if(r.status&ft){t.token=r,k=H(t,e,s,r)||k,g=!0,h=!1;break}}else{if(m.subgrammar)return $=""+m,v.$subgrammars[$]?(y=v.$subgrammars[$],d=new Q(1,n[$]?n[$]:t.status),D=t):(y=v,d=new Q,D=t),d.outer=[v,m.next,D],{parser:y,state:d,toInner:$};if(l.length>1&&e.eol()&&Mt&l[l.length-1].type&&t.block&&t.block.name===l[l.length-1].name)for(p=l.length-2;p>=0&&Ot===l[p].type;)o=l[p--],Y(o,e,t,s),o.status&ut&&(t.$actionerr$=!0);else if(l.length&&Ot===l[l.length-1].type)for(;l.length&&Ot===l[l.length-1].type;)o=l.pop(),Y(o,e,t,s),o.status&ut&&(t.$actionerr$=!0);if(!0!==m){h=!1;break}}}return h&&e.nxt(1),S[L]=e.cur(1),!1!==m?(m=w[m]||_,S[q]=r.name):g?(m=O,t.status&lt&&B(t,i,a,i,e.pos,r)):m=_,S[E]=m,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),S},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t){var n=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)n.push(t.parser.get(e,t));return n},parse:function(e,t){var n,r,s,l,i,a,u=(e||"").split(In),p=u.length,c=null;if(t=t||st,s=!!(t&lt),l=!!(t&st),r={parser:this,state:new Q(0,t),inner:{}},r.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,p-2),l?c=o(t&it?function(e,t){t._=t._.concat(r.parser.tokenize(et(u[e]),r,e))}:function(e,t){t._.push(r.parser.tokenize(et(u[e]),r,e))},0,p-1,{_:[]})._:o(function(e){var t=et(u[e]);if(t.eol())r.state.line++,r.state.$blank$&&r.state.bline++;else for(;!t.eol();)r.parser.get(t,r)},0,p-1),n=r.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)i=n.queu.shift(),B(n,i[1],i[2],i[3],i[4],null,i[5]);return a=l&&s?{tokens:c,errors:n.err}:l?c:n.err,Z(n),r=n=null,a},autocompletion:function(e,t){var n,r,o,s=e.stack,l={},i=j([e.token],[],l);for(t=t||0,n=s.length-1;n>=0;n--)if(r=s[n],o=r.type,Ft&o){if(i=j([r],i,l),0<r.min&&t<i.length)break}else if((zt===o||Dt===o||Ut&o)&&(i=j([r],i,l),t<i.length))break;return i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[on](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Kn=!("undefined"==typeof global||"[object global]"!==an.call(global)),Vn=!(Kn||"undefined"==typeof navigator),Jn=!!(Vn&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator),Qn=function(e,t,n){var r,o=null,s=null,l=null;return e?(o=__filename,s=__dirname,l=__dirname):n?(o=self.location.href,s=o.split("/").slice(0,-1).join("/")):t&&(l=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(r=document.getElementsByTagName("script"))&&r.length&&(o=r[r.length-1].src,s=o.split("/").slice(0,-1).join("/"))),{path:s,file:o,base:l}}(Kn,Vn,Jn),Xn=("?nocache="+f("nonce")+"_"+~~(1e3*Math.random()),"undefined"!=typeof Prism?Prism:null),Zn=g(Yn,{constructor:function(e,t){var n=this;Yn.call(n,e,"",""),n.$v$="content",n.DEF=t||n.$DEF,n.ERR=n.$ERR},tokenize:function(e,t){var r,o=this,s=[],l=[],i=null,a=function(e){return e.content},u=function(e){return o.$DEF===e.type?e.content:e};if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r=t.parser.get(e,t),t.state.$actionerr$?(l.length&&(s=s.concat(n(l,a))),s.push(r.content),l.length=0,i=null):(i!==r.name&&(l.length&&(s=s.concat(n(l,u))),l.length=0,i=r.name),l.push(r));return l.length&&(s=s.concat(n(l,u))),l.length=0,i=null,s}});Jn&&(onmessage=nt),nt.parser=null;var er=e.PrismGrammar={VERSION:"4.0.0",clone:s,extend:l,pre_process:D,parse:N,getMode:ot,Parser:Zn};return e.PrismGrammar});
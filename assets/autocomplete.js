/**
* AutoComplete
* https://github.com/foo123/AutoComplete
* @version 2.0.0
* 
* adapted from:
* JavaScript autoComplete v1.0.3
* Copyright (c) 2014 Simon Steinberger / Pixabay
* GitHub: https://github.com/Pixabay/JavaScript-autoComplete
* License: http://www.opensource.org/licenses/mit-license.php
**/
!function(e,t,n){"use strict";"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(function(){return n()}):e[t]=n()}(this,"AutoComplete",function(){"use strict";function e(e,t){for(var n in t)t[p](n)&&(e[n]=t[n]);return e}function t(e,t){for(var n in t)t[p](n)&&("function"==typeof t[n].get&&e.__defineGetter__(n,t[n].get),"function"==typeof t[n].set&&e.__defineSetter__(n,t[n].set));return e}function n(e){return e.replace(n,"\\$&")}function o(e){var t,n,o="",i=e.length;for(t=0;i>t;t++)n=e.charAt(t),o+="&"===n?"&amp;":"<"===n?"&lt;":">"===n?"&gt;":n;return o}function i(e,t){return(t||document).querySelector(e)}function u(e,t,n){var o=document.createElement(e);return t&&(o.className=t),n&&(o.innerHTML=n),o}function l(e,t){return e.classList?e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function s(e,t){l(e,t)||(e.classList?e.classList.add(t):e.className=""===e.className?t:e.className+" "+t)}function c(e,t){e.classList?e.classList.remove(t):e.className=w((" "+e.className+" ").replace(" "+t+" "," "))}function r(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function a(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function m(e,t,n,o){r(o||document,t,function(t){for(var o=!1,i=t.target||t.srcElement;i&&!(o=l(i,e));)i=i.parentElement;o&&n.call(i,t)})}function f(e,t,n,o){var u=e.getBoundingClientRect();if(t.style.left=u.left+(window.pageXOffset||document.documentElement.scrollLeft)+"px",t.style.top=u.bottom+(window.pageYOffset||document.documentElement.scrollTop)+1+"px",t.style.width=u.right-u.left+"px",!n&&(s(t,"visible"),t._maxHeight||(t._maxHeight=parseInt(b(t).maxHeight,10)),t._suggestionHeight||(t._suggestionHeight=t._empty?i(".autocomplete-no-suggestions",t).offsetHeight:i(".autocomplete-suggestion",t).offsetHeight),t._suggestionHeight))if(o){var l=t.scrollTop,c=o.getBoundingClientRect().top-t.getBoundingClientRect().top;c+t._suggestionHeight-t._maxHeight>0?t.scrollTop=c+t._suggestionHeight+l-t._maxHeight:0>c&&(t.scrollTop=c+l)}else t.scrollTop=0}function g(e){if(C.length)for(var t=0,n=C.length;n>t;t++)f(C[t].element,C[t].sc,e)}function d(p,y){var w=this;if(!(w instanceof d))return new d(p,y);y=e({source:0,minChars:3,delay:150,key:null,value:null,cache:5e3,menuClass:"",noItems:"No Matches for <strong>{{term}}</strong>",renderItem:function(e,t,n,o,i,u){return o.replace(u,"<mark>$1</mark>")},onSelect:function(){}},y||{}),t(w,{suggestions:{get:function(){return L[A._term]||[]},set:function(e){B(e||[])}},key:{get:function(){return S},set:function(e){S=null!=e?e:null}},value:{get:function(){return H},set:function(e){H=null!=e?e:null}},cache:{get:function(){return E},set:function(e){E=parseInt(e,10)||0,0>E&&(E=0)}},delay:{get:function(){return T},set:function(e){T=parseInt(e,10)||0,0>T&&(T=0)}},minChars:{get:function(){return b},set:function(e){b=parseInt(e,10)||0,0>b&&(b=0)}}}),w.dispose=function(){I&&clearTimeout(I),L=null,I=null,w.sc=null,w.element=null,w.onSelect=null,a(p,"blur",j),a(p,"focus",z),a(p,"keydown",D),a(p,"keyup",M),C.splice(C.indexOf(w),1),C.length||a(window,"resize",g),document.body.removeChild(A),k?p[h]("autocomplete",k):p[_]("autocomplete")};var b=3,T=150,E=3e5,S=null,H=null,k=p[v]("autocomplete"),L={},I=null,N=3e5,O="",A=u("div","autocomplete-suggestions "+y.menuClass);A._term="",A._empty=!0,p[h]("autocomplete","off"),w.element=p,w.sc=A,w.onSelect=y.onSelect,w.source=y.source,w.cache=y.cache,w.delay=y.delay,w.minChars=y.minChars,w.key=y.key,w.value=y.value,document.body.appendChild(A),m("autocomplete-suggestion","mouseleave",function(){var e=i(".autocomplete-suggestion.selected",A);e&&setTimeout(function(){c(e,"selected")},10)},A),m("autocomplete-suggestion","mouseover",function(){var e=this;s(e,"selected")},A),m("autocomplete-suggestion","mousedown",function(e){var t=this;if(l(t,"autocomplete-suggestion")){var n=A._term,o=L[n][t._index],i=null!=H?o[H]:o,u=null!=S?o[S]:i;p.value=u,c(A,"visible"),w.onSelect(e,n,o,t,u,i)}},A);var R,$=function q(){if(null!=L){if(E>0){var e,t=A._term,n=x();for(e in L)t!=e&&null!=L[e].time&&n-L[e].time>=E&&delete L[e]}I=setTimeout(q,N)}},j=function(){var e=0;try{e=i(".autocomplete-suggestions:hover")}catch(t){e=0}e?p!==document.activeElement&&setTimeout(function(){p.focus()},10):(O=p.value,c(A,"visible"),setTimeout(function(){c(A,"visible")},350))},B=function(e){e=e||[];var t,i,l,s,r,a,m,g,d=p.value;if(L[d]=e,L[d].time=x(),d.length>=b){if(A.innerHTML="",t=o(d),e.length){for(s=new RegExp("("+n(t).split(" ").join("|")+")","gi"),i=0,l=e.length;l>i;i++)m=e[i],a=null!=H?m[H]:m,r=null!=S?m[S]:a,g=u("div","autocomplete-suggestion",y.renderItem(t,m,r,o(a),i,s)),g._index=i,A.appendChild(g);A._empty=!1}else A.appendChild(u("div","autocomplete-no-suggestions",y.noItems.split("{{term}}").join(t))),A._empty=!0;A._term=d,p===document.activeElement&&f(p,A,0)}else c(A,"visible")},D=function(e){var t,n,o=window.event?e.keyCode:e.which;if(!(40!==o&&38!==o||A._empty))return n=i(".autocomplete-suggestion.selected",A),n?(t=40===o?n.nextSibling:n.previousSibling,t?(c(n,"selected"),s(t,"selected"),p.value=null!=S?L[A._term][t._index][S]:null!=H?L[A._term][t._index][H]:L[A._term][t._index]):(c(n,"selected"),p.value=O,t=0)):(t=40===o?i(".autocomplete-suggestion",A):A.children[A.children.length-1],s(t,"selected"),p.value=null!=S?L[A._term][t._index][S]:null!=H?L[A._term][t._index][H]:L[A._term][t._index]),f(p,A,0,t),!1;if(27===o)p.value=O,c(A,"visible");else if((13===o||9===o)&&(n=i(".autocomplete-suggestion.selected",A),n&&l(A,"visible"))){var u=A._term,r=L[u][n._index],a=null!=H?r[H]:r,o=null!=S?r[S]:a;p.value=o,w.onSelect(e,u,r,n,o,a),setTimeout(function(){c(A,"visible")},10)}},M=function(e){var t,n,o=window.event?e.keyCode:e.which;if(!o||(35>o||o>40)&&13!==o&&27!==o)if(t=p.value,t.length>=b){if(t!=O){if(O=t,clearTimeout(R),E>0){if(n=x(),t in L&&E>n-L[t].time)return void B(L[t]);for(var i=1;i<t.length-b;i++){var u=t.slice(0,t.length-i);if(u in L&&E>n-L[u].time&&!L[u].length)return void B([])}}R=setTimeout(function(){w.source(t,B)},T)}}else O=t,c(A,"visible")},z=function(e){O="\n",M(e)};I=setTimeout($,N),r(p,"blur",j),r(p,"keydown",D),r(p,"keyup",M),r(p,"focus",z),C.length||r(window,"resize",g),C.push(w)}var p="hasOwnProperty",v="getAttribute",h="setAttribute",_="removeAttribute",n=/[-\/\\^$*+?.()|[\]{}]/g,y=/^\s+|\s+$/g,w=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(y,"")},x=Date.now?Date.now:function(){return(new Date).getTime()},b=window.getComputedStyle?function(e){return getComputedStyle(e,null)}:function(e){return e.currentStyle},C=[];return d.VERSION="2.0.0",d});
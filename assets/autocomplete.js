/*
    https://github.com/foo123/autocomplete
    
    adapted from:
    JavaScript autoComplete v1.0.3
    Copyright (c) 2014 Simon Steinberger / Pixabay
    GitHub: https://github.com/Pixabay/JavaScript-autoComplete
    License: http://www.opensource.org/licenses/mit-license.php
*/
!function(e,t,n){"use strict";"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(function(){return n()}):e[t]=n()}(this,"autoComplete",function(){"use strict";function e(e,t){for(var n in t)t[p](n)&&(e[n]=t[n]);return e}function t(e,t){for(var n in t)t[p](n)&&("function"==typeof t[n].get&&e.__defineGetter__(n,t[n].get),"function"==typeof t[n].set&&e.__defineSetter__(n,t[n].set));return e}function n(e){return e.replace(y,"\\$&")}function o(e){var t,n,o="",i=e.length;for(t=0;i>t;t++)n=e.charAt(t),o+="&"===n?"&amp;":"<"===n?"&lt;":">"===n?"&gt;":n;return o}function i(e,t){return(t||document).querySelector(e)}function u(e,t,n){var o=document.createElement(e);return t&&(o.className=t),n&&(o.innerHTML=n),o}function l(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function s(e,t){l(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function r(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function a(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function f(e,t,n,o){r(o||document,t,function(t){for(var o=!1,i=t.target||t.srcElement;i&&!(o=l(i,e));)i=i.parentElement;o&&n.call(i,t)})}function m(e,t,n,o){var u=e.getBoundingClientRect();if(t.style.left=u.left+(window.pageXOffset||document.documentElement.scrollLeft)+"px",t.style.top=u.bottom+(window.pageYOffset||document.documentElement.scrollTop)+1+"px",t.style.width=u.right-u.left+"px",!n&&(s(t,"visible"),t._maxHeight||(t._maxHeight=parseInt(b(t).maxHeight,10)),t._suggestionHeight||(t._suggestionHeight=t._empty?i(".autocomplete-no-suggestions",t).offsetHeight:i(".autocomplete-suggestion",t).offsetHeight),t._suggestionHeight))if(o){var l=t.scrollTop,c=o.getBoundingClientRect().top-t.getBoundingClientRect().top;c+t._suggestionHeight-t._maxHeight>0?t.scrollTop=c+t._suggestionHeight+l-t._maxHeight:0>c&&(t.scrollTop=c+l)}else t.scrollTop=0}function g(e){if(x.length)for(var t=0,n=x.length;n>t;t++)m(x[t].element,x[t].sc,e)}function d(d,p){var y=this;p=e({source:0,minChars:3,delay:150,key:null,value:null,cache:5e3,menuClass:"",noItems:"No Matches for <strong>{{term}}</strong>",renderItem:function(e,t,n,o,i,u){return o.replace(u,"<mark>$1</mark>")},onSelect:function(){}},p||{}),t(y,{suggestions:{get:function(){return k[R._term]||[]},set:function(e){B(e||[])}},key:{get:function(){return E},set:function(e){E=null!=e?e:null}},value:{get:function(){return H},set:function(e){H=null!=e?e:null}},cache:{get:function(){return T},set:function(e){T=parseInt(e,10)||0,0>T&&(T=0)}},delay:{get:function(){return C},set:function(e){C=parseInt(e,10)||0,0>C&&(C=0)}},minChars:{get:function(){return b},set:function(e){b=parseInt(e,10)||0,0>b&&(b=0)}}}),y.dispose=function(){L&&clearTimeout(L),k=null,L=null,y.sc=null,y.element=null,y.onSelect=null,a(d,"blur",j),a(d,"focus",$),a(d,"keydown",D),a(d,"keyup",M),x.splice(x.indexOf(y),1),x.length||a(window,"resize",g),document.body.removeChild(R),S?d[h]("autocomplete",S):d[_]("autocomplete")};var b=3,C=150,T=5e3,E=null,H=null,S=d[v]("autocomplete"),k={},L=null,I=3e5,N="",R=u("div","autocomplete-suggestions "+p.menuClass);R._term="",R._empty=!0,d[h]("autocomplete","off"),y.element=d,y.sc=R,y.onSelect=p.onSelect,y.source=p.source,y.cache=p.cache,y.delay=p.delay,y.minChars=p.minChars,y.key=p.key,y.value=p.value,document.body.appendChild(R),f("autocomplete-suggestion","mouseleave",function(){var e=i(".autocomplete-suggestion.selected",R);e&&setTimeout(function(){c(e,"selected")},10)},R),f("autocomplete-suggestion","mouseover",function(){var e=this;s(e,"selected")},R),f("autocomplete-suggestion","mousedown",function(e){var t=this;if(l(t,"autocomplete-suggestion")){var n=R._term,o=k[n][t._index],i=null!=H?o[H]:o,u=null!=E?o[E]:i;d.value=i,c(R,"visible"),y.onSelect(e,n,o,t,u,i)}},R);var A,O=function z(){if(null!=k){if(T>0){var e,t=R._term,n=w();for(e in k)t!=e&&null!=k[e].time&&n-k[e].time>=T&&delete k[e]}L=setTimeout(z,I)}},j=function(){var e=0;try{e=i(".autocomplete-suggestions:hover")}catch(t){e=0}e?d!==document.activeElement&&setTimeout(function(){d.focus()},10):(N=d.value,c(R,"visible"),setTimeout(function(){c(R,"visible")},350))},B=function(e){e=e||[];var t,i,l,s,r,a,f,g,v=d.value;if(k[v]=e,k[v].time=w(),v.length>=b){if(R.innerHTML="",t=o(v),e.length){for(s=new RegExp("("+n(t).split(" ").join("|")+")","gi"),i=0,l=e.length;l>i;i++)f=e[i],a=null!=H?f[H]:f,r=null!=E?f[E]:a,g=u("div","autocomplete-suggestion",p.renderItem(t,f,r,o(a),i,s)),g._index=i,R.appendChild(g);R._empty=!1}else R.appendChild(u("div","autocomplete-no-suggestions",p.noItems.split("{{term}}").join(t))),R._empty=!0;R._term=v,d===document.activeElement&&m(d,R,0)}else c(R,"visible")},D=function(e){var t,n,o=window.event?e.keyCode:e.which;if(!(40!==o&&38!==o||R._empty))return n=i(".autocomplete-suggestion.selected",R),n?(t=40===o?n.nextSibling:n.previousSibling,t?(c(n,"selected"),s(t,"selected"),d.value=null!==H?k[R._term][t._index][H]:k[R._term][t._index]):(c(n,"selected"),d.value=N,t=0)):(t=40===o?i(".autocomplete-suggestion",R):R.children[R.children.length-1],s(t,"selected"),d.value=null!=H?k[R._term][t._index][H]:k[R._term][t._index]),m(d,R,0,t),!1;if(27===o)d.value=N,c(R,"visible");else if((13===o||9===o)&&(n=i(".autocomplete-suggestion.selected",R),n&&l(R,"visible"))){var u=R._term,r=k[u][n._index],a=null!=H?r[H]:r,o=null!=E?r[E]:a;d.value=a,y.onSelect(e,u,r,n,o,a),setTimeout(function(){c(R,"visible")},10)}},M=function(e){var t,n,o=window.event?e.keyCode:e.which;if(!o||(35>o||o>40)&&13!==o&&27!==o)if(t=d.value,t.length>=b){if(t!=N){if(N=t,clearTimeout(A),T>0){if(n=w(),t in k&&T>n-k[t].time)return void B(k[t]);for(var i=1;i<t.length-b;i++){var u=t.slice(0,t.length-i);if(u in k&&T>n-k[u].time&&!k[u].length)return void B([])}}A=setTimeout(function(){y.source(t,B)},C)}}else N=t,c(R,"visible")},$=function(e){N="\n",M(e)};L=setTimeout(O,I),r(d,"blur",j),r(d,"keydown",D),r(d,"keyup",M),r(d,"focus",$),x.length||r(window,"resize",g),x.push(y)}var p="hasOwnProperty",v="getAttribute",h="setAttribute",_="removeAttribute",y=/[-\/\\^$*+?.()|[\]{}]/g,w=Date.now?Date.now:function(){return(new Date).getTime()},b=window.getComputedStyle?function(e){return getComputedStyle(e,null)}:function(e){return e.currentStyle},x=[];return d});
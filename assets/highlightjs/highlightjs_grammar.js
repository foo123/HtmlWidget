/**
*
*   HighlightJSGrammar
*   @version: 4.2.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight language for HighlightJS
*   https://github.com/foo123/highlightjs-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"HighlightJSGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=vt:!0===e||!1===e||e instanceof Boolean?t=qt:st===e?t=gt:(t=Ft[pt.call(e)]||xt,t=$t===t||e instanceof Number?isNaN(e)?wt:isFinite(e)?$t:bt:_t===t||e instanceof String?1===e.length?Ot:_t:St===t||e instanceof Array?St:It===t||e instanceof RegExp?It:jt===t||e instanceof Date?jt:Lt===t||e instanceof Function?Lt:Rt===t?Rt:xt),t}function t(e,t,n,o){var l,r,s,a,i,u,c=e.length;if(arguments.length<4&&(o=c-1),0>o&&(o+=c),arguments.length<3&&(n=0),n>o)return[];if(n===o)return[t(e[n],n,n,o)];for(s=o-n+1,a=15&s,i=1&a,u=new Array(s),i&&(u[0]=t(e[n],n,n,o)),l=i;a>l;l+=2)r=n+l,u[l]=t(e[r],r,n,o),u[l+1]=t(e[r+1],r+1,n,o);for(l=a;s>l;l+=16)r=n+l,u[l]=t(e[r],r,n,o),u[l+1]=t(e[r+1],r+1,n,o),u[l+2]=t(e[r+2],r+2,n,o),u[l+3]=t(e[r+3],r+3,n,o),u[l+4]=t(e[r+4],r+4,n,o),u[l+5]=t(e[r+5],r+5,n,o),u[l+6]=t(e[r+6],r+6,n,o),u[l+7]=t(e[r+7],r+7,n,o),u[l+8]=t(e[r+8],r+8,n,o),u[l+9]=t(e[r+9],r+9,n,o),u[l+10]=t(e[r+10],r+10,n,o),u[l+11]=t(e[r+11],r+11,n,o),u[l+12]=t(e[r+12],r+12,n,o),u[l+13]=t(e[r+13],r+13,n,o),u[l+14]=t(e[r+14],r+14,n,o),u[l+15]=t(e[r+15],r+15,n,o);return u}function n(e,t,n,o,l){var r,s,a,i,u,c=e.length,p=n;if(arguments.length<5&&(l=c-1),0>l&&(l+=c),arguments.length<4&&(o=0),o>l)return p;if(o===l)return t(p,e[o],o);for(a=l-o+1,i=15&a,u=1&i,u&&(p=t(p,e[o],o)),r=u;i>r;r+=2)s=o+r,p=t(t(p,e[s],s),e[s+1],s+1);for(r=i;a>r;r+=16)s=o+r,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[s],s),e[s+1],s+1),e[s+2],s+2),e[s+3],s+3),e[s+4],s+4),e[s+5],s+5),e[s+6],s+6),e[s+7],s+7),e[s+8],s+8),e[s+9],s+9),e[s+10],s+10),e[s+11],s+11),e[s+12],s+12),e[s+13],s+13),e[s+14],s+14),e[s+15],s+15);return p}function o(e,t,n,o){if(t>n)return o;if(t===n)return e(t,o,t,n),o;var l,r,s=n-t+1,a=15&s,i=1&a;for(i&&e(t,o,t,n),l=i;a>l;l+=2)r=t+l,e(r,o,t,n),e(++r,o,t,n);for(l=a;s>l;l+=16)r=t+l,e(r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n),e(++r,o,t,n);return o}function l(t,n){var o,r,s,a,i=e(t),u=0;if($t===e(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,Rt===i){r={};for(s in t)t[it](s)&&t[ut](s)&&(o=e(t[s]),Rt===o?r[s]=n?l(t[s],u>0?u-1:n):t[s]:St===o?r[s]=n?l(t[s],u>0?u-1:n):t[s].slice():jt===o?r[s]=new Date(t[s]):_t&o?r[s]=t[s].slice():$t&o?r[s]=0+t[s]:r[s]=t[s])}else if(St===i)for(a=t.length,r=new Array(a),s=0;a>s;s++)o=e(t[s]),Rt===o?r[s]=n?l(t[s],u>0?u-1:n):t[s]:St===o?r[s]=n?l(t[s],u>0?u-1:n):t[s].slice():jt===o?r[s]=new Date(t[s]):_t&o?r[s]=t[s].slice():$t&o?r[s]=0+t[s]:r[s]=t[s];else r=jt===i?new Date(t):_t&i?t.slice():$t&i?0+t:t;return r}function r(){var t,n,o,s,a,i,u,c,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=l(m[0]),o=1;h>o;o++)if(t=m[o])for(s in t)if(t[it](s)&&t[ut](s))if(n[it](s)&&n[ut](s)){if(p=e(n[s]),f=e(t[s]),Rt===p&&Rt===f)n[s]=r(n[s],t[s]);else if(St===p&&St===f){if(u=n[s],c=t[s],i=c.length,!i)continue;if(u.length)for(a=0;i>a;a++)0>u.indexOf(c[a])&&u.push(c[a]);else n[s]=c.slice()}}else n[s]=l(t[s]);return n}function s(t,n){return n||St!==e(t)?[t]:t}function a(t,n){return t=s(t),(n||St!==e(t[0]))&&(t=[t]),t}function i(t,n){return _t&e(n)&&_t&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=st:delete e[t],e}function c(e){return(e||"id_")+ ++Bt}function p(e){return(e||"uuid")+"_"+ ++Bt+"_"+(new Date).getTime()}function f(){var t,n,o,l,r,s,a=arguments,i=a.length;for(t=a[0]||{},r=1;i>r;r++)if(n=a[r],Rt===e(n))for(l in n)n[it](l)&&n[ut](l)&&(o=n[l],s=e(o),$t&s?t[l]=0+o:jt&s?t[l]=new Date(o):Nt&s?t[l]=o.slice():t[l]=o);return t}function m(e,t){var n,o=arguments.length,l="constructor";return 0===o?(e=Object,t={}):1===o?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[it](l)||(t[l]=function(){}),n=t[l],delete t[l],n[at]=f(ft(e[at]),t),n[at][l]=n,n}function h(e){return e.replace(Ut,"\\$1")}function k(e,t){t=t||{l:0,x:0,i:0,g:0};var e=new RegExp(e,(t.g?"g":"")+(t.i?"i":""));return e.xflags=t,e}function y(e,t,n,o){var l,r=e.pos||0,s=e.length,a=t.length,i="";if(n)if(o)for(;s>r;)if(l=!1,n===e[yt](r)&&(l=!0,r+=1),t===e.substr(r,a)){if(r+=a,!l)break;i+=t}else i+=e[yt](r++);else for(;s>r;)if(l=!1,n===e[yt](r)&&(l=!0,r+=1,i+=n),t===e.substr(r,a)){if(r+=a,!l)break;i+=t}else i+=e[yt](r++);else for(;s>r;){if(t===e.substr(r,a)){r+=a;break}i+=e[yt](r++)}return e.pos=r,i}function d(t,n,o,l){var r,s,a,i,u,c=!0===o?0:1,p=l?"\\":"$",f=l?92:36;for(_t&e(n)&&(l&&(n=h(n)),n=[n,n,n],c=0),s=t.length,u="",r=0;s>r;)a=t[yt](r),s>r+1&&p===a?(i=t.charCodeAt(r+1),f===i?(u+=p,r+=2):i>=48&&57>=i?(u+=n[c+i-48]||"",r+=2):(u+=a,r+=1)):(u+=a,r+=1);return u}function x(t,n,o,l){if(!t||($t|It)&e(t))return t;var r,s=n?n.length||0:0,a="",i={g:0,i:0,x:0,l:0};if(_t&e(l)?a=l:l&&(a=Ht),s&&t.substr(0,s)===n){var u,c,p,r,f,m=t.substr(s),y=m[yt](0);for(r=m.length;r--&&(f=m[yt](r),y!==f);)"i"===f.toLowerCase()?i.i=1:"x"===f.toLowerCase()?i.x=1:"l"===f.toLowerCase()&&(i.l=1);return u=m.substring(1,r),"^"===u.charAt(0)?(i.l=1,c="^("+u.slice(1)+")"):c="^("+u+")",p=c,(i.x||i.l||i.i)&&(c=(i.l?"l":"")+(i.x?"x":"")+(i.i?"i":"")+"::"+c),o[c]||(p=k(p,i),o[c]=p),o[c]}return a?(p=c="^("+h(t)+")"+a,o[c]||(p=k(p,i),o[c]=p),o[c]):t}function g(n,o,l){var r,s="";return _t&e(o)?s=o:o&&(s=Ht),r=t(n.sort(Ct),h).join("|"),[k("^("+r+")"+s,{l:0,x:0,i:l?1:0}),1]}function v(t,n,o,l){var r=e(n);if($t===r)return n;if(l[t])return l[t];o=o||0;var s,a=0;return n&&n.isCharList&&(a=1,u(n,"isCharList")),s=vt===r?new N(Oe,t,n,vt,o):Ot===r?new N(Oe,t,n,Ot,o):Dt&r?new N(Oe,t,n,It,o):_t&r?new N(Oe,t,n,a?Et:_t,o):n,l[t]=s}function $(t,n,o,l,r,a,u,c){if(u[t])return u[t];var p,f,m,h,k,y,d,b=0,w=0,q=1,_=_t&e(l)?!0:!!l;if(p=s(n),m=p.length,1===m)d=v(t,x(p[0],o,a,l),0,u);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)k=e(p[f]),y=e(p[m-1-f]),Ot===k&&Ot===y||(q=0),St&k||St&y?b=1:(It&k||It&y||i(p[f],o)||i(p[m-1-f],o))&&(w=1);if(q&&!_)p=p.slice().join(""),p.isCharList=1,d=v(t,p,0,u);else if(!_||b||w)if(b||w){for(f=0;m>f;f++)St&e(p[f])?p[f]=$(t+"_"+f,p[f],o,l,r,a,u):p[f]=v(t+"_"+f,x(p[f],o,a),f,u);d=m>1?new N(Ee,t,p):p[0]}else{for(c&&(c.keywords=s(n).slice()),p=p.sort(Ct),f=0;m>f;f++)p[f]=v(t+"_"+f,x(p[f],o,a),f,u);d=m>1?new N(Ee,t,p):p[0]}else c&&(c.keywords=s(n).slice()),d=v(t,g(p,l,r),0,u)}return u[t]=d}function b(t,n,l,r,s){if(s[t])return s[t];var u=a(n),c=[],p=[];return o(function(n){var o,a,f,m;o=v(t+"_0_"+n,x(u[n][0],l,r),n,s),u[n].length>1?(f=i(u[n][1],l),m=f&&Jt.test(u[n][1]),It!==o.ptype||_t!==e(u[n][1])||!m&&f?a=v(t+"_1_"+n,x(u[n][1],l,r),n,s):m?(a=new String(u[n][1]),a.regex_pattern=l):a=u[n][1]):a=o,c.push(o),p.push(a)},0,u.length-1),s[t]=new N(Se,t,[c,p])}function w(e,t){var n=a(e.tokens.slice());o(function(e){var o=n[e][0],l=n[e].length>1?n[e][1]:n[e][0],r=n[e].length>2?n[e][2]:"";null===l?(t.line=t.line||[],t.line.push(o)):(t.block=t.block||[],t.block.push([o,l,r]))},0,n.length-1)}function q(e,n,o,l){var r=e.meta||o,s=!(!e.caseInsesitive&&!e.ci),a=t(n,function(e){return{word:e,meta:r,ci:s}});return l.autocomplete=(l.autocomplete||[]).concat(a),a}function _(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,o,l,s,a,i,c,p,f,m,h,k=t.Lex,y=t.Syntax,d=[k,y],x=d.length;for(h=0;x>h;){m=d[h++];for(l in m)m[it](l)&&(n=l.split(":"),o=n[1]&&At(n[1]).length?At(n[1]):null,n=At(n[0]),n.length||(n=l,o=null),n!==l&&(m[n]=m[l],u(m,l),o&&(o=o[kt](),s=m[n],a=e(s),Rt===a?m[n].type||(m[n].type=o):(m[n]={type:o},"error"===o?(m[n].type="action",m[n].error=s):"nop"===o?(m[n].type="action",m[n].nop=!0):"group"===o?(m[n].type="sequence",m[n].tokens=s):"action"===o&&_t===a?m[n][s]=!0:m[n].tokens=s))),k===m&&(zt&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(p=s.type=s.type[kt](),"line-block"===p?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===p?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===p&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=k;for(n in m)if(m[it](n))for(s=m[n];s.extend;)i=s.extend,u(s,"extend"),c=k[i],c&&(zt&e(c)&&(c=k[i]={type:"simple",tokens:c}),s=r(c,s));m=k;for(n in m)m[it](n)&&(s=m[n],s.type?(p=s.type=s.type[kt](),"line-block"===p?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===p?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===p&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],u(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],u(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],u(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,u(s,"comment")):s.block?(s.type="block",s.tokens=s.block,u(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,u(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"],!!s["in-hypercontext"]],u(s,"error")):s[it]("hypercontext")?(s.type="action",s.action=[s.hypercontext?"hypercontext-start":"hypercontext-end",s.hypercontext,!!s["in-context"],!!s["in-hypercontext"]],u(s,"hypercontext")):s[it]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"],!!s["in-hypercontext"]],u(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"],!!s["in-hypercontext"]],u(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"],!!s["in-hypercontext"]],u(s,"outdent")):s.define?(s.type="action",s.action=["define",_t&e(s.define)?["*",s.define]:s.define,!!s["in-context"],!!s["in-hypercontext"]],u(s,"define")):s.undefine?(s.type="action",s.action=["undefine",_t&e(s.undefine)?["*",s.undefine]:s.undefine,!!s["in-context"],!!s["in-hypercontext"]],u(s,"undefine")):s.defined?(s.type="action",s.action=["defined",_t&e(s.defined)?["*",s.defined]:s.defined,!!s["in-context"],!!s["in-hypercontext"]],u(s,"defined")):s.notdefined?(s.type="action",s.action=["notdefined",_t&e(s.notdefined)?["*",s.notdefined]:s.notdefined,!!s["in-context"],!!s["in-hypercontext"]],u(s,"notdefined")):s.unique?(s.type="action",s.action=["unique",_t&e(s.unique)?["*",s.unique]:s.unique,!!s["in-context"],!!s["in-hypercontext"]],u(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"],!!s["in-hypercontext"]],u(s,"push")):s[it]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"],!!s["in-hypercontext"]],u(s,"pop")):s.type="simple","action"===s.type?(s.ci=!(!s.caseInsesitive&&!s.ci),s.autocomplete=!!s.autocomplete):"block"===s.type||"comment"===s.type?(s.multiline=s[it]("multiline")?!!s.multiline:!0,_t&e(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&_t&e(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=y;for(n in m)m[it](n)&&(s=m[n],Rt!==e(s)||s.type?s.type&&(p=s.type=s.type[kt](),"group"===p&&s.match?(a=e(s.match),_t&a?(f=s.match[kt](),"alternation"===f||"either"===f?(s.type="alternation",u(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",u(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",u(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",u(s,"match")):"oneormore"===f?(s.type="oneOrMore",u(s,"match")):(s.type="sequence",u(s,"match"))):St&a&&(s.type="repeat",s.repeat=s.match,u(s,"match"))):"either"===p?s.type="alternation":"all"===p?s.type="sequence":"lookahead"===p?s.type="positiveLookahead":"grammar"===p&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?u(s,"n-gram"):u(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?u(s,"all"):u(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?u(s,"either"):u(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,u(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,u(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,u(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?u(s,"lookahead"):u(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,u(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?u(s,"subgrammar"):u(s,"grammar")));return t}function O(e,t){t=t||[];var n,o;for(n=e.ctx;n;){for(o=n.val.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;n=n.prev}for(n=e.hctx;n;){for(o=n.val.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;n=n.prev}for(o=e.symb;o;)o.val[1][7]&&t.push({word:o.val[1][5],meta:(o.val[1][6]||"")+" at ("+(o.val[1][0]+1)+","+(o.val[1][1]+1)+")",ci:o.val[1][8],token:o.val[1][6],pos:[o.val[1][0]+1,o.val[1][1]+1,o.val[1][2]+1,o.val[1][3]+1]}),o=o.prev;return t}function E(t,n,o,l){if(o=o||{},n=n||[],!t||!t.length)return n;var r,s,a,i,u,c,p;for(r=0,s=t.length;s>r;r++)if(u=t[r])if(ze===u.type){if(l&&l.length&&u.name)for(a=l.length-1;a>=0;a--)l[a].token&&(u.name===l[a].token||u.name.length>l[a].token.length&&u.name.slice(0,l[a].token.length)===l[a].token||u.name.length<l[a].token.length&&u.name===l[a].token.slice(0,u.name.length))&&(l[a].meta=u.name+" at ("+l[a].pos[0]+","+l[a].pos[1]+")",n.push(l[a]),l.splice(a,1));if(u.autocompletions)for(a=0,i=u.autocompletions.length;i>a;a++)p=u.autocompletions[a],o[it]("w_"+p.word)||(n.push(p),o["w_"+p.word]=1);else _t===u.token.ptype&&_t&e(u.token.pattern)&&u.token.pattern.length>1&&(o[it]("w_"+u.token.pattern)||(n.push({word:""+u.token.pattern,meta:u.name,ci:!!u.ci}),o["w_"+u.token.pattern]=1))}else if(Ae===u.type)E(u.token,n,o,l);else if(We&u.type){a=0,i=u.token.length;do E([c=u.token[a++]],n,o,l);while(i>a&&(Te&c.type&&1>c.min||Re===c.type))}else Te&u.type&&E([u.token[0]],n,o,l);return n}function S(t,n,o,l){for(var r;_t&e(r=n[t]||o[t]);)t=r;return l?t:n[t]||o[t]||t}function R(e,t){return e.length>1?o(t?function(t,n){var o=n[n.length-1],l=e[t];o===l||n.push(l)}:function(t,n){var o=n[n.length-1],l=e[t];Kt.test(l)&&Kt.test(o)&&o===l||n.push(l)},1,e.length-1,[e[0]]):e}function L(n,o,r){var s,a,i,u,c,p,f,m,h,d,x,g,v,$,b,w=!1;if(b=n.modifier?n.modifier:null,m=new String(At(n)),m.pos=0,1===m.length)g=""+n,o[g]||r[g]||(o[g]={type:"simple",tokens:n}),n=g;else{for(s=[],a=[],i="",v=[];m.pos<m.length;)if(h=m[yt](m.pos++),Yt.test(h))if(i.length&&(w?(a.length&&(x=a[a.length-1],g=x+"."+i,p=o[g]||r[g],p||(f=S(x,o,r),r[g]=_t&e(f)?new String(f):l(f),r[g].modifier=i),a[a.length-1]=g),w=!1):"0"===i?(o[lt]||(o[lt]={type:"simple",tokens:0}),a.push(lt)):"^^"===i?(o[Ze]||(o[Ze]={type:"simple",tokens:Le}),a.push(Ze)):"^^1"===i?(o[et]||(o[et]={type:"simple",tokens:Ie}),a.push(et)):"^"===i?(o[tt]||(o[tt]={type:"simple",tokens:Me}),a.push(tt)):"$"===i?(o[nt]||(o[nt]={type:"simple",tokens:je}),a.push(nt)):(o[i]||r[i]||(o[i]={type:"simple",tokens:i}),a.push(i)),i=""),"."===h)a.length&&m.pos<m.length&&!Yt.test(m[yt](m.pos))?w=!0:i+=h;else if('"'===h||"'"===h)u=y(m,h,"\\",1),u.length?(g=""+u,o[g]||(o[g]={type:"simple",tokens:u}),a.push(g)):(o[rt]||(o[rt]={type:"simple",tokens:""}),a.push(rt));else if("["===h)h=m[yt](m.pos+1),"^"===h?m.pos++:h="",u=y(m,"]","\\",0),g="["+h+u+"]",o[g]||(o[g]={type:"simple",tokens:k("^(["+h+u+"])")}),a.push(g);else{if("]"===h){i+=h;continue}if("/"===h)u=y(m,h,"\\",0),d="",u.length&&(m.pos<m.length&&"i"===m[yt](m.pos)&&(m.pos++,d="i"),g="/"+u+"/"+d,o[g]||(o[g]={type:"simple",tokens:k("^("+u+")",{l:0,x:0,i:"i"===d})}),a.push(g));else if("*"===h||"+"===h||"?"===h)a.length?(x=a[a.length-1],g=""+x+h,r[g]||(r[g]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[x]}),a[a.length-1]=g):i+=h;else if("{"===h)a.length?(c=y(m,"}",0,0),c=t(c.split(","),At),c[0].length?c[0]=parseInt(c[0],10)||0:c[0]=0,0>c[0]&&(c[0]=0),2>c.length?c.push(c[0]):c[1].length?c[1]=parseInt(c[1],10)||dt:c[1]=dt,0>c[1]&&(c[1]=0),x=a[a.length-1],g=""+x+["{",c[0],",",isFinite(c[1])?c[1]:"","}"].join(""),r[g]||(r[g]={type:"repeat",repeat:[c[0],c[1]],tokens:[x]}),a[a.length-1]=g):i+=h;else{if("}"===h){i+=h;continue}"&"===h||"!"===h?a.length?(x=a[a.length-1],g=""+x+h,r[g]||(r[g]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[x]}),a[a.length-1]=g):i+=h:"|"===h?(w=!1,a=R(a),a.length>1?(g=""+a.join(" "),r[g]||(r[g]={type:"sequence",tokens:a}),s.push(g)):a.length?s.push(a[0]):i+=h,a=[]):"("===h?(v.push([a,s,i]),a=[],s=[],i=""):")"===h&&(a=R(a),a.length>1?(g=""+a.join(" "),r[g]||(r[g]={type:"sequence",tokens:a}),s.push(g)):a.length&&s.push(a[0]),a=[],s=R(s,1),s.length>1?(g=""+s.join(" | "),r[g]||(r[g]={type:"alternation",tokens:s})):s.length&&(g=s[0]),s=[],$=v.pop(),a=$[0],s=$[1],i=$[2],x=g,g="("+x+")",r[g]||(r[g]=l(S(x,o,r))),a.push(g))}}else i+=h;i.length&&(w?(a.length&&(x=a[a.length-1],g=x+"."+i,p=o[g]||r[g],p||(f=S(x,o,r),r[g]=_t&e(f)?new String(f):l(f),r[g].modifier=i),a[a.length-1]=g),w=!1):"0"===i?(o[lt]||(o[lt]={type:"simple",tokens:0}),a.push(lt)):"^^"===i?(o[Ze]||(o[Ze]={type:"simple",tokens:Le}),a.push(Ze)):"^^1"===i?(o[et]||(o[et]={type:"simple",tokens:Ie}),a.push(et)):"^"===i?(o[tt]||(o[tt]={type:"simple",tokens:Me}),a.push(tt)):"$"===i?(o[nt]||(o[nt]={type:"simple",tokens:je}),a.push(nt)):(o[i]||r[i]||(o[i]={type:"simple",tokens:i}),a.push(i))),i="",a=R(a),a.length>1?(g=""+a.join(" "),r[g]||(r[g]={type:"sequence",tokens:a}),s.push(g)):a.length&&s.push(a[0]),a=[],s=R(s,1),s.length>1?(g=""+s.join(" | "),r[g]||(r[g]={type:"alternation",tokens:s}),n=g):s.length&&(n=s[0]),s=[]}return b&&(o[n]||r[n])&&((o[n]||r[n]).modifier=b),n}function I(l,r,i,u,c,p,f,m,h,k,y){var d,x,g,v,_,O,E,R=null,j=null,M=null;if(Le===l||Ie===l||Me===l||je===l)return new F(l,Le===l?Ze:Ie===l?$T_FBNL$:Me===l?tt:nt,l,j);if(!1===l||0===l)return new F(Ne,lt,0,j);if(""===l)return new F(De,rt,"",j);if(null===l)return new F(ze,ot,vt,j,M);if(St&e(l)&&(g=l,l="NGRAM_"+g.join("_"),u[l]||(u[l]={type:"ngram",tokens:g})),l=""+l,m[l])return m[l];if(_=S(l,i,u),_t&e(_)&&(_=L(_,i,u),_=i[_]||u[_]||null),!_)return null;if(d=_.type?Xe[_.type[kt]().replace(Gt,"")]||ze:ze,j=_.msg||null,M=_.modifier||null,x=_.tokens,ze&d){if(Le===x||Ie===x||Me===x||je===x||!1===x||0===x)return R=new F(x||Ne,l,x||0,j),m[l]=R,R;if(""===x)return R=new F(De,l,"",j),m[l]=R,R;if(null===x)return R=new F(ze,l,vt,j,M),m[l]=R,R;if(!x)return null}if(Re&d)_[it]("action")?"nop"===_.action[0]?_.action[0]=pe:"error"===_.action[0]?_.action[0]=fe:"context-start"===_.action[0]?_.action[0]=xe:"context-end"===_.action[0]?_.action[0]=ge:"hypercontext-start"===_.action[0]?_.action[0]=ve:"hypercontext-end"===_.action[0]?_.action[0]=$e:"push"===_.action[0]?_.action[0]=be:"pop"===_.action[0]?_.action[0]=we:"define"===_.action[0]?_.action[0]=me:"undefine"===_.action[0]?_.action[0]=he:"defined"===_.action[0]?_.action[0]=ke:"notdefined"===_.action[0]?_.action[0]=ye:"unique"===_.action[0]?_.action[0]=de:"indent"===_.action[0]?_.action[0]=qe:"outdent"===_.action[0]&&(_.action[0]=_e):_[it]("nop")?_.action=[pe,_.nop,!!_["in-context"],!!_["in-hypercontext"],!1]:_[it]("error")?_.action=[fe,_.error,!1,!1,!1]:_[it]("context")?_.action=[_.context?xe:ge,_.context,!1,!1,!1]:_[it]("hypercontext")?_.action=[_.hypercontext?ve:$e,_.hypercontext,!1,!1,!1]:_[it]("context-start")?_.action=[xe,_["context-start"],!1,!1,!1]:_[it]("context-end")?_.action=[ge,_["context-end"],!1,!1,!1]:_[it]("hypercontext-start")?_.action=[ve,_["hypcontext-start"],!1,!1,!1]:_[it]("hypercontext-end")?_.action=[$e,_["hypcontext-end"],!1,!1,!1]:_[it]("push")?_.action=[be,_.push,!!_["in-context"],!!_["in-hypercontext"],_.autocomplete]:_[it]("pop")?_.action=[we,_.pop,!!_["in-context"],!!_["in-hypercontext"],!1]:_[it]("define")?_.action=[me,_t&e(_.define)?["*",_.define]:_.define,!!_["in-context"],!!_["in-hypercontext"],_.autocomplete]:_[it]("undefine")?_.action=[he,_t&e(_.undefine)?["*",_.undefine]:_.undefine,!!_["in-context"],!!_["in-hypercontext"],_.autocomplete]:_[it]("defined")?_.action=[ke,_t&e(_.defined)?["*",_.defined]:_.defined,!!_["in-context"],!!_["in-hypercontext"],!1]:_[it]("notdefined")?_.action=[ye,_t&e(_.notdefined)?["*",_.notdefined]:_.notdefined,!!_["in-context"],!!_["in-hypercontext"],!1]:_[it]("unique")?_.action=[de,_t&e(_.unique)?["*",_.unique]:_.unique,!!_["in-context"],!!_["in-hypercontext"],_.autocomplete]:_[it]("indent")?_.action=[qe,_.indent,!!_["in-context"],!!_["in-hypercontext"],!1]:_[it]("outdent")&&(_.action=[_e,_.outdent,!!_["in-context"],!!_["in-hypercontext"],!1]),!1===_.msg&&(j=!1),_.nop&&(_.action[0]=pe),R=new F(Re,l,_.action.slice(),j,M),R.ci=!!_.caseInsensitive||_.ci,m[l]=R;else if(x=s(x),ze&d){E=_.autocomplete?q(_,Nt&e(_.autocomplete)?s(_.autocomplete):x,l,y):null;var N={};if(O="undefined"!=typeof _.combine?_.combine:!!(St&e(_.tokens)),R=new F(ze,l,$(l,x.slice(),r,O,!(!_.caseInsensitive&&!_.ci),p,f,N),j,M,null,E),N.keywords&&(R.keywords=N.keywords.join("|")),m[l]=R,null!=_.except){var D,z,P=s(_.except),C=P.length,T=[];for(D=0;C>D;D++)P[D]&&(z=I(P[D],r,i,u,c,p,f,m,h,k,y),z&&T.push(z));T.length&&(R.except=T)}}else Fe&d?(Pe===d&&w(_,k),R=new F(d,l,b(l,x.slice(),r,p,f),j),R.empty=_[it]("empty")?!!_.empty:!0,R.mline=_[it]("multiline")?!!_.multiline:!0,R.esc=_[it]("escape")?_.escape:!1,R.inter=!!c[l+".inside"],Pe===d&&_.interleave&&h.push(A(R)),M&&(R.modifier=M),m[l]=R):Qe&d&&(Ve===d?m[l]=new F(Ve,l,x,j,M):Ke===d?(v=a(x),R=t(v,function(e,t){return new F(Ke,l+"_NGRAM_"+t,null,j,M)}),m[l]=R,o(function(e){R[e].token=s(n(v[e],function(e,t){return e.concat(I(t,r,i,u,c,p,f,m,h,k,y))},[]))},0,v.length-1)):(He===d||Je===d?R=new F(d,l,null,j,M):Te&d&&St&e(_.repeat)?(R=new F(Te,l,null,j,M),R.min=_.repeat[0],R.max=_.repeat[1]):Ge===d?(R=new F(Ge,l,null,j,M),R.min=0,R.max=1):Be===d?(R=new F(Be,l,null,j,M),R.min=0,R.max=dt):Ue===d?(R=new F(Ue,l,null,j,M),R.min=1,R.max=dt):R=Ae===d?new F(Ae,l,null,j,M):new F(Ce,l,null,j,M),m[l]=R,R.token=s(n(x,function(e,t){return e.concat(I(t,r,i,u,c,p,f,m,h,k,y))},[]))));return m[l]}function j(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=_(t),t.Parser&&t.Parser.length&&o(function l(r,s){var a,i,u,c=s[r];n[c]||(St&e(c)&&(a=c,c="NGRAM_"+a.join("_"),t.Syntax[c]||(t.Syntax[c]={type:"ngram",tokens:a})),i=S(c,t.Lex,t.Syntax),_t&e(i)&&(i=L(i,t.Lex,t.Syntax),i=t.Lex[i]||t.Syntax[i]||null),i&&(n[c]=i,u=i.type?Xe[i.type[kt]().replace(Gt,"")]||ze:ze,Qe&u&&o(l,0,i.tokens.length-1,i.tokens)))},0,t.Parser.length-1,t.Parser),t}function M(t){var o,r,s,a,i,u,c,p,f,m,h,k,y,d;return t.__parsed?t:(o=t.RegExpID||null,s=t.Extra?l(t.Extra):{},a=t.Style?l(t.Style):{},i=null,u=null,c=t.Lex?l(t.Lex):{},p=t.Syntax?l(t.Syntax):{},f={},m={},h={},y={},d={},k=[],r=t.Parser?l(t.Parser):[],t=_({Style:a,Fold:i,Match:u,Lex:c,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:s,__parsed:0}),t.$parser=n(r,function(t,n){var l=I(n,o,c,p,a,f,m,h,k,y,d)||null;return l&&(St&e(l)?t=t.concat(l):t.push(l)),t},[]),t.$interleaved=k&&k.length?k:null,t.$comments=y,t.$autocomplete=d&&d.autocomplete&&d.autocomplete.length?d.autocomplete:null,t.__parsed=1,t)}function N(t,n,o,l,r){var s,a,i=this;s=i.type=t,i.name=n,i.pattern=o,a=i.ptype=l||_t,i.key=r||0,Ee===s?i.key=!1!==r:Se===s?i.pattern[0]=new N(Ee,n+"_Start",o[0],null,!1):vt===a?i.pattern=null:It===a&&(i.pattern=It&e(o)?[o,0]:[o[0],o[1]||0])}function D(t,n,o,l){var r,s,a,i,u,c,p,f,m,h,k,y=t,g=y.type,v=y.pattern,$=y.key;if(Se===g){if(r=y.name,a=v[0],i=v[1],c=D(a,n,o,l))return u=i[c[0]],f=e(u),m=a.pattern[c[0]].ptype,It===m&&Mt&f&&(u.regex_pattern?(p=d(u,c[1]),u=new N(Oe,r+"_End",x(p,u.regex_pattern,{}),It)):(p=$t&f?c[1][u+1]:d(u,c[1]),u=new N(Oe,r+"_End",p,p.length>1?_t:Ot))),u}else if(Ee===g){for(h=0,k=v.length;k>h;h++)if(p=D(v[h],n,o,l))return $?[h,p[1]]:p}else{if(s=y.ptype,vt===s)return!1!==o&&n.end(),[$,""];if(It===s){if(p=v[0].xflags.l?n.match(v[0]):n.slice(n.pos).match(v[0]),p&&0===p.index)return!1!==o&&n.mov(p[v[1]||0].length),[$,v[1]>0?p[v[1]]:p]}else if(Et===s){if(!0===l){p=-1;var b,w;for(k=v.length-1;k>=0;k--)b=n.indexOf(v[yt](k),n.pos),b>-1&&(-1===p||p>b)&&(p=b,w=v[yt](k));if(p>-1)return!1!==o&&(n.pos=p+1),[$,w]}else if(p=n[yt](n.pos)||null,p&&-1<v.indexOf(p))return!1!==o&&n.mov(1),[$,p]}else if(Ot===s){if(!0===l){if(p=n.indexOf(v,n.pos),p>-1)return!1!==o&&(n.pos=p+1),[$,v]}else if(p=n[yt](n.pos)||null,v===p)return!1!==o&&n.mov(1),[$,p]}else if(_t===s)if(k=v.length,!0===l){if(p=n.indexOf(v,n.pos),p>-1)return!1!==o&&(n.pos=p+k),[$,v]}else if(v===n.substr(n.pos,k))return!1!==o&&n.mov(k),[$,v]}return!1}function z(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function F(e,t,n,o,l,r,s,a){var i=this;i.type=e,i.name=t,i.token=n,i.modifier=l||null,i.except=r||null,i.autocompletions=s||null,i.keywords=a||null,i.pos=null,i.msg=!1===o?!1:o||null,i.$msg=null,i.status=0,i.empty=!1,i.ci=!1,i.mline=!0,i.esc=!1,i.inter=!1,i.found=0,i.min=0,i.max=1,i.i0=0,i.$id=null}function P(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null,e.space=null}function A(e,t,n,o){var l=new F(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return l.empty=e.empty,l.ci=e.ci,l.mline=e.mline,l.esc=e.esc,l.inter=e.inter,l.found=e.found,l.min=e.min,l.max=e.max,l.i0=e.i0,t&&(l.status|=se),n&&(l.modifier=n),o&&(l.$id=o),l}function C(e){var t=e.name;return e.$msg?e.$msg:e.status&se?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function T(e,t,n,o,l,r,s){e.status&le&&e.err&&(e.err[""+t+"_"+n+"_"+o+"_"+l+"_"+(r?r.name:"ERROR")]=[t,n,o,l,s||C(r)])}function G(e,t){for(var n=null,o=null;e;){if(t===e.val[0])return o={node:e,nodePrev:e.prev,nodeNext:n,val:e.val[1]};n=e,e=e.prev}return o}function B(e,t,n){return new z([t,n],e)}function U(e,t,n){if(e.stack===t)t=e.stack=new z(n,e.stack);else{for(var o=e.stack;o&&o.prev!==t;)o=o.prev;t=new z(n,t),o&&(o.prev=t)}return t}function Y(e,t){if(null==e)return null;if(t){for(var n=new z(e.val),o=n,l=e;l.prev;)o.prev=new z(l.prev.val),l=l.prev,o=o.prev;return n}return e}function H(e,t,n,o){var l,r,s,a,i,u=1/0,c=null,p=1/0;if(r=t.pos,t.spc(),s=t.pos,l=e.stack,t.pos<t.length){for(i=0;l&&(a=l.val,a.$id===o.$id);){for(;!(Re===a.type||J(a,t,e,n)||(t.pos=a.pos>t.pos?a.pos:t.pos+1,e.stack=l,t.pos>=t.length)););e.stack=l,t.pos<t.length&&u>t.pos?(u=t.pos,c=l,p=i):u===t.pos&&p>i&&(u=t.pos,c=l,p=i),t.pos=s,l=l.prev,i++}u<t.length?(t.pos=u,e.stack=c):(t.end(),e.stack=null)}return s>=r&&t.pos===s}function J(e,t,n,o){if(!e)return!1;var l=e.type,r=Qe&l?Q:Fe&l?W:Re&l?K:V;return r(e,t,n,o)}function K(t,n,o,l){var r,s,a,i,u,c,p,f,m,h,k,y,x,g,v,$,b,w,q=t,_=q.token||null,O=q.ci,E=q.name,S=!(o.status&le);if(q.status=0,q.$msg=null,!_||!l||!l.pos)return!0;if(w=!!(Fe&l.T),pe===_[0]||w&&!l.block)return!0;if(r=_[0],s=_[1],g=_[2],v=_[3],m=_[4],u=q.msg,w?(b=l.block.match||l.block.str,h=l.block.pos[0][0],k=l.block.pos[0][1],y=l.block.pos[0][2],x=l.block.pos[0][3]):(b=l.match||l.str,h=l.pos[0],k=l.pos[1],y=l.pos[2],x=l.pos[3]),ge===r)o.ctx=o.ctx?o.ctx.prev:null;else if(xe===r)o.ctx=new z({symb:null,queu:null},o.ctx);else if($e===r)o.hctx=o.hctx?o.hctx.prev:null;else if(ve===r)o.hctx=new z({symb:null,queu:null},o.hctx);else if(me===r)a=s[1],i=s[0],a=d(a,b,!0),O&&(a=a[kt]()),i+="::"+a,f=v&&o.hctx?G(o.hctx.val.symb,i):g&&o.ctx?G(o.ctx.val.symb,i):o.symb?G(o.symb,i):null,f||(v&&o.hctx?o.hctx.val.symb=B(o.hctx.val.symb,i,[h,k,y,x,i,a,l.type,m,O]):g&&o.ctx?o.ctx.val.symb=B(o.ctx.val.symb,i,[h,k,y,x,i,a,l.type,m,O]):o.symb=B(o.symb,i,[h,k,y,x,i,a,l.type,m,O]));else if(he===r){if(a=s[1],i=s[0],a=d(a,b,!0),O&&(a=a[kt]()),i+="::"+a,v&&o.hctx)f=G(o.hctx.val.symb,i);else if(g&&o.ctx)f=G(o.ctx.val.symb,i);else{if(!o.symb)return!0;f=G(o.symb,i)}f&&(f.nodeNext?f.nodeNext.prev=f.nodePrev:v&&o.hctx?o.hctx.val.symb=o.hctx.val.symb.prev:g&&o.ctx?o.ctx.val.symb=o.ctx.val.symb.prev:o.symb=o.symb.prev)}else if(ke===r){if(a=s[1],i=s[0],a=d(a,b,!0),O&&(a=a[kt]()),i+="::"+a,f=v&&o.hctx?G(o.hctx.val.symb,i):g&&o.ctx?G(o.ctx.val.symb,i):o.symb?G(o.symb,i):null,!f)return!1!==u&&(q.$msg=u?d(u,a,!0):'Undefined "'+a+'"',$=C(q),T(o,h,k,y,x,q,$),q.status|=ae),!1}else if(ye===r){if(a=s[1],i=s[0],a=d(a,b,!0),O&&(a=a[kt]()),i+="::"+a,v&&o.hctx)f=G(o.hctx.val.symb,i);else if(g&&o.ctx)f=G(o.ctx.val.symb,i);else{if(!o.symb)return!0;f=G(o.symb,i)}if(f)return!1!==u&&(q.$msg=u?d(u,a,!0):'Defined "'+a+'"',$=C(q),T(o,f.val[0],f.val[1],f.val[2],f.val[3],q,$),T(o,h,k,y,x,q,$),q.status|=ae),!1}if(S)return!0;if(fe===r)return!u&&_t&e(s)&&(u=s),q.$msg=u?d(u,b,!0):'Error "'+E+'"',T(o,h,k,y,x,q,C(q)),q.status|=ae,!1;if(de===r){if(v){if(!o.hctx)return!0;p=o.hctx.val.symb}else if(g){if(!o.ctx)return!0;p=o.ctx.val.symb}else p=o.symb;if(a=s[1],i=s[0],a=d(a,b,!0),O&&(a=a[kt]()),i+="::"+a,f=G(p,i))return!1!==u&&(q.$msg=u?d(u,a,!0):'Duplicate "'+a+'"',$=C(q),T(o,f.val[0],f.val[1],f.val[2],f.val[3],q,$),T(o,h,k,y,x,q,$),q.status|=ae),!1;v?o.hctx.val.symb=B(o.hctx.val.symb,i,[h,k,y,x,i,a,l.type,m,O]):g?o.ctx.val.symb=B(o.ctx.val.symb,i,[h,k,y,x,i,a,l.type,m,O]):o.symb=B(o.symb,i,[h,k,y,x,i,a,l.type,m,O])}else if(we===r){if(v){if(!o.hctx)return!0;c=o.hctx.val.queu}else if(g){if(!o.ctx)return!0;c=o.ctx.val.queu}else c=o.queu;if(s){if(s=d(s,b),O&&(s=s[kt]()),!c||s!==c.val[0])return!1!==u&&(c?(q.$msg=u?d(u,[c.val[0],s],!0):'Mismatched "'+c.val[0]+'","'+s+'"',$=C(q),T(o,c.val[1],c.val[2],c.val[3],c.val[4],q,$),T(o,h,k,y,x,q,$),c=c.prev):(q.$msg=u?d(u,["",s],!0):'Missing matching "'+s+'"',$=C(q),T(o,h,k,y,x,q,$)),q.status|=ae),v?o.hctx&&(o.hctx.val.queu=c):g?o.ctx&&(o.ctx.val.queu=c):o.queu=c,!1;c=c?c.prev:null}else c=c?c.prev:null;v?o.hctx&&(o.hctx.val.queu=c):g?o.ctx&&(o.ctx.val.queu=c):o.queu=c}else if(be===r&&s){if(v){if(!o.hctx)return!0;c=o.hctx.val.queu}else if(g){if(!o.ctx)return!0;c=o.ctx.val.queu}else c=o.queu;s=d(s,b),O&&(s=s[kt]()),q.$msg=u?d(u,s,!0):'Missing matching "'+s+'"',c=new z([s,h,k,y,x,C(q)],c),v?o.hctx&&(o.hctx.val.queu=c):g?o.ctx&&(o.ctx.val.queu=c):o.queu=c}return!0}function V(e,t,n,o,l){var r,s,a=e,i=a.token,u=a.modifier,c=a.type,p=a.name,f=a.except,m=n.line,h=t.pos,k=null,y=!1;if(a.status&=ue,a.$msg=l?null:a.msg||null,a.pos=t.pos,f&&!l){s=Z(n,t);for(var x=0,g=f.length;g>x;x++)if(r=f[x],a!==r&&ze===r.type&&V(r,t,n,o,1))return a.pos=r.pos,Z(n,t,s),!1}if(Le===c)y=0===n.line;else if(Ie===c)y=n.bline+1===n.line;else if(Me===c)y=t.sol();else if(je===c)t.spc(),t.eol()?y=p:(a.pos=t.pos,t.bck(h));else if(Ne===c)a.status=0,y=!0;else if(De===c){if(null==o.space||t.eol()?t.spc()&&!t.eol()?(a.pos=t.pos,t.bck(h),a.status&se&&(a.status|=ae)):y=!0:a.status&se&&(a.status|=ae),a.status&=ie,!0===y)return y}else vt===i?(t.end(),y=u||p):(k=D(i,t))&&(k=k[1],y=u||p);return l?y:(!1!==y&&(o.T=c,o.id=p,o.type=y,o.str=t.sel(h,t.pos),o.match=k,o.pos=[m,h,m,t.pos]),!y&&a.status&&a.$msg&&(a.$msg=d(a.$msg,p,!0)),y)}function W(e,t,n,o){var l,r,s,a,i,u,c,p,f,m,h,k,y,x,g,v,$,b,w,q,_,O,E=e,S=E.name,R=E.type,L=E.modifier,I=E.token,j=E.mline,M=E.inter,N=M?S+".inside":S,z=E.esc,F=!!z,P="",C="",T="",G="",B=E.$id||S,Y=n.outer,H=Y&&Y[2],K=Y&&Y[1];if(E.status&=ue,E.$msg=E.msg||null,E.pos=t.pos,q=n.line,_=t.pos,Pe===R&&(E.status&=ie),g=E.status&se,s=0,a=0,n.block&&n.block.name===S?(a=1,s=1,x=N,l=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,P=n.block.s,C=n.block.i):!n.block&&(l=D(I,t))&&(a=1,x=S,$=t.pos,p=[q,_],m=[[q,$],[q,$]],f=[q,$],P=t.sel(_,$),C="",
G="",n.block={name:S,end:l,sp:p,ip:m,ep:f,s:P,i:C,e:G}),a){if(w=n.stack,r=vt===l.ptype,v=r||E.empty,M){if(r&&s&&t.sol())return E.status&=ie,n.block=null,!1;if(!s)return $=t.pos,o.T=R,o.id=S,o.type=L||x,o.str=t.sel(_,$),o.match=null,o.pos=[q,_,q,$],U(n,w,A(E,g,0,B)),L||x}if($=t.pos,i=K?r&&t.eol():D(l,t),c=j,u=0,i)x=r?N:S,G=t.sel($,t.pos);else if(b=t.pos,k=!1,K||F||Et!==l.ptype&&Ot!==l.ptype&&_t!==l.ptype){for(;!t.eol();){if(K){if(J(K,t,H,o)){if(t.pos>b){r&&(i=1);break}return!0}if(r){y=t.nxt(1),T+=y;continue}}if($=t.pos,!k&&D(l,t)){M&&t.pos>$&&$>b?(x=N,t.bck($),u=1):(x=S,i=1),G=t.sel($,t.pos);break}y=t.nxt(1),T+=y,k=F&&!k&&z===y,$=t.pos}r&&t.eol()&&(i=1)}else(O=D(l,t,!0,!0))?M&&t.pos>$+O[1].length?(x=N,t.mov(-O[1].length),u=1,T=t.sel($,t.pos)):(x=S,i=1,T=t.sel($,t.pos-O[1].length),G=O[1]):(t.end(),x=N,u=1,T=t.sel($,t.pos));return c=j||F&&k,C+=T,m[1]=[q,$],f=[q,t.pos],i&&!v&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(i||!c&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=C,n.block.e=G,U(n,w,A(E,g,0,B))),o.T=R,o.id=S,o.type=L||x,o.str=t.sel(_,t.pos),o.match=null,o.pos=[q,_,f[0],f[1]],E.pos=t.pos,n.block||(h=P+C+G,o.block={str:h,match:[h,C,P,G],part:[h,P,C,G],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),L||x)}return E.status&&E.$msg&&(E.$msg=d(E.$msg,S,!0)),!1}function Q(e,t,n,o){var l,r,s,a,i,u,p,f,m,h,k,y,d,x,g,v=e,$=v.type,b=(v.name,v.token),w=b.length,q=v.modifier;if(v.status&=ue,v.$msg=v.msg||null,f=t.pos,m=n.stack,v.pos=t.pos,u=0,p=0,Ve===$){v.status&=ue;var _=new String(b[0]),O=n.stack?n.stack.val:null;return _.subgrammar=1,_.next=O?new F(He,O.name,[O]):null,_.required=O?O.status&se:0,_}if(Ae===$){for(d=c(),v.status|=se,y=[],g=Z(n,t),k=0,h=k;w>h;h++){if(l=A(b[h],1,q,d),r=J(l,t,n,o),v.pos=l.pos,l.status&se&&(u++,y.push(C(l))),!1!==r)return r;l.status&ae&&(p++,Z(n,t,g))}return u>0?v.status|=se:v.status&=ie,w===p&&u>0?v.status|=ae:v.status&=ue,v.status&&!v.$msg&&y.length&&(v.$msg=y.join(" | ")),!1}if(We&$){x=!!($&Ce),d=v.$id||c(),x?v.status|=se:v.status&=ie,g=Z(n,t),k=0;do l=A(b[k++],x,q,d),r=J(l,t,n,o);while(w>k&&(!0===r&&Ye&l.type||!1===r&&!(l.status&se)));if(v.pos=l.pos,!1!==r){if(!0!==r||Ne!==l.type)for(h=w-1;h>=k;h--)m=U(n,m,A(b[h],1,q,d));return r.subgrammar&&w>k&&(r.next=new F(He,b[k].name,[b[k]]),r.required=b[k].status&se),r}return l.status&ae?(x?v.status|=ae:v.status&=ue,Z(n,t,g)):x&&l.status&se&&(v.status|=ae),v.status&&!v.$msg&&(v.$msg=C(l)),!1}if(Ye&$)return Ve&b[0].type?!0:(g=Z(n,t,null,!1),r=J(A(b[0],0),t,n,o),Z(n,t,g),Je===$?!1===r:!1!==r);for(d=v.$id||c(),s=v.found,a=v.min,i=v.max,v.status=0,y=[],g=Z(n,t),h=0;w>h;h++){if(l=A(b[h],1,q,d),r=J(l,t,n,o),v.pos=l.pos,!1!==r){if(++s,i>=s)return v.found=s,U(n,m,A(v,0,0,c())),v.found=0,r;break}l.status&se&&(u++,y.push(C(l))),l.status&ae&&Z(n,t,g)}return a>s&&(v.status|=se),(s>i||a>s&&u>0)&&(v.status|=ae),v.status&&!v.$msg&&y.length&&(v.$msg=y.join(" | ")),!1}function X(e,t){var n=this;n.id=e?p("state"):"state",t instanceof X?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=Y(t.stack,!1),n.token=t.token,n.token2=t.token2,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new X(e,t.outer[2])]:null,n.queu=t.queu||null,n.symb=t.symb||null,n.ctx=t.ctx?new z({symb:t.ctx.val.symb,queu:t.ctx.val.queu},t.ctx.prev):null,n.hctx=t.hctx?new z({symb:t.hctx.val.symb,queu:t.hctx.val.queu},t.hctx.prev):null,n.err=t.err||null,n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.token2=null,n.block=null,n.outer=null,n.queu=null,n.symb=null,n.ctx=null,n.hctx=null,n.err=n.status&le?{}:null,n.$eol$=!0,n.$blank$=!0)}function Z(e,t,n,o){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===o&&(e.status=0),n)}function ee(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.token2=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.hctx=null,e.err=null}function te(e,t,n){var o=new String(e);return o.start=t||0,o.pos=n||0,o.sol=function(){return 0===o.pos},o.eol=function(){return o.pos>=o.length},o.end=function(){return o.pos=o.length,o},o.mov=function(e){return o.pos=0>e?mt(0,o.pos+e):ht(o.length,o.pos+e),o},o.bck=function(e){return o.pos=mt(0,e),o},o.sft=function(){return o.start=o.pos,o},o.nxt=function(e,t){var n,l,r="";if(!0===e){for(t=t||te.$NONSPC$;o.pos<o.length&&t.test(n=o[yt](o.pos++));)r+=n;return r.length?r:null}for(e=e||1,l=0;l++<e&&o.pos<o.length;)r+=o[yt](o.pos++);return r},o.cur=function(e){var t=o.slice(o.start,o.pos);return e&&(o.start=o.pos),t},o.sel=function(e,t){return o.slice(e,t)},o.spc=function(e,t){var n;return(n=o.slice(o.pos).match(t||te.$SPC$))?(!1!==e&&o.mov(n[0].length),n[0]):void 0},o}function ne(e,t){var n=function o(e){var t={Mode:o,compiled:!0,aliases:o.aliases||null,case_insensitive:!1,relevance:0,contains:[],parent:null,keywords:null,className:null,$tokens:null,$token:null,beginRe:null,endRe:null,lexemesRe:null,terminators:null,submode:function(e,t){o.submode(e,t.Mode)}},n={lastIndex:0,exec:function(e){var n=null;return t.$token&&(n=[t.$token.token],n.index=0,this.lastIndex=n[0].length),n}},l={lastIndex:0,exec:function(e){var n=null;return t.$token&&!t.$token.ret&&(n=[t.$token.token],n.index=0,this.lastIndex=n[0].length,t.$token.ret=1),n}},r={_str:null,lastIndex:0,exec:function(e){var n=null,o=this;return e!==o._str?(o._str=e,o.lastIndex=o.lastIndex||0,t.$tokens=t.Mode.$parser.parse(e,oe|le|re).tokens,t.$token=t.$tokens.shift(),t.$token.ret=0,t.parent=t,null===t.$token.type?t.keywords=null:(t.keywords={},t.keywords[t.$token.token]=[t.$token.type,1]),n=[t.$token.token],n.index=o.lastIndex,o.lastIndex+=n[0].length):t.$tokens&&t.$tokens.length?(o.lastIndex=o.lastIndex||0,t.$token=t.$tokens.shift(),t.$token.ret=0,t.parent=t,null===t.$token.type?t.keywords=null:(t.keywords={},t.keywords[t.$token.token]=[t.$token.type,1]),n=[t.$token.token],n.index=o.lastIndex,o.lastIndex+=n[0].length):(o._str=null,o.lastIndex=0,t.$tokens=null,t.$token=null,t.parent=null,t.keywords=null),n}};return t.beginRe=n,t.endRe=n,t.lexemesRe=l,t.terminators=r,t};return n.$id=p("highlightjs_grammar_mode"),n.$parser=new Qt.Parser(M(e)),n.submode=function(e,t){n.$parser.subparser(e,t.$parser)},n.dispose=function(){n.$parser&&n.$parser.dispose(),n.$parser=null},n.aliases=null,n}var oe=1,le=2,re=32,se=4,ae=8,ie=~se,ue=~ae,ce=se|ae,pe=0,fe=4,me=8,he=9,ke=10,ye=11,de=12,xe=16,ge=17,ve=18,$e=19,be=32,we=33,qe=128,_e=129,Oe=2,Ee=4,Se=8,Re=4,Le=8,Ie=9,je=16,Me=32,Ne=128,De=256,ze=512,Fe=1024,Pe=1025,Ae=2048,Ce=4096,Te=8192,Ge=8193,Be=8194,Ue=8195,Ye=16384,He=Ye,Je=16385,Ke=32768,Ve=65536,We=Ce|Ke,Qe=Ae|Ce|Te|Ye|Ke|Ve,Xe={action:Re,simple:ze,block:Fe,comment:Pe,subgrammar:Ve,alternation:Ae,sequence:Ce,repeat:Te,zeroorone:Ge,zeroormore:Be,oneormore:Ue,positivelookahead:He,negativelookahead:Je,ngram:Ke},Ze="$|SOF|$",et="$|NONBLANK|$",tt="$|SOL|$",nt="$|EOL|$",ot="$|ENDLINE|$",lt="$|EMPTY|$",rt="$|NONSPACE|$",st=void 0,at="prototype",it="hasOwnProperty",ut="propertyIsEnumerable",ct=Object[at],pt=ct.toString,ft=Object.create,mt=Math.max,ht=Math.min,kt="toLowerCase",yt="charAt",dt=1/0,xt=4,gt=8,vt=16,$t=32,bt=33,wt=34,qt=64,_t=128,Ot=129,Et=130,St=256,Rt=512,Lt=1024,It=2048,jt=4096,Mt=_t|$t,Nt=_t|St,Dt=It|St,zt=_t|St|It,Ft={"[object Number]":$t,"[object String]":_t,"[object Array]":St,"[object RegExp]":It,"[object Date]":jt,"[object Function]":Lt,"[object Object]":Rt},Pt=/^\s+|\s+$/g,At=String[at].trim?function(e){return e.trim()}:function(e){return e.replace(Pt,"")},Ct=function(e,t){return t.length-e.length},Tt=/\r\n|\r|\n/g,Gt=/[\-_]/g,Bt=0,Ut=/([.*+?^${}()|[\]\/\\\-])/g,Yt=/^([.!&\[\]{}()*+?\/|'"]|\s)/,Ht="(\\s|\\W|$)",Jt=/(l?i?l?)x(l?i?l?)$/,Kt=/[*+]$/;X.prototype.toString=function(){var e=this;return e.id+"_"+e.line+"_"+e.bline+"_"+(e.block?e.block.name:"0")},te.$SPC$=/^[\s\u00a0]+/,te.$NONSPC$=/[^\s\u00a0]/,te.$NOTEMPTY$=/\S/,te.$SPACE$=/^\s*/;var Vt=m({constructor:function(e,t,n){var o=this;o.$grammar=e,o.$DEF=t||null,o.$ERR=n||null,o.DEF=o.$DEF,o.ERR=o.$ERR,o.$folders=[],o.$matchers=[],o.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){if(t.token2){var o=t.token2[0];return e.pos=t.token2[1],e.sft(),t.token=t.token2[3],t.$eol$=e.eol(),t.$blank$=t.$blank$&&(t.token2[2]||t.$eol$),t.token2=null,o}var l,r,s,a,i,u,c,p,f,m,h,k,y,d,x,g,v,$,b=this,w=b.$grammar,q=w.Style,_=b.DEF,O=b.ERR,o={},E=b.$n$,S=b.$t$,R=b.$v$,L=w.$interleaved,I=w.$parser,j=I.length,M=L?L.length:0,N=t.outer,D=N&&N[2],z=N&&N[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,a=t.line,i=e.pos,m=!1,k=!0,h=!1,y=!1,N&&b===N[0]){if(o[E]=null,o[S]=_,o[R]=null,z){if(s=new P,J(z,e,D,s))return t.outer=null,{parser:b,state:D};for(e.nxt(1);!e.eol();){if(J(z,e,D,s)){if(e.pos>i)break;return t.outer=null,{parser:b,state:D}}e.nxt(1)}}else e.spc(),e.eol()?y=!0:e.end();return o[R]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(y||t.$eol$),o}if(t.stack&&je===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||null==t.block)&&e.spc()){if(t.stack&&Ve===t.stack.val.type)return e.bck(i),l=t.stack.val,t.stack=t.stack.prev,m=J(l,e,t,s),d=""+m,b.$subgrammars[d]?(x=b.$subgrammars[d],g=new X(1,n[d]?n[d]:t.status),D=t):(x=b,g=new X,D=t),g.outer=[b,m.next,D],{parser:x,state:g,toInner:d};k=!0,y=!0}if(o[E]=null,o[S]=_,o[R]=null,k)for(s=new P,y&&(s.space=[i,e.pos],e.sft()),u=0;k&&(t.stack||j>u)&&!e.eol();){if(p=e.pos,f=t.stack,z){if(e.spc(),J(z,e,D,s))return s.space||e.pos>p?(s.space&&(e.start=s.space[0],e.pos=s.space[1]),o[R]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,o):(t.outer=null,{parser:N[0],state:D,fromInner:t});e.bck(p)}if(v=!1,M&&!t.block)for(c=0;M>c;c++)if(l=L[c],m=J(l,e,t,s),!1!==m){v=!0;break}if(k&&!v){if(!t.stack&&u>=j)break;t.stack?(l=t.stack.val,t.stack=t.stack.prev):l=I[u++],m=J(l,e,t,s)}if(!1===m){if(l.status&ce){t.token=l,y=H(t,e,s,l)||y,h=!0,k=!1;break}}else{if(m.subgrammar)return d=""+m,b.$subgrammars[d]?(x=b.$subgrammars[d],g=new X(1,n[d]?n[d]:t.status),D=t):(x=b,g=new X,D=t),g.outer=[b,m.next,D],s.space?(t.token2=[{parser:x,state:g,toInner:d},e.pos,y,t.token],t.token=null,e.start=s.space[0],e.pos=s.space[1],o[R]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,o):{parser:x,state:g,toInner:d};if(t.stack&&t.stack.prev&&e.eol()&&Fe&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(c=t.stack.prev;c&&Re===c.val.type;)r=c,c=c.prev,$=K(r,e,t,s),r.status&ae?t.$actionerr$=!0:$&&!0!==m&&r.modifier&&(m=r.modifier);else if(t.stack&&Re===t.stack.val.type)for(;t.stack&&Re===t.stack.val.type;)r=t.stack.val,t.stack=t.stack.prev,$=K(r,e,t,s),r.status&ae?t.$actionerr$=!0:$&&!0!==m&&r.modifier&&(m=r.modifier);if(!0!==m){k=!1;break}}}return k&&(s.space?(e.start=s.space[0],e.pos=s.space[1],m=!1,s.space=null):e.nxt(1)),o[R]=e.cur(1),!1!==m?(m=m?q[m]||_:_,o[E]=l?l.name:null):h?(m=O,t.status&le&&T(t,a,i,a,e.pos,l)):m=_,o[S]=m,s.space&&(t.token2=[o,e.pos,y,t.token],t.token=null,e.start=s.space[0],e.pos=s.space[1],o={},o[E]=null,o[S]=_,o[R]=e.cur(1),y=!0),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(y||t.$eol$),o},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n,o){if(o=o||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)o.push(t.parser.get(e,t));return o},parse:function(e,t){var n,l,r,s,a,i,u=(e||"").split(Tt),c=u.length,p=null;if(t=t||oe,r=!!(t&le),s=!!(t&oe),l={parser:this,state:new X(0,t),inner:{}},l.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,c-2),s?p=o(t&re?function(e,t){l.parser.tokenize(te(u[e]),l,e,t)}:function(e,t){t.push(l.parser.tokenize(te(u[e]),l,e))},0,c-1,[]):o(function(e){var t=te(u[e]);if(t.eol())l.state.line++,l.state.$blank$&&l.state.bline++;else for(;!t.eol();)l.parser.get(t,l)},0,c-1),n=l.state,r&&n.queu)for(;n.queu;)a=n.queu.val,n.queu=n.queu.prev,T(n,a[1],a[2],a[3],a[4],null,a[5]);return i=s&&r?{tokens:p,errors:n.err}:s?p:n.err,ee(n),l=n=null,i},autocompletion:function(e,t,n){var o,l,r=e.stack,s={},a=n?O(e):null,i=E([e.token],[],s,a);for(t=t||0;r;){if(o=r.val,l=o.type,Te&l){if(i=E([o],i,s,a),0<o.min&&t<i.length)break}else if((ze===l||Ae===l||We&l)&&(i=E([o],i,s,a),t<i.length))break;r=r.prev}return a&&a.length?a.concat(i):i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[it](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Wt=m(Vt,{constructor:function(e,t){var n=this;Vt.call(n,e,null,null),n.DEF=t||n.$DEF,n.ERR=n.$ERR},tokenize:function(e,n,o,l){var r,s=this,a=[],i=null,u=Array.prototype.push,c=function(e){return e.type=s.$DEF,e};if(l=l||[],e.eol())n.state.line++,n.state.$blank$&&n.state.bline++;else for(;!e.eol();)r=n.parser.get(e,n),n.state.$actionerr$?(a.length&&u.apply(l,t(a,c)),r.type=s.$DEF,l.push(r),a.length=0,i=null):(i!==r.name&&(a.length&&u.apply(l,a),a.length=0,i=r.name),a.push(r));return a.length&&u.apply(l,a),a.length=0,i=null,l}}),Qt={VERSION:"4.2.0",clone:l,extend:r,pre_process:j,parse:M,getMode:ne,Parser:Wt};return Qt});
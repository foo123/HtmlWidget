/**
*
*   HighlightJSGrammar
*   @version: 4.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight language for HighlightJS
*   https://github.com/foo123/highlightjs-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";var r;"object"==typeof module&&module.exports?module.exports=n.call(e,{}):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e,{}))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(){return n.call(e,{})}):t in e||(e[t]=r=n.call(e,{}))&&"function"==typeof define&&define.amd&&define(function(){return r})}(this,"HighlightJSGrammar",function(e){"use strict";function t(e){var t=0;return null===e?t=cn:!0===e||!1===e||e instanceof Boolean?t=gn:Wt===e?t=pn:(t=qn[tn.call(e)]||un,t=fn===t||e instanceof Number?isNaN(e)?hn:isFinite(e)?fn:mn:kn===t||e instanceof String?1===e.length?yn:kn:dn===t||e instanceof Array?dn:vn===t||e instanceof RegExp?vn:wn===t||e instanceof Date?wn:xn===t||e instanceof Function?xn:bn===t?bn:un),t}function n(e,t,n,r){var o,s,l,i,a,u,p=e.length;if(arguments.length<4&&(r=p-1),0>r&&(r+=p),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,i=15&l,a=1&i,u=new Array(l),a&&(u[0]=t(e[n],n,n,r)),o=a;i>o;o+=2)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r);for(o=i;l>o;o+=16)s=n+o,u[o]=t(e[s],s,n,r),u[o+1]=t(e[s+1],s+1,n,r),u[o+2]=t(e[s+2],s+2,n,r),u[o+3]=t(e[s+3],s+3,n,r),u[o+4]=t(e[s+4],s+4,n,r),u[o+5]=t(e[s+5],s+5,n,r),u[o+6]=t(e[s+6],s+6,n,r),u[o+7]=t(e[s+7],s+7,n,r),u[o+8]=t(e[s+8],s+8,n,r),u[o+9]=t(e[s+9],s+9,n,r),u[o+10]=t(e[s+10],s+10,n,r),u[o+11]=t(e[s+11],s+11,n,r),u[o+12]=t(e[s+12],s+12,n,r),u[o+13]=t(e[s+13],s+13,n,r),u[o+14]=t(e[s+14],s+14,n,r),u[o+15]=t(e[s+15],s+15,n,r);return u}function r(e,t,n,r,o){var s,l,i,a,u,p=e.length,c=n;if(arguments.length<5&&(o=p-1),0>o&&(o+=p),arguments.length<4&&(r=0),r>o)return c;if(r===o)return t(c,e[r],r);for(i=o-r+1,a=15&i,u=1&a,u&&(c=t(c,e[r],r)),s=u;a>s;s+=2)l=r+s,c=t(t(c,e[l],l),e[l+1],l+1);for(s=a;i>s;s+=16)l=r+s,c=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(c,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return c}function o(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,s,l=n-t+1,i=15&l,a=1&i;for(a&&e(t,r,t,n),o=a;i>o;o+=2)s=t+o,e(s,r,t,n),e(++s,r,t,n);for(o=i;l>o;o+=16)s=t+o,e(s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n),e(++s,r,t,n);return r}function s(e,n){var r,o,l,i,a=t(e),u=0;if(fn===t(n)?n>0?(u=n,n=!0):n=!1:n=!1!==n,bn===a){o={};for(l in e)e[Xt](l)&&e[Zt](l)&&(r=t(e[l]),o[l]=bn===r?n?s(e[l],u>0?u-1:n):e[l]:dn===r?n?s(e[l],u>0?u-1:n):e[l].slice():wn===r?new Date(e[l]):kn&r?e[l].slice():fn&r?0+e[l]:e[l])}else if(dn===a)for(i=e.length,o=new Array(i),l=0;i>l;l++)r=t(e[l]),o[l]=bn===r?n?s(e[l],u>0?u-1:n):e[l]:dn===r?n?s(e[l],u>0?u-1:n):e[l].slice():wn===r?new Date(e[l]):kn&r?e[l].slice():fn&r?0+e[l]:e[l];else o=wn===a?new Date(e):kn&a?e.slice():fn&a?0+e:e;return o}function l(){var e,n,r,o,i,a,u,p,c,f,m=arguments,h=m.length;if(1>h)return null;for(n=s(m[0]),r=1;h>r;r++)if(e=m[r])for(o in e)if(e[Xt](o)&&e[Zt](o))if(n[Xt](o)&&n[Zt](o)){if(c=t(n[o]),f=t(e[o]),bn===c&&bn===f)n[o]=l(n[o],e[o]);else if(dn===c&&dn===f){if(u=n[o],p=e[o],a=p.length,!a)continue;if(u.length)for(i=0;a>i;i++)0>u.indexOf(p[i])&&u.push(p[i]);else n[o]=p.slice()}}else n[o]=s(e[o]);return n}function i(e,n){return n||dn!==t(e)?[e]:e}function a(e,n){return e=i(e),(n||dn!==t(e[0]))&&(e=[e]),e}function u(e,n){return kn&t(n)&&kn&t(e)&&n.length&&n.length<=e.length&&n===e.substr(0,n.length)}function p(e,t,n){return n?e[t]=Wt:delete e[t],e}function c(e){return(e||"id_")+ ++Mn}function f(e){return(e||"uuid")+"_"+ ++Mn+"_"+(new Date).getTime()}function m(){var e,n,r,o,s,l,i=arguments,a=i.length;for(e=i[0]||{},s=1;a>s;s++)if(n=i[s],bn===t(n))for(o in n)n[Xt](o)&&n[Zt](o)&&(r=n[o],l=t(r),e[o]=fn&l?0+r:wn&l?new Date(r):Sn&l?r.slice():r);return e}function h(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[Xt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[Qt]=m(nn(e[Qt]),t),n[Qt][o]=n,n}function g(e){return e.replace(Nn,"\\$1")}function k(e,t){return new RegExp(e,t||"")}function y(e,t,n,r){var o,s,l,i,a=e.pos,u=e.length,p="",c=!!n;if(c){for(r=!!r,s=!1,i=0;u>a&&(o=e[ln](a++),t!==o||s);)l=n===o,s=!s&&l,r?(l&&i++,(!l||2&i)&&(p+=o,i=0)):p+=o;2&i&&(p+=n)}else for(;u>a&&(o=e[ln](a++),t!==o);)p+=o;return e.pos=a,p}function $(e,n,r,o){var s,l,i,a,u,p=!0===r?0:1,c=o?"\\":"$",f=o?92:36;for(kn&t(n)&&(o&&(n=g(n)),n=[n,n,n],p=0),l=e.length,u="",s=0;l>s;)i=e[ln](s),l>s+1&&c===i?(a=e.charCodeAt(s+1),f===a?(u+=c,s+=2):a>=48&&57>=a?(u+=n[p+a-48]||"",s+=2):(u+=i,s+=1)):(u+=i,s+=1);return u}function d(e,n,r,o){if(!e||(fn|vn)&t(e))return e;var s,l=n?n.length||0:0,i="";if(kn&t(o)?i=o:o&&(i=zn),l&&n===e.substr(0,l)){var a,u,p,s,c,f=e.substr(l),m=f[ln](0),h="";for(s=f.length;s--&&(c=f[ln](s),m!==c);)"i"===c.toLowerCase()&&(h="i");return a=f.substring(1,s),u="^("+a+")",r[u]||(p=k(u,h),r[u]=p),r[u]}return i?(u="^("+g(e)+")"+i,r[u]||(p=k(u,h),r[u]=p),r[u]):e}function b(e,r,o){var s,l="";return kn&t(r)?l=r:r&&(l=zn),s=n(e.sort(In),g).join("|"),[k("^("+s+")"+l,o?"i":""),1]}function x(e,n,r,o){var s=t(n);if(fn===s)return n;if(o[e])return o[e];r=r||0;var l,i=0;return n&&n.isCharList&&(i=1,p(n,"isCharList")),l=cn===s?new M(kt,e,n,cn,r):yn===s?new M(kt,e,n,yn,r):On&s?new M(kt,e,n,vn,r):kn&s?new M(kt,e,n,i?$n:kn,r):n,o[e]=l}function v(e,n,r,o,s,l,a,p){if(a[e])return a[e];var c,f,m,h,g,k,y,$=0,w=0,_=1,S=kn&t(o)?!0:!!o;if(c=i(n),m=c.length,1===m)y=x(e,d(c[0],r,l,o),0,a);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)g=t(c[f]),k=t(c[m-1-f]),(yn!==g||yn!==k)&&(_=0),dn&g||dn&k?$=1:(vn&g||vn&k||u(c[f],r)||u(c[m-1-f],r))&&(w=1);if(_&&!S)c=c.slice().join(""),c.isCharList=1,y=x(e,c,0,a);else if(!S||$||w)if($||w){for(f=0;m>f;f++)c[f]=dn&t(c[f])?v(e+"_"+f,c[f],r,o,s,l,a):x(e+"_"+f,d(c[f],r,l),f,a);y=m>1?new M(yt,e,c):c[0]}else{for(p&&(p.keywords=i(n).slice()),c=c.sort(In),f=0;m>f;f++)c[f]=x(e+"_"+f,d(c[f],r,l),f,a);y=m>1?new M(yt,e,c):c[0]}else p&&(p.keywords=i(n).slice()),y=x(e,b(c,o,s),0,a)}return a[e]=y}function w(e,n,r,s,l){if(l[e])return l[e];var i=a(n),p=[],c=[];return o(function(n){var o,a,f,m;o=x(e+"_0_"+n,d(i[n][0],r,s),n,l),i[n].length>1?(f=u(i[n][1],r),m=f&&Pn.test(i[n][1]),vn!==o.ptype||kn!==t(i[n][1])||!m&&f?a=x(e+"_1_"+n,d(i[n][1],r,s),n,l):m?(a=new String(i[n][1]),a.regex_pattern=r):a=i[n][1]):a=o,p.push(o),c.push(a)},0,i.length-1),l[e]=new M($t,e,[p,c])}function _(e,t){var n=a(e.tokens.slice());o(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],s=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,s]))},0,n.length-1)}function S(e,t,r,o){var s=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),i=n(t,function(e){return{word:e,meta:s,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(i),i}function O(e){e.Lex||(e.Lex={}),e.Syntax||(e.Syntax={});var n,r,o,s,i,a,u,c,f,m,h,g=e.Lex,k=e.Syntax,y=[g,k],$=y.length;for(h=0;$>h;){m=y[h++];for(o in m)m[Xt](o)&&(n=o.split(":"),r=n[1]&&Rn(n[1]).length?Rn(n[1]):null,n=Rn(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],p(m,o),r&&(r=r[sn](),s=m[n],i=t(s),bn===i?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=s):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=s):"action"===r&&kn===i?m[n][s]=!0:m[n].tokens=s))),g===m&&(En&t(m[n])&&(m[n]={type:"simple",tokens:m[n]}),s=m[n],s.type&&(c=s.type=s.type[sn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\"))))}m=g;for(n in m)if(m[Xt](n))for(s=m[n];s.extend;)a=s.extend,p(s,"extend"),u=g[a],u&&(En&t(u)&&(u=g[a]={type:"simple",tokens:u}),s=l(u,s));m=g;for(n in m)m[Xt](n)&&(s=m[n],s.type?(c=s.type=s.type[sn](),"line-block"===c?(s.type="block",s.multiline=!1,s.escape=!1):"escaped-line-block"===c?(s.type="block",s.multiline=!1,s.escape="\\"):"escaped-block"===c&&(s.type="block",s.multiline=!0,s.escape="\\")):s["escaped-line-block"]?(s.type="block",s.multiline=!1,s.escape||(s.escape="\\"),s.tokens=s["escaped-line-block"],p(s,"escaped-line-block")):s["escaped-block"]?(s.type="block",s.multiline=!0,s.escape||(s.escape="\\"),s.tokens=s["escaped-block"],p(s,"escaped-block")):s["line-block"]?(s.type="block",s.multiline=!1,s.escape=!1,s.tokens=s["line-block"],p(s,"line-block")):s.comment?(s.type="comment",s.escape=!1,s.tokens=s.comment,p(s,"comment")):s.block?(s.type="block",s.tokens=s.block,p(s,"block")):s.simple?(s.type="simple",s.tokens=s.simple,p(s,"simple")):s.nop?(s.type="action",s.action=["nop",s.nop,!1],s.nop=!0):s.error?(s.type="action",s.action=["error",s.error,!!s["in-context"]],p(s,"error")):s[Xt]("context")?(s.type="action",s.action=[s.context?"context-start":"context-end",s.context,!!s["in-context"]],p(s,"context")):s.indent?(s.type="action",s.action=["indent",s.indent,!!s["in-context"]],p(s,"indent")):s.outdent?(s.type="action",s.action=["outdent",s.outdent,!!s["in-context"]],p(s,"outdent")):s.unique?(s.type="action",s.action=["unique",kn&t(s.unique)?["_DEFAULT_",s.unique]:s.unique,!!s["in-context"]],p(s,"unique")):s.push?(s.type="action",s.action=["push",s.push,!!s["in-context"]],p(s,"push")):s[Xt]("pop")?(s.type="action",s.action=["pop",s.pop,!!s["in-context"]],p(s,"pop")):s.type="simple","action"===s.type?s.ci=!(!s.caseInsesitive&&!s.ci):"block"===s.type||"comment"===s.type?(s.multiline=s[Xt]("multiline")?!!s.multiline:!0,kn&t(s.escape)||(s.escape=!1)):"simple"===s.type&&(s.meta=s.autocomplete&&kn&t(s.meta)?s.meta:null,s.ci=!(!s.caseInsesitive&&!s.ci)));m=k;for(n in m)m[Xt](n)&&(s=m[n],bn!==t(s)||s.type?s.type&&(c=s.type=s.type[sn](),"group"===c&&s.match?(i=t(s.match),kn&i?(f=s.match[sn](),"alternation"===f||"either"===f?(s.type="alternation",p(s,"match")):"sequence"===f||"all"===f?(s.type="sequence",p(s,"match")):"zeroorone"===f?(s.type="zeroOrOne",p(s,"match")):"zeroormore"===f?(s.type="zeroOrMore",p(s,"match")):"oneormore"===f?(s.type="oneOrMore",p(s,"match")):(s.type="sequence",p(s,"match"))):dn&i&&(s.type="repeat",s.repeat=s.match,p(s,"match"))):"either"===c?s.type="alternation":"all"===c?s.type="sequence":"lookahead"===c?s.type="positiveLookahead":"grammar"===c&&(s.type="subgrammar"),"subgrammar"!==s.type||s.tokens||(s.tokens=n)):s.ngram||s["n-gram"]?(s.type="ngram",s.tokens=s.ngram||s["n-gram"],s["n-gram"]?p(s,"n-gram"):p(s,"ngram")):s.sequence||s.all?(s.type="sequence",s.tokens=s.sequence||s.all,s.all?p(s,"all"):p(s,"sequence")):s.alternation||s.either?(s.type="alternation",s.tokens=s.alternation||s.either,s.either?p(s,"either"):p(s,"alternation")):s.zeroOrOne?(s.type="zeroOrOne",s.tokens=s.zeroOrOne,p(s,"zeroOrOne")):s.zeroOrMore?(s.type="zeroOrMore",s.tokens=s.zeroOrMore,p(s,"zeroOrMore")):s.oneOrMore?(s.type="oneOrMore",s.tokens=s.oneOrMore,p(s,"oneOrMore")):s.positiveLookahead||s.lookahead?(s.type="positiveLookahead",s.tokens=s.positiveLookahead||s.lookahead,s.lookahead?p(s,"lookahead"):p(s,"positiveLookahead")):s.negativeLookahead?(s.type="negativeLookahead",s.tokens=s.negativeLookahead,p(s,"negativeLookahead")):(s.subgrammar||s.grammar)&&(s.type="subgrammar",s.tokens=s.subgrammar||s.grammar,s.subgrammar?p(s,"subgrammar"):p(s,"grammar")));return e}function E(e,n,r){if(r=r||{},n=n||[],!e||!e.length)return n;var o,s,l,i,a,u,p;for(o=0,s=e.length;s>o;o++)if(a=e[o])if(Ot===a.type)if(a.autocompletions)for(l=0,i=a.autocompletions.length;i>l;l++)p=a.autocompletions[l],r[Xt]("w_"+p.word)||(n.push(p),r["w_"+p.word]=1);else kn===a.token.ptype&&kn&t(a.token.pattern)&&a.token.pattern.length>1&&(r[Xt]("w_"+a.token.pattern)||(n.push({word:""+a.token.pattern,meta:a.name,ci:!!a.ci}),r["w_"+a.token.pattern]=1));else if(Lt===a.type)E(a.token,n,r);else if(At&a.type){l=0,i=a.token.length;do E([u=a.token[l++]],n,r);while(i>l&&(It&u.type&&1>u.min||dt===u.type))}else It&a.type&&E([a.token[0]],n,r);return n}function q(e,n,r,o){for(var s;kn&t(s=n[e]||r[e]);)e=s;return o?e:n[e]||r[e]||e}function L(e,t){return e.length>1?o(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];Tn.test(o)&&Tn.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function R(e,r,o){var l,i,a,u,p,c,f,m,h,$,d,b,x,v,w,_=!1;if(w=e.modifier?e.modifier:null,m=new String(Rn(e)),m.pos=0,1===m.length)b=""+e,r[b]||o[b]||(r[b]={type:"simple",tokens:e}),e=b;else{for(l=[],i=[],a="",x=[];m.pos<m.length;)if(h=m[ln](m.pos++),Fn.test(h))if(a.length&&(_?(i.length&&(d=i[i.length-1],b=d+"."+a,c=r[b]||o[b],c||(f=q(d,r,o),o[b]=kn&t(f)?new String(f):s(f),o[b].modifier=a),i[i.length-1]=b),_=!1):"0"===a?(r[Kt]||(r[Kt]={type:"simple",tokens:0}),i.push(Kt)):"^^"===a?(r[Bt]||(r[Bt]={type:"simple",tokens:bt}),i.push(Bt)):"^^1"===a?(r[Ht]||(r[Ht]={type:"simple",tokens:xt}),i.push(Ht)):"^"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:wt}),i.push(Jt)):"$"===a?(r[Ut]||(r[Ut]={type:"simple",tokens:vt}),i.push(Ut)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a)),a=""),"."===h)i.length&&m.pos<m.length&&!Fn.test(m[ln](m.pos))?_=!0:a+=h;else if('"'===h||"'"===h)u=y(m,h,"\\",!0),u.length?(b=""+u,r[b]||(r[b]={type:"simple",tokens:u}),i.push(b)):(r[Vt]||(r[Vt]={type:"simple",tokens:""}),i.push(Vt));else if("["===h)u=y(m,"]","\\",!0),b="["+u+"]",r[b]||(r[b]={type:"simple",tokens:k("^(["+("^"===u[ln](0)?"^"+g(u.slice(1)):g(u))+"])")}),i.push(b);else{if("]"===h){a+=h;continue}if("/"===h)u=y(m,h,"\\",!1),$="",u.length&&(m.pos<m.length&&"i"===m[ln](m.pos)&&(m.pos++,$="i"),b="/"+u+"/"+$,r[b]||(r[b]={type:"simple",tokens:k("^("+u+")",$)}),i.push(b));else if("*"===h||"+"===h||"?"===h)i.length?(d=i[i.length-1],b=""+d+h,o[b]||(o[b]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[d]}),i[i.length-1]=b):a+=h;else if("{"===h)i.length?(p=y(m,"}",!1),p=n(p.split(","),Rn),p[0]=p[0].length?parseInt(p[0],10)||0:0,0>p[0]&&(p[0]=0),2>p.length?p.push(p[0]):p[1]=p[1].length?parseInt(p[1],10)||an:an,0>p[1]&&(p[1]=0),d=i[i.length-1],b=""+d+["{",p[0],",",isFinite(p[1])?p[1]:"","}"].join(""),o[b]||(o[b]={type:"repeat",repeat:[p[0],p[1]],tokens:[d]}),i[i.length-1]=b):a+=h;else{if("}"===h){a+=h;continue}"&"===h||"!"===h?i.length?(d=i[i.length-1],b=""+d+h,o[b]||(o[b]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[d]}),i[i.length-1]=b):a+=h:"|"===h?(_=!1,i=L(i),i.length>1?(b=""+i.join(" "),o[b]||(o[b]={type:"sequence",tokens:i}),l.push(b)):i.length?l.push(i[0]):a+=h,i=[]):"("===h?(x.push([i,l,a]),i=[],l=[],a=""):")"===h&&(i=L(i),i.length>1?(b=""+i.join(" "),o[b]||(o[b]={type:"sequence",tokens:i}),l.push(b)):i.length&&l.push(i[0]),i=[],l=L(l,1),l.length>1?(b=""+l.join(" | "),o[b]||(o[b]={type:"alternation",tokens:l})):l.length&&(b=l[0]),l=[],v=x.pop(),i=v[0],l=v[1],a=v[2],d=b,b="("+d+")",o[b]||(o[b]=s(q(d,r,o))),i.push(b))}}else a+=h;a.length&&(_?(i.length&&(d=i[i.length-1],b=d+"."+a,c=r[b]||o[b],c||(f=q(d,r,o),o[b]=kn&t(f)?new String(f):s(f),o[b].modifier=a),i[i.length-1]=b),_=!1):"0"===a?(r[Kt]||(r[Kt]={type:"simple",tokens:0}),i.push(Kt)):"^^"===a?(r[Bt]||(r[Bt]={type:"simple",tokens:bt}),i.push(Bt)):"^^1"===a?(r[Ht]||(r[Ht]={type:"simple",tokens:xt}),i.push(Ht)):"^"===a?(r[Jt]||(r[Jt]={type:"simple",tokens:wt}),i.push(Jt)):"$"===a?(r[Ut]||(r[Ut]={type:"simple",tokens:vt}),i.push(Ut)):(r[a]||o[a]||(r[a]={type:"simple",tokens:a}),i.push(a))),a="",i=L(i),i.length>1?(b=""+i.join(" "),o[b]||(o[b]={type:"sequence",tokens:i}),l.push(b)):i.length&&l.push(i[0]),i=[],l=L(l,1),l.length>1?(b=""+l.join(" | "),o[b]||(o[b]={type:"alternation",tokens:l}),e=b):l.length&&(e=l[0]),l=[]}return w&&(r[e]||o[e])&&((r[e]||o[e]).modifier=w),e}function I(e,s,l,u,p,c,f,m,h,g,k){var y,$,d,b,x,O,E,L=null,j=null,D=null;if(bt===e||xt===e||wt===e||vt===e)return new F(e,bt===e?Bt:xt===e?$T_FBNL$:wt===e?Jt:Ut,e,j);if(!1===e||0===e)return new F(_t,Kt,0,j);if(""===e)return new F(St,Vt,"",j);if(null===e)return new F(Ot,Yt,cn,j,D);if(dn&t(e)&&(d=e,e="NGRAM_"+d.join("_"),u[e]||(u[e]={type:"ngram",tokens:d})),e=""+e,m[e])return m[e];if(x=q(e,l,u),kn&t(x)&&(x=R(x,l,u),x=l[x]||u[x]||null),!x)return null;if(y=x.type?Gt[x.type[sn]().replace(Dn,"")]||Ot:Ot,j=x.msg||null,D=x.modifier||null,$=x.tokens,Ot&y){if(bt===$||xt===$||wt===$||vt===$||!1===$||0===$)return L=new F($||_t,e,$||0,j),m[e]=L,L;if(""===$)return L=new F(St,e,"",j),m[e]=L,L;if(null===$)return L=new F(Ot,e,cn,j,D),m[e]=L,L;if(!$)return null}if(dt&y)x[Xt]("action")?"nop"===x.action[0]?x.action[0]=it:"error"===x.action[0]?x.action[0]=at:"context-start"===x.action[0]?x.action[0]=pt:"context-end"===x.action[0]?x.action[0]=ct:"push"===x.action[0]?x.action[0]=ft:"pop"===x.action[0]?x.action[0]=mt:"unique"===x.action[0]?x.action[0]=ut:"indent"===x.action[0]?x.action[0]=ht:"outdent"===x.action[0]&&(x.action[0]=gt):x[Xt]("nop")?x.action=[it,x.nop,!!x["in-context"]]:x[Xt]("error")?x.action=[at,x.error,!!x["in-context"]]:x[Xt]("context")?x.action=[x.context?pt:ct,x.context,!!x["in-context"]]:x[Xt]("context-start")?x.action=[pt,x["context-start"],!!x["in-context"]]:x[Xt]("context-end")?x.action=[ct,x["context-end"],!!x["in-context"]]:x[Xt]("push")?x.action=[ft,x.push,!!x["in-context"]]:x[Xt]("pop")?x.action=[mt,x.pop,!!x["in-context"]]:x[Xt]("unique")?x.action=[ut,kn&t(x.unique)?["_DEFAULT_",x.unique]:x.unique,!!x["in-context"]]:x[Xt]("indent")?x.action=[ht,x.indent,!!x["in-context"]]:x[Xt]("outdent")&&(x.action=[gt,x.outdent,!!x["in-context"]]),x.nop&&(x.action[0]=it),L=new F(dt,e,x.action.slice(),j,D),L.ci=!!x.caseInsensitive||x.ci,m[e]=L;else if($=i($),Ot&y){E=x.autocomplete?S(x,Sn&t(x.autocomplete)?i(x.autocomplete):$,e,k):null;var M={};if(O="undefined"!=typeof x.combine?x.combine:dn&t(x.tokens)?!0:!1,L=new F(Ot,e,v(e,$.slice(),s,O,!(!x.caseInsensitive&&!x.ci),c,f,M),j,D,null,E),M.keywords&&(L.keywords=M.keywords.join("|")),m[e]=L,null!=x.except){var N,z,T=i(x.except),A=T.length,C=[];for(N=0;A>N;N++)T[N]&&(z=I(T[N],s,l,u,p,c,f,m,h,g,k),z&&C.push(z));C.length&&(L.except=C)}}else Et&y?(qt===y&&_(x,g),L=new F(y,e,w(e,$.slice(),s,c,f),j),L.empty=x[Xt]("empty")?!!x.empty:!0,L.mline=x[Xt]("multiline")?!!x.multiline:!0,L.esc=x[Xt]("escape")?x.escape:!1,L.inter=!!p[e+".inside"],qt===y&&x.interleave&&h.push(P(L)),D&&(L.modifier=D),m[e]=L):Ct&y&&(Tt===y?m[e]=new F(Tt,e,$,j,D):Pt===y?(b=a($),L=n(b,function(t,n){return new F(Pt,e+"_NGRAM_"+n,null,j,D)}),m[e]=L,o(function(e){L[e].token=i(r(b[e],function(e,t){return e.concat(I(t,s,l,u,p,c,f,m,h,g,k))},[]))},0,b.length-1)):(Ft===y||zt===y?L=new F(y,e,null,j,D):It&y&&dn&t(x.repeat)?(L=new F(It,e,null,j,D),L.min=x.repeat[0],L.max=x.repeat[1]):jt===y?(L=new F(jt,e,null,j,D),L.min=0,L.max=1):Dt===y?(L=new F(Dt,e,null,j,D),L.min=0,L.max=an):Mt===y?(L=new F(Mt,e,null,j,D),L.min=1,L.max=an):L=Lt===y?new F(Lt,e,null,j,D):new F(Rt,e,null,j,D),m[e]=L,L.token=i(r($,function(e,t){return e.concat(I(t,s,l,u,p,c,f,m,h,g,k))},[]))));return m[e]}function j(e){var n={};return e.Lex=e.Lex||{},e.Syntax=e.Syntax||{},e=O(e),e.Parser&&e.Parser.length&&o(function r(s,l){var i,a,u,p=l[s];n[p]||(dn&t(p)&&(i=p,p="NGRAM_"+i.join("_"),e.Syntax[p]||(e.Syntax[p]={type:"ngram",tokens:i})),a=q(p,e.Lex,e.Syntax),kn&t(a)&&(a=R(a,e.Lex,e.Syntax),a=e.Lex[a]||e.Syntax[a]||null),a&&(n[p]=a,u=a.type?Gt[a.type[sn]().replace(Dn,"")]||Ot:Ot,Ct&u&&o(r,0,a.tokens.length-1,a.tokens)))},0,e.Parser.length-1,e.Parser),e}function D(e){var n,o,l,i,a,u,p,c,f,m,h,g,k,y;return e.__parsed?e:(n=e.RegExpID||null,l=e.Extra?s(e.Extra):{},i=e.Style?s(e.Style):{},a=null,u=null,p=e.Lex?s(e.Lex):{},c=e.Syntax?s(e.Syntax):{},f={},m={},h={},k={},y={},g=[],o=e.Parser?s(e.Parser):[],e=O({Style:i,Fold:a,Match:u,Lex:p,Syntax:c,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),e.$parser=r(o,function(e,r){var o=I(r,n,p,c,i,f,m,h,g,k,y)||null;return o&&(dn&t(o)?e=e.concat(o):e.push(o)),e},[]),e.$interleaved=g&&g.length?g:null,e.$comments=k,e.$autocomplete=y&&y.autocomplete&&y.autocomplete.length?y.autocomplete:null,e.__parsed=1,e)}function M(e,n,r,o,s){var l,i,a=this;l=a.type=e,a.name=n,a.pattern=r,i=a.ptype=o||kn,a.key=s||0,yt===l?a.key=!1!==s:$t===l?a.pattern[0]=new M(yt,n+"_Start",r[0],null,!1):cn===i?a.pattern=null:vn===i&&(a.pattern=vn&t(r)?[r,0]:[r[0],r[1]||0])}function N(e,n,r,o){var s,l,i,a,u,p,c,f,m,h,g,k=e,y=k.type,b=k.pattern,x=k.key;if($t===y){if(s=k.name,i=b[0],a=b[1],p=N(i,n,r,o))return u=a[p[0]],f=t(u),m=i.pattern[p[0]].ptype,vn===m&&_n&f&&(u.regex_pattern?(c=$(u,p[1],0,1),u=new M(kt,s+"_End",d(c,u.regex_pattern,{}),vn)):(c=fn&f?p[1][u+1]:$(u,p[1]),u=new M(kt,s+"_End",c,c.length>1?kn:yn))),u}else if(yt===y){for(h=0,g=b.length;g>h;h++)if(c=N(b[h],n,r,o))return x?[h,c[1]]:c}else{if(l=k.ptype,cn===l)return!1!==r&&n.end(),[x,""];if(vn===l){if(c=n.slice(n.pos).match(b[0]),c&&0===c.index)return!1!==r&&n.mov(c[b[1]||0].length),[x,b[1]>0?c[b[1]]:c]}else if($n===l){if(!0===o){c=-1;var v,w;for(g=b.length-1;g>=0;g--)v=n.indexOf(b[ln](g),n.pos),v>-1&&(-1===c||c>v)&&(c=v,w=b[ln](g));if(c>-1)return!1!==r&&(n.pos=c+1),[x,w]}else if(c=n[ln](n.pos)||null,c&&-1<b.indexOf(c))return!1!==r&&n.mov(1),[x,c]}else if(yn===l){if(!0===o){if(c=n.indexOf(b,n.pos),c>-1)return!1!==r&&(n.pos=c+1),[x,b]}else if(c=n[ln](n.pos)||null,b===c)return!1!==r&&n.mov(1),[x,c]}else if(kn===l)if(g=b.length,!0===o){if(c=n.indexOf(b,n.pos),c>-1)return!1!==r&&(n.pos=c+g),[x,b]}else if(b===n.substr(n.pos,g))return!1!==r&&n.mov(g),[x,b]}return!1}function F(e,t,n,r,o,s,l,i){var a=this;a.type=e,a.name=t,a.token=n,a.modifier=o||null,a.except=s||null,a.autocompletions=l||null,a.keywords=i||null,a.pos=null,a.msg=r||null,a.$msg=null,a.status=0,a.empty=!1,a.ci=!1,a.mline=!0,a.esc=!1,a.inter=!1,a.found=0,a.min=0,a.max=1,a.i0=0,a.$id=null}function z(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null}function P(e,t,n,r){var o=new F(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=nt),n&&(o.modifier=n),r&&(o.$id=r),o}function T(e){var t=e.name;return e.$msg?e.$msg:e.status&nt?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function A(e,t,n,r,o,s,l){e.status&et&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+(s?s.name:"ERROR")]=[t,n,r,o,l||T(s)])}function C(e,t,n){return t<e.length?e.splice(t,0,n):e.push(n),e}function G(e,t,n,r){var o,s,l,i,a=e.stack,u=0,p=1/0,c=-1;if(s=t.pos,t.spc(),l=t.pos,o=a.length,t.pos<t.length){for(;o>u&&(i=a[o-u-1],i.$id===r.$id);){for(;!(B(i,t,e,n)||(t.pos=i.pos>t.pos?i.pos:t.pos+1,a.length=o,t.pos>=t.length)););a.length=o,t.pos<t.length&&p>t.pos?(p=t.pos,c=o-u):p===t.pos&&o-u>c&&(p=t.pos,c=o-u),t.pos=l,u++}p<t.length?(t.pos=p,a.length=c):t.end()}return l>=s&&t.pos===l}function B(e,t,n,r){if(!e)return!1;var o=e.type,s=Ct&o?Y:Et&o?U:dt&o?H:J;return s(e,t,n,r)}function H(e,n,r,o){var s,l,i,a,u,p,c,f,m,h,g,k,y,d,b,x,v=e,w=v.token||null,_=v.ci,S=v.name,O=!(r.status&et);if(v.status=0,v.$msg=null,O||!w||!o||!o.pos)return!0;if(x=!!(Et&o.T),it===w[0]||x&&!o.block)return!0;if(s=w[0],l=w[1],y=w[2],u=v.msg,p=r.queu,c=r.symb,f=r.ctx,x?(b=o.block.match||o.block.str,m=o.block.pos[0][0],h=o.block.pos[0][1],g=o.block.pos[0][2],k=o.block.pos[0][3]):(b=o.match||o.str,m=o.pos[0],h=o.pos[1],g=o.pos[2],k=o.pos[3]),at===s)return!u&&kn&t(l)&&(u=l),v.$msg=u?$(u,b,!0):'Error "'+S+'"',A(r,m,h,g,k,v,T(v)),v.status|=rt,!1;if(ct===s)f.length&&f.shift();else if(pt===s)f.unshift({symb:{},queu:[]});else if(mt===s){if(y){if(!f.length)return!0;p=f[0].queu}if(l){if(l=$(l,b),_&&(l=l[sn]()),!p.length||l!==p[0][0])return p.length?(v.$msg=u?$(u,[p[0][0],l],!0):'Tokens do not match "'+p[0][0]+'","'+l+'"',d=T(v),A(r,p[0][1],p[0][2],p[0][3],p[0][4],v,d),A(r,m,h,g,k,v,d),p.shift()):(v.$msg=u?$(u,["",l],!0):'Token does not match "'+l+'"',d=T(v),A(r,m,h,g,k,v,d)),v.status|=rt,!1;p.shift()}else p.shift()}else if(ft===s&&l){if(y){if(!f.length)return!0;p=f[0].queu}l=$(l,b),_&&(l=l[sn]()),v.$msg=u?$(u,l,!0):'Token does not match "'+l+'"',p.unshift([l,m,h,g,k,T(v)])}else if(ut===s){if(y){if(!f.length)return!0;c=f[0].symb}if(i=l[1],a=l[0],i=$(i,b,!0),_&&(i=i[sn]()),c[Xt](a)||(c[a]={}),c[a][Xt](i))return v.$msg=u?$(u,i,!0):'Duplicate "'+i+'"',d=T(v),A(r,c[a][i][0],c[a][i][1],c[a][i][2],c[a][i][3],v,d),A(r,m,h,g,k,v,d),v.status|=rt,!1;c[a][i]=[m,h,g,k]}return!0}function J(e,t,n,r,o){var s,l,i=e,a=i.token,u=i.modifier,p=i.type,c=i.name,f=i.except,m=n.line,h=t.pos,g=null,k=!1;if(i.status&=st,i.$msg=o?null:i.msg||null,i.pos=t.pos,f&&!o){l=V(n,t);for(var y=0,d=f.length;d>y;y++)if(s=f[y],i!==s&&Ot===s.type&&J(s,t,n,r,1))return i.pos=s.pos,V(n,t,l),!1}return bt===p?k=0===n.line:xt===p?k=n.bline+1===n.line:wt===p?k=t.sol():vt===p?(t.spc(),t.eol()?k=c:(i.pos=t.pos,t.bck(h))):_t===p?(i.status=0,k=!0):St===p?(i.status&nt&&t.spc()&&!t.eol()?(i.pos=t.pos,t.bck(h),i.status|=rt):k=!0,i.status&=ot):cn===a?(t.end(),k=u||c):(g=N(a,t))&&(g=g[1],k=u||c),o?k:(!1!==k&&(r.T=p,r.id=c,r.type=k,r.str=t.sel(h,t.pos),r.match=g,r.pos=[m,h,m,t.pos]),!k&&i.status&&i.$msg&&(i.$msg=$(i.$msg,c,!0)),k)}function U(e,t,n,r){var o,s,l,i,a,u,p,c,f,m,h,g,k,y,d,b,x,v,w,_,S,O,E=e,q=E.name,L=E.type,R=E.modifier,I=E.token,j=E.mline,D=E.inter,M=D?q+".inside":q,F=E.esc,z=!!F,T="",A="",G="",H="",J=E.$id||q,U=n.stack,Y=n.outer,K=Y&&Y[2],V=Y&&Y[1];if(E.status&=st,E.$msg=E.msg||null,E.pos=t.pos,_=n.line,S=t.pos,qt===L&&(E.status&=ot),d=E.status&nt,l=0,i=0,n.block&&n.block.name===q?(i=1,l=1,y=M,o=n.block.end,c=n.block.sp,m=n.block.ip,f=n.block.ep,T=n.block.s,A=n.block.i):!n.block&&(o=N(I,t))&&(i=1,y=q,x=t.pos,c=[_,S],m=[[_,x],[_,x]],f=[_,x],T=t.sel(S,x),A="",H="",n.block={name:q,end:o,sp:c,ip:m,ep:f,s:T,i:A,e:H}),i){if(w=U.length,s=cn===o.ptype,b=s||E.empty,D){if(s&&l&&t.sol())return E.status&=ot,n.block=null,!1;if(!l)return x=t.pos,r.T=L,r.id=q,r.type=R||y,r.str=t.sel(S,x),r.match=null,r.pos=[_,S,_,x],C(U,w,P(E,d,0,J)),R||y}if(x=t.pos,a=V?s&&t.eol():N(o,t),p=j,u=0,a)y=s?M:q,H=t.sel(x,t.pos);else if(v=t.pos,g=!1,V||z||$n!==o.ptype&&yn!==o.ptype&&kn!==o.ptype){for(;!t.eol();){if(V){if(B(V,t,K,r)){if(t.pos>v){s&&(a=1);break}return!0}if(s){k=t.nxt(1),G+=k;continue}}if(x=t.pos,!g&&N(o,t)){D&&t.pos>x&&x>v?(y=M,t.bck(x),u=1):(y=q,a=1),H=t.sel(x,t.pos);break}k=t.nxt(1),G+=k,g=z&&!g&&F===k,x=t.pos}s&&t.eol()&&(a=1)}else(O=N(o,t,!0,!0))?D&&t.pos>x+O[1].length?(y=M,t.mov(-O[1].length),u=1,G=t.sel(x,t.pos)):(y=q,a=1,G=t.sel(x,t.pos-O[1].length),H=O[1]):(t.end(),y=M,u=1,G=t.sel(x,t.pos));return p=j||z&&g,A+=G,m[1]=[_,x],f=[_,t.pos],a&&!b&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(a||!p&&!u?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=A,n.block.e=H,C(U,w,P(E,d,0,J))),r.T=L,r.id=q,r.type=R||y,r.str=t.sel(S,t.pos),r.match=null,r.pos=[_,S,f[0],f[1]],E.pos=t.pos,n.block||(h=T+A+H,r.block={str:h,match:[h,A,T,H],part:[h,T,A,H],pos:[[c[0],c[1],f[0],f[1]],[c[0],c[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),R||y)}return E.status&&E.$msg&&(E.$msg=$(E.$msg,q,!0)),!1}function Y(e,t,n,r){var o,s,l,i,a,u,p,f,m,h,g,k,y,$,d,b,x=e,v=x.type,w=(x.name,x.token),_=w.length,S=x.modifier;if(x.status&=st,x.$msg=x.msg||null,k=n.stack,f=t.pos,m=k.length,x.pos=t.pos,u=0,p=0,Tt===v){x.status&=st;var O=new String(w[0]),E=k.length?k[k.length-1]:null;return O.subgrammar=1,O.next=E?new F(Ft,E.name,[E]):null,O.required=E?E.status&nt:0,O}if(Lt===v){for($=c(),x.status|=nt,y=[],b=V(n,t),g=0,h=g;_>h;h++){if(o=P(w[h],1,S,$),s=B(o,t,n,r),x.pos=o.pos,o.status&nt&&(u++,y.push(T(o))),!1!==s)return s;o.status&rt&&(p++,V(n,t,b))}return u>0?x.status|=nt:x.status&=ot,_===p&&u>0?x.status|=rt:x.status&=st,x.status&&!x.$msg&&y.length&&(x.$msg=y.join(" | ")),!1}if(At&v){d=!!(v&Rt),$=x.$id||c(),d?x.status|=nt:x.status&=ot,b=V(n,t),g=0;do o=P(w[g++],d,S,$),s=B(o,t,n,r);while(_>g&&(!0===s&&Nt&o.type||!1===s&&!(o.status&nt)));if(x.pos=o.pos,!1!==s){if(!0!==s||_t!==o.type)for(h=_-1;h>=g;h--)C(k,m+_-h-1,P(w[h],1,S,$));return s.subgrammar&&_>g&&(s.next=new F(Ft,w[g].name,[w[g]]),s.required=w[g].status&nt),s}return o.status&rt?(d?x.status|=rt:x.status&=st,V(n,t,b)):d&&o.status&nt&&(x.status|=rt),x.status&&!x.$msg&&(x.$msg=T(o)),!1}if(Nt&v)return Tt&w[0].type?!0:(b=V(n,t,null,!1),s=B(P(w[0],0),t,n,r),V(n,t,b),zt===v?!1===s:!1!==s);for($=x.$id||c(),l=x.found,i=x.min,a=x.max,x.status=0,y=[],b=V(n,t),h=0;_>h;h++){if(o=P(w[h],1,S,$),s=B(o,t,n,r),x.pos=o.pos,!1!==s){if(++l,a>=l)return x.found=l,C(k,m,P(x,0,0,c())),x.found=0,s;break}o.status&nt&&(u++,y.push(T(o))),o.status&rt&&V(n,t,b)}return i>l&&(x.status|=nt),(l>a||i>l&&u>0)&&(x.status|=rt),x.status&&!x.$msg&&y.length&&(x.$msg=y.join(" | ")),!1}function K(e,t){var n=this;n.id=e?f("state"):"state",t instanceof K?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=t.stack.slice(),n.token=t.token,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new K(e,t.outer[2])]:null,n.status&et?(n.queu=t.queu,n.symb=t.symb,n.ctx=t.ctx,n.err=t.err):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=[],n.token=null,n.block=null,n.outer=null,n.status&et?(n.queu=[],n.symb={},n.ctx=[],n.err={}):(n.queu=null,n.symb=null,n.ctx=null,n.err=null),n.$eol$=!0,n.$blank$=!0),n.toString=function(){return n.id+"_"+n.line+"_"+n.bline+"_"+(n.block?n.block.name:"0")}}function V(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack.length>n[3]&&(e.stack.length=n[3]),t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack.length,t?t.pos:1/0],!1===r&&(e.status=0),n)}function W(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.err=null}function Q(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?rn(0,r.pos+e):on(r.length,r.pos+e),r},r.bck=function(e){return r.pos=rn(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,s="";if(!0===e){for(t=t||Q.$NONSPC$;r.pos<r.length&&t.test(n=r[ln](r.pos++));)s+=n;return s.length?s:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)s+=r[ln](r.pos++);return s},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||Q.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function X(e){var t=function n(){var e,t=null,r=null,o={lastIndex:0,exec:function(){var e=null;return r&&(e=[r.token],e.index=0,this.lastIndex=e[0].length),e}},s={lastIndex:0,exec:function(){var e=null;return r&&!r.ret&&(e=[r.token],e.index=0,this.lastIndex=e[0].length,r.ret=1),e}},l={_str:null,lastIndex:0,exec:function(o){var s=null,l=this;return o!==l._str?(l._str=o,l.lastIndex=l.lastIndex||0,t=n.$parser.parse(o,Z|et|tt).tokens,r=t.shift(),r.ret=0,e.parent=e,null===r.type?e.keywords=null:(e.keywords={},e.keywords[r.token]=[r.type,1]),s=[r.token],s.index=l.lastIndex,l.lastIndex+=s[0].length):t&&t.length?(l.lastIndex=l.lastIndex||0,r=t.shift(),r.ret=0,e.parent=e,null===r.type?e.keywords=null:(e.keywords={},e.keywords[r.token]=[r.type,1]),s=[r.token],s.index=l.lastIndex,l.lastIndex+=s[0].length):(l._str=null,l.lastIndex=0,t=null,r=null,e.parent=null,e.keywords=null),s}};return e={Mode:n,compiled:!0,aliases:n.aliases||null,case_insensitive:!1,relevance:0,contains:[],parent:null,keywords:null,className:null,beginRe:o,endRe:o,lexemesRe:s,terminators:l,submode:function(e,t){n.submode(e,t.Mode)}}};return t.$id=f("highlightjs_grammar_mode"),t.$parser=new Gn.Parser(D(e)),t.submode=function(e,n){t.$parser.subparser(e,n.$parser)},t.dispose=function(){t.$parser&&t.$parser.dispose(),t.$parser=null},t.aliases=null,t}var Z=1,et=2,tt=32,nt=4,rt=8,ot=~nt,st=~rt,lt=nt|rt,it=0,at=4,ut=8,pt=16,ct=17,ft=32,mt=33,ht=128,gt=129,kt=2,yt=4,$t=8,dt=4,bt=8,xt=9,vt=16,wt=32,_t=128,St=256,Ot=512,Et=1024,qt=1025,Lt=2048,Rt=4096,It=8192,jt=8193,Dt=8194,Mt=8195,Nt=16384,Ft=Nt,zt=16385,Pt=32768,Tt=65536,At=Rt|Pt,Ct=Lt|Rt|It|Nt|Pt|Tt,Gt={action:dt,simple:Ot,block:Et,comment:qt,subgrammar:Tt,alternation:Lt,sequence:Rt,repeat:It,zeroorone:jt,zeroormore:Dt,oneormore:Mt,positivelookahead:Ft,negativelookahead:zt,ngram:Pt},Bt="$|SOF|$",Ht="$|NONBLANK|$",Jt="$|SOL|$",Ut="$|EOL|$",Yt="$|ENDLINE|$",Kt="$|EMPTY|$",Vt="$|NONSPACE|$",Wt=void 0,Qt="prototype",Xt="hasOwnProperty",Zt="propertyIsEnumerable",en=Object[Qt],tn=en.toString,nn=Object.create,rn=Math.max,on=Math.min,sn="toLowerCase",ln="charAt",an=1/0,un=4,pn=8,cn=16,fn=32,mn=33,hn=34,gn=64,kn=128,yn=129,$n=130,dn=256,bn=512,xn=1024,vn=2048,wn=4096,_n=kn|fn,Sn=kn|dn,On=vn|dn,En=kn|dn|vn,qn={"[object Number]":fn,"[object String]":kn,"[object Array]":dn,"[object RegExp]":vn,"[object Date]":wn,"[object Function]":xn,"[object Object]":bn},Ln=/^\s+|\s+$/g,Rn=String[Qt].trim?function(e){return e.trim()
}:function(e){return e.replace(Ln,"")},In=function(e,t){return t.length-e.length},jn=/\r\n|\r|\n/g,Dn=/[\-_]/g,Mn=0,Nn=/([.*+?^${}()|[\]\/\\\-])/g,Fn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,zn="(\\s|\\W|$)",Pn=/(\\\\)*?\\\d/,Tn=/[*+]$/;Q.$SPC$=/^[\s\u00a0]+/,Q.$NONSPC$=/[^\s\u00a0]/,Q.$NOTEMPTY$=/\S/,Q.$SPACE$=/^\s*/;var An=h({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){var r,o,s,l,i,a,u,p,c,f,m,h,g,k,y,$,d,b,x=this,v=x.$grammar,w=v.Style,_=x.DEF,S=x.ERR,O={},E=x.$n$,q=x.$t$,L=x.$v$,R=v.$interleaved,I=v.$parser,j=I.length,D=R?R.length:0,M=t.outer,N=M&&M[2],F=M&&M[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.stack,i=t.line,a=e.pos,m=!1,g=!0,h=!1,k=!1,M&&x===M[0]){if(O[E]=null,O[q]=_,O[L]=null,F){if(s=new z,B(F,e,N,s))return t.outer=null,{parser:x,state:N};for(e.nxt(1);!e.eol();){if(B(F,e,N,s)){if(e.pos>a)break;return t.outer=null,{parser:x,state:N}}e.nxt(1)}}else e.spc(),e.eol()?k=!0:e.end();return O[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),O}if(l.length&&vt===l[l.length-1].type&&e.sol()&&l.pop(),(!l.length||St!==l[l.length-1].type&&null==t.block)&&e.spc()){if(l.length&&Tt===l[l.length-1].type)return e.bck(a),r=l.pop(),m=B(r,e,t,s),y=""+m,x.$subgrammars[y]?($=x.$subgrammars[y],d=new K(1,n[y]?n[y]:t.status),N=t):($=x,d=new K,N=t),d.outer=[x,m.next,N],{parser:$,state:d,toInner:y};g=!1,k=!0}if(O[E]=null,O[q]=_,O[L]=null,g)for(s=new z,u=0;g&&(l.length||j>u)&&!e.eol();){if(c=e.pos,f=l.length,F){if(e.spc(),B(F,e,N,s))return e.pos>c?(O[L]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,O):(t.outer=null,{parser:M[0],state:N,fromInner:t});e.bck(c)}if(b=!1,D&&!t.block)for(p=0;D>p;p++)if(r=R[p],m=B(r,e,t,s),!1!==m){b=!0;break}if(g&&!b){if(!l.length&&u>=j)break;r=l.length?l.pop():I[u++],m=B(r,e,t,s)}if(!1===m){if(r.status&lt){t.token=r,k=G(t,e,s,r)||k,h=!0,g=!1;break}}else{if(m.subgrammar)return y=""+m,x.$subgrammars[y]?($=x.$subgrammars[y],d=new K(1,n[y]?n[y]:t.status),N=t):($=x,d=new K,N=t),d.outer=[x,m.next,N],{parser:$,state:d,toInner:y};if(l.length>1&&e.eol()&&Et&l[l.length-1].type&&t.block&&t.block.name===l[l.length-1].name)for(p=l.length-2;p>=0&&dt===l[p].type;)o=l[p--],H(o,e,t,s),o.status&rt&&(t.$actionerr$=!0);else if(l.length&&dt===l[l.length-1].type)for(;l.length&&dt===l[l.length-1].type;)o=l.pop(),H(o,e,t,s),o.status&rt&&(t.$actionerr$=!0);if(!0!==m){g=!1;break}}}return g&&e.nxt(1),O[L]=e.cur(1),!1!==m?(m=w[m]||_,O[E]=r.name):h?(m=S,t.status&et&&A(t,i,a,i,e.pos,r)):m=_,O[q]=m,t.$eol$=e.eol(),t.$blank$=t.$blank$&&(k||t.$eol$),O},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t){var n=[];if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)n.push(t.parser.get(e,t));return n},parse:function(e,t){var n,r,s,l,i,a,u=(e||"").split(jn),p=u.length,c=null;if(t=t||Z,s=!!(t&et),l=!!(t&Z),r={parser:this,state:new K(0,t),inner:{}},r.state.$full_parse$=!0,o(function(e){u[e]+="\n"},0,p-2),l?c=o(t&tt?function(e,t){t._=t._.concat(r.parser.tokenize(Q(u[e]),r,e))}:function(e,t){t._.push(r.parser.tokenize(Q(u[e]),r,e))},0,p-1,{_:[]})._:o(function(e){var t=Q(u[e]);if(t.eol())r.state.line++,r.state.$blank$&&r.state.bline++;else for(;!t.eol();)r.parser.get(t,r)},0,p-1),n=r.state,s&&n.queu&&n.queu.length)for(;n.queu.length;)i=n.queu.shift(),A(n,i[1],i[2],i[3],i[4],null,i[5]);return a=l&&s?{tokens:c,errors:n.err}:l?c:n.err,W(n),r=n=null,a},autocompletion:function(e,t){var n,r,o,s=e.stack,l={},i=E([e.token],[],l);for(t=t||0,n=s.length-1;n>=0;n--)if(r=s[n],o=r.type,It&o){if(i=E([r],i,l),0<r.min&&t<i.length)break}else if((Ot===o||Lt===o||At&o)&&(i=E([r],i,l),t<i.length))break;return i},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[Xt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),Cn=h(An,{constructor:function(e,t){var n=this;An.call(n,e,null,null),n.DEF=t||n.$DEF,n.ERR=n.$ERR},tokenize:function(e,t){var r,o=this,s=[],l=[],i=null,a=function(e){return e.type=o.$DEF,e};if(e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r=t.parser.get(e,t),t.state.$actionerr$?(l.length&&(s=s.concat(n(l,a))),r.type=o.$DEF,s.push(r),l.length=0,i=null):(i!==r.name&&(l.length&&(s=s.concat(l)),l.length=0,i=r.name),l.push(r));return l.length&&(s=s.concat(l)),l.length=0,i=null,s}}),Gn=e.HighlightJSGrammar={VERSION:"4.0.0",clone:s,extend:l,pre_process:j,parse:D,getMode:X,Parser:Cn};return e.HighlightJSGrammar});
/**
 * FTScroller: touch and mouse-based scrolling for DOM elements larger than their containers.
 *
 * While this is a rewrite, it is heavily inspired by two projects:
 * 1) Uxebu TouchScroll (https://github.com/davidaurelio/TouchScroll), BSD licensed:
 *    Copyright (c) 2010 uxebu Consulting Ltd. & Co. KG
 *    Copyright (c) 2010 David Aurelio
 * 2) Zynga Scroller (https://github.com/zynga/scroller), MIT licensed:
 *    Copyright 2011, Zynga Inc.
 *    Copyright 2011, Deutsche Telekom AG
 *
 * Includes CubicBezier:
 *
 * Copyright (C) 2008 Apple Inc. All Rights Reserved.
 * Copyright (C) 2010 David Aurelio. All Rights Reserved.
 * Copyright (C) 2010 uxebu Consulting Ltd. & Co. KG. All Rights Reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE INC., DAVID AURELIO, AND UXEBU
 * CONSULTING LTD. & CO. KG ``AS IS'' AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL APPLE INC. OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
 * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 * @copyright The Financial Times Ltd [All rights reserved]
 * @codingstandard ftlabs-jslint
 * @version 0.7.0
 */
/**
 * @license FTScroller is (c) 2012 The Financial Times Ltd [All rights reserved] and licensed under the MIT license.
 *
 * Inspired by Uxebu TouchScroll, (c) 2010 uxebu Consulting Ltd. & Co. KG and David Aurelio, which is BSD licensed (https://github.com/davidaurelio/TouchScroll)
 * Inspired by Zynga Scroller, (c) 2011 Zynga Inc and Deutsche Telekom AG, which is MIT licensed (https://github.com/zynga/scroller)
 * Includes CubicBezier, (c) 2008 Apple Inc [All rights reserved], (c) 2010 David Aurelio and uxebu Consulting Ltd. & Co. KG. [All rights reserved], which is 2-clause BSD licensed (see above or https://github.com/davidaurelio/TouchScroll).
 */
var FTScroller,CubicBezier;!function(){"use strict";var e,n,t,r,o,i,l,s,a;void 0!==document.createElement("div").style.transform?(e="",n="",t="transform"):window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera)?(e="-o-",n="O",t="OTransform"):void 0!==document.documentElement.style.MozTransform?(e="-moz-",n="Moz",t="MozTransform"):void 0!==document.documentElement.style.webkitTransform?(e="-webkit-",n="webkit",t="-webkit-transform"):"string"==typeof navigator.cpuClass&&(e="-ms-",n="ms",t="-ms-transform"),"pointerEnabled"in window.navigator?(r=!1,s=window.navigator.pointerEnabled,o="setPointerCapture",i="releasePointerCapture",l="lostpointercapture",a="touch"):"msPointerEnabled"in window.navigator&&(r=!0,s=window.navigator.msPointerEnabled,o="msSetPointerCapture",i="msReleasePointerCapture",l="MSLostPointerCapture",a=2);var c=!1,u=!s,d=!1;"hasOwnProperty"in window&&(d=!window.hasOwnProperty("ArrayBuffer"));var p=window.Selection&&window.Selection.prototype.removeAllRanges;d||void 0!==document.createElement("div").style[n+(n?"P":"p")+"erspective"]||(d=!0);var f=n+(n?"T":"t")+"ransform",h=n+(n?"T":"t")+"ransition",y=d?"translate(":"translate3d(",m={x:"",y:"0,"},g={x:",0"+(d?")":",0)"),y:d?")":",0)"},w=.998,x=.01;!function(){var n,t,r=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("style");o.type="text/css",n=d?e+"transform-style: preserve-3d;":e+"transform: translateZ(0);",t=[".ftscroller_container { overflow: hidden; position: relative; max-height: 100%; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -ms-touch-action: none }",".ftscroller_hwaccelerated { "+n+" }",".ftscroller_x, .ftscroller_y { position: relative; min-width: 100%; min-height: 100%; overflow: hidden }",".ftscroller_x { display: inline-block }",".ftscroller_scrollbar { pointer-events: none; position: absolute; width: 5px; height: 5px; border: 1px solid rgba(255, 255, 255, 0.3); -webkit-border-radius: 3px; border-radius: 6px; opacity: 0; "+e+"transition: opacity 350ms; z-index: 10; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box }",".ftscroller_scrollbarx { bottom: 2px; left: 2px }",".ftscroller_scrollbary { right: 2px; top: 2px }",".ftscroller_scrollbarinner { height: 100%; background: #000; -webkit-border-radius: 2px; border-radius: 4px / 6px }",".ftscroller_scrollbar.active { opacity: 0.5; "+e+"transition: none; -o-transition: all 0 none }"],o.styleSheet?o.styleSheet.cssText=t.join("\n"):o.appendChild(document.createTextNode(t.join("\n"))),r.insertBefore(o,r.firstChild)}(),FTScroller=function(d,v){var b,M,E,C,S,_,T,F,z,O,B,L,P,A,X,Y,N,R,D,I,k,H,W,j,q,U,K,Z,V,G,J,Q,$,ee,ne,te,re,oe,ie,le,se,ae,ce,ue,de,pe,fe,he,ye,me,ge,we,xe,ve,be,Me,Ee,Ce,Se,_e,Te={scrollbars:!0,scrollingX:!0,scrollingY:!0,scrollBoundary:1,scrollResponseBoundary:1,alwaysScroll:!1,contentWidth:void 0,contentHeight:void 0,snapping:!1,snapSizeX:void 0,snapSizeY:void 0,singlePageScrolls:!1,bouncing:!0,flinging:!0,updateOnChanges:!0,updateOnWindowResize:!1,baseAlignments:{x:-1,y:-1},windowScrollingActiveFlag:void 0,hwAccelerationClass:"ftscroller_hwaccelerated",enableRequestAnimationFrameSupport:!0,maxFlingDuration:1e3,disabledInputMethods:{mouse:!1,touch:!1,scroll:!1,pointer:!1,focus:!1},scrollingClassName:void 0,flingBezier:new CubicBezier(.103,.389,.307,.966),bounceDecelerationBezier:new CubicBezier(0,.5,.5,1),bounceBezier:new CubicBezier(.7,0,.9,.6),invertScrollWheel:!0},Fe=this,ze=d,Oe={x:null,y:null},Be={x:null,y:null},Le={container:{x:null,y:null},content:{x:null,y:null,rawX:null,rawY:null},scrollEnd:{x:null,y:null}},Pe={x:!1,y:!1,userX:!1,userY:!1},Ae={x:0,y:0},Xe={x:0,y:0},Ye={x:0,y:0},Ne=!1,Re=0,De=!1,Ie=!1,ke=!1,He=!1,We={x:0,y:0},je={x:0,y:0},qe={x:0,y:0},Ue={x:null,y:null},Ke=!1,Ze=[],Ve=!1,Ge={},Je={x:!0,y:!0},Qe={x:0,y:0,t:0},$e={x:0,y:0},en=[],nn=!1,tn=!1,rn=!1,on=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||!1,ln=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||!1,sn={scrollstart:[],scroll:[],scrollend:[],segmentwillchange:[],segmentdidchange:[],reachedstart:[],reachedend:[],scrollinteractionend:[]};if("object"==typeof FTScrollerOptions&&FTScrollerOptions)for(b in FTScrollerOptions)FTScrollerOptions.hasOwnProperty(b)&&Te.hasOwnProperty(b)&&(Te[b]=FTScrollerOptions[b]);if(v){for(b in v)if(v.hasOwnProperty(b)){if("paginatedSnap"===b){console.warn('FTScroller: "paginatedSnap" is deprecated; converting to "singlePageScrolls"'),Te.singlePageScrolls=v.paginatedSnap;continue}Te.hasOwnProperty(b)&&(Te[b]=v[b])}v.hasOwnProperty("snapSizeX")&&!isNaN(v.snapSizeX)&&(Pe.userX=Pe.x=v.snapSizeX),v.hasOwnProperty("snapSizeY")&&!isNaN(v.snapSizeY)&&(Pe.userY=Pe.y=v.snapSizeY),v.contentWidth&&v.contentHeight&&(v.updateOnChanges=!1)}return Te.scrollResponseBoundary=Math.min(Te.scrollBoundary,Te.scrollResponseBoundary),Te.scrollingX&&(Ge.x=!0),Te.scrollingY&&(Ge.y=!0),on=Te.enableRequestAnimationFrameSupport&&on,ln=on&&ln,M=function(e){var n,t;for(ie(),re(),nn&&(window.clearTimeout(nn),nn=!1),n=0,t=Ze.length;t>n;n+=1)window.clearTimeout(Ze[n]);if(Ze.length=0,e&&ze){for(;Se.firstChild;)ze.appendChild(Se.firstChild);ze.removeChild(Ce)}ze=null,Ce=null,Se=null,Oe.x=null,Oe.y=null,Be.x=null,Be.y=null;for(n in sn)sn.hasOwnProperty(n)&&(sn[n].length=0);c&&c===Fe&&(c=!1,Te.windowScrollingActiveFlag&&(window[Te.windowScrollingActiveFlag]=!1))},E=function(e,n){Pe.userX=e,Pe.userY=n,Pe.x=e,Pe.y=n,Le.content.x=Math.ceil(Le.content.rawX/e)*e,Le.content.y=Math.ceil(Le.content.rawY/n)*n,Le.scrollEnd.x=Le.container.x-Le.content.x,Le.scrollEnd.y=Le.container.y-Le.content.y,q(),Y(),K(!0)},C=function(e,n,t){var r,o,i,l,s=0,a={};L(Date.now()),i={x:-e,y:-n};for(l in Ge)if(Ge.hasOwnProperty(l)){if(r=i[l],r===!1)continue;r=Math.min(0,Math.max(Le.scrollEnd[l],r)),Te.snapping&&Pe[l]&&(r=Math.round(r/Pe[l])*Pe[l]),o=t||0,o===!0&&(o=20*Math.sqrt(Math.abs(We[l]-r))),Z(l,r,o),a[l]=r,s=Math.max(s,o)}We.x===i.x&&We.y===i.y||(Ve=!0,J("scrollstart",V()),J("scroll",V())),s?Ze.push(setTimeout(function(){var e;for(e in a)a.hasOwnProperty(e)&&(je[e]=a[e]);P()},s)):P()},S=function(e,n,t){C(parseFloat(e)-We.x,parseFloat(n)-We.y,t)},_=function(e,n,t){v.contentWidth=e||v.contentWidth,v.contentHeight=n||v.contentHeight,j(!!t)},T=function(e,n){return sn.hasOwnProperty(e)?(sn[e].push(n),!0):!1},F=function(e,n){var t;if(!sn.hasOwnProperty(e))return!1;for(t=sn[e].length;t>=0;t-=1)sn[e][t]===n&&sn[e].splice(t,1);return!0},z=function(e){var n,t;for(n in Te.disabledInputMethods)e[n]=!!e[n],Te.disabledInputMethods[n]!==e[n]&&(t=!0),Te.disabledInputMethods[n]=e[n];t&&le()},O=function(e,n,t,r){var o=He;return 0>=t&&(t=Date.now()),Te.windowScrollingActiveFlag&&window[Te.windowScrollingActiveFlag]?!1:(o?A():Ke=!1,Qe.x=e,Qe.y=n,Qe.t=t,qe.x=je.x,qe.y=je.y,en.length=0,en.push({x:e,y:n,t:t}),o&&B(e,n,t,r,o),!0)},B=function(e,n,t,r,o){var i,l,s,a=!1,u={x:e-Qe.x,y:n-Qe.y};if(0>=t&&(t=Date.now()),qe.x=We.x+u.x,qe.y=We.y+u.y,!Ie&&(c&&c!==Fe?l=!0:Te.windowScrollingActiveFlag&&window[Te.windowScrollingActiveFlag]&&(l=!0),l))return be(),Ne=!1,void(ke&&(re(),Y(!0)||P(!0)));if(ke)r.preventDefault();else{if(s=ee(qe),!o&&(!Je.x||Math.abs(u.x)<Te.scrollResponseBoundary)&&(!Je.y||Math.abs(u.y)<Te.scrollResponseBoundary))return;if((Te.bouncing||o||Je.x&&u.x&&s.x<0||Je.y&&u.y&&s.y<0)&&r.preventDefault(),!(Te.bouncing||o||Je.x&&u.x&&!(s.x>0)||Je.y&&u.y&&!(s.y>0)))return void(Ke=!0);ne(),ke=!0,Ve=!0,He=!0,a=!0}if(Ie||(o&&Te.snapping||Je.x&&Math.abs(u.x)>=Te.scrollBoundary||Je.y&&Math.abs(u.y)>=Te.scrollBoundary)&&(Ie=!0,Ke=!0,c=Fe,Te.windowScrollingActiveFlag&&(window[Te.windowScrollingActiveFlag]=Fe),J("scrollstart",V())),Ie&&ve(),p&&window.getSelection().removeAllRanges(),D(),a&&(u.x>0?We.x-=Te.scrollResponseBoundary:u.x<0&&(We.x+=Te.scrollResponseBoundary),u.y>0?We.y-=Te.scrollResponseBoundary:u.y<0&&(We.y+=Te.scrollResponseBoundary),qe.x=We.x+u.x,qe.y=We.y+u.y,Te.scrollingClassName&&(Ce.className+=" "+Te.scrollingClassName),Te.scrollbars))for(i in Je)Je.hasOwnProperty(i)&&(Be[i].className+=" active");en.push({x:e,y:n,t:t}),en.length>30&&en.splice(0,15)},L=function(e,n){return be(),Ne=!1,re(),J("scrollinteractionend",{}),Ie?(en[en.length-1].t=e,Ie=!1,ke=!1,c=!1,Te.windowScrollingActiveFlag&&(window[Te.windowScrollingActiveFlag]=!1),n&&n.preventDefault(),void(X()||Y()||P())):void(!Y(!0)&&ke&&P(!0))},P=function(e){var n,t,r,o,i;if(He=!1,ke=!1,Te.scrollingClassName&&(i=new RegExp("(?:^|\\s)"+Te.scrollingClassName+"(?!\\S)","g"),Ce.className=Ce.className.replace(i,"")),Te.scrollbars)for(r in Je)Je.hasOwnProperty(r)&&(Be[r].className=Be[r].className.replace(/ ?active/g,""));We.x=je.x,We.y=je.y,o=V(),e||(J("scroll",o),K(!0)),o.cancelled=e,J("scrollend",o);for(r in Je)Je.hasOwnProperty(r)&&(Oe[r].style[h]="",Te.scrollbars&&(Be[r].style[h]=""));for(n=0,t=Ze.length;t>n;n+=1)window.clearTimeout(Ze[n]);Ze.length=0},A=function(){var e,n,t;He=!1,U();for(e in Je)Je.hasOwnProperty(e)&&Z(e,We[e],16,Te.bounceDecelerationBezier);for(K(!1),n=0,t=Ze.length;t>n;n+=1)window.clearTimeout(Ze[n]);Ze.length=0},X=function(){var e,n,t,r,o,i,l,s,a,c,u,d,p,f,h,y,m,g,v,b,M,E=0,C=!1,S={};if(1===en.length||!Te.flinging||"scrollwheel"===Ne)return!1;for(n in Je)if(Je.hasOwnProperty(n)){for(d=350,u=0,f=!1,p=!1,g=void 0,y=Te.flingBezier,o=en[en.length-1],i=en[en.length-2],e=en.length-3;e>=0&&!(o.t-en[e].t>100);e-=1)i=en[e];if(t=o.t-i.t,t||(t=16),r=(o[n]-i[n])/t,Math.abs(r)<x?(l=0,s=0):(l=Math.log(x/Math.abs(r))/Math.log(w),s=r*(1-Math.pow(w,l+1))/(1-w)),a=Math.floor(je[n]+s),Te.bouncing||(0===je[n]&&a>0?a=0:je[n]===Le.scrollEnd[n]&&a<je[n]&&(a=je[n])),Te.singlePageScrolls&&Te.snapping?(v=-je[n]/Pe[n],v=Xe[n]<v?Math.floor(v):Math.ceil(v),a>-(Xe[n]-1)*Pe[n]?u=a+(Xe[n]-1)*Pe[n]:a<-(Xe[n]+1)*Pe[n]?u=a+(Xe[n]+1)*Pe[n]:Math.abs(r)>x&&(a=0>r?Math.floor(je[n]/Pe[n])*Pe[n]:Math.ceil(je[n]/Pe[n])*Pe[n],l=Math.min(Te.maxFlingDuration,l*(a-je[n])/s))):Te.snapping&&(u=a-Math.round(a/Pe[n])*Pe[n]),a-u>0?(u=a,f=!0):a-u<Le.scrollEnd[n]&&(u=a-Le.scrollEnd[n],f=!0),u&&(f&&Te.bouncing&&s?(s=Math.floor(s),b=a>0?a-Math.max(0,je[n]):a-Math.min(Le.scrollEnd[n],je[n]),M=s-b,s&&l?(m=y._getCoordinateForT(y.getTForY((s-b)/s,1/l),y._p1.x,y._p2.x),g=m*l):m=0,h=Math.ceil(b/8),Math.abs(h)>Le.container[n]/2&&(h=0>h?-Math.floor(Le.container[n]/2):Math.floor(Le.container[n]/2)),p=a>0?0:Le.scrollEnd[n],0===m?(l/=6,a=je[n]+M+h,c=l):(c=(m+(1-m)/6)*l,G(n,je[n]+M+h,(1-m)*l/6,Te.bounceDecelerationBezier,g),y=y.divideAtX(c/l,1/l)[0],l=c,a=je[n]+M+h)):0>s&&s>u||s>0&&u>s?(a-=Math.floor(s/2),u-=Math.floor(s/2),d=50*Math.sqrt(Math.abs(u)),p=a-u,l=350,c=.97*l):(a-=u,s?(0>s&&0>u||s>0&&u>0)&&(m=y._getCoordinateForT(y.getTForY((Math.abs(s)-Math.abs(u))/Math.abs(s),1/l),y._p1.x,y._p2.x),y=y.divideAtX(m,1/l)[0],l=Math.round(l*m)):l=d,u=0,d=0)),a===je[n]&&!u)continue;C=!0,Z(n,a,l,y,g),u&&d&&G(n,p,d,Te.bounceBezier,c),E=Math.max(E,u?c+d:l),S[n]=p===!1?a:p}return C&&E&&Ze.push(setTimeout(function(){var e;for(e in S)S.hasOwnProperty(e)&&(je[e]=S[e]);P()},E)),C},Y=function(e){var n,t=e?100:350,r=je;Te.snapping&&(Ae=R(r),r=N(Ae,r)),r=I(r);var o=!1;for(n in Ge)Ge.hasOwnProperty(n)&&r[n]!==je[n]&&(o=!0);if(!o)return!1;for(n in Ge)Ge.hasOwnProperty(n)&&Z(n,r[n],t);return Ze.push(setTimeout(function(){je=r,P(e)},t)),!0},R=function(e){var n,t={x:0,y:0};for(n in Je)Je.hasOwnProperty(n)&&Pe[n]&&(t[n]=Math.round(e[n]/Pe[n]));return t},N=function(e,n){var t,r={x:n.x,y:n.y};for(t in Je)Je.hasOwnProperty(t)&&(r[t]=e[t]*Pe[t]);return r},D=function(){var e,n,t;for(e in Je)Je.hasOwnProperty(e)&&(n=0,t=Le.scrollEnd[e],Te.singlePageScrolls&&Te.snapping&&(n=Math.min(n,-(Xe[e]-1)*Pe[e]),t=Math.max(t,-(Xe[e]+1)*Pe[e])),qe[e]>n?qe[e]=n+$(qe[e]-n,e):qe[e]<t&&(qe[e]=t+$(qe[e]-t,e)));on||te()},I=function(e){var n,t={x:e.x,y:e.y};for(n in Je)if(Je.hasOwnProperty(n)){if(e[n]>0){t[n]=0;continue}if(e[n]<Le.scrollEnd[n]){t[n]=Le.scrollEnd[n];continue}}return t},k=function(){var e,n,t;if(!H()){for(e=ze.ownerDocument.createDocumentFragment(),n=document.createElement("DIV"),e.appendChild(n),n.innerHTML=FTScroller.prototype.getPrependedHTML(!Te.scrollingX,!Te.scrollingY,Te.hwAccelerationClass)+FTScroller.prototype.getAppendedHTML(!Te.scrollingX,!Te.scrollingY,Te.hwAccelerationClass,Te.scrollbars),Ce=n.firstElementChild,t=Ce,Te.scrollingX&&(Oe.x=Ce.firstElementChild,t=Oe.x,Te.scrollbars&&(Be.x=Ce.getElementsByClassName("ftscroller_scrollbarx")[0])),Te.scrollingY?(Oe.y=t.firstElementChild,Te.scrollbars&&(Be.y=Ce.getElementsByClassName("ftscroller_scrollbary")[0]),Se=Oe.y):Se=Oe.x;ze.firstChild;)Se.appendChild(ze.firstChild);ze.appendChild(Ce)}},H=function(){var e,n,t,r,o,i,l,s,a;if(e=ze.firstElementChild,e&&-1!==e.className.indexOf("ftscroller_container")){if(Te.scrollingX){if(n=e.firstElementChild,!n||-1===n.className.indexOf("ftscroller_x"))return;if(r=n,Te.scrollbars){if(l=e.getElementsByClassName("ftscroller_scrollbarx"))for(s=0,a=l.length;a>s;s+=1)if(l[s].parentNode===e){o=l[s];break}if(!o)return}}else r=e;if(Te.scrollingY){if(t=r.firstElementChild,!t||-1===t.className.indexOf("ftscroller_y"))return;if(Te.scrollbars){if(l=e.getElementsByClassName("ftscroller_scrollbary"))for(s=0,a=l.length;a>s;s+=1)if(l[s].parentNode===e){i=l[s];break}if(!i)return}}return Ce=e,n&&(Oe.x=n),t&&(Oe.y=t),o&&(Be.x=o),i&&(Be.y=i),Se=Te.scrollingY?t:n,!0}},W=function(e){nn&&window.clearTimeout(nn),e&&"resize"===e.type?j():nn=setTimeout(function(){j()},100)},j=function(e){var n;if(!Ce||!Se)return!1;nn&&(window.clearTimeout(nn),nn=!1);var t,r,o;o={x:!1,y:!1};for(n in o)o.hasOwnProperty(n)&&(0===je[n]?o[n]=-1:je[n]<=Le.scrollEnd[n]?o[n]=1:2*je[n]<=Le.scrollEnd[n]+5&&2*je[n]>=Le.scrollEnd[n]-5&&(o[n]=0));t=Ce.offsetWidth,r=Ce.offsetHeight;var i=v.contentWidth||Se.offsetWidth,l=v.contentHeight||Se.offsetHeight,s=i,a=l,c={x:je.x,y:je.y};if(Pe.userX||(Pe.x=t),Pe.userY||(Pe.y=r),Te.snapping&&(s=Pe.userX?Math.ceil(s/Pe.userX)*Pe.userX:Math.ceil(s/Pe.x)*Pe.x,a=Pe.userY?Math.ceil(a/Pe.userY)*Pe.userY:Math.ceil(a/Pe.y)*Pe.y),Le.container.x!==t||Le.container.y!==r||Le.content.x!==s||Le.content.y!==a)if(Le.container.x=t,Le.container.y=r,Le.content.x=s,Le.content.rawX=i,Le.content.y=a,Le.content.rawY=l,Le.scrollEnd.x=t-s,Le.scrollEnd.y=r-a,q(),Ie)je.x--,je.y--,D();else{!e&&Te.snapping&&(K(),c=N(Ae,je));for(n in c)if(c.hasOwnProperty(n)){if(Le.container[n]<Le.content[n]&&Ve&&Te.baseAlignments[n]!==o[n])continue;1===Te.baseAlignments[n]?c[n]=Le.scrollEnd[n]:0===Te.baseAlignments[n]?c[n]=Math.floor(Le.scrollEnd[n]/2):-1===Te.baseAlignments[n]&&(c[n]=0)}c=I(c),Te.scrollingX&&c.x!==je.x&&(Z("x",c.x,0),We.x=c.x),Te.scrollingY&&c.y!==je.y&&(Z("y",c.y,0),We.y=c.y)}},q=function(){Te.scrollbars&&(Te.scrollingX&&(Be.x.style.width=Math.max(6,Math.round(Le.container.x*(Le.container.x/Le.content.x)-4))+"px"),Te.scrollingY&&(Be.y.style.height=Math.max(6,Math.round(Le.container.y*(Le.container.y/Le.content.y)-4))+"px")),Je={},Te.scrollingX&&(Le.content.x>Le.container.x||Te.alwaysScroll)&&(Je.x=!0),Te.scrollingY&&(Le.content.y>Le.container.y||Te.alwaysScroll)&&(Je.y=!0)},U=function(){var e,n,r;for(e in Je)Je.hasOwnProperty(e)&&(n=window.getComputedStyle(Oe[e],null)[t],r=n.split(", "),6===r.length?We[e]=parseInt(r["y"===e?5:4],10):We[e]=parseInt(r["y"===e?13:12],10),je[e]=We[e])},K=function(e){var n,t={x:0,y:0};if(Te.snapping){for(n in Je)Je.hasOwnProperty(n)&&(t[n]=Math.max(0,Math.min(Math.ceil(Le.content[n]/Pe[n])-1,Math.round(-je[n]/Pe[n]))));t.x===Ye.x&&t.y===Ye.y||(Ye.x=t.x,Ye.y=t.y,J("segmentwillchange",{segmentX:t.x,segmentY:t.y})),e&&(t.x===Xe.x&&t.y===Xe.y||(Xe.x=t.x,Xe.y=t.y,J("segmentdidchange",{segmentX:t.x,segmentY:t.y})))}},Z=function(n,t,r,o,i){var l,s=null;return Oe[n]?(r?(o||(o=Te.flingBezier),l=e+"transform "+r+"ms "+o.toString()):l="",Oe[n].style[h]=l,Te.scrollbars&&(Be[n].style[h]=l),Oe[n].style[f]=y+m[n]+t+"px"+g[n],Te.scrollbars&&(Be[n].style[f]=y+m[n]+-t*Le.container[n]/Le.content[n]+"px"+g[n]),t>=0?s="start":t<=Le.scrollEnd[n]&&(s="end"),s!==Ue[n]&&(null!==s&&(r?Ze.push(setTimeout(function(){J("reached"+s,{axis:n})},i||r)):J("reached"+s,{axis:n})),Ue[n]=s),void(r||(je[n]=t))):!1},V=function(){return{scrollLeft:-je.x,scrollTop:-je.y}},G=function(e,n,t,r,o){Ze.push(setTimeout(function(){Z(e,n,t,r)},o))},J=function(e,n){var t,r;for(n.srcObject=Ee,t=0,r=sn[e].length;r>t;t+=1)try{sn[e][t](n)}catch(o){window.console&&window.console.error&&(o.message?window.console.error(o.message+" ("+o.sourceURL+", line "+o.line+")"):(window.console.error("Error encountered executing FTScroller event listener callback for ["+e+']. Add a "debugger" statement here to obtain a full backtrace.'),window.console.dir&&window.console.dir(o)))}},Q=function(e){var n,t,r,o=Me(e.target),i=Me(Ce),l={x:"left",y:"top"},s={x:"right",y:"bottom"},a={x:"width",y:"height"};if(Ne===!1){for(t in Je)if(Je.hasOwnProperty(t)){if(o[l[t]]>=i[l[t]]&&o[s[t]]<=i[s[t]])continue;if(o[a[t]]>i[a[t]]&&(r=o[a[t]]-Math.max(0,i[l[t]]-o[l[t]])-Math.max(0,o[s[t]]-i[s[t]]),r>=i[a[t]]/2))continue;n=-Math.round(o[a[t]]/2-je[t]+o[l[t]]-i[l[t]]-i[a[t]]/2),n=Math.min(0,Math.max(Le.scrollEnd[t],n)),Z(t,n,0),We[t]=n}J("scroll",V())}},$=function(e,n){if(!Te.bouncing)return 0;var t=Math.exp(e/Le.container[n]);return Math.round(.6*Le.container[n]*(t-1)/(t+1))},ee=function(e){var n,t,r={};for(n in e)e.hasOwnProperty(n)&&(t=e[n],t>=0?r[n]=t:t>Le.scrollEnd[n]?r[n]=-1:r[n]=Le.scrollEnd[n]-t);return r},ne=function(){on&&(re(),rn=on(te))},te=function an(){var e,n;on&&(rn=on(an));for(e in Je)Je.hasOwnProperty(e)&&qe[e]!==je[e]&&(Z(e,qe[e]),n=!0);Ie&&n&&(J("scroll",V()),K(!1))},re=function(){rn!==!1&&ln&&(ln(rn),rn=!1)},le=function(){ie(),oe()},oe=function(){var e;Ce&&(s&&!Te.disabledInputMethods.pointer?r?(Ce.addEventListener("MSPointerDown",fe),Ce.addEventListener("MSPointerMove",he),Ce.addEventListener("MSPointerUp",ye),Ce.addEventListener("MSPointerCancel",me)):(Ce.addEventListener("pointerdown",fe),Ce.addEventListener("pointermove",he),Ce.addEventListener("pointerup",ye),Ce.addEventListener("pointercancel",me)):(u&&!Te.disabledInputMethods.touch&&(Ce.addEventListener("touchstart",se),Ce.addEventListener("touchmove",ae),Ce.addEventListener("touchend",ce),Ce.addEventListener("touchcancel",ce)),Te.disabledInputMethods.mouse||Ce.addEventListener("mousedown",ue)),Te.disabledInputMethods.scroll||(Ce.addEventListener("DOMMouseScroll",xe),Ce.addEventListener("mousewheel",xe)),Te.disabledInputMethods.mouse&&Te.disabledInputMethods.touch&&Te.disabledInputMethods.pointer||(s?document.addEventListener("click",we,!0):Ce.addEventListener("click",we,!0)),Te.disabledInputMethods.focus||Se.addEventListener("focus",Q),Te.updateOnChanges&&(_e||(e=window.MutationObserver||window.WebKitMutationObserver||window[n+"MutationObserver"],e&&(_e=new e(W))),_e?_e.observe(Se,{childList:!0,characterData:!0,subtree:!0}):Se.addEventListener("DOMSubtreeModified",function(e){(!e||e.srcElement!==Se&&-1===e.srcElement.className.indexOf("ftscroller_"))&&W()},!0),Se.addEventListener("load",W)),Te.updateOnWindowResize&&window.addEventListener("resize",W))},ie=function(){Ce&&(Ce.removeEventListener("MSPointerDown",fe),Ce.removeEventListener("MSPointerMove",he),Ce.removeEventListener("MSPointerUp",ye),Ce.removeEventListener("MSPointerCancel",me),Ce.removeEventListener("pointerdown",fe),Ce.removeEventListener("pointermove",he),Ce.removeEventListener("pointerup",ye),Ce.removeEventListener("pointercancel",me),Ce.removeEventListener("touchstart",se),Ce.removeEventListener("touchmove",ae),Ce.removeEventListener("touchend",ce),Ce.removeEventListener("touchcancel",ce),Ce.removeEventListener("mousedown",ue),Ce.removeEventListener("DOMMouseScroll",xe),Ce.removeEventListener("mousewheel",xe),Ce.removeEventListener("click",we,!0)),Se&&(Se.removeEventListener("focus",Q),Se.removeEventListener("DOMSubtreeModified",W),Se.removeEventListener("load",W)),_e&&_e.disconnect(),document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",pe),document.removeEventListener("click",we,!0),window.removeEventListener("resize",W)},se=function(e){var n,t,r;if(Ne)for(n=0,t=e.touches.length;t>n;n+=1)e.touches[n].identifier===Ne&&(Re=n);else r=e.touches[0],Ne=r.identifier,Re=0,O(r.clientX,r.clientY,e.timeStamp,e)},ae=function(e){if(Ne!==!1){var n=e.touches[Re];B(n.clientX,n.clientY,e.timeStamp,e)}},ce=function(e){var n,t;if(e.touches)for(n=0,t=e.touches.length;t>n;n+=1)if(e.touches[n].identifier===Ne)return void(Re=n);L(e.timeStamp,e)},ue=function(e){e.button&&2===e.button||e.ctrlKey||(Ce.setCapture&&Ce.setCapture(),document.addEventListener("mousemove",de,!0),document.addEventListener("mouseup",pe,!0),Ne=e.button||1,Re=0,O(e.clientX,e.clientY,e.timeStamp,e))},de=function(e){Ne&&B(e.clientX,e.clientY,e.timeStamp,e)},pe=function cn(e){e.button&&e.button!==Ne||(document.removeEventListener("mousemove",de,!0),document.removeEventListener("mouseup",cn,!0),Ce.releaseCapture&&Ce.releaseCapture(),L(e.timeStamp,e))},fe=function(e){if(!Ne||e.isPrimary){if(e.pointerType===a){if(Te.disabledInputMethods.touch)return}else if(Te.disabledInputMethods.mouse)return;Ne=e.pointerId,O(e.clientX,e.clientY,e.timeStamp,e)}},he=function(e){Ne===e.pointerId&&B(e.clientX,e.clientY,e.timeStamp,e)},ye=function(e){Ne===e.pointerId&&L(e.timeStamp,e)},me=function(e){L(e.timeStamp,e)},ge=function(e){De=!1},we=function(e){return Ke?(e.preventDefault(),e.stopPropagation(),Ne||(Ke=!1),!1):!0},xe=function(e){var n,t;if("scrollwheel"!==Ne){if(Ne!==!1)return!0;if(Ne="scrollwheel",$e.x=0,$e.y=0,!O(e.clientX,e.clientY,Date.now(),e))return}e.wheelDelta?e.wheelDeltaX?(n=e.wheelDeltaX/2,t=e.wheelDeltaY/2):(n=0,t=e.wheelDelta/2):e.axis&&e.axis===e.HORIZONTAL_AXIS?(n=-10*e.detail,t=0):(n=0,t=-10*e.detail),!Te.invertScrollWheel&&(Te.scrollingX&&!Te.scrollingY&&Math.abs(n)<Math.abs(t)||!Te.scrollingX&&Te.scrollingY&&Math.abs(n)>Math.abs(t))||(!Te.invertScrollWheel||Te.scrollingY||n||(n=t,t=0),$e.x=Math.round($e.x+n),$e.y=Math.round($e.y+t),B(Qe.x+$e.x,Qe.y+$e.y,e.timeStamp,e),tn&&clearTimeout(tn),tn=setTimeout(function(){be(),Ne=!1,Ie=!1,Ke=!1,ke=!1,c=!1,Te.windowScrollingActiveFlag&&(window[Te.windowScrollingActiveFlag]=!1),re(),Y()||P()},300))},ve=function(){De||Ne===!1||"scrollwheel"===Ne||(s&&(Ce[o](Ne),Ce.addEventListener(l,ge,!1)),De=!0)},be=function(){De&&(s&&(Ce.removeEventListener(l,ge,!1),Ce[i](Ne)),De=!1)},Me=function(e){if(e.getBoundingClientRect)return e.getBoundingClientRect();for(var n=0,t=0,r=e;r;)n=n+r.offsetLeft-r.scrollLeft,t=t+r.offsetTop-r.scrollTop,r=r.offsetParent;return{left:n,top:t,width:e.offsetWidth,height:e.offsetHeight}},k(),j(),oe(),Ee={destroy:M,setSnapSize:E,scrollTo:C,scrollBy:S,updateDimensions:_,addEventListener:T,removeEventListener:F,setDisabledInputMethods:z},Object.defineProperties&&Object.defineProperties(Ee,{scrollHeight:{get:function(){return Le.content.y},set:function(e){throw new SyntaxError("scrollHeight is currently read-only - ignoring "+e)}},scrollLeft:{get:function(){return-je.x},set:function(e){return C(e,!1,!1),-je.x}},scrollTop:{get:function(){return-je.y},set:function(e){return C(!1,e,!1),-je.y}},scrollWidth:{get:function(){return Le.content.x},set:function(e){throw new SyntaxError("scrollWidth is currently read-only - ignoring "+e)}},segmentCount:{get:function(){return Te.snapping?{x:Math.ceil(Le.content.x/Pe.x),y:Math.ceil(Le.content.y/Pe.y)}:{x:NaN,y:NaN}},set:function(e){throw new SyntaxError("segmentCount is currently read-only - ignoring "+e)}},currentSegment:{get:function(){return{x:Ye.x,y:Ye.y}},set:function(e){throw new SyntaxError("currentSegment is currently read-only - ignoring "+e)}},contentContainerNode:{get:function(){return Se},set:function(e){throw new SyntaxError("contentContainerNode is currently read-only - ignoring "+e)}}}),Ee},FTScroller.prototype.getPrependedHTML=function(e,n,t){t||(t="object"==typeof FTScrollerOptions&&FTScrollerOptions.hwAccelerationClass?FTScrollerOptions.hwAccelerationClass:"ftscroller_hwaccelerated");var r='<div class="ftscroller_container">';return e||(r+='<div class="ftscroller_x '+t+'">'),n||(r+='<div class="ftscroller_y '+t+'">'),r},FTScroller.prototype.getAppendedHTML=function(e,n,t,r){t||(t="object"==typeof FTScrollerOptions&&FTScrollerOptions.hwAccelerationClass?FTScrollerOptions.hwAccelerationClass:"ftscroller_hwaccelerated");var o="";return e||(o+="</div>"),n||(o+="</div>"),r&&(e||(o+='<div class="ftscroller_scrollbar ftscroller_scrollbarx '+t+'"><div class="ftscroller_scrollbarinner"></div></div>'),n||(o+='<div class="ftscroller_scrollbar ftscroller_scrollbary '+t+'"><div class="ftscroller_scrollbarinner"></div></div>')),o+="</div>"}}(),function(){"use strict";function e(e){return e>1?1:0>e?0:e}CubicBezier=function(n,t,r,o){this._p1={x:e(n),y:e(t)},this._p2={x:e(r),y:e(o)}},CubicBezier.prototype._getCoordinateForT=function(e,n,t){var r=3*n,o=3*(t-n)-r,i=1-r-o;return((i*e+o)*e+r)*e},CubicBezier.prototype._getCoordinateDerivateForT=function(e,n,t){var r=3*n,o=3*(t-n)-r,i=1-r-o;return(3*i*e+2*o)*e+r},CubicBezier.prototype._getTForCoordinate=function(e,n,t,r){if(!isFinite(r)||0>=r)throw new RangeError('"epsilon" must be a number greater than 0.');var o,i,l,s;for(o=e,i=0;8>i;i+=1){if(l=this._getCoordinateForT(o,n,t)-e,Math.abs(l)<r)return o;if(s=this._getCoordinateDerivateForT(o,n,t),Math.abs(s)<1e-6)break;o-=l/s}o=e;var a=0,c=1;if(a>o)return a;if(o>c)return c;for(;c>a;){if(l=this._getCoordinateForT(o,n,t),Math.abs(l-e)<r)return o;e>l?a=o:c=o,o=.5*(c-a)+a}return o},CubicBezier.prototype.getPointForT=function(e){return 0===e||1===e?{x:e,y:e}:((0>e||e>1)&&_throwRangeError("t",e),{x:this._getCoordinateForT(e,this._p1.x,this._p2.x),y:this._getCoordinateForT(e,this._p1.y,this._p2.y)})},CubicBezier.prototype.getTForX=function(e,n){return this._getTForCoordinate(e,this._p1.x,this._p2.x,n)},CubicBezier.prototype.getTForY=function(e,n){return this._getTForCoordinate(e,this._p1.y,this._p2.y,n)},CubicBezier.prototype._getAuxPoints=function(e){(0>=e||e>=1)&&_throwRangeError("t",e);var n={x:e*this._p1.x,y:e*this._p1.y},t={x:this._p1.x+e*(this._p2.x-this._p1.x),y:this._p1.y+e*(this._p2.y-this._p1.y)},r={x:this._p2.x+e*(1-this._p2.x),y:this._p2.y+e*(1-this._p2.y)},o={x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)},i={x:t.x+e*(r.x-t.x),y:t.y+e*(r.y-t.y)},l={x:o.x+e*(i.x-o.x),y:o.y+e*(i.y-o.y)};return{i0:n,i1:t,i2:r,j0:o,j1:i,k:l}},CubicBezier.prototype.divideAtT=function(e){if((0>e||e>1)&&_throwRangeError("t",e),0===e||1===e){var n=[];return n[e]=CubicBezier.linear(),n[1-e]=this.clone(),n}var t={},r={},o=this._getAuxPoints(e),i=o.i0,l=o.i2,s=o.j0,a=o.j1,c=o.k,u=c.x,d=c.y;return t.p1={x:i.x/u,y:i.y/d},t.p2={x:s.x/u,y:s.y/d},r.p1={x:(a.x-u)/(1-u),y:(a.y-d)/(1-d)},r.p2={x:(l.x-u)/(1-u),y:(l.y-d)/(1-d)},[new CubicBezier(t.p1.x,t.p1.y,t.p2.x,t.p2.y),new CubicBezier(r.p1.x,r.p1.y,r.p2.x,r.p2.y)]},CubicBezier.prototype.divideAtX=function(e,n){(0>e||e>1)&&_throwRangeError("x",e);var t=this.getTForX(e,n);return this.divideAtT(t)},CubicBezier.prototype.divideAtY=function(e,n){(0>e||e>1)&&_throwRangeError("y",e);var t=this.getTForY(e,n);return this.divideAtT(t)},CubicBezier.prototype.clone=function(){return new CubicBezier(this._p1.x,this._p1.y,this._p2.x,this._p2.y)},CubicBezier.prototype.toString=function(){return"cubic-bezier("+[this._p1.x,this._p1.y,this._p2.x,this._p2.y].join(", ")+")"},CubicBezier.linear=function(){return new CubicBezier},CubicBezier.ease=function(){return new CubicBezier(.25,.1,.25,1)},CubicBezier.linear=function(){return new CubicBezier(0,0,1,1)},CubicBezier.easeIn=function(){return new CubicBezier(.42,0,1,1)},CubicBezier.easeOut=function(){return new CubicBezier(0,0,.58,1)},CubicBezier.easeInOut=function(){return new CubicBezier(.42,0,.58,1)}}(),"undefined"!=typeof define&&define.amd?define(function(){"use strict";return{FTScroller:FTScroller,CubicBezier:CubicBezier}}):"undefined"!=typeof module&&module.exports&&(module.exports=function(e,n){"use strict";return new FTScroller(e,n)},module.exports.FTScroller=FTScroller,module.exports.CubicBezier=CubicBezier);
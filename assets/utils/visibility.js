/*
 * Author: Alex Gibson
 * https://github.com/alexgibson/visibility.js
 * License: MIT license
 */
!function(i,n){"function"==typeof define&&define.amd?define(function(){return n(i,i.document)}):"undefined"!=typeof module&&module.exports?module.exports=n(i,i.document):i.Visibility=n(i,i.document)}("undefined"!=typeof window?window:this,function(i,n){"use strict";function t(i){if(this.options={onVisible:null,onHidden:null},"object"==typeof i){for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n]);"function"==typeof this.options.onHidden&&(this.onHiddenCallback=this.options.onHidden),"function"==typeof this.options.onVisible&&(this.onVisibleCallback=this.options.onVisible)}this.change=this.bindContext(this,this.visibilityChange),this.configListener("add")}return t.prototype.configListener=function(i){var t,e;t=this.getHiddenProp(n),t&&(e=t.replace(/[H|h]idden/,"")+"visibilitychange","add"===i?n.addEventListener(e,this.change,!1):"remove"===i&&n.removeEventListener(e,this.change,!1))},t.prototype.getHiddenProp=function(i){var n=["webkit","moz","ms","o"];if("hidden"in i)return"hidden";for(var t=0;t<n.length;t+=1)if(n[t]+"Hidden"in i)return n[t]+"Hidden";return null},t.prototype.isHidden=function(){var i=this.getHiddenProp(n);return i?n[i]:!1},t.prototype.isSupported=function(){var i=this.getHiddenProp(n);return!!i},t.prototype.bindContext=function(i,n){return function(){return n.call(i)}},t.prototype.visibilityChange=function(){var i=this.isHidden();i&&this.onHiddenCallback?this.onHiddenCallback():!i&&this.onVisibleCallback&&this.onVisibleCallback()},t.prototype.destroy=function(){this.configListener("remove"),this.onHiddenCallback=null,this.onVisibleCallback=null},t});
/**
* Popr 2.0.0
* Copyright (c) 2015 Tipue
* popr is released under the MIT License
* http://www.tipue.com/popr
* https://github.com/foo123/Popr2
**/
!function(t){"use strict";function e(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}}function o(t){var e=t.getBoundingClientRect(),o=document.body,p=window,n=o.clientTop||0,i=o.clientLeft||0,r=p.pageYOffset||o.scrollTop,c=p.pageXOffset||o.scrollLeft,a=e.top+r-n,d=e.left+c-i;return{top:a,left:d,width:t.offsetWidth,height:t.offsetHeight}}var p=!1;t.fn.popr2=function(n){var i,r,c=t.extend({selector:".popr",attribute:"data-popr",activate:"click",speed:300,mode:"bottom"},n||{});c.selector=c.selector||".popr",c.activate=c.activate||"click",c.attribute=c.attribute||"data-popr","mouseup"===c.activate?(r=c.activate+".popr2box",i=c.activate):(r=c.activate+".popr2box mouseup.popr2box",i=c.activate),t(this).on(r,c.selector,function(n){if(n.stopPropagation(),i!==n.type)return!1;var r=this,a=t(r);t(".popr_container").remove();var d=c.mode,u=a.attr("data-popr-mode");u&&(d=u);var l=t('<div class="popr_container popr_container_'+d+'"><div class="popr_point"><div class="popr_content">'+t("#"+a.attr(c.attribute)).html()+"</div></div></div>").appendTo("body"),s=o(r),m=e(),f=l.outerWidth(),h=l.outerHeight(),v=s.top+s.height,b=s.left+(s.width-f)/2;("top"==d||v+h>m.t+m.h)&&(v-=s.height+h,"bottom"==d&&(d="top",l.removeClass("popr_container_bottom").addClass("popr_container_top"))),b+f>m.l+m.w&&(b-=f),l.css({left:b+"px",top:v+"px"}).fadeIn(c.speed),p||(t("body").on("mouseup.popr2 keyup.popr2",function(e){("mouseup"===e.type||27===e.which)&&(t("body").off("mouseup.popr2 keyup.popr2"),p=!1,setTimeout(function(){t(".popr_container").remove()},40))}),p=!0)})}}(jQuery);
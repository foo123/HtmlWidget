/**
* Popr 2.0.0
* Copyright (c) 2015 Tipue
* popr is released under the MIT License
* http://www.tipue.com/popr
* https://github.com/foo123/Popr2
**/
!function(t){"use strict";function e(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}}function o(t){var e=t.getBoundingClientRect(),o=document.body,p=window,n=o.clientTop||0,r=o.clientLeft||0,i=p.pageYOffset||o.scrollTop,a=p.pageXOffset||o.scrollLeft,c=e.top+i-n,s=e.left+a-r;return{top:c,left:s,width:t.offsetWidth,height:t.offsetHeight}}function p(t,p){var n=o(p),r=e(),i=t.outerWidth(),a=t.outerHeight(),c=n.top+n.height,s=n.left+(n.width-i)/2;return(t.hasClass("popr_container_top")||c+a>r.t+r.h)&&(c-=n.height+a,t.hasClass("popr_container_bottom")&&t.removeClass("popr_container_bottom").addClass("popr_container_top")),s<r.l?(s=n.left+n.width,t.addClass("popr_container_right")):s+i>r.l+r.w&&(s=n.left-i,t.addClass("popr_container_left")),t.css({left:s+"px",top:c+"px"})}var n=!1,r=!1;t.fn.popr2=function(e){var o,i,a=t.extend({selector:".popr",attribute:"data-popr",activate:"click","class":"",mode:"bottom"},e||{});a.selector=a.selector||".popr",a.activate=a.activate||"click",a.attribute=a.attribute||"data-popr","mouseup"===a.activate?(i=a.activate+".popr2box",o=a.activate):(i=a.activate+".popr2box mouseup.popr2box",o=a.activate),t(this).on(i,a.selector,function(e){if(e.stopPropagation(),o!==e.type)return!1;var r,i,c,s=this,d=t(s),l="";t(".popr_container").remove(),c=a.mode,(i=d.attr("data-popr-mode"))&&(c=i),l=d.attr("data-popr-class"),r="popr_container popr_container_"+c+(a["class"]?" "+a["class"]:"")+(l?" "+l:"");var u=t('<div class="'+r+'"><div class="popr_content">'+t("#"+d.attr(a.attribute)).html()+"</div></div>").appendTo("body");u[0]._popr_target=s,p(u,s),n||(t("body").on("mouseup.popr2 keyup.popr2",function(e){var o=t(e.target);("keyup"===e.type&&27===e.which||"mouseup"===e.type&&(o.is("a,label,.popr-item")&&o.parent(".popr_content").length||!o.closest(".popr_container").length))&&(t("body").off("mouseup.popr2 keyup.popr2"),n=!1,setTimeout(function(){t(".popr_container").remove()},10))}),n=!0),u.addClass("popr_visible")}),r||(t(window).on("resize.popr2",function(){t(".popr_container").each(function(){p(t(this),this._popr_target)})}),r=!0)}}(jQuery);
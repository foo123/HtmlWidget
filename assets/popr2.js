/**
* Popr 2.0.0
* Copyright (c) 2015 Tipue
* popr is released under the MIT License
* http://www.tipue.com/popr
* https://github.com/foo123/Popr2
**/
!function(t){"use strict";function e(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}}function o(t){var e=t.getBoundingClientRect(),o=document.body,n=window,p=o.clientTop||0,r=o.clientLeft||0,i=n.pageYOffset||o.scrollTop,a=n.pageXOffset||o.scrollLeft,c=e.top+i-p,d=e.left+a-r;return{top:c,left:d,width:t.offsetWidth,height:t.offsetHeight}}function n(t,n){var p=o(n),r=e(),i=t.outerWidth(),a=t.outerHeight(),c=p.top+p.height,d=p.left+(p.width-i)/2;return(t.hasClass("popr_container_top")||c+a>r.t+r.h)&&(c-=p.height+a,t.hasClass("popr_container_bottom")&&t.removeClass("popr_container_bottom").addClass("popr_container_top")),d<r.l?(d=p.left+p.width,t.addClass("popr_container_right")):d+i>r.l+r.w&&(d=p.left-i,t.addClass("popr_container_left")),t.css({left:d+"px",top:c+"px"})}var p=!1;t.fn.popr2=function(e){var o,r,i=t.extend({selector:".popr",attribute:"data-popr",activate:"click",speed:300,mode:"bottom"},e||{});i.selector=i.selector||".popr",i.activate=i.activate||"click",i.attribute=i.attribute||"data-popr","mouseup"===i.activate?(r=i.activate+".popr2box",o=i.activate):(r=i.activate+".popr2box mouseup.popr2box",o=i.activate),t(this).on(r,i.selector,function(e){if(e.stopPropagation(),o!==e.type)return!1;var r=this,a=t(r);t(".popr_container").remove();var c=i.mode,d=a.attr("data-popr-mode");d&&(c=d);var l=t('<div class="popr_container popr_container_'+c+'"><div class="popr_content">'+t("#"+a.attr(i.attribute)).html()+"</div></div>").appendTo("body");l[0]._popr_target=r,n(l,r).fadeIn(i.speed),p||(t("body").on("mouseup.popr2 keyup.popr2",function(e){var o=t(e.target);("keyup"===e.type&&27===e.which||"mouseup"===e.type&&(o.parent(".popr_content").length||!o.closest(".popr_container").length))&&(t("body").off("mouseup.popr2 keyup.popr2"),p=!1,setTimeout(function(){t(".popr_container").remove()},40))}),p=!0)})}}(jQuery);
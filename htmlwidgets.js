/**
*  HtmlWidget
*  html widgets used as (template) plugins and/or standalone, for Node.js / Browser Javascript, PHP, Python
*
*  @dependencies: FontAwesome, jQuery, SelectorListener
*  @version: 1.0.0
*  https://github.com/foo123/HtmlWidget
*  https://github.com/foo123/components.css
*  https://github.com/foo123/responsive.css
*  https://github.com/foo123/jquery-ui-widgets
*  https://github.com/foo123/modelview-widgets
*  https://github.com/foo123/SelectorListener
*
**/
!function(e,t,a){"use strict";"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(function(e){return a()}):e.htmlwidget=a()}("undefined"!=typeof self?self:this,0,function(e){"use strict";function t(e,t){var a,n,i,l,o,s,d,r;for("data:"===e.substr(0,5)?(-1<(r=e.indexOf(";base64,"))?(i=e.slice(5,r),e=e.slice(r+8),a=w(e)):(i=e.slice(5,r=e.indexOf(",")),e=e.slice(r+1),a=unescape(e)),null==t&&(t=i)):a=e,s=a.length,n=new Uint8Array(s),o=15&s,l=0;l<o;l++)n[l]=255&a.charCodeAt(l);for(l=o;l<s;l+=16)n[d=l]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++),n[d]=255&a.charCodeAt(d++);return new Blob([n],{type:t})}function a(e,t,n,i,l){if(n=n||{},!e||!t)return n;i=!0===i;var o;null!=l?o="-":(l=e.attributes,o="data-"+t+"-");for(var s,d,r,c=o.length,u=0,p=l.length;u<p;u++)(s=l[u].name).length>c&&o===s.slice(0,c)&&(s=s.slice(c),i&&(s=s.toLowerCase().replace(h,function(e,t,a){return a.toUpperCase()})),-1<(r=s.indexOf("-"))?n[d=s.slice(0,r)]=a(e,t,n[d]||{},i,[{name:s.slice(r),value:l[u].value}]):n[s]=l[u].value);return n}function n(e,t,a,i,l){if(a=a||{},!e||!t)return a;i=!0===i,l||(l="data-"+t+"-");for(var o,s,d=Object.keys(e),r=0,c=d.length;r<c;r++)s=e[o=d[r]],i&&(o=o.replace(b,function(e,t,a){return t+"_"+a.toLowerCase()})),"object"==typeof s?a=n(s,t,a,l+o+"-",i):a[l+o]=s;return a}function i(t,a,n){var i=n&&n[s]?n[s]:null;d.fn[t]=function(n){var l,o="string"==typeof n&&n,s=f.call(arguments,1),r=this;return o?this.each(function(){var a,n=d.data(this,t);return"widget"===o?(r=n,!1):"instance"===o?(r=n?n.instance||n:n,!1):!!n&&("dispose"===o||"destroy"===o?("function"==typeof n.dispose?n.dispose():"function"==typeof n.destroy?n.destroy():i&&("function"==typeof i.dispose?i.dispose.call(n):"function"==typeof i.destroy&&i.destroy.call(n)),n=null,d.removeData(this,t),!1):"function"==typeof(l=n[o]||i&&i[o])&&((a=l.apply(n,s))!==n&&e!==a?(r=a&&a.jquery?r.pushStack(a.get()):a,!1):void 0))}):(n=n||{},this.each(function(){var e=d.data(this,t);e?"function"==typeof(l=e.options||i&&i.options)&&l.call(e,n):(d.data(this,t,e=new a(this,n)),"function"==typeof(l=e.init||i&&i.init)&&l.call(e))})),r}}function l(e,t,a){if(void 0!==google.maps.Geocoder){geocoder=new google.maps.Geocoder;var n=a?{location:e}:{address:e};geocoder.geocode(n,function(e,a){t(google.maps.GeocoderStatus.OK==a?{location:e[0].geometry.location,address:e[0].formatted_address,address_components:e[0].address_components,partial_match:e[0].partial_match}:null,a,e)})}else t(null)}function o(e,t,a,n,i,o){var s,d,r={map:e,title:n,position:new google.maps.LatLng(t,a)};return s=new google.maps.Marker(r),i&&(d=new google.maps.InfoWindow({content:i}),google.maps.event.addListener(s,"click",function(){d.open(e,s)})),o.address&&l(o.address,function(e){e&&s.setPosition(e.location)}),s}var s="prototype",d=jQuery,r={VERSION:"1.0.0",widget:{},locale:{},_handle:{}},c=Object.prototype.hasOwnProperty,u="getAttribute",p="hasAttribute",f=Array[s].slice,m=(Object[s].toString,JSON.parse),g=JSON.stringify,w=atob,h=(btoa,/(_)([a-z])/g),b=/([a-z])([A-Z])/g,y=function(e){return parseInt(e||0,10)||0},v=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}();return r.dataOptions=a,r.optionsData=n,r.make=i,r.dispatch=function(e,t,a,n){var i;!1===n?(i=d.Event(e),null!=a&&(i.data=a),d(t).trigger(i)):document.createEvent?((i=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),i.eventName=e,null!=a&&(i.data=a),t.dispatchEvent(i)):((i=document.createEventObject()).eventType=e,i.eventName=e,null!=a&&(i.data=a),t.fireEvent("on"+i.eventType,i))},r.resetFormElements=function(e){if(e.length){var t,a=d('<form style="display:none"></form>').appendTo("body");t=0,d(e).each(function(){var e="__ele_reset_proxy__"+ ++t;d(this).val("").replaceWith('<span id="'+e+'"></span>'),a.append(this)}),a.trigger("reset"),t=0,d(e).each(function(){var e="#__ele_reset_proxy__"+ ++t;d(e).replaceWith(this),d(this).triggerNative("reset")}),a.remove()}return e},d.fn.triggerNative=function(e,t){return this.each(function(){r.dispatch(e,this,t,!0)}),this},d.fn.resetElement=function(){return r.resetFormElements(this),this},i("selectable",r.selectable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.init=function(){var e=d(t),i=t[u]("data-selectable-handle")||a.handle||".w-selectable-handle",l=a.selector||a.item;e.hasClass("w-selectable")||e.addClass("w-selectable"),e.on("click.selectable change.selectable",i,function(e){var t=this,a=d(this),i=(t.type||"").toLowerCase();"checkbox"===i||"radio"===i?(l&&(a=a.closest(l)),t.checked?(a.addClass("w-selected"),a.triggerNative("selected")):(a.removeClass("w-selected"),a.triggerNative("deselected"))):"click"===e.type&&(e.shiftKey||n.clear(),l&&(a=a.closest(l)),a.hasClass("w-selected")?(a.removeClass("w-selected"),a.triggerNative("deselected")):(a.addClass("w-selected"),a.triggerNative("selected")))})},n.selected=function(){return d(t).find(".w-selected")},n.clear=function(){d(t).find(".w-selected").removeClass("w-selected")},n.dispose=function(){d(t).off(".selectable")}}),i("removable",r.removable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.init=function(){var e=d(t),n=t[u]("data-removable-handle")||a.handle||".w-removable-handle",i=t[u]("data-removable-item")||a.selector||a.item,l=parseInt(t[u]("data-removable-animation")||a.animation||400,10);e.hasClass("w-removable")||e.addClass("w-removable"),e.on("click.removable",n,function(){var e=d(this);i&&(e=e.closest(i)),e.fadeOut(l,function(){e.triggerNative("removed"),e.remove()})})},n.dispose=function(){d(t).off(".removable")}}),i("delayable",r.delayable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.init=function(){var e=d(t);e.hasClass("w-delayed")||e.addClass("w-undelayed"),e.children(".w-delayable-overlay").length||e.append('<div class="w-delayable-overlay"><div class="w-spinner w-spinner-dots"></div></div>')},n.enable=function(){var e=d(t);e.hasClass("w-delayed")||e.addClass("w-delayed").removeClass("w-undelayed")},n.disable=function(){var e=d(t);e.hasClass("w-delayed")&&e.addClass("w-undelayed").removeClass("w-delayed")}}),i("disabable",r.disabable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.init=function(){var e=d(t);e.hasClass("w-disabled")||e.addClass("w-undisabled"),e.children(".w-disabable-overlay").length||e.append('<div class="w-disabable-overlay"></div>')},n.enable=function(){var e=d(t);e.hasClass("w-disabled")||e.addClass("w-disabled").removeClass("w-undisabled")},n.disable=function(){var e=d(t);e.hasClass("w-disabled")&&e.addClass("w-undisabled").removeClass("w-disabled")}}),i("sortable",r.sortable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){"function"==typeof Sortable&&(n.instance=Sortable.create(t,{sort:!0,disabled:!1,delay:parseInt(t[u]("data-sortable-delay")||a.delay||0,10),animation:parseInt(t[u]("data-sortable-animation")||a.animation||400,10),draggable:t[u]("data-sortable-item")||a.draggable||a.item||".w-sortable-item",handle:t[u]("data-sortable-handle")||a.handle||".w-sortable-handle"}))},n.dispose=function(){n.instance=null}}),i("template",r.template=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){"function"==typeof Tao&&(n.instance=Tao(t,t[p]("data-tpl-key")?new RegExp(t[u]("data-tpl-key")):a.key||e.key,!(!t[u]("data-tpl-revivable")&&!a.revivable),t[u]("data-tpl-keyseparator")||a.keySeparator))},n.render=function(e,a){n.instance&&(n.instance(e),!0===a&&d(t).triggerNative("render"))},n.dispose=function(){n.instance&&n.instance.dispose(),n.instance=null}}),r.template.key=/\$\(([^\(\)]+)\)/,r.Tpl=r.Template=function e(t,a,n,i){if("function"==typeof Tao)return Tao(t,a||e.key,n,i)},r.Template.key=/\$\(([^\(\)]+)\)/g,i("suggest",r.suggest=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){if("function"==typeof AutoComplete){var e=t[u]("data-suggest-ajax")||a.ajax||t[u]("data-ajax")||null,i=t[u]("data-suggest-data")||a.dataType||"json",l=t[u]("data-suggest-method")||a.method||"GET",o=t[u]("data-suggest-q")||t[u]("data-suggest-param")||a.q||a.param||"suggest",s=null;n.instance=new AutoComplete(t,{minChars:t[u]("data-suggest-min")||a.minChars||3,key:t[u]("data-suggest-key")||a.key||null,value:t[u]("data-suggest-value")||a.value||null,delay:t[u]("data-suggest-delay")||a.delay||150,cache:t[u]("data-suggest-cache")||3e5,noItems:t[u]("data-suggest-noitems")||a.noItems||"No Matches for <strong>{{term}}</strong>",menuClass:t[u]("data-suggest-class")||a.menuClass||"w-suggestions",source:function(a,n){var r=d(t),c=r.closest(".w-wrapper"),u={method:l,dataType:i,ajax:e,suggest:{}};if(u.suggest[o]=a,r.triggerNative("suggest",u),u.suggestions||u.list)n(u.suggestions||u.list);else if(u.ajax){c.addClass("__ajax__");try{s&&s.abort()}catch(e){}s=d.ajax({url:u.ajax,type:u.method,method:u.method,dataType:u.dataType,data:u.suggest,success:function(e){c.removeClass("__ajax__"),n(e)},error:function(){c.removeClass("__ajax__"),n([])}})}else n([])},onSelect:function(e,a,n,i,l,o){d(t).triggerNative("suggest-select",{q:a,item:n,key:l,value:o}).triggerNative("change")}})}},n.suggestions=function(e){n.instance&&(n.instance.suggestions=e)},n.dispose=function(){n.instance&&n.instance.dispose(),n.instance=null}}),i("dnd_uploadable",r.dnd_uploadable=function e(a,n){var i=this;if(!(i instanceof e))return new e(a,n);i.dispose=function(){var e=d(a);e.off(".dnd_uploadable"),e=null},i.init=function(){var e=d(a),i="undefined"!=typeof isMobile&&isMobile.any,l=e.find("input._w-dnd-uploader[type=file]"),o=!i&&e.hasClass("__with_thumbnail__"),s=!i&&(o||e.hasClass("__with_preview__")),r=y(l[0][p]("data-dnd-upload-filesize")?l[0][u]("data-dnd-upload-filesize"):n.filesize||1048576)||1048576,c=l[0][p]("data-dnd-upload-mimetype")?l[0][u]("data-dnd-upload-mimetype"):n.mimetype||null,f=y(l[0][p]("data-dnd-upload-preview")?l[0][u]("data-dnd-upload-preview"):n.preview||140)||140,m=function(t){var a=e.find("input._w-dnd-uploader[type=file]");a[0].files_dropped=null,a.resetElement(),!1!==t&&a.triggerNative("change")};c=c&&"string"==typeof c?new RegExp(".?("+c.replace(/\s/g,"").replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").split("/*").join("/.*")+")$","i"):null,e.addClass("__empty__"),e.on("click.dnd_uploadable",".w-dnd-upload-delete",function(t){return m(),setTimeout(function(){e.find(".w-dnd-upload-upload,.w-dnd-upload-delete").blur()},40),!1}).on("reset.dnd_uploadable","input._w-dnd-uploader[type=file]",function(t){var a=t.target;a.files_dropped=null,e.addClass("__empty__").find(".w-dnd-upload-preview,.w-dnd-upload-thumbnail").remove(),setTimeout(function(){e.find(".w-dnd-upload-upload,.w-dnd-upload-delete").blur(),d(a).triggerNative("change")},40)}).on("change.dnd_uploadable","input._w-dnd-uploader[type=file]",function(a){var n,i,l,u=a.target,p=u.files_dropped&&u.files_dropped.length?u.files_dropped:u.files&&u.files.length?u.files:null;if(setTimeout(function(){e.find(".w-dnd-upload-upload,.w-dnd-upload-delete").blur()},40),p&&p.length){for(e.removeClass("__empty__").find(".w-dnd-upload-preview,.w-dnd-upload-thumbnail").remove(),n=0,i=p.length;n<i;n++)if(r>0&&p[n].size>r||c&&!c.test(p[n].type))return void setTimeout(m,10);for(n=0,i=p.length;n<i;n++)(s||o)&&p[n].type.match("image")?function(a,n){var i=new FileReader;i.addEventListener("load",function(i){var l=i.target.result,r=new Image;r.addEventListener("load",function(){setTimeout(function(){var i,c,p,m,g,w,h=r.width,b=r.height,y=a.name+" ("+a.type+")";if(h<=f?(c=f,i=Math.round(f*h/b)):(i=f,c=Math.round(f*b/h)),p=document.createElement("canvas"),m=p.getContext("2d"),p.width=i,p.height=c,m.drawImage(r,0,0,h,b,0,0,i,c),g=p.toDataURL("image/png"),s&&e.prepend('<img src="'+g+'" data-src-full="'+l+"\" class=\"w-dnd-upload-preview\" onclick=\"window.open(this.getAttribute('data-src-full'),'preview','scrollbars=yes,resizable=yes,width=600,height=400').focus();\" alt=\""+y+'" title="'+y+'" />'),o){if(w='<input type="file" data-alt-value="blob_attached" class="w-dnd-upload-thumbnail" style="display:none !important;"',u.name){var v=u.name.match(/(.*?)(\[([^\[\]]+)\])?(\[\s*\])?$/);v[2]?w+=' name="'+v[1]+"["+v[3]+"_thumbnail]"+(v[4]?"["+n+"]":"")+'"':w+=' name="'+v[1]+"_thumbnail"+(v[4]?"["+n+"]":"")+'"'}w+=" />",e.append(w=d(w)),w[0].blob_attached=[t(g)]}},10)}),r.src=l}),i.readAsDataURL(a)}(p[n],n):(l=p[n].name+" ("+p[n].type+")",e.prepend('<span class="w-dnd-upload-preview" title="'+l+'">'+l+"</span>"))}else e.addClass("__empty__").find(".w-dnd-upload-preview,.w-dnd-upload-thumbnail").remove()}),v&&e.addClass("__dnd-upload__").on("drag.dnd_uploadable dragstart.dnd_uploadable dragend.dnd_uploadable dragover.dnd_uploadable dragenter.dnd_uploadable dragleave.dnd_uploadable drop.dnd_uploadable",function(t){t.preventDefault(),t.stopPropagation();var a=" "+t.type.toLowerCase()+" ";if(-1<" dragover dragenter ".indexOf(a)?e.addClass("__dragover__"):-1<" dragleave dragend drop ".indexOf(a)&&e.removeClass("__dragover__")," drop "===a){var n=t.originalEvent.dataTransfer.files,i=e.find("input._w-dnd-uploader[type=file]");n.length&&(i[0].files_dropped=n),i.triggerNative("change")}})}}),i("uploadable",r.uploadable=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.dispose=function(){var e=d(t);e.off(".uploadable"),e=null},n.init=function(){var e=d(t),n=y(t[p]("data-upload-size")?t[u]("data-upload-size"):a.fileSizeMax||1048576)||1048576,i=t[p]("data-upload-dimensions")?t[u]("data-upload-dimensions").split("x").map(y):a.dimensions?a.dimensions.map(y):null,l=y(t[p]("data-upload-thumbnail")?t[u]("data-upload-thumbnail"):a.thumbnail||120)||120,o=t[p]("data-upload-size-msg")?t[u]("data-upload-size-msg"):a.maxFileSizeMsg||"File size exceeds maximum size limit!",s=t[p]("data-upload-type-msg")?t[u]("data-upload-type-msg"):a.fileTypeMsg||"File type not allowed!",r=t[p]("data-upload-dimensions-msg")?t[u]("data-upload-dimensions-msg"):a.dimensionsMsg||"File dimensions exceed allowed dimensions!";e.on("click.uploadable",".w-upload-thumbnail",function(t){var a=e.find("._w-data"),n=e[0].upload_data||(a.val()?m(a.val()):null);return n&&n.type.match("image")&&(e[0].upload_data||(e[0].upload_data=n),window.open(n.original?n.original:n.file,"preview_"+e[0].id,"scrollbars=yes,resizable=yes,width="+n.width+",height="+n.height).focus()),!1}).on("click.uploadable",".w-upload-delete",function(t){return e[0].upload_data=null,e.find("input._w-uploader[type=file]")[0].value="",e.find("img").attr("src",""),e.find("._w-data").val("").triggerNative("change"),!1}).on("change.uploadable","input._w-uploader[type=file]",function(t){var a,d=t.target,c=d.files[0]||null;return!!c&&(c.type.match("image")?c.size>n?(d.value="",setTimeout(function(){alert(o)},10),!1):((a=new FileReader).addEventListener("load",function(t){var a=t.target.result,n=new Image;n.addEventListener("load",function(){setTimeout(function(){var t,o,s,u,p,f=n.width,m=n.height;if(i&&(f>i[0]||m>i[1]))return d.value="",e.triggerNative("upload-end"),setTimeout(function(){alert(r)},10),!1;t=l,o=Math.round(l*m/f),u=(s=document.createElement("canvas")).getContext("2d"),s.width=t,s.height=o,u.drawImage(n,0,0,f,m,0,0,t,o),p=s.toDataURL("image/png"),e[0].upload_data={name:c.name,type:c.type,size:c.size,file:a,thumb:p,width:f,height:m},e.find("img").attr("src",p),e.find("._w-data").val(g(e[0].upload_data)).triggerNative("change"),e.triggerNative("upload-end")},10)}),n.src=a,d.value=""}),e.triggerNative("upload-start"),void a.readAsDataURL(c)):(d.value="",setTimeout(function(){alert(s)},10),!1))})}}),i("datetimepicker",r.datetimepicker=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){if("function"==typeof Pikadaytime){var i=t[u]("data-datepicker-format")||a.format||"Y-m-d H:i:s",l=(t[u]("data-datepicker-time")||"").toLowerCase(),o=(t[u]("data-datepicker-seconds")||"").toLowerCase(),s={field:t,showTime:l?"1"===l||"true"===l||"on"===l||"yes"===l:!!a.showTime,showSeconds:o?!("0"===o||"false"===o||"off"===o||"no"===o):!1!==a.showSeconds,encoder:e.encoder(i),decoder:e.decoder(i)};a.i18n&&(s.i18n=a.i18n),n.instance=new Pikadaytime(s)}},n.dispose=function(){n.instance&&n.instance.dispose(),n.instance=null}}),r.datetimepicker.encoder=function(e,t){return"function"==typeof DateX?(t=t||r.locale.DateX||DateX.defaultLocale,function(a){return DateX.format(a,e,t)}):function(e,t){return t._o.showTime?e.toString():e.toDateString()}},r.datetimepicker.decoder=function(e,t){if("function"==typeof DateX){t=t||r.locale.DateX||DateX.defaultLocale;var a=DateX.getParser(e,t);return function(e){return!!e&&a(e)}}return function(e){return new Date(Date.parse(e))}},i("colorpicker",r.colorpicker=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){"function"==typeof ColorPicker&&(n.instance=new ColorPicker(t,{changeEvent:t[u]("data-colorpicker-change")||a.changeEvent||"change",input:t[p]("data-colorpicker-input")?d(t[u]("data-colorpicker-input"))[0]:a.input?d(a.input)[0]:null,format:t[u]("data-colorpicker-format")||a.format||"rgba",color:t[u]("data-colorpicker-color")||a.color,opacity:t[u]("data-colorpicker-opacity")||a.opacity}))},n.value=n.color=function(e,t){if(n.instance)return arguments.length?void n.instance.setColor(e,t):n.instance.getColor()},n.dispose=function(){n.instance&&n.instance.dispose(),n.instance=null}}),i("areaselect",r.areaselect=function e(t,a){var n=this;if(!(n instanceof e))return new e(t,a);n.instance=null,n.init=function(){if("function"==typeof AreaSelect){var e=t[p]("data-areaselect-borders")?t[u]("data-areaselect-borders").toLowerCase():null;n.instance=new AreaSelect(t,{className:t[p]("data-areaselect-class")?t[u]("data-areaselect-class"):a.className||null,minWidth:t[p]("data-areaselect-min-width")?t[u]("data-areaselect-min-width"):a.minWidth||null,maxWidth:t[p]("data-areaselect-max-width")?t[u]("data-areaselect-max-width"):a.maxWidth||null,minHeight:t[p]("data-areaselect-min-height")?t[u]("data-areaselect-min-height"):a.minHeight||null,maxHeight:t[p]("data-areaselect-max-height")?t[u]("data-areaselect-max-height"):a.maxHeight||null,ratioXY:t[p]("data-areaselect-ratio-xy")?t[u]("data-areaselect-ratio-xy"):a.ratioXY||null,ratioYX:t[p]("data-areaselect-ratio-yx")?t[u]("data-areaselect-ratio-yx"):a.ratioYX||null,withBorders:e?"1"===e||"yes"===e||"true"===e||"on"===e:a.withBorders,onSelect:function(e,n){a.onSelect&&a.onSelect.call(this,e,n),d(t).triggerNative("areaselect",{selection:n})}})}},n.select=function(e){n.instance&&n.instance.select(e)},n.selection=function(){return n.instance?n.instance.getSelection():null},n.show=function(){n.instance&&n.instance.show()},n.hide=function(){n.instance&&n.instance.hide()},n.dispose=function(){n.instance&&n.instance.dispose(),n.instance=null}}),i("gmap3",r.gmap3=function e(t,a){function n(){i&&google.maps.event.addListenerOnce(i,"idle",function(){google.maps.event.trigger(i,"resize"),i.setCenter(new google.maps.LatLng(l,s)),r&&r.setPosition(new google.maps.LatLng(l,s))})}var i,l,s,r,c,f=this;if(!(f instanceof e))return new e(t,a);i=null,a=d.extend({type:"ROADMAP",markers:null,center:null,address:null,kml:null,responsive:!1},a||{}),f.dispose=function(){c&&d(window).off("resize.gmap3",n),i=null},f.init=function(){if("object"==typeof google&&"object"==typeof google.maps){var e=d(t),m=(t[u]("data-map-address")&&t[u]("data-map-address"),t[p]("data-map-center")?t[u]("data-map-center").split(","):a.center||[0,0]),g=!!t[p]("data-map-center-marker")||!!a.centerMarker,w=y(t[u]("data-map-zoom")||a.zoom||6),h=t[u]("data-map-type")||a.type||"ROADMAP",b=[];if(l=parseFloat(m[0]||0,10),s=parseFloat(m[1]||0,10),g){_={lat:l,lng:s,title:t[u]("title"),info:null};b.push(r=_)}e.children(".marker,.map-marker").each(function(){var e=this,t=e[u]("data-marker-position")?e[u]("data-marker-position").split(","):[0,0],a={address:e[u]("data-marker-address")?e[u]("data-marker-address"):null,lat:parseFloat(t[0]||0,10)||0,lng:parseFloat(t[1]||0,10)||0,title:e[u]("title"),info:e.innerHTML,clickable:!!e[u]("data-marker-clickable"),draggable:!!e[u]("data-marker-draggable"),visible:!!e[u]("data-marker-visible")};b.push(a)}),e.empty(),t[u]("data-map-markers")&&d(t[u]("data-map-markers")).each(function(){var e=this,t=e[u]("data-marker-position")?e[u]("data-marker-position").split(","):[0,0],a={address:e[u]("data-marker-address")?e[u]("data-marker-address"):null,lat:parseFloat(t[0]||0,10)||0,lng:parseFloat(t[1]||0,10)||0,title:e[u]("title"),info:e.innerHTML,clickable:!!e[u]("data-marker-clickable"),draggable:!!e[u]("data-marker-draggable"),visible:!!e[u]("data-marker-visible")};b.push(a)});var v,_,k=a.markers?a.markers.length:0;for(v=0;v<k;v++)_=a.markers[v],b.push(_);for(i=new google.maps.Map(t,{zoom:w,center:new google.maps.LatLng(l,s),mapTypeId:google.maps.MapTypeId[h]}),v=0,k=b.length;v<k;v++)_=b[v],r===_?r=o(i,_.lat,_.lng,_.title||"",_.info,_):o(i,_.lat,_.lng,_.title||"",_.info,_);b=null,(c=!(!t[u]("data-map-responsive")&&!a.responsive))&&d(window).on("resize.gmap3",n)}else setTimeout(function(){f.init()},100)},f.map=function(){return i},f.center=function(e){if(!arguments.length)return[l,s];if(i){l=parseFloat(e[0],10),s=parseFloat(e[1],10);var t=new google.maps.LatLng(l,s);i.setCenter(t),r&&r.setPosition(t)}},f.add_marker=function(e){if(i&&e)return o(i,e.lat,e.lng,e.title||"",e.info||null,e)},f.remove_marker=function(e){e&&e.setMap(null)},f.add_markers=function(e){if(i&&e){for(var t=0;t<e.length;t++){var a=e[t];e[t]=o(i,a.lat,a.lng,a.title||"",a.info,a)}return e}},f.remove_markers=function(e){if(e)for(var t=0;t<e.length;t++)e[t].setMap(null)}}),r._handleDefault=function(e,t,a,n,i,l){l&&"function"==typeof window[l]?(n&&n(t,a),new window[l](t,a),i&&i(t,a)):"function"==typeof d.fn[e]&&(n&&n(t,a),d(t)[e](a),i&&i(t,a))},r._handle.datetimepicker=function(e,t,a,n,i){n&&n(t,a),a.i18n||!r.locale.Pikadaytime&&!r.locale.Pikaday||(a.i18n=r.locale.Pikadaytime||r.locale.Pikaday),d(t).datetimepicker(a),i&&i(t,a)},r._handle.rangeslider=function(e,t,a,n,i){"function"==typeof d.fn.rangeslider&&(n&&n(t,a),d(t).rangeslider({polyfill:!1,orientation:t[u]("data-range-orientation")||a.orientation||"horizontal"}),i&&i(t,a))},r._handle.menu=function(e,t,a,n,i){n&&n(t,a),d(t).find("li").each(function(){var e=d(this);e.children("ul").length&&e.addClass("w-submenu-item")}),i&&i(t,a)},r._handle.dropdown=function(e,t,a,n,i){var l=d(t);if(l.is("select")&&!l.parent().hasClass("w-dropdown")){n&&n(t,a),l.hasClass("w-widget")&&l.removeClass("w-widget"),l.hasClass("w-select")&&l.removeClass("w-select");var o="w-widget w-dropdown "+(t.className||""),s=l.attr("style")||"";l.attr("class","w-dropdown-select").attr("style","").wrap('<span class="'+o+'" style="'+s+'"></span>'),i&&i(t,a)}},r._handle.select2=function(e,t,a,n,i){if("function"==typeof d.fn.select2){n&&n(t,a);var l=d(t);l.select2(a),t[p]("w-tooltip")?l.prev(".select2-container").attr("w-tooltip",t[u]("w-tooltip")):t[p]("data-tooltip")?l.prev(".select2-container").attr("data-tooltip",t[u]("data-tooltip")):t[p]("title")&&l.prev(".select2-container").attr("title",t[u]("title")),i&&i(t,a)}},r._handle.datatable=function(e,t,a,n,i){if("function"==typeof d.fn.dataTable){n&&n(t,a);var l=d(t);!a.language&&r.locale.DataTables&&(a.language=r.locale.DataTables),l.dataTable(a);var o=l.closest(".dataTables_wrapper");if(t[p]("data-table-buttons")&&(new d.fn.dataTable.Buttons(l.DataTable(),{buttons:t[u]("data-table-buttons").split(",")}),o.find(".w-table-controls").eq(0).append(l.DataTable().buttons().container())),t[p]("data-table-controls"))o.find(".w-table-controls").eq(0).append(d(t[u]("data-table-controls")));else if(a.controls)if(a.controls.concat){var s,c,f=o.find(".w-table-controls").eq(0);for(s=0,c=a.controls.length;s<c;s++)f.append(d(a.controls[s]))}else o.find(".w-table-controls").eq(0).append(d(a.controls));o.addClass("w-table-wrapper");o.find(".dataTables_length select").htmlwidget("dropdown");var m=o.find(".dataTables_filter input").addClass("w-widget w-text"),g=m.closest("label").text();g&&m.attr("placeholder",g).attr("title",g),i&&i(t,a)}},r._handle.tinymce=function(e,t,a,n,i){if("undefined"!=typeof tinymce){n&&n(t,a);var l=null,o=null;r.locale.tinymce&&("object"!=typeof r.locale.tinymce.lang||a.i18n?"string"==typeof r.locale.tinymce.lang&&(l=r.locale.tinymce.lang):a.i18n=r.locale.tinymce.lang,null!=r.locale.tinymce.uri&&(o=r.locale.tinymce.uri)),a.i18n&&(l="custom_locale",o=null,tinymce.util.I18n.add("custom_locale",a.i18n));var s=parseInt(t[p]("data-tinymce-delayedinit")?t[u]("data-tinymce-delayedinit"):a.delayedInit||0,10),d=t[p]("data-tinymce-plugins")?t[u]("data-tinymce-plugins").split(","):a.plugins||["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","paste textcolor colorpicker textpattern imagetools placeholderalt"],f=t[p]("data-tinymce-toolbar")?t[u]("data-tinymce-toolbar").split(","):a.toolbar||["undo redo | forecolor backcolor | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image code preview"],g=t[p]("data-tinymce-menubar")?t[u]("data-tinymce-menubar"):a.menubar||"file edit insert view format table tools";t[p]("data-tinymce-plugins-extra")?d=d.concat(t[u]("data-tinymce-plugins-extra").split(",")):a.plugins_extra&&(d=d.concat(a.plugins_extra)),t[p]("data-tinymce-toolbar-extra")?f=f.concat(t[u]("data-tinymce-toolbar-extra").split(",")):a.toolbar_extra&&(f=f.concat(a.toolbar_extra));var w=null;t[p]("data-tinymce-external-plugins")?w=m(t[u]("data-tinymce-external-plugins")):"object"==typeof a.external_plugins&&(w=a.external_plugins);var h={selector:"#"+t.id,theme:t[p]("data-tinymce-theme")?t[u]("data-tinymce-theme"):a.theme||"modern",skin:t[p]("data-tinymce-skin")?t[u]("data-tinymce-skin"):a.skin||"lightgray",directionality:t[p]("data-tinymce-dir")?t[u]("data-tinymce-dir"):a.directionality||"ltr",height:parseInt(t[p]("data-tinymce-height")?t[u]("data-tinymce-height"):a.height||500,10),plugins:d,toolbar:f,menubar:g,placeholder:t[p]("placeholder")?t[u]("placeholder"):a.placeholder||"",automatic_uploads:null==a.automatic_uploads||a.automatic_uploads,image_advtab:null==a.image_advtab||a.image_advtab,paste_data_images:null==a.paste_data_images||a.paste_data_images,browser_spellcheck:null==a.browser_spellcheck||a.browser_spellcheck,templates:null!=a.templates?a.templates:[],body_class:t[p]("data-tinymce-body-class")?t[u]("data-tinymce-body-class"):a.body_class||null,content_css:t[p]("data-tinymce-content-css")?t[u]("data-tinymce-content-css"):a.content_css||null,content_style:t[p]("data-tinymce-content-style")?t[u]("data-tinymce-content-style"):a.content_style||null};if(t[p]("data-tinymce-lang")?h.language=t[u]("data-tinymce-lang"):a.language?h.language=a.language:l&&(h.language=l),t[p]("data-tinymce-languri")?h.language_url=t[u]("data-tinymce-languri"):a.language_url?h.language_url=a.language_url:o&&(h.language_url=o),"object"==typeof a.options_extra)for(var b in a.options_extra)h[b]=a.options_extra[b];if("object"==typeof w)for(var y in w)c.call(w,y)&&tinymce.PluginManager.load(y,w[y]);var v=t[p]("data-tinymce-autosave")?t[u]("data-tinymce-autosave").toLowerCase():!!a.autosave;!0===v||"1"===v||"on"===v||"yes"===v||"true"===v?h.setup=function(e){e.on("init",function(){i&&i(t,a)}),e.on("change",function(){e.save(),r.dispatch("change",t)})}:i&&(h.setup=function(e){e.on("init",function(){i(t,a)})});var _=tinymce.get(t.id);_&&_.remove(),s>0?setTimeout(function(){tinymce.init(h)},s):tinymce.init(h)}},r._handle.syntax=function(e,t,a,n,i){if(d(t).hasClass("w-ace-editor")){if("undefined"==typeof ace)return;n&&n(t,a);var l=ace.edit(t[u]("data-ace-editor")),o=l.getSession();(t[p]("data-ace-theme")||a.theme)&&l.setTheme("ace/theme/"+(t[p]("data-ace-theme")?t[u]("data-ace-theme"):a.theme)),o.setMode("ace/mode/"+(t[p]("data-ace-mode")?t[u]("data-ace-mode"):a.mode||"html")),o.setTabSize(parseInt(t[p]("data-ace-indent")?t[u]("data-ace-indent"):a.indentUnit||4,10)),o.setUseWrapMode(null!=a.lineWrapping&&!!a.lineWrapping),l.setReadOnly(!!t.readOnly),l.setShowFoldWidgets(null==a.foldGutter||!!a.foldGutter),l.setValue(t.value,-1),i&&i(t,a)}else{if("function"!=typeof CodeMirror)return;n&&n(t,a),CodeMirror.fromTextArea(t,{mode:t[p]("data-cm-mode")?t[u]("data-cm-mode"):a.mode||"text/html",theme:t[p]("data-cm-theme")?t[u]("data-cm-theme"):a.theme||"default",readOnly:!!t.readOnly,lineWrapping:null!=a.lineWrapping&&a.lineWrapping,lineNumbers:null==a.lineNumbers||a.lineNumbers,indentUnit:parseInt(t[p]("data-cm-indent")?t[u]("data-cm-indent"):a.indentUnit||4,10),indentWithTabs:null!=a.indentWithTabs&&a.indentWithTabs,lint:null!=a.lint&&a.lint,foldGutter:null==a.foldGutter||a.foldGutter,gutters:null!=a.gutters?a.gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]}),i&&i(t,a)}},r._handle.c3=function(e,t,a,n,i){if("undefined"!=typeof c3){n&&n(t,a);c3.generate(a);i&&i(t,a)}},r._handle.vextab=function(e,t,a,n,i){if("undefined"!=typeof Vex&&void 0!==Vex.Flow){n&&n(t,a);new Vex.Flow.TabDiv(t);i&&i(t,a)}},d.fn.htmlwidget=function(e,t){var a;if(t=t||{},c.call(r.widget,e)&&"function"==typeof r.widget[e])a=r.widget[e],this.each(function(){var n,i=this,l=null,o=null;(n=i[p]("w-opts")&&"object"==typeof window[i[u]("w-opts")]?window[i[u]("w-opts")]:t)["w-pre-init"]&&"function"==typeof window[n["w-pre-init"]]&&(l=window[n["w-pre-init"]]),n["w-post-init"]&&"function"==typeof window[n["w-post-init"]]&&(o=window[n["w-post-init"]]),a(e,i,n,l,o)});else{var n=null;switch(e){case"dnd-upload":case"dnd_upload":case"dnd-uploadable":e="dnd_uploadable";break;case"upload":e="uploadable";break;case"rearrangeable":e="sortable";break;case"templateable":e="template";break;case"date":case"datetime":case"datepicker":e="datetimepicker";break;case"color":case"colorselector":e="colorpicker";break;case"areaselectable":e="areaselect";break;case"map":case"gmap":case"gmap3":e="gmap3";break;case"autocomplete":case"autosuggest":case"suggest":e="suggest";break;case"range":e="rangeslider";break;case"select":e="select2";break;case"table":e="datatable";break;case"tageditor":case"tag-editor":e="tagEditor";break;case"wysiwyg-editor":e="tinymce";break;case"syntax-editor":e="syntax";break;case"graph":case"chart":e="c3";break;case"tab":case"tablature":case"vextab":e="vextab";break;case"packery":n="Packery";break;case"masonry":n="Masonry";break;case"isotope":n="Isotope"}a=c.call(r._handle,e)?r._handle[e]:r._handleDefault,this.each(function(){var i,l=this,o=null,s=null;"object"==typeof(i=l[p]("w-opts")&&"object"==typeof window[l[u]("w-opts")]?window[l[u]("w-opts")]:t)["options_"+e]&&(i=i["options_"+e]),i["w-pre-init"]&&"function"==typeof window[i["w-pre-init"]]&&(o=window[i["w-pre-init"]]),i["w-post-init"]&&"function"==typeof window[i["w-post-init"]]&&(s=window[i["w-post-init"]]),a(e,l,i,o,s,n)})}return this},r.init=function(e,t,a){var n=d(e);!0===a&&(n.find("input[type=range].w-rangeslider").htmlwidget("range"),n.find(".w-dnd-upload").htmlwidget("dnd-upload"),n.find(".w-upload").htmlwidget("upload"),n.find(".w-suggest").htmlwidget("suggest"),n.find(".w-timer").htmlwidget("timer"),n.find(".w-date").htmlwidget("datetimepicker"),n.find(".w-color,.w-colorselector").htmlwidget("colorpicker"),n.find(".w-map").htmlwidget("map"),n.find(".w-select2").htmlwidget("select2"),n.find(".w-datatable").htmlwidget("datatable"),n.find(".w-syntax-editor.w-codemirror-editor,.w-syntax-editor.w-ace-editor").htmlwidget("syntax-editor"),n.find(".w-wysiwyg-editor").htmlwidget("wysiwyg-editor"),n.find(".w-chart").htmlwidget("chart")),!1!==t&&(n.is("input[type=range]")?n.htmlwidget("range"):n.hasClass("w-dnd-upload")?n.htmlwidget("dnd-upload"):n.hasClass("w-upload")?n.htmlwidget("upload"):n.hasClass("w-suggest")?n.htmlwidget("suggest"):n.hasClass("w-timer")?n.htmlwidget("timer"):n.hasClass("w-date")?n.htmlwidget("datetimepicker"):n.hasClass("w-color")||n.hasClass("w-colorselector")?n.htmlwidget("colorpicker"):n.hasClass("w-map")?n.htmlwidget("map"):n.hasClass("w-select2")?n.htmlwidget("select2"):n.hasClass("w-datatable")?n.htmlwidget("datatable"):n.hasClass("w-syntax-editor w-codemirror-editor")||n.hasClass("w-syntax-editor w-ace-editor")?n.htmlwidget("syntax-editor"):n.hasClass("w-wysiwyg-editor")?n.htmlwidget("wysiwyg-editor"):n.hasClass("w-chart")&&n.htmlwidget("chart"))},r.initialisable=function(e,t){t=t||window;var a=e[u]("w-init")||"",n=a.toLowerCase();"1"!==n&&"true"!==n&&"on"!==n&&"yes"!==n||(a="__htmlwidget_init__"),a&&"function"==typeof t[a]&&(e.removeAttribute("w-init"),t[a](e))},r.widgetize=function(e){var t=d(e);(t.hasClass("w-dropdown-menu")||t.hasClass("w-vertical-menu"))&&t.htmlwidget("menu"),t.hasClass("w-selectable")&&t.htmlwidget("selectable"),t.hasClass("w-removable")&&t.htmlwidget("removable"),t.hasClass("w-delayable")&&t.htmlwidget("delayable"),t.hasClass("w-disabable")&&t.htmlwidget("disabable"),t.hasClass("w-draggable")&&t.htmlwidget("draggable"),(t.hasClass("w-resizable")||t.hasClass("w-resisable"))&&t.htmlwidget("resizable"),(t.hasClass("w-sortable")||t.hasClass("w-rearrangeable"))&&t.htmlwidget("sortable"),t.hasClass("w-templateable")&&t.htmlwidget("template"),t.hasClass("w-areaselectable")&&t.htmlwidget("areaselect"),t.hasClass("w-vextab")&&t.htmlwidget("vextab")},r.tooltip=function(e){var t=d(e),a="";t.hasClass("tooltipstered")?t.tooltipster("content",e[p]("w-tooltip")?e[u]("w-tooltip"):e[p]("data-tooltip")?'<i class="fa fa-info-circle"></i>&nbsp;&nbsp;'+e[u]("data-tooltip"):e[p]("title")?'<i class="fa fa-info-circle"></i>&nbsp;&nbsp;'+e[u]("title"):"").tooltipster("show"):(a=e[p]("w-tooltip")?e[u]("w-tooltip"):e[p]("data-tooltip")?e[u]("data-tooltip"):e[p]("title")?e[u]("title"):"").length?t.tooltipster({onlyOne:!0,autoClose:!0,contentAsHTML:!0,content:'<i class="fa fa-info-circle"></i>&nbsp;&nbsp;'+a,position:t.hasClass("tooltip-bottom")?"bottom":t.hasClass("tooltip-right")?"right":t.hasClass("tooltip-left")?"left":"top"}).tooltipster("show"):e[p]("title")&&e.removeAttribute("title")},window.__htmlwidget_init__=function(e){r.init(e)},r.initialise=function(){"undefined"!=typeof SelectorListener&&SelectorListener.jquery(d),"undefined"!=typeof ModelView&&ModelView.jquery(d);var e=d(document.body),t=function(){r.initialisable(this)},a=function(){r.widgetize(this)};e.find("[w-init]").each(t),e.find(".w-dropdown-menu,.w-vertical-menu,.w-templateable,.w-rearrangeable,.w-resizeable,.w-resiseable,.w-selectable,.w-removable,.w-delayable,.w-disabable,.w-sortable,.w-draggable,.w-areaselectable").each(a),"function"==typeof d.fn.onSelector&&e.onSelector("[w-init]::added",t).onSelector(".w-dropdown-menu::added,.w-vertical-menu::added,.w-templateable::added,.w-rearrangeable::added,.w-resizeable::added,.w-resiseable::added,.w-selectable::added,.w-removable::added,.w-delayable::added,.w-disabable::added,.w-sortable::added,.w-draggable::added,.w-areaselectable::added,.w-vextab::added",a).onSelector(":class-added(.w-dropdown-menu),:class-added(.w-vertical-menu),:class-added(.w-templateable),:class-added(.w-rearrangeable),:class-added(.w-resizeable),:class-added(.w-resiseable),:class-added(.w-selectable),:class-added(.w-removable),:class-added(.w-delayable),:class-added(.w-disabable),:class-added(.w-sortable),:class-added(.w-draggable),:class-added(.w-areaselectable),:class-added(.w-vextab)",a),"function"==typeof d.fn.tooltipster&&e.off("mouseenter.htmlwidget.tooltip touchstart.htmlwidget.tooltip").on("mouseenter.htmlwidget.tooltip touchstart.htmlwidget.tooltip","[w-tooltip],[data-tooltip],[title]",function(){r.tooltip(this)}),"function"==typeof d.fn.popr2&&e.popr2({selector:".w-popr",attribute:"data-popr",activate:"click"}),e.off("change.htmlwidget.file").on("change.htmlwidget.file","input[type=file].w-file-input",function(){this.nextSibling.value=this.value}).off("click.htmlwidget.file").on("click.htmlwidget.file","input[type=file].w-file-input+input.w-file",function(){return d(this.previousSibling).trigger("click"),!1}).off("click.htmlwidget.open").on("click.htmlwidget.open","[href].w-open-window",function(e){e.preventDefault();var t=this,a=t.href,n=t[p]("data-window-options")?t[u]("data-window-options"):"resizable=yes,width=400,height=400";return setTimeout(function(){window.open(a,t.id||"new_win",n)},10),!1})},d(r.initialise),d.htmlwidget=r});